<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°æåšå®¢</title>
  
  
  <link href="http://xiaoliblog.cn/atom.xml" rel="self"/>
  
  <link href="http://xiaoliblog.cn/"/>
  <updated>2021-06-23T13:37:03.906Z</updated>
  <id>http://xiaoliblog.cn/</id>
  
  <author>
    <name>å°æåšå®¢</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBootğŸƒé›†æˆSpringSecurity</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot13.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot13.html</id>
    <published>2021-06-23T12:51:43.751Z</published>
    <updated>2021-06-23T13:37:03.906Z</updated>
    
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒSpringDataæ•°æ®åº“æ“ä½œ</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot12.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot12.html</id>
    <published>2021-06-23T08:55:59.135Z</published>
    <updated>2021-06-23T13:36:24.535Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringData"><a href="#SpringData" class="headerlink" title="SpringData"></a>SpringData</h1><ul><li>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯ SQL(å…³ç³»å‹æ•°æ®åº“) è¿˜æ˜¯ NOSQL(éå…³ç³»å‹æ•°æ®åº“)ï¼ŒSpring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</li><li>Spring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®åº“ï¼ŒSpring Data ä¹Ÿæ˜¯ Spring ä¸­ä¸ Spring Bootã€Spring Cloud ç­‰é½åçš„çŸ¥åé¡¹ç›®ã€‚</li><li>Sping Data å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-data">https://spring.io/projects/spring-data</a></li><li>æ•°æ®åº“ç›¸å…³çš„å¯åŠ¨å™¨ ï¼šå¯ä»¥å‚è€ƒ<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">å®˜æ–¹æ–‡æ¡£</a></li></ul><h1 id="æ•´åˆJDBC"><a href="#æ•´åˆJDBC" class="headerlink" title="æ•´åˆJDBC"></a>æ•´åˆJDBC</h1><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ul><li>æ–°å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•ï¼Œéœ€è¦å¼•å…¥ç›¸åº”çš„æ¨¡å—</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@98a700108583574ce090a7d57031f0ce38775620/2021/06/23/a0c39e4ae1e773b9d9b4da80f82f1501.png"></p><ul><li>é¡¹ç›®å»ºå¥½ä¹‹åï¼Œå‘ç°è‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥äº†å¦‚ä¸‹çš„å¯åŠ¨å™¨ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•æ•°æ®æº"><a href="#æµ‹è¯•æ•°æ®æº" class="headerlink" title="æµ‹è¯•æ•°æ®æº"></a>æµ‹è¯•æ•°æ®æº</h2><ul><li>æ–°å»º<code>application.yml</code>é…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“ï¼›</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">data-username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">data-password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><ul><li>é…ç½®å®Œè¿™ä¸€äº›ä¸œè¥¿åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å»ä½¿ç”¨äº†ï¼Œå› ä¸ºSpringBootå·²ç»é»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†è‡ªåŠ¨é…ç½®ï¼›å»æµ‹è¯•ç±»æµ‹è¯•ä¸€ä¸‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootDataJdbcApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DIæ³¨å…¥æ•°æ®æº</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//çœ‹ä¸€ä¸‹é»˜è®¤æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        <span class="comment">//è·å¾—è¿æ¥</span></span><br><span class="line">        Connection connection =   dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»“æœï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–é»˜è®¤ç»™æˆ‘ä»¬é…ç½®çš„æ•°æ®æºä¸º ï¼š<code>class com.zaxxer.hikari.HikariDataSource</code>ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰‹åŠ¨é…ç½®</li><li>æˆ‘ä»¬æ¥å…¨å±€æœç´¢ä¸€ä¸‹ï¼Œæ‰¾åˆ°æ•°æ®æºçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½åœ¨ ï¼šDataSourceAutoConfigurationæ–‡ä»¶ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(</span></span><br><span class="line"><span class="meta">    &#123;Hikari.class, Tomcat.class, Dbcp2.class, Generic.class, DataSourceJmxConfiguration.class&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">PooledDataSourceConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">PooledDataSourceConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œå¯¼å…¥çš„ç±»éƒ½åœ¨ DataSourceConfiguration é…ç½®ç±»ä¸‹ï¼Œå¯ä»¥çœ‹å‡º Spring Boot 2.2.5 é»˜è®¤ä½¿ç”¨HikariDataSource æ•°æ®æºï¼Œè€Œä»¥å‰ç‰ˆæœ¬ï¼Œå¦‚ Spring Boot 1.5 é»˜è®¤ä½¿ç”¨ org.apache.tomcat.jdbc.pool.DataSource ä½œä¸ºæ•°æ®æº</li><li><strong><code>HikariDataSource</code> å·ç§° Java WEB å½“å‰é€Ÿåº¦æœ€å¿«çš„æ•°æ®æºï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ C3P0 ã€DBCPã€Tomcat jdbc ç­‰è¿æ¥æ± æ›´åŠ ä¼˜ç§€ï¼›</strong></li><li><strong>å¯ä»¥ä½¿ç”¨ <code>spring.datasource.type</code> æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸ºè¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šå</strong></li></ul><h2 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h2><ul><li>æœ‰äº†æ•°æ®æº<code>com.zaxxer.hikari.HikariDataSource</code>ï¼Œç„¶åå¯ä»¥æ‹¿åˆ°æ•°æ®åº“è¿æ¥<code>java.sql.Connection</code>ï¼Œæœ‰äº†è¿æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„ JDBC è¯­å¥æ¥æ“ä½œæ•°æ®åº“ï¼›</li><li>å³ä½¿ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¬¬æ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œå¦‚ MyBatisç­‰ï¼ŒSpring æœ¬èº«ä¹Ÿå¯¹åŸç”Ÿçš„JDBC åšäº†è½»é‡çº§çš„å°è£…ï¼Œå³<code>JdbcTemplate</code></li><li>æ•°æ®åº“æ“ä½œçš„æ‰€æœ‰ CRUD æ–¹æ³•éƒ½åœ¨ JdbcTemplate ä¸­</li><li>Spring Boot ä¸ä»…æä¾›äº†é»˜è®¤çš„æ•°æ®æºï¼ŒåŒæ—¶é»˜è®¤å·²ç»é…ç½®å¥½äº† JdbcTemplate æ”¾åœ¨äº†å®¹å™¨ä¸­ï¼Œç¨‹åºå‘˜åªéœ€è‡ªå·±æ³¨å…¥å³å¯ä½¿ç”¨</li><li>JdbcTemplate çš„è‡ªåŠ¨é…ç½®æ˜¯ä¾èµ– org.springframework.boot.autoconfigure.jdbc åŒ…ä¸‹çš„ JdbcTemplateConfiguration ç±»</li><li>JdbcTemplateä¸»è¦æä¾›ä»¥ä¸‹å‡ ç±»æ–¹æ³•ï¼š<ul><li><code>execute</code>æ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ï¼›</li><li><code>update</code>æ–¹æ³•åŠ<code>batchUpdate</code>æ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ï¼›</li><li><code>query</code>æ–¹æ³•åŠ<code>queryForXXX</code>æ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ï¼›</li><li><code>call</code>æ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥</li></ul></li></ul><h2 id="æµ‹è¯•æ¡ˆä¾‹"><a href="#æµ‹è¯•æ¡ˆä¾‹" class="headerlink" title="æµ‹è¯•æ¡ˆä¾‹"></a>æµ‹è¯•æ¡ˆä¾‹</h2><ul><li>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Spring Boot é»˜è®¤æä¾›äº†æ•°æ®æºï¼Œé»˜è®¤æä¾›äº† org.springframework.jdbc.core.JdbcTemplate</span></span><br><span class="line"><span class="comment">     * JdbcTemplate ä¸­ä¼šè‡ªå·±æ³¨å…¥æ•°æ®æºï¼Œç”¨äºç®€åŒ– JDBCæ“ä½œ</span></span><br><span class="line"><span class="comment">     * è¿˜èƒ½é¿å…ä¸€äº›å¸¸è§çš„é”™è¯¯,ä½¿ç”¨èµ·æ¥ä¹Ÿä¸ç”¨å†è‡ªå·±æ¥å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢userè¡¨ä¸­æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">//List ä¸­çš„1ä¸ª Map å¯¹åº”æ•°æ®åº“çš„ 1è¡Œæ•°æ®</span></span><br><span class="line">    <span class="comment">//Map ä¸­çš„ key å¯¹åº”æ•°æ®åº“çš„å­—æ®µåï¼Œvalue å¯¹åº”æ•°æ®åº“çš„å­—æ®µå€¼</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/userlist&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; userList()&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);</span><br><span class="line">        <span class="keyword">return</span> maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–°å¢ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into user(username, password)&quot;</span> +</span><br><span class="line">                <span class="string">&quot; values (&#x27;æå››&#x27;,&#x27;123456&#x27;)&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;addOk&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/update/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="comment">//æ’å…¥è¯­å¥</span></span><br><span class="line">        String sql = <span class="string">&quot;update user set username=?,password=? where id=&quot;</span>+id;</span><br><span class="line">        <span class="comment">//æ•°æ®</span></span><br><span class="line">        Object[] objects = <span class="keyword">new</span> Object[<span class="number">2</span>];</span><br><span class="line">        objects[<span class="number">0</span>] = <span class="string">&quot;æç™½&quot;</span>;</span><br><span class="line">        objects[<span class="number">1</span>] = <span class="string">&quot;24736743123&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,objects);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;updateOk&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="comment">//æ’å…¥è¯­å¥</span></span><br><span class="line">        String sql = <span class="string">&quot;delete from user where id=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,id);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;deleteOk&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ•´åˆDruid"><a href="#æ•´åˆDruid" class="headerlink" title="æ•´åˆDruid"></a>æ•´åˆDruid</h1><h2 id="Druidç®€ä»‹"><a href="#Druidç®€ä»‹" class="headerlink" title="Druidç®€ä»‹"></a>Druidç®€ä»‹</h2><ul><li>Javaç¨‹åºå¾ˆå¤§ä¸€éƒ¨åˆ†è¦æ“ä½œæ•°æ®åº“ï¼Œä¸ºäº†æé«˜æ€§èƒ½æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œåˆä¸å¾—ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± </li><li><code>Druid</code> æ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œç»“åˆäº† C3P0ã€DBCP ç­‰ DB æ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ã€‚</li><li>Druid å¯ä»¥å¾ˆå¥½çš„ç›‘æ§ DB æ± è¿æ¥å’Œ SQL çš„æ‰§è¡Œæƒ…å†µï¼Œå¤©ç”Ÿå°±æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„ DB è¿æ¥æ± ã€‚</li><li>Druidå·²ç»åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²äº†è¶…è¿‡600ä¸ªåº”ç”¨ï¼Œç»è¿‡ä¸€å¹´å¤šç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡éƒ¨ç½²çš„ä¸¥è‹›è€ƒéªŒã€‚</li><li>Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ Hikari æ•°æ®æºï¼Œå¯ä»¥è¯´ Hikari ä¸ Driud éƒ½æ˜¯å½“å‰ Java Web ä¸Šæœ€ä¼˜ç§€çš„æ•°æ®æºï¼Œæˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç» Spring Boot å¦‚ä½•é›†æˆ Druid æ•°æ®æºï¼Œå¦‚ä½•å®ç°æ•°æ®åº“ç›‘æ§ã€‚</li><li>Githubåœ°å€ï¼š<a href="https://github.com/alibaba/druid/">https://github.com/alibaba/druid/</a></li><li>com.alibaba.druid.pool.DruidDataSource åŸºæœ¬é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f20c7f0ed06a42be34e782d8beb588fdde1c82d9/2021/06/23/2903cdb121901eb466eb0a63c59e13ee.png"><br><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0602c6a19196cd304930b2021b3f60e07d80dbad/2021/06/23/3a06da6a83a1f3da4029c9901a8fc7d8.png"><br><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@2f062359a6c899d23fa74c53b8b6ef4ac7e2a21a/2021/06/23/73e4d85c5258acc82f28e701b504d0a9.png"></p><h2 id="é…ç½®æ•°æ®æº"><a href="#é…ç½®æ•°æ®æº" class="headerlink" title="é…ç½®æ•°æ®æº"></a>é…ç½®æ•°æ®æº</h2><ul><li>æ·»åŠ ä¸Š Druid æ•°æ®æºä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ‡æ¢æ•°æ®æºï¼›ä¹‹å‰å·²ç»è¯´è¿‡ Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ com.zaxxer.hikari.HikariDataSource æ•°æ®æºï¼Œä½†å¯ä»¥ é€šè¿‡ <code>spring.datasource.type</code> æŒ‡å®šæ•°æ®æº</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">data-username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">data-password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span> <span class="comment"># è‡ªå®šä¹‰æ•°æ®æº</span></span><br></pre></td></tr></table></figure><ul><li>æ•°æ®æºåˆ‡æ¢ä¹‹åï¼Œåœ¨æµ‹è¯•ç±»ä¸­æ³¨å…¥ <code>DataSource</code>ï¼Œç„¶åè·å–åˆ°å®ƒï¼Œè¾“å‡ºä¸€çœ‹ä¾¿çŸ¥æ˜¯å¦æˆåŠŸåˆ‡æ¢ï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@bf4be9164cd45f86b3010b1c4b106629c2c14c2d/2021/06/23/d6c1014c938693808dec79a970892009.png"></p><ul><li>åˆ‡æ¢æˆåŠŸï¼æ—¢ç„¶åˆ‡æ¢æˆåŠŸï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•° ç­‰è®¾ç½®é¡¹ï¼›å¯ä»¥æŸ¥çœ‹æºç </li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line">    <span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line">    <span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line">    <span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥Log4j çš„ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç°åœ¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¸º <code>DruidDataSource</code> ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œå†æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè€Œä¸å†ä½¿ç”¨ Spring Boot çš„è‡ªåŠ¨ç”Ÿæˆäº†ï¼›æˆ‘ä»¬éœ€è¦ è‡ªå·±æ·»åŠ  <code>DruidDataSource</code> ç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç»‘å®šå±æ€§ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       å°†è‡ªå®šä¹‰çš„ Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®© Spring Boot è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">       ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ druid æ•°æ®æºå±æ€§åˆ° com.alibaba.druid.pool.DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">       @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)ï¼šä½œç”¨å°±æ˜¯å°† å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment">       å‰ç¼€ä¸º spring.datasourceçš„å±æ€§å€¼æ³¨å…¥åˆ° com.alibaba.druid.pool.DruidDataSource çš„åŒåå‚æ•°ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼›çœ‹æ˜¯å¦æˆåŠŸï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootDataJdbcApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DIæ³¨å…¥æ•°æ®æº</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//çœ‹ä¸€ä¸‹é»˜è®¤æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        <span class="comment">//è·å¾—è¿æ¥</span></span><br><span class="line">        Connection connection =   dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line"></span><br><span class="line">        DruidDataSource druidDataSource = (DruidDataSource) dataSource;</span><br><span class="line">        System.out.println(<span class="string">&quot;druidDataSource æ•°æ®æºæœ€å¤§è¿æ¥æ•°ï¼š&quot;</span> + druidDataSource.getMaxActive());</span><br><span class="line">        System.out.println(<span class="string">&quot;druidDataSource æ•°æ®æºåˆå§‹åŒ–è¿æ¥æ•°ï¼š&quot;</span> + druidDataSource.getInitialSize());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@b95e74d7df7bf803a6d4e95281e67e160248149f/2021/06/23/092ad2c104c166f4f13fd3ded8105cc0.png"></p><h2 id="é…ç½®Druidæ•°æ®æºç›‘æ§"><a href="#é…ç½®Druidæ•°æ®æºç›‘æ§" class="headerlink" title="é…ç½®Druidæ•°æ®æºç›‘æ§"></a>é…ç½®Druidæ•°æ®æºç›‘æ§</h2><ul><li>Druid æ•°æ®æºå…·æœ‰ç›‘æ§çš„åŠŸèƒ½ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª web ç•Œé¢æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ï¼Œç±»ä¼¼å®‰è£… è·¯ç”±å™¨ æ—¶ï¼Œäººå®¶ä¹Ÿæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ web é¡µé¢ã€‚</li><li>æ‰€ä»¥ç¬¬ä¸€æ­¥éœ€è¦è®¾ç½® Druid çš„åå°ç®¡ç†é¡µé¢ï¼Œæ¯”å¦‚ ç™»å½•è´¦å·ã€å¯†ç  ç­‰ï¼›é…ç½®åå°ç®¡ç†ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½® Druid ç›‘æ§ç®¡ç†åå°çš„Servletï¼›</span></span><br><span class="line">    <span class="comment">//å†…ç½® Servlet å®¹å™¨æ—¶æ²¡æœ‰web.xmlæ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ Spring Boot çš„æ³¨å†Œ Servlet æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">&quot;/druid/*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿™äº›å‚æ•°å¯ä»¥åœ¨ com.alibaba.druid.support.http.StatViewServlet</span></span><br><span class="line">        <span class="comment">// çš„çˆ¶ç±» com.alibaba.druid.support.http.ResourceServlet ä¸­æ‰¾åˆ°</span></span><br><span class="line">        Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        initParams.put(<span class="string">&quot;loginUsername&quot;</span>, <span class="string">&quot;admin&quot;</span>); <span class="comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•è´¦å·</span></span><br><span class="line">        initParams.put(<span class="string">&quot;loginPassword&quot;</span>, <span class="string">&quot;123456&quot;</span>); <span class="comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•å¯†ç </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åå°å…è®¸è°å¯ä»¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;allow&quot;, &quot;localhost&quot;)ï¼šè¡¨ç¤ºåªæœ‰æœ¬æœºå¯ä»¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;allow&quot;, &quot;&quot;)ï¼šä¸ºç©ºæˆ–è€…ä¸ºnullæ—¶ï¼Œè¡¨ç¤ºå…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        initParams.put(<span class="string">&quot;allow&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//denyï¼šDruid åå°æ‹’ç»è°è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;kuangshen&quot;, &quot;192.168.1.20&quot;);è¡¨ç¤ºç¦æ­¢æ­¤ipè®¿é—®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é…ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è®¿é—® ï¼š<code>http://localhost:8080/druid/login.html</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@ba7e2d9eeaf1deb129ef7715556eeda9e34825c6/2021/06/23/6e0adb78f5261fe91e096c3dbd53cefb.png"></p><ul><li>è¿›å…¥ä¹‹å</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@daaecd55704d1a24162aa602297e54b9d76df9a5/2021/06/23/5bae0d4b62ced593da31c9137565dfc0.png"></p><ul><li>é…ç½®å®Œæ•´çš„æ•°æ®æºåï¼Œæ‰§è¡Œä¸€æ¡SQLè¯­å¥ä¼šå‘ç°å…¶ç›‘æ§äº†SQLæ“ä½œ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@72cc90ed216527e18ec27c96bbf6528081ce2fef/2021/06/23/cce30f91274a84d319e2f4f6e48118e7.png"></p><h2 id="filter-è¿‡æ»¤å™¨"><a href="#filter-è¿‡æ»¤å™¨" class="headerlink" title="filter è¿‡æ»¤å™¨"></a>filter è¿‡æ»¤å™¨</h2><ul><li>é…ç½® Druid web ç›‘æ§ filter è¿‡æ»¤å™¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é…ç½® Druid ç›‘æ§ ä¹‹  web ç›‘æ§çš„ filter</span></span><br><span class="line"><span class="comment">//WebStatFilterï¼šç”¨äºé…ç½®Webå’ŒDruidæ•°æ®æºä¹‹é—´çš„ç®¡ç†å…³è”ç›‘æ§ç»Ÿè®¡</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">   bean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//exclusionsï¼šè®¾ç½®å“ªäº›è¯·æ±‚è¿›è¡Œè¿‡æ»¤æ’é™¤æ‰ï¼Œä»è€Œä¸è¿›è¡Œç»Ÿè®¡</span></span><br><span class="line">   Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">   initParams.put(<span class="string">&quot;exclusions&quot;</span>, <span class="string">&quot;*.js,*.css,/druid/*,/jdbc/*&quot;</span>);</span><br><span class="line">   bean.setInitParameters(initParams);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//&quot;/*&quot; è¡¨ç¤ºè¿‡æ»¤æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">   bean.setUrlPatterns(Arrays.asList(<span class="string">&quot;/*&quot;</span>));</span><br><span class="line">   <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ•´åˆMyBatis"><a href="#æ•´åˆMyBatis" class="headerlink" title="æ•´åˆMyBatis"></a>æ•´åˆMyBatis</h1><ul><li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></li><li>Mavenä»“åº“åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1">https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1</a></li></ul><h2 id="ç›¸å…³ä¾èµ–"><a href="#ç›¸å…³ä¾èµ–" class="headerlink" title="ç›¸å…³ä¾èµ–"></a>ç›¸å…³ä¾èµ–</h2><ul><li>å¯¼å…¥ MyBatis æ‰€éœ€è¦çš„ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h2><ul><li>é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸å˜ï¼‰</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">data-username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">data-password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span> <span class="comment"># è‡ªå®šä¹‰æ•°æ®æº</span></span><br><span class="line">    <span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line">    <span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line">    <span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line">    <span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•æ•°æ®åº“æ˜¯å¦è¿æ¥æˆåŠŸï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootDataJdbcApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DIæ³¨å…¥æ•°æ®æº</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//çœ‹ä¸€ä¸‹æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        <span class="comment">//è·å¾—è¿æ¥</span></span><br><span class="line">        Connection connection =   dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•´åˆæµ‹è¯•"><a href="#æ•´åˆæµ‹è¯•" class="headerlink" title="æ•´åˆæµ‹è¯•"></a>æ•´åˆæµ‹è¯•</h2><ul><li>åˆ›å»ºå®ä½“ç±»ï¼Œå¯¼å…¥ Lombokï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºmapperç›®å½•ï¼ˆå³daoï¼‰ä»¥åŠå¯¹åº”çš„ Mapper æ¥å£</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªæ³¨è§£è¡¨ç¤ºäº†è¿™æ˜¯ä¸€ä¸ªmybatisçš„mapperç±»</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">User <span class="title">queryUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é™¤äº†@mapperæ³¨è§£ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨å¯åŠ¨ç±»æ·»åŠ æ‰«æåŒ…å®ç°</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.lzy.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootDataApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootDataApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆåœ¨<code>application.properties</code>ä¸­æ•´åˆmyBatis</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•´åˆMyBatis</span></span><br><span class="line"><span class="meta">mybatis.type-aliases-package</span>=<span class="string">com.lzy.pojo</span></span><br><span class="line"><span class="meta">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure><ul><li>å¯¹åº”çš„Mapperæ˜ å°„æ–‡ä»¶<code>UserMapper.xml</code>ï¼Œåœ¨<code>resources</code>ä¸‹åˆ›å»º<code>mybatis/mapper</code>æ–‡ä»¶å¤¹å­˜æ”¾é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceæŒ‡å®šDao/Mapperçš„å®Œæ•´è·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lzy.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        insert into user (username, password) values (#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        update user set username = #&#123;username&#125;,password = #&#123;password&#125; where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™UserControllerç±»è¿›è¡Œæµ‹è¯•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/queryAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userMapper.queryAllUser();</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e4871b33db57528d225c91bafb2036cf99393adf/2021/06/23/4349520df40de33155461f059d410928.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;SpringData&quot;&gt;&lt;a href=&quot;#SpringData&quot; class=&quot;headerlink&quot; title=&quot;SpringData&quot;&gt;&lt;/a&gt;SpringData&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯ SQL(å…³ç³»å‹æ•°æ®åº“) è¿˜æ˜¯ NOSQL</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒå‘˜å·¥ç®¡ç†ç³»ç»Ÿä¹‹CRUD</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot11.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot11.html</id>
    <published>2021-06-22T12:37:41.527Z</published>
    <updated>2021-06-23T08:43:02.021Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å±•ç¤ºå‘˜å·¥åˆ—è¡¨"><a href="#å±•ç¤ºå‘˜å·¥åˆ—è¡¨" class="headerlink" title="å±•ç¤ºå‘˜å·¥åˆ—è¡¨"></a>å±•ç¤ºå‘˜å·¥åˆ—è¡¨</h1><h2 id="æ§åˆ¶å±‚"><a href="#æ§åˆ¶å±‚" class="headerlink" title="æ§åˆ¶å±‚"></a>æ§åˆ¶å±‚</h2><ul><li>åˆ›å»º<code>EmployeeController</code>æ§åˆ¶å™¨Â·</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        Collection&lt;Employee&gt; employees = employeeDao.getAll();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;emps&quot;</span>,employees);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emp/list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹å‰ç«¯é¡µé¢è¿›è¡Œè·³è½¬</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emps&#125;&quot;</span>&gt;</span></span><br><span class="line">   å‘˜å·¥ç®¡ç†</span><br><span class="line">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å…¬å…±éƒ¨åˆ†"><a href="#å…¬å…±éƒ¨åˆ†" class="headerlink" title="å…¬å…±éƒ¨åˆ†"></a>å…¬å…±éƒ¨åˆ†</h2><ul><li>æ¯”å¦‚ä¾§è¾¹æ å’Œå¤´éƒ¨å¯¼èˆªæ æ˜¯å…¬å…±çš„ï¼Œå¯ä»¥æŠŠå…¬å…±éƒ¨åˆ†æŠ½å–å‡ºæ¥ã€‚æ¯”å¦‚<code>dashboard.html</code>çš„å¯¼èˆªæ è¿›è¡ŒæŠ½å–ï¼Œæˆä¸ºä¸€ä¸ªç»„ä»¶ï¼Œå°±å¯ä»¥åœ¨å…¶ä»–é¡µé¢ä½¿ç”¨</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¤´éƒ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">th:fragment</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ä¾§è¾¹æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">th:fragment</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨<code>list.html</code>ä¸­ä½¿ç”¨æŠ½å–å‡ºæ¥çš„ç»„ä»¶<code>&#123;é¡µé¢è·¯å¾„::è®¾ç½®çš„å‚æ•°å€¼&#125;</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">&quot;~&#123;dashboard::header&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">&quot;~&#123;dashboard::sidebar&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿå¯ä»¥æŠŠä¾§è¾¹æ å’Œå¤´éƒ¨å¯¼èˆªæ æŠ½å–åˆ°ä¸€ä¸ª<code>commons.html</code>é‡Œï¼Œæ¯”å¦‚åœ¨<code>templates</code>ä¸‹åˆ›å»ºÂ·<code>commons</code>æ–‡ä»¶å¤¹å­˜æ”¾<code>commons.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¤´éƒ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">th:fragment</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ä¾§è¾¹æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">th:fragment</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥è¯•ä¸€ä¸‹<code>th:replace</code>ä½¿ç”¨</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;commons/commons::header&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;commons/commons::sidebar&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="URLä¼ å‚"><a href="#URLä¼ å‚" class="headerlink" title="URLä¼ å‚"></a>URLä¼ å‚</h2><ul><li>å½“é€‰æ‹©å‘˜å·¥ç®¡ç†æ—¶éœ€æŠŠå‘˜å·¥ç®¡ç†é‚£ä¸€é¡¹é«˜äº®æ˜¾ç¤ºï¼Œè¿™é‡Œä½¿ç”¨åˆ°äº†URLä¼ å‚</li><li>æ¯”å¦‚åœ¨<code>list.html</code>çš„å…¬å…±éƒ¨åˆ†ï¼Œä¼ é€’ä¸€ä¸ªå‚æ•°é”®å€¼å¯¹<code>active=&#39;list.html&#39;</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;commons/commons::sidebar(active=&#x27;list.html&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨å…¬å…±éƒ¨åˆ†<code>commons.html</code>ä¸­è¿›è¡Œæ¥æ”¶å¹¶åˆ¤æ–­</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:class</span>=<span class="string">&quot;$&#123;active==&#x27;list.html&#x27;?&#x27;nav-link active&#x27;:&#x27;nav-link&#x27;&#125;&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emps&#125;&quot;</span>&gt;</span></span><br><span class="line">   å‘˜å·¥ç®¡ç†</span><br><span class="line">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="éå†æ•°æ®"><a href="#éå†æ•°æ®" class="headerlink" title="éå†æ•°æ®"></a>éå†æ•°æ®</h2><ul><li>ä½¿ç”¨<code>th:each=&quot;åˆ«å:$&#123;æ•°æ®å¯¹è±¡&#125;&quot;</code>è¿›è¡Œæ•°æ®éå†</li><li>å–å€¼å¯ä»¥é€šè¿‡è¡Œå†…<code>[[$&#123;value&#125;]]</code>ï¼Œç¼ºç‚¹æ˜¯æ²¡æœ‰æç¤ºã€‚å¯ä»¥é€šè¿‡<code>th:text=&quot;$&#123;value&#125;&quot;</code>ï¼Œä¼šæœ‰æç¤º</li><li>ä½¿ç”¨thymeleafçš„å·¥å…·ç±»è¿›è¡Œæ—¥æœŸæ ¼å¼è½¬æ¢<code>$&#123;#dates.format(date,&#39;yyyy-MM-dd HH:mm:ss&#39;)&#125;</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-striped table-sm&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>department<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>birth<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--åŠ¨æ€ç”Ÿæˆ--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;emp:$&#123;emps&#125;&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>[[$&#123;emp.getLastName&#125;]]<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getEmail()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getGender()==0?&#x27;å¥³&#x27;:&#x27;ç”·&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.department.getDepartmentName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-info&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-danger&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å¢åŠ å‘˜å·¥å®ç°"><a href="#å¢åŠ å‘˜å·¥å®ç°" class="headerlink" title="å¢åŠ å‘˜å·¥å®ç°"></a>å¢åŠ å‘˜å·¥å®ç°</h1><h2 id="è·å–éƒ¨é—¨ä¿¡æ¯"><a href="#è·å–éƒ¨é—¨ä¿¡æ¯" class="headerlink" title="è·å–éƒ¨é—¨ä¿¡æ¯"></a>è·å–éƒ¨é—¨ä¿¡æ¯</h2><ul><li>å¢åŠ æ·»åŠ æŒ‰é’®è·³è½¬åˆ°æ·»åŠ é¡µé¢</li><li>è¾“å…¥å‘˜å·¥ä¿¡æ¯æäº¤è¡¨å•ï¼Œè·³è½¬åˆ°å‘˜å·¥ç®¡ç†é¡µé¢</li><li>ä½¿ç”¨Restfulé£æ ¼<code>GET</code>è¯·æ±‚è·³è½¬åˆ°æ·»åŠ é¡µé¢ï¼Œ<code>POST</code>è¯·æ±‚æäº¤è¡¨å•ã€‚åŒä¸€ä¸ªè¯·æ±‚ä¸åŒçš„è¯·æ±‚æ–¹æ³•å®ç°ä¸åŒçš„ä¸šåŠ¡</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emp&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span>&gt;</span>æ·»åŠ å‘˜å·¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆè¦è·å–éƒ¨é—¨ä¿¡æ¯å¹¶å±•ç¤º</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@921051c119a3daf142f19a1389233d00db30de55/2021/06/23/e9baf8e39f5ba5a2c899f25544a5244c.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">DepartmentDao departmentDao;</span><br><span class="line"><span class="meta">@GetMapping(&quot;/emp&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toAddpage</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">   <span class="comment">// æŸ¥å‡ºæ‰€æœ‰éƒ¨é—¨çš„ä¿¡æ¯</span></span><br><span class="line">   Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br><span class="line">   model.addAttribute(<span class="string">&quot;departments&quot;</span>,departments);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;emp/add&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‰ç«¯é¡µé¢æ¥æ”¶</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--valueä¼ çš„æ˜¯idï¼Œnameä¹Ÿè¦ä¸€ä¸€å¯¹åº”ï¼Œä¼ çš„æ˜¯ç‰¹æ®Šç±»å‹ï¼Œä¸èƒ½ä¼ å¯¹è±¡åªèƒ½è½¬ç»„ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;department.id&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--textåªæ˜¯æ˜¾ç¤ºï¼Œæäº¤çš„æ˜¯value--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:each</span>=<span class="string">&quot;dept:$&#123;departments&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;dept.getDepartmentName()&#125;&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;dept.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ å®ç°"><a href="#æ·»åŠ å®ç°" class="headerlink" title="æ·»åŠ å®ç°"></a>æ·»åŠ å®ç°</h2><ul><li>ç¼–å†™æ§åˆ¶å™¨å¤„ç†POSTè¡¨å•æäº¤è¯·æ±‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">DepartmentDao departmentDao;</span><br><span class="line"><span class="comment">//è·³è½¬åˆ°å‘˜å·¥ç®¡ç†é¡µé¢</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">   Collection&lt;Employee&gt; employees = employeeDao.getAll();</span><br><span class="line">   model.addAttribute(<span class="string">&quot;emps&quot;</span>,employees);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;emp/list&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@PostMapping(&quot;/emp&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addEmp</span><span class="params">(Employee employee,Model model)</span></span>&#123;</span><br><span class="line">   <span class="comment">// æ·»åŠ å‘˜å·¥</span></span><br><span class="line">   System.out.println(<span class="string">&quot;save=&gt;&quot;</span>+employee);</span><br><span class="line">   employeeDao.save(employee);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>; <span class="comment">//è·³è½¬åˆ°å‘˜å·¥åˆ—è¡¨å¹¶åˆ·æ–°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‰ç«¯é¡µé¢ï¼Œæ³¨æ„<code>name</code>å€¼è¦å’Œå®ä½“ç±»ä¸€ä¸€å¯¹åº”</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/emp&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;LastName&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span><span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span><span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;department.id&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--textåªæ˜¯æ˜¾ç¤ºï¼Œæäº¤çš„æ˜¯value--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:each</span>=<span class="string">&quot;dept:$&#123;departments&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;dept.getDepartmentName()&#125;&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;dept.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Birth&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birth&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>æäº¤è¡¨å•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ—¶é—´æ ¼å¼"><a href="#æ—¶é—´æ ¼å¼" class="headerlink" title="æ—¶é—´æ ¼å¼"></a>æ—¶é—´æ ¼å¼</h2><ul><li>å½“æˆ‘ä»¬è¾“å…¥<code>1999/11/12</code>æ—¶ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯è¾“å…¥<code>1999-11-12</code>å´å‡ºç°äº†é”™è¯¯</li><li>è¿™æ˜¯å› ä¸ºSpringBootæœ‰ä¸€ä¸ªé»˜è®¤çš„æ ¼å¼<code>dd/MM/yyyy</code>ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰æ ¼å¼ã€‚è‡ªå®šä¹‰å<code>/</code>æ ¼å¼å°±æ— æ³•ä½¿ç”¨</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.mvc.format.date</span>=<span class="string">yyyy-MM-dd</span></span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹å‘˜å·¥ä¿¡æ¯"><a href="#ä¿®æ”¹å‘˜å·¥ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹å‘˜å·¥ä¿¡æ¯"></a>ä¿®æ”¹å‘˜å·¥ä¿¡æ¯</h1><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><ul><li>é€šè¿‡æŒ‰é’®ç»‘å®šæ¯ä¸€ä¸ªå‘˜å·¥IDï¼Œè®¿é—®ç¼–è¾‘é¡µé¢çš„æ—¶å€™å¸¦å‘˜å·¥IDå‚æ•°</li><li>é€šè¿‡Restfulåˆ†éš”å®ç°</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;emp:$&#123;emps&#125;&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span>[[$&#123;emp.getLastName&#125;]]<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getEmail()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getGender()==0?&#x27;å¥³&#x27;:&#x27;ç”·&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.department.getDepartmentName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-info&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emp/&#125;+$&#123;emp.getId()&#125;&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-danger&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™æ§åˆ¶å™¨å¤„ç†è¯·æ±‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¾‘é¡µé¢</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/emp/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toUpdateEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,Model model)</span></span>&#123;</span><br><span class="line">   <span class="comment">//æŸ¥å‡ºåŸæ¥æ•°æ®</span></span><br><span class="line">   Employee employee = employeeDao.getEmployeeByID(id);</span><br><span class="line">   model.addAttribute(<span class="string">&quot;emp&quot;</span>,employee);</span><br><span class="line">   <span class="comment">// æŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line">   Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br><span class="line">   model.addAttribute(<span class="string">&quot;departments&quot;</span>,departments);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;emp/update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘å®ç°"><a href="#ç¼–è¾‘å®ç°" class="headerlink" title="ç¼–è¾‘å®ç°"></a>ç¼–è¾‘å®ç°</h2><ul><li>åœ¨<code>emp</code>æ–‡ä»¶ä¸‹æ–°å»º<code>update.html</code>é¡µé¢ï¼Œä¼ å…¥åç«¯çš„æ•°æ®</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/emp&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--éšè—åŸŸ ç”¨äºéšè—ä¿å­˜ä¸»é”®ID--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;emp.getLastName()&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;LastName&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;emp.getEmail()&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:checked</span>=<span class="string">&quot;$&#123;emp.getGender()==1&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span><span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:checked</span>=<span class="string">&quot;$&#123;emp.getGender()==0&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span><span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;department.id&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--textåªæ˜¯æ˜¾ç¤ºï¼Œæäº¤çš„æ˜¯value--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:selected</span>=<span class="string">&quot;$&#123;dept.getId()==emp.getDepartment().getId()&#125;&quot;</span> <span class="attr">th:each</span>=<span class="string">&quot;dept:$&#123;departments&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;dept.getDepartmentName()&#125;&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;dept.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm&#x27;)&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Birth&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birth&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>æäº¤è¡¨å•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span>            </span><br></pre></td></tr></table></figure><ul><li>å¡«å†™è¡¨å•åéœ€è¦æ§åˆ¶å™¨å¤„ç†è¯·æ±‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘˜å·¥ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/updateEmp&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">   employeeDao.save((employee));</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤åŠ404æ“ä½œ"><a href="#åˆ é™¤åŠ404æ“ä½œ" class="headerlink" title="åˆ é™¤åŠ404æ“ä½œ"></a>åˆ é™¤åŠ404æ“ä½œ</h1><h2 id="åˆ é™¤å‘˜å·¥ä¿¡æ¯"><a href="#åˆ é™¤å‘˜å·¥ä¿¡æ¯" class="headerlink" title="åˆ é™¤å‘˜å·¥ä¿¡æ¯"></a>åˆ é™¤å‘˜å·¥ä¿¡æ¯</h2><ul><li>é¦–å…ˆåˆ é™¤æŒ‰é’®ç»‘å®šå‘˜å·¥IDï¼Œä¼ é€’å‚æ•°ç»™åç«¯</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/delemp/&#125;+$&#123;emp.getId()&#125;&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åç«¯æ¥æ”¶å‘˜å·¥IDè¿›è¡Œåˆ é™¤ï¼Œåˆ é™¤åè·³åˆ°å‘˜å·¥åˆ—è¡¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ é™¤å‘˜å·¥</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/emp/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,Model model)</span></span>&#123;</span><br><span class="line">   employeeDao.delete(id);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨é”€æ“ä½œ"><a href="#æ³¨é”€æ“ä½œ" class="headerlink" title="æ³¨é”€æ“ä½œ"></a>æ³¨é”€æ“ä½œ</h2><ul><li>å‰ç«¯é¡µé¢æäº¤æ³¨é”€è¯·æ±‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/loginout&#125;&quot;</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åç«¯ç§»é™¤ç”¨æˆ·Sessionï¼Œå¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨æˆ·æ³¨é”€</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/loginout&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">loginout</span><span class="params">(HttpSession session)</span></span>&#123;</span><br><span class="line">   session.invalidate();</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/index.html&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="404é¡µé¢"><a href="#404é¡µé¢" class="headerlink" title="404é¡µé¢"></a>404é¡µé¢</h2><ul><li>åœ¨<code>templates</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª<code>error</code>æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸€ä¸ª<code>404.html</code></li><li>å½“å‘ç°é”™è¯¯æ—¶ä¼šè‡ªåŠ¨è·³è½¬åˆ°404é¡µé¢</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å±•ç¤ºå‘˜å·¥åˆ—è¡¨&quot;&gt;&lt;a href=&quot;#å±•ç¤ºå‘˜å·¥åˆ—è¡¨&quot; class=&quot;headerlink&quot; title=&quot;å±•ç¤ºå‘˜å·¥åˆ—è¡¨&quot;&gt;&lt;/a&gt;å±•ç¤ºå‘˜å·¥åˆ—è¡¨&lt;/h1&gt;&lt;h2 id=&quot;æ§åˆ¶å±‚&quot;&gt;&lt;a href=&quot;#æ§åˆ¶å±‚&quot; class=&quot;headerlink&quot; title=&quot;æ§åˆ¶å±‚</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒå‘˜å·¥ç®¡ç†ç³»ç»Ÿä¹‹ç™»å½•æ‹¦æˆª</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot10.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot10.html</id>
    <published>2021-06-22T11:44:50.051Z</published>
    <updated>2021-06-22T12:57:25.472Z</updated>
    
    <content type="html"><![CDATA[<h1 id="çƒ­éƒ¨ç½²"><a href="#çƒ­éƒ¨ç½²" class="headerlink" title="çƒ­éƒ¨ç½²"></a>çƒ­éƒ¨ç½²</h1><ul><li>çƒ­éƒ¨ç½²ï¼Œå°±æ˜¯åœ¨åº”ç”¨æ­£åœ¨è¿è¡Œçš„æ—¶å€™å‡çº§è½¯ä»¶ï¼Œå´ä¸éœ€è¦é‡æ–°å¯åŠ¨åº”ç”¨</li><li>SpringBootçƒ­éƒ¨ç½²å°±æ˜¯åœ¨é¡¹ç›®æ­£åœ¨è¿è¡Œçš„æ—¶å€™ä¿®æ”¹ä»£ç , å´ä¸éœ€è¦é‡æ–°å¯åŠ¨é¡¹ç›®</li></ul><h2 id="é…ç½®çƒ­éƒ¨ç½²"><a href="#é…ç½®çƒ­éƒ¨ç½²" class="headerlink" title="é…ç½®çƒ­éƒ¨ç½²"></a>é…ç½®çƒ­éƒ¨ç½²</h2><ul><li>pomæ–‡ä»¶ä¸­å¯¼å…¥ <code>spring-boot-devtools</code> ä¾èµ–ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç»§ç»­åœ¨pom.xmlä¸­æ·»åŠ æ’ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">addResources</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addResources</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®<code>application.properties</code></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®é¡¹ç›®çƒ­éƒ¨ç½²</span></span><br><span class="line"><span class="meta">spring.devtools.restart.enabled</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨ideaä¸­è®¾ç½®è‡ªåŠ¨ç¼–è¯‘ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@faf08691318f4e003832ce54cf9f22de94d8c3b1/2021/06/22/1920dbecb59f02595044901846eced46.png"></p><ul><li><p>æŒ‰ä½<kbd>ctrl</kbd>+<kbd>shift</kbd>+<kbd>alt</kbd>+<kbd> / </kbd>ï¼Œå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºç•Œé¢ï¼Œç‚¹å‡»Registryï¼ˆæ³¨å†Œï¼‰â€¦ï¼Œå¦‚ä¸‹å›¾ï¼š<img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@04df3016a11980061b66917dd18d2f3be038611d/2021/06/22/d21320e0e3a4b52337f3d234ca4b21dd.png"></p></li><li><p> ç‚¹å‡»è¿›å…¥åï¼Œå‹¾é€‰<code>compiler.automake.allow.when.app.running</code>åå…³é—­å³å¯</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@fb274a58ab33dac06815f77b4dc7ae682f60de07/2021/06/22/347f522d897e4fb7efc8dbd2f0c71098.png"></p><h1 id="ç™»å½•åŠŸèƒ½"><a href="#ç™»å½•åŠŸèƒ½" class="headerlink" title="ç™»å½•åŠŸèƒ½"></a>ç™»å½•åŠŸèƒ½</h1><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><ul><li>é¦–å…ˆå†™ä¸€ä¸ªæ§åˆ¶å™¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(String username, String password, Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å…·ä½“ä¸šåŠ¡</span></span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">&quot;admin&quot;</span>) &amp;&amp;  password.equals(<span class="string">&quot;12345&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;dashboard&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹å‰ç«¯ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-signin&quot;</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user/login&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--çœç•¥--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--å¦‚æœmsgä¸ºç©ºåˆ™ä¸æ˜¾ç¤º--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #strings.isEmpty(msg)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--çœç•¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è®¿é—®åå‘ç°æˆåŠŸè·³è½¬ï¼Œä½†åœ°å€æ å´æ²¡æœ‰å˜åŒ–</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@4db08156fa4d3b9e4605ffb105b0e1d60851e5c3/2021/06/22/3f3a26df0fc5aa158b2ab336a0e0c5ce.png"></p><h2 id="åœ°å€æ˜ å°„"><a href="#åœ°å€æ˜ å°„" class="headerlink" title="åœ°å€æ˜ å°„"></a>åœ°å€æ˜ å°„</h2><ul><li>æˆ‘ä»¬å¯ä»¥å–ä¸€ä¸ªå‡çš„åœ°å€åˆ«åï¼Œå…¶ä¸æ˜¯çœŸæ­£çš„é¡µé¢è€Œåªæ˜¯ä¸€ä¸ªè¯·æ±‚è€Œå·²</li><li>åœ¨æˆ‘ä»¬<code>config</code>ä¸‹åˆ›å»ºçš„SpringMVCæ‰©å±•ç±»é‡Œæ·»åŠ åœ°å€æ˜ å°„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰©å±•springmvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyLocaleResolver();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        <span class="comment">//ç›¸å½“äºç»™dashboardèµ·åˆ«å</span></span><br><span class="line">        registry.addViewController(<span class="string">&quot;/main.html&quot;</span>).setViewName(<span class="string">&quot;dashboard&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ§åˆ¶å™¨ä¸­ä¿®æ”¹ä¸ºé‡å®šå‘</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(String username, String password, Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å…·ä½“ä¸šåŠ¡</span></span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">&quot;admin&quot;</span>) &amp;&amp;  password.equals(<span class="string">&quot;12345&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/main.html&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å†æ¬¡è®¿é—®å°±ä¼šæ˜ å°„åˆ°<code>main.html</code>äº†</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e42e34813212331a3e7fb29319e795d528cf3766/2021/06/22/88e9b814fdb05572659a9f894b89ec91.png"></p><h1 id="ç™»å½•æ‹¦æˆª"><a href="#ç™»å½•æ‹¦æˆª" class="headerlink" title="ç™»å½•æ‹¦æˆª"></a>ç™»å½•æ‹¦æˆª</h1><ul><li>ä½†æ˜¯æœªç™»å½•çŠ¶æ€ä¸‹è®¿é—®<code>http://localhost:8080/main.html</code>ç…§æ ·èƒ½è¿›å…¥ï¼Œè¿™æ˜¯ä¸åˆç†çš„ï¼Œéœ€è¦é…ç½®æ‹¦æˆªå™¨</li><li>åœ¨<code>config</code>åŒ…ä¸‹æ–°å»ºä¸€ä¸ªæ‹¦æˆªå™¨ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// ç™»å½•æˆåŠŸä¹‹åï¼Œåº”è¯¥æœ‰ç”¨æˆ·çš„Session</span></span><br><span class="line">        Object loginUser = request.getSession().getAttribute(<span class="string">&quot;loginUser&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(loginUser == <span class="keyword">null</span>)&#123; <span class="comment">//æœªç™»å½•</span></span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ²¡æœ‰æƒé™ï¼Œè¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/index.html&quot;</span>).forward(request,response);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨<code>config</code>ä¸‹çš„SpringMVCæ‰©å±•ä¸­è¿›è¡Œè®¾ç½®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰©å±•springmvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyLocaleResolver();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        <span class="comment">//ç›¸å½“äºç»™dashboardèµ·åˆ«å</span></span><br><span class="line">        registry.addViewController(<span class="string">&quot;/main.html&quot;</span>).setViewName(<span class="string">&quot;dashboard&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> LoginHandlerInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/index.html&quot;</span>,<span class="string">&quot;/&quot;</span>,<span class="string">&quot;/user/login&quot;</span>,<span class="string">&quot;static/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éœ€è¦åœ¨æ§åˆ¶å™¨å¤„ç†æ—¶ï¼Œæ·»åŠ ç”¨æˆ·Session</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(String username, String password, Model model, HttpSession session)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å…·ä½“ä¸šåŠ¡</span></span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">&quot;admin&quot;</span>) &amp;&amp;  password.equals(<span class="string">&quot;12345&quot;</span>))&#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;loginUser&quot;</span>,username);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/main.html&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç™»é™†åç”¨æˆ·åæ˜¾ç¤º</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>[[$&#123;session.loginUser&#125;]]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;çƒ­éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#çƒ­éƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;çƒ­éƒ¨ç½²&quot;&gt;&lt;/a&gt;çƒ­éƒ¨ç½²&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;çƒ­éƒ¨ç½²ï¼Œå°±æ˜¯åœ¨åº”ç”¨æ­£åœ¨è¿è¡Œçš„æ—¶å€™å‡çº§è½¯ä»¶ï¼Œå´ä¸éœ€è¦é‡æ–°å¯åŠ¨åº”ç”¨&lt;/li&gt;
&lt;li&gt;SpringBootçƒ­éƒ¨ç½²å°±æ˜¯åœ¨é¡¹ç›®æ­£</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒå‘˜å·¥ç®¡ç†ç³»ç»Ÿå‡†å¤‡åŠå›½é™…åŒ–</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot09.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot09.html</id>
    <published>2021-06-22T08:33:52.422Z</published>
    <updated>2021-06-23T08:19:51.524Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h1><h2 id="é™æ€èµ„æº"><a href="#é™æ€èµ„æº" class="headerlink" title="é™æ€èµ„æº"></a>é™æ€èµ„æº</h2><ul><li>HTMLé¡µé¢æ”¾å…¥<code>templates</code>æ–‡ä»¶å¤¹ä¸‹</li><li>CSSã€JSã€å›¾ç‰‡ç­‰æ”¾åœ¨<code>static</code>æ–‡ä»¶å¤¹ä¸‹</li></ul><h2 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h2><ul><li>è¿™é‡Œæœªä½¿ç”¨æ•°æ®åº“ï¼Œéœ€è¦ä¼ªé€ æ•°æ®ã€‚é¦–å…ˆåˆ›å»ºå®ä½“ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éƒ¨é—¨è¡¨</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String departmentName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘˜å·¥è¡¨</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer gender; <span class="comment">//0ï¼šå¥³ 1ï¼šç”·</span></span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(Integer id, String lastName, String email, Integer gender, Department department, Date birth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">        <span class="keyword">this</span>.department = department;</span><br><span class="line">        <span class="comment">// é»˜è®¤åˆ›å»ºæ—¥æœŸ</span></span><br><span class="line">        <span class="keyword">this</span>.birth = <span class="keyword">new</span> Date();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨Daoå±‚æ¨¡æ‹Ÿæ•°æ®åº“æ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éƒ¨é—¨Dao</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Department&gt; departmentmap = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        departmentmap = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">//åˆ›å»ºä¸€ä¸ªéƒ¨é—¨è¡¨</span></span><br><span class="line">        departmentmap.put(<span class="number">101</span>,<span class="keyword">new</span> Department(<span class="number">101</span>,<span class="string">&quot;æ•™å­¦éƒ¨&quot;</span>));</span><br><span class="line">        departmentmap.put(<span class="number">102</span>,<span class="keyword">new</span> Department(<span class="number">102</span>,<span class="string">&quot;å¸‚åœºéƒ¨&quot;</span>));</span><br><span class="line">        departmentmap.put(<span class="number">103</span>,<span class="keyword">new</span> Department(<span class="number">103</span>,<span class="string">&quot;æ•™ç ”éƒ¨&quot;</span>));</span><br><span class="line">        departmentmap.put(<span class="number">104</span>,<span class="keyword">new</span> Department(<span class="number">104</span>,<span class="string">&quot;è¿è¥éƒ¨&quot;</span>));</span><br><span class="line">        departmentmap.put(<span class="number">105</span>,<span class="keyword">new</span> Department(<span class="number">105</span>,<span class="string">&quot;åå‹¤éƒ¨&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ‰€æœ‰éƒ¨é—¨å­¦æ ¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Department&gt; <span class="title">getDepartments</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> departmentmap.values();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡idå¾—åˆ°éƒ¨é—¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDepartmentByID</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> departmentmap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘˜å·¥Deao</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employeeMap = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å‘˜å·¥æœ‰æ‰€å±çš„éƒ¨é—¨</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentDao departmentDao;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        employeeMap = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">//åˆ›å»ºä¸€ä¸ªå‘˜å·¥è¡¨</span></span><br><span class="line">        employeeMap.put(<span class="number">101</span>,<span class="keyword">new</span> Employee(<span class="number">101</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;A247312312@qq.com&quot;</span>,<span class="number">1</span>,<span class="keyword">new</span> Department(<span class="number">101</span>,<span class="string">&quot;æ•™å­¦éƒ¨&quot;</span>),<span class="keyword">new</span> Date()));</span><br><span class="line">        employeeMap.put(<span class="number">102</span>,<span class="keyword">new</span> Employee(<span class="number">102</span>,<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;B247312312@qq.com&quot;</span>,<span class="number">0</span>,<span class="keyword">new</span> Department(<span class="number">102</span>,<span class="string">&quot;å¸‚åœºéƒ¨&quot;</span>),<span class="keyword">new</span> Date()));</span><br><span class="line">        employeeMap.put(<span class="number">103</span>,<span class="keyword">new</span> Employee(<span class="number">103</span>,<span class="string">&quot;ç‹äº”&quot;</span>,<span class="string">&quot;C247312312@qq.com&quot;</span>,<span class="number">1</span>,<span class="keyword">new</span> Department(<span class="number">103</span>,<span class="string">&quot;æ•™ç ”éƒ¨&quot;</span>),<span class="keyword">new</span> Date()));</span><br><span class="line">        employeeMap.put(<span class="number">104</span>,<span class="keyword">new</span> Employee(<span class="number">104</span>,<span class="string">&quot;èµµå…­&quot;</span>,<span class="string">&quot;D247312312@qq.com&quot;</span>,<span class="number">0</span>,<span class="keyword">new</span> Department(<span class="number">104</span>,<span class="string">&quot;è¿è¥éƒ¨&quot;</span>),<span class="keyword">new</span> Date()));</span><br><span class="line">        employeeMap.put(<span class="number">105</span>,<span class="keyword">new</span> Employee(<span class="number">105</span>,<span class="string">&quot;è€ç™½&quot;</span>,<span class="string">&quot;E247312312@qq.com&quot;</span>,<span class="number">1</span>,<span class="keyword">new</span> Department(<span class="number">105</span>,<span class="string">&quot;åå‹¤éƒ¨&quot;</span>),<span class="keyword">new</span> Date()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¢åŠ ä¸€ä¸ªå‘˜å·¥ï¼Œä¸»é”®è‡ªå¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Integer initID = <span class="number">1006</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(employee.getId() == <span class="keyword">null</span>)&#123;</span><br><span class="line">            employee.setId(initID++);</span><br><span class="line">        &#125;</span><br><span class="line">        employee.setDepartment(departmentDao.getDepartmentByID(employee.getDepartment().getId()));</span><br><span class="line">        employeeMap.put(employee.getId(),employee);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·å¾—æŸ¥è¯¢å…¨éƒ¨å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title">getAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMap.values();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€šè¿‡IDæŸ¥è¯¢å‘˜å·¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmployeeByID</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤å‘˜å·¥é€šè¿‡id</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        employeeMap.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="é¦–é¡µå®ç°"><a href="#é¦–é¡µå®ç°" class="headerlink" title="é¦–é¡µå®ç°"></a>é¦–é¡µå®ç°</h1><h2 id="è§†å›¾è·³è½¬"><a href="#è§†å›¾è·³è½¬" class="headerlink" title="è§†å›¾è·³è½¬"></a>è§†å›¾è·³è½¬</h2><ul><li>è§†å›¾è·³è½¬æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯å†™ä¸€ä¸ª<code>Controller</code>è¿›è¡Œè·³è½¬</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line">   <span class="comment">//  /å’Œ/index.htmléƒ½æ˜ å°„åˆ°é¦–é¡µï¼Œä½†ä¸å»ºè®®ç”¨è¿™ç§æ–¹æ³•å®ç°</span></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index.html&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯å†™ä¸€ä¸ª<code>/config</code>åŒ…ä¸‹çš„æ‰©å±•SpringMVC</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰©å±•springmvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™æ€èµ„æº-1"><a href="#é™æ€èµ„æº-1" class="headerlink" title="é™æ€èµ„æº"></a>é™æ€èµ„æº</h2><ul><li>æ‰“å¼€é¡µé¢å‘ç°é™æ€èµ„æºåŠ è½½ä¸å‡ºæ¥ï¼Œè¿™æ˜¯å› ä¸º<code>Thymeleaf</code>æ²¡é…å¥½</li><li>é¦–å…ˆè¦é…ç½®çº¦æŸå¤´</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>URLé™æ€èµ„æºçš„å¼•å…¥ï¼Œé¦–å…ˆ<code>@&#123;/&#125;</code>å°±ä»£è¡¨èµ„æºæ ¹ç›®å½•ï¼Œå…¶ç”¨äºå®šä¹‰URLï¼Œæ¯”å¦‚<code>/static/</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--/static/css/..--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.min.css&#125;&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœé¡µé¢è¿˜æ˜¯æ²¡æœ‰æ•ˆæœï¼Œå¯èƒ½æ˜¯æ¨¡æ¿å¼•æ“ç¼“å­˜çš„å½±å“ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å»æ‰ç¼“å­˜</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure><ul><li>å›¾ç‰‡çš„å¼•å…¥ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå±æ€§å‰åŠ <code>th:</code>å³å¯</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/img/bootstrap-solid.svg&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note success simple"><p><strong>åœ¨çº¿é“¾æ¥ä¸éœ€è¦åŠ <code>th:</code></strong></p></div><ul><li><code>@&#123;/&#125;</code>æ˜¯ä¸‡èƒ½åŒ¹é…çš„ï¼Œæ¯”å¦‚æ›´æ”¹é¡¹ç›®è™šæ‹Ÿè·¯å¾„</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.servlet.context-path</span>=<span class="string">/lzy</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6146ca57b0ecfab9c10cd09321913443093add33/2021/06/22/ccb552fb0770d4ab90bc124ab81e72c7.png" width="80%"><h1 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h1><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul><li>å…ˆåœ¨IDEAä¸­ç»Ÿä¸€è®¾ç½®<code>properties</code>çš„ç¼–ç é—®é¢˜ï¼ç¡®ä¿ä¸º<code>UTF-8</code></li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e1d8743bbfe129388d432d36968252e4e5b07250/2021/06/22/b38d12edb6fb89c4859413d429a852db.png" width="100%"><ul><li>ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–é¡µé¢æ¶ˆæ¯ã€‚æˆ‘ä»¬å¯ä»¥å»ç™»å½•é¡µé¢æŸ¥çœ‹ä¸€ä¸‹ï¼Œå“ªäº›å†…å®¹æˆ‘ä»¬éœ€è¦ç¼–å†™å›½é™…åŒ–çš„é…ç½®ï¼</li></ul><h2 id="é…ç½®æ–‡ä»¶ç¼–å†™"><a href="#é…ç½®æ–‡ä»¶ç¼–å†™" class="headerlink" title="é…ç½®æ–‡ä»¶ç¼–å†™"></a>é…ç½®æ–‡ä»¶ç¼–å†™</h2><ul><li>åœ¨<code>resources</code>èµ„æºæ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ª<code>i18n</code>ç›®å½•ï¼Œå­˜æ”¾å›½é™…åŒ–é…ç½®æ–‡ä»¶</li><li>å»ºç«‹ä¸€ä¸ª<code>login.properties</code>æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>login_zh_CN.properties</code>ï¼›å‘ç°IDEAè‡ªåŠ¨è¯†åˆ«äº†æˆ‘ä»¬è¦åšå›½é™…åŒ–æ“ä½œï¼›æ–‡ä»¶å¤¹å˜äº†ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@05b305796fc369bc04a039b8fe6f8eff67e90f53/2021/06/22/12390d515e5fa815fbff2f3e8375468d.png"></p><ul><li>å¯ä»¥åœ¨è¿™èµ„æºåŒ…ä¸Šé¢å»æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@14ccd343a0828a5937c5466b99062511c6575755/2021/06/22/df2764f950c56545d5d8a550c0bccf2c.png"></p><ul><li>å¼¹å‡ºå¦‚ä¸‹é¡µé¢ï¼šå†æ·»åŠ ä¸€ä¸ªè‹±æ–‡çš„ï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@8dd692fd56097d22caf47f754bd17e57da7e07ad/2021/06/22/f36b3a40a9366eda72f6e4639d450992.png"></p><ul><li>è¿™æ ·å°±å¿«å¤šäº†</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@5cdbcc3bbcb08af75ecf938ef7b01d8da66c6580/2021/06/22/644efbafc744b51d3da7047a1a07cf77.png"></p><ul><li>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥ç¼–å†™é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ideaç¼–è¾‘åŒºå·¦ä¸‹é¢æœ‰å¦å¤–ä¸€ä¸ªè§†å›¾ï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@42f99570d9487758a145fd2bbd9e0c4eabcfdff5/2021/06/22/9ddf7bb5186379fb099c725db0430aff.png"></p><ul><li>è¿™ä¸ªè§†å›¾æˆ‘ä»¬ç‚¹å‡» <code>+</code> å·å°±å¯ä»¥ç›´æ¥æ·»åŠ å±æ€§äº†ï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>login.tip</code>ï¼Œå¯ä»¥çœ‹åˆ°è¾¹ä¸Šæœ‰ä¸‰ä¸ªæ–‡ä»¶æ¡†å¯ä»¥è¾“å…¥</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@c86891070ed953d7f5ed77b53ad5665def3adbad/2021/06/22/3ebea77661a0c92ab259ae57a72d7727.png"></p><ul><li>ç„¶åä¾æ¬¡æ·»åŠ å…¶ä»–é¡µé¢å†…å®¹å³å¯ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e37c5aad1c7eeb5310056ba60c5074d17e9a68dc/2021/06/22/c3d011f10c2f911a9d16287fdf886c5c.png"></p><ul><li>ç„¶åå»æŸ¥çœ‹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼›</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># login.properties(é»˜è®¤)</span></span><br><span class="line"><span class="meta">login.btn</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="meta">login.passwod</span>=<span class="string">å¯†ç </span></span><br><span class="line"><span class="meta">login.remember</span>=<span class="string">è®°ä½æˆ‘</span></span><br><span class="line"><span class="meta">login.tip</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="meta">login.username</span>=<span class="string">ç”¨æˆ·å</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># login_en_US.properties(è‹±æ–‡)</span></span><br><span class="line"><span class="meta">login.btn</span>=<span class="string">Sign in</span></span><br><span class="line"><span class="meta">login.passwod</span>=<span class="string">Password</span></span><br><span class="line"><span class="meta">login.remember</span>=<span class="string">Remember me</span></span><br><span class="line"><span class="meta">login.tip</span>=<span class="string">Please sign in</span></span><br><span class="line"><span class="meta">login.username</span>=<span class="string">Username</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># login_zh_CN.properties(ä¸­æ–‡)</span></span><br><span class="line"><span class="meta">login.btn</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="meta">login.passwod</span>=<span class="string">å¯†ç </span></span><br><span class="line"><span class="meta">login.remember</span>=<span class="string">è®°ä½æˆ‘</span></span><br><span class="line"><span class="meta">login.tip</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="meta">login.username</span>=<span class="string">ç”¨æˆ·å</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"><a href="#é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶" class="headerlink" title="é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"></a>é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶</h2><ul><li>æˆ‘ä»¬å»çœ‹ä¸€ä¸‹SpringBootå¯¹å›½é™…åŒ–çš„è‡ªåŠ¨é…ç½®ï¼è¿™é‡Œåˆæ¶‰åŠåˆ°ä¸€ä¸ªç±»ï¼š<code>MessageSourceAutoConfiguration</code></li><li>é‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œå‘ç°SpringBootå·²ç»è‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†æˆ‘ä»¬å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ <code>ResourceBundleMessageSource</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å– properties ä¼ é€’è¿‡æ¥çš„å€¼è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> MessageSource <span class="title">messageSource</span><span class="params">(MessageSourceProperties properties)</span> </span>&#123;</span><br><span class="line">    ResourceBundleMessageSource messageSource = <span class="keyword">new</span> ResourceBundleMessageSource();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasText(properties.getBasename())) &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®å›½é™…åŒ–æ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰</span></span><br><span class="line">        messageSource.setBasenames(</span><br><span class="line">            StringUtils.commaDelimitedListToStringArray(</span><br><span class="line">                                       StringUtils.trimAllWhitespace(properties.getBasename())));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (properties.getEncoding() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        messageSource.setDefaultEncoding(properties.getEncoding().name());</span><br><span class="line">    &#125;</span><br><span class="line">    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());</span><br><span class="line">    Duration cacheDuration = properties.getCacheDuration();</span><br><span class="line">    <span class="keyword">if</span> (cacheDuration != <span class="keyword">null</span>) &#123;</span><br><span class="line">        messageSource.setCacheMillis(cacheDuration.toMillis());</span><br><span class="line">    &#125;</span><br><span class="line">    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());</span><br><span class="line">    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());</span><br><span class="line">    <span class="keyword">return</span> messageSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬çœŸå® çš„æƒ…å†µæ˜¯æ”¾åœ¨äº†<code>i18n</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å»é…ç½®è¿™ä¸ª<code>messages</code>çš„è·¯å¾„ï¼›</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.messages.basename</span>=<span class="string">i18n.login</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®é¡µé¢å›½é™…åŒ–å€¼"><a href="#é…ç½®é¡µé¢å›½é™…åŒ–å€¼" class="headerlink" title="é…ç½®é¡µé¢å›½é™…åŒ–å€¼"></a>é…ç½®é¡µé¢å›½é™…åŒ–å€¼</h2><ul><li>å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼ŒæŸ¥çœ‹Thymeleafçš„æ–‡æ¡£ï¼Œæ‰¾åˆ°messageå–å€¼æ“ä½œä¸ºï¼š<code>#&#123;...&#125;</code>ã€‚æˆ‘ä»¬å»é¡µé¢æµ‹è¯•ä¸‹ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0030722222d13602ce99ec8d8df87e06e6bfd5f5/2021/06/22/c3984fa2a1f47984839a0e3469b49fbd.png"></p><ul><li>å»å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®ä¸€ä¸‹ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è¯†åˆ«ä¸ºä¸­æ–‡çš„äº†ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@946c964ba21e30475e12c83bd7ab6dd000f6d085/2021/06/22/ca6e98629adbc8262638f2b48e94641c.png"></p><ul><li>ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯ä»¥æ ¹æ®æŒ‰é’®è‡ªåŠ¨åˆ‡æ¢ä¸­æ–‡è‹±æ–‡ï¼</li></ul><h2 id="é…ç½®å›½é™…åŒ–è§£æ"><a href="#é…ç½®å›½é™…åŒ–è§£æ" class="headerlink" title="é…ç½®å›½é™…åŒ–è§£æ"></a>é…ç½®å›½é™…åŒ–è§£æ</h2><ul><li>åœ¨Springä¸­æœ‰ä¸€ä¸ªå›½é™…åŒ–çš„<code>Locale</code> ï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›é‡Œé¢æœ‰ä¸€ä¸ªå«åš<code>LocaleResolver</code> ï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰çš„è§£æå™¨ï¼</li><li>æˆ‘ä»¬å»æˆ‘ä»¬webmvcè‡ªåŠ¨é…ç½®æ–‡ä»¶ï¼Œå¯»æ‰¾ä¸€ä¸‹ï¼çœ‹åˆ°SpringBooté»˜è®¤é…ç½®ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®¹å™¨ä¸­æ²¡æœ‰å°±è‡ªå·±é…ï¼Œæœ‰çš„è¯å°±ç”¨ç”¨æˆ·é…ç½®çš„</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FixedLocaleResolver(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¥æ”¶å¤´å›½é™…åŒ–åˆ†è§£</span></span><br><span class="line">    AcceptHeaderLocaleResolver localeResolver = <span class="keyword">new</span> AcceptHeaderLocaleResolver();</span><br><span class="line">    localeResolver.setDefaultLocale(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">    <span class="keyword">return</span> localeResolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>AcceptHeaderLocaleResolver</code> è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Locale <span class="title">resolveLocale</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    Locale defaultLocale = <span class="keyword">this</span>.getDefaultLocale();</span><br><span class="line">    <span class="comment">// é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ–</span></span><br><span class="line">    <span class="keyword">if</span> (defaultLocale != <span class="keyword">null</span> &amp;&amp; request.getHeader(<span class="string">&quot;Accept-Language&quot;</span>) == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> defaultLocale;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Locale requestLocale = request.getLocale();</span><br><span class="line">        List&lt;Locale&gt; supportedLocales = <span class="keyword">this</span>.getSupportedLocales();</span><br><span class="line">        <span class="keyword">if</span> (!supportedLocales.isEmpty() &amp;&amp; !supportedLocales.contains(requestLocale)) &#123;</span><br><span class="line">            Locale supportedLocale = <span class="keyword">this</span>.findSupportedLocale(request, supportedLocales);</span><br><span class="line">            <span class="keyword">if</span> (supportedLocale != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> supportedLocale;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> defaultLocale != <span class="keyword">null</span> ? defaultLocale : requestLocale;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> requestLocale;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é‚£å‡å¦‚æˆ‘ä»¬ç°åœ¨æƒ³ç‚¹å‡»é“¾æ¥è®©æˆ‘ä»¬çš„å›½é™…åŒ–èµ„æºç”Ÿæ•ˆï¼Œå°±éœ€è¦è®©æˆ‘ä»¬è‡ªå·±çš„Localeç”Ÿæ•ˆï¼</li><li>å†™ä¸€ä¸ªè‡ªå·±çš„<code>LocaleResolver</code>ï¼Œå¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯ï¼</li><li>ä¿®æ”¹ä¸€ä¸‹å‰ç«¯é¡µé¢çš„è·³è½¬è¿æ¥ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™é‡Œä¼ å…¥å‚æ•°ä¸éœ€è¦ä½¿ç”¨ ï¼Ÿä½¿ç”¨ ï¼ˆkey=valueï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/index.html(l=&#x27;zh_CN&#x27;)&#125;&quot;</span>&gt;</span>ä¸­æ–‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/index.html(l=&#x27;en_US&#x27;)&#125;&quot;</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å†™ä¸€ä¸ªå¤„ç†çš„ç»„ä»¶ç±»ï¼æ¯”å¦‚åœ¨<code>config</code>åŒ…ä¸‹æ–°å»ºä¸€ä¸ª<code>MyLocaleResolver</code>ç±»Â·</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocaleResolver</span> <span class="keyword">implements</span> <span class="title">LocaleResolver</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è§£æè¯·æ±‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Locale <span class="title">resolveLocale</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚ä¸­çš„è¯­è¨€å‚æ•°</span></span><br><span class="line">        String language = request.getParameter(<span class="string">&quot;l&quot;</span>);</span><br><span class="line">        Locale locale = Locale.getDefault(); <span class="comment">// å¦‚æœæ²¡æœ‰è·å–åˆ°å°±ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„</span></span><br><span class="line">        <span class="comment">//å¦‚æœè¯·æ±‚é“¾æ¥ä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(language))&#123;</span><br><span class="line">            <span class="comment">//åˆ†å‰²è¯·æ±‚å‚æ•°</span></span><br><span class="line">            String[] split = language.split(<span class="string">&quot;_&quot;</span>);</span><br><span class="line">            <span class="comment">//å›½å®¶ï¼Œåœ°åŒº</span></span><br><span class="line">            locale = <span class="keyword">new</span> Locale(split[<span class="number">0</span>],split[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> locale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLocale</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸ºäº†è®©æˆ‘ä»¬çš„åŒºåŸŸåŒ–ä¿¡æ¯èƒ½å¤Ÿç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦å†é…ç½®ä¸€ä¸‹è¿™ä¸ªç»„ä»¶ï¼åœ¨æˆ‘ä»¬è‡ªå·±çš„<code>MvcConofig</code>ä¸‹æ·»åŠ <code>bean</code>ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰©å±•springmvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyLocaleResolver();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é‡å¯é¡¹ç›®ï¼Œæ¥è®¿é—®ä¸€ä¸‹ï¼Œå‘ç°ç‚¹å‡»æŒ‰é’®å¯ä»¥å®ç°æˆåŠŸåˆ‡æ¢!</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒå‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;/a&gt;ç¯å¢ƒå‡†å¤‡&lt;/h1&gt;&lt;h2 id=&quot;é™æ€èµ„æº&quot;&gt;&lt;a href=&quot;#é™æ€èµ„æº&quot; class=&quot;headerlink&quot; title=&quot;é™æ€èµ„æº&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒMVCè‡ªåŠ¨é…ç½®åŸç†</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot08.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot08.html</id>
    <published>2021-06-22T06:33:13.807Z</published>
    <updated>2021-06-22T08:28:25.698Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MVCè‡ªåŠ¨é…ç½®åŸç†"><a href="#MVCè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="MVCè‡ªåŠ¨é…ç½®åŸç†"></a>MVCè‡ªåŠ¨é…ç½®åŸç†</h1><h2 id="å®˜ç½‘é˜…è¯»"><a href="#å®˜ç½‘é˜…è¯»" class="headerlink" title="å®˜ç½‘é˜…è¯»"></a>å®˜ç½‘é˜…è¯»</h2><ul><li>åœ¨è¿›è¡Œé¡¹ç›®ç¼–å†™å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯SpringBootå¯¹æˆ‘ä»¬çš„SpringMVCè¿˜åšäº†å“ªäº›é…ç½®ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰©å±•ï¼Œå¦‚ä½•å®šåˆ¶</li><li>æˆ‘ä»¬å¯ä»¥æºç åˆ†æï¼Œæˆ–è€…é˜…è¯»<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration">å®˜æ–¹æ–‡æ¡£</a>è¿›è¡Œå­¦ä¹ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Spring MVC Auto-configuration</span><br><span class="line"><span class="comment">// Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œã€‚</span></span><br><span class="line">Spring Boot provides auto-configuration <span class="keyword">for</span> Spring MVC that works well with most applications.</span><br><span class="line"><span class="comment">// è‡ªåŠ¨é…ç½®åœ¨Springé»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</span></span><br><span class="line">The auto-configuration adds the following features on top of Springâ€™s defaults:</span><br><span class="line"><span class="comment">// åŒ…å«è§†å›¾è§£æå™¨</span></span><br><span class="line">Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.</span><br><span class="line"><span class="comment">// æ”¯æŒé™æ€èµ„æºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œä»¥åŠwebjars</span></span><br><span class="line">Support <span class="keyword">for</span> serving <span class="keyword">static</span> resources, including support <span class="keyword">for</span> WebJars </span><br><span class="line"><span class="comment">// è‡ªåŠ¨æ³¨å†Œäº†Converterï¼š</span></span><br><span class="line"><span class="comment">// è½¬æ¢å™¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç½‘é¡µæäº¤æ•°æ®åˆ°åå°è‡ªåŠ¨å°è£…æˆä¸ºå¯¹è±¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠ&quot;1&quot;å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹</span></span><br><span class="line"><span class="comment">// Formatterï¼šã€æ ¼å¼åŒ–å™¨ï¼Œæ¯”å¦‚é¡µé¢ç»™æˆ‘ä»¬äº†ä¸€ä¸ª2019-8-10ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºDateå¯¹è±¡ã€‘</span></span><br><span class="line">Automatic registration of Converter, GenericConverter, and Formatter beans.</span><br><span class="line"><span class="comment">// HttpMessageConverters</span></span><br><span class="line"><span class="comment">// SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸€ä¸ªUserå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥å»çœ‹å®˜ç½‘æ–‡æ¡£è§£é‡Šï¼›</span></span><br><span class="line"><span class="function">Support <span class="keyword">for</span> <span class="title">HttpMessageConverters</span> <span class="params">(covered later in <span class="keyword">this</span> document)</span>.</span></span><br><span class="line"><span class="function"><span class="comment">// å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„</span></span></span><br><span class="line"><span class="function">Automatic registration of <span class="title">MessageCodesResolver</span> <span class="params">(covered later in <span class="keyword">this</span> document)</span>.</span></span><br><span class="line"><span class="function"><span class="comment">// é¦–é¡µå®šåˆ¶</span></span></span><br><span class="line"><span class="function">Static index.html support.</span></span><br><span class="line"><span class="function"><span class="comment">// å›¾æ ‡å®šåˆ¶</span></span></span><br><span class="line"><span class="function">Custom Favicon <span class="title">support</span> <span class="params">(covered later in <span class="keyword">this</span> document)</span>.</span></span><br><span class="line"><span class="function"><span class="comment">// åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨ï¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸­ï¼</span></span></span><br><span class="line"><span class="function">Automatic use of a ConfigurableWebBindingInitializer <span class="title">bean</span> <span class="params">(covered later in <span class="keyword">this</span> document)</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">/*</span></span></span><br><span class="line"><span class="function"><span class="comment">å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™Spring Boot MVCåŠŸèƒ½ï¼Œå¹¶ä¸”å¸Œæœ›æ·»åŠ å…¶ä»–MVCé…ç½®ï¼ˆæ‹¦æˆªå™¨ã€æ ¼å¼åŒ–ç¨‹åºã€è§†å›¾æ§åˆ¶å™¨å’Œå…¶ä»–åŠŸèƒ½ï¼‰ï¼Œåˆ™å¯ä»¥æ·»åŠ è‡ªå·±</span></span></span><br><span class="line"><span class="function"><span class="comment">çš„@configurationç±»ï¼Œç±»å‹ä¸ºwebmvcconfiguerï¼Œä½†ä¸æ·»åŠ @EnableWebMvcã€‚å¦‚æœå¸Œæœ›æä¾›</span></span></span><br><span class="line"><span class="function"><span class="comment">RequestMappingHandlerMappingã€RequestMappingHandlerAdapteræˆ–ExceptionHandlerExceptionResolverçš„è‡ªå®šä¹‰</span></span></span><br><span class="line"><span class="function"><span class="comment">å®ä¾‹ï¼Œåˆ™å¯ä»¥å£°æ˜WebMVCregistrationAdapterå®ä¾‹æ¥æä¾›æ­¤ç±»ç»„ä»¶ã€‚</span></span></span><br><span class="line"><span class="function"><span class="comment">*/</span></span></span><br><span class="line"><span class="function">If you want to keep Spring Boot MVC features and you want to add additional MVC configuration </span></span><br><span class="line"><span class="function"><span class="params">(interceptors, formatters, view controllers, and other features)</span>, you can add your own </span></span><br><span class="line"><span class="function">@Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide </span></span><br><span class="line"><span class="function">custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or </span></span><br><span class="line"><span class="function">ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// å¦‚æœæ‚¨æƒ³å®Œå…¨æ§åˆ¶Spring MVCï¼Œå¯ä»¥æ·»åŠ è‡ªå·±çš„@Configurationï¼Œå¹¶ç”¨@EnableWebMvcè¿›è¡Œæ³¨é‡Šã€‚</span></span></span><br><span class="line"><span class="function">If you want to take complete control of Spring MVC, you can add your own @Configuration annotated with @EnableWebMvc.</span></span><br></pre></td></tr></table></figure><h2 id="å†…å®¹åå•†è§†å›¾è§£æå™¨"><a href="#å†…å®¹åå•†è§†å›¾è§£æå™¨" class="headerlink" title="å†…å®¹åå•†è§†å›¾è§£æå™¨"></a>å†…å®¹åå•†è§†å›¾è§£æå™¨</h2><ul><li>SpringBootè‡ªåŠ¨é…ç½®äº†ViewResolverï¼Œä¹Ÿå°±æ˜¯SpringMVCçš„è§†å›¾è§£æå™¨ï¼›å³æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å–å¾—è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œç„¶åç”±è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Œé‡å®šå‘ï¼‰</li><li>æ‰¾åˆ° WebMvcAutoConfiguration ï¼Œ ç„¶åæœç´¢<code>ContentNegotiatingViewResolver</code>ã€‚æ‰¾åˆ°å¦‚ä¸‹æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(ViewResolver.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;viewResolver&quot;, value = ContentNegotiatingViewResolver.class)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ContentNegotiatingViewResolver <span class="title">viewResolver</span><span class="params">(BeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    ContentNegotiatingViewResolver resolver = <span class="keyword">new</span> ContentNegotiatingViewResolver();</span><br><span class="line">    resolver.setContentNegotiationManager(beanFactory.getBean(ContentNegotiationManager.class));</span><br><span class="line">    <span class="comment">// ContentNegotiatingViewResolverä½¿ç”¨æ‰€æœ‰å…¶ä»–è§†å›¾è§£æå™¨æ¥å®šä½è§†å›¾ï¼Œå› æ­¤å®ƒåº”è¯¥å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§</span></span><br><span class="line">    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥ç‚¹è¿›è¿™ç±»çœ‹çœ‹ï¼æ‰¾åˆ°å¯¹åº”çš„è§£æè§†å›¾çš„ä»£ç ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Nullable</span> <span class="comment">// æ³¨è§£è¯´æ˜ï¼š@Nullable å³å‚æ•°å¯ä¸ºnull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> View <span class="title">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    RequestAttributes attrs = RequestContextHolder.getRequestAttributes();</span><br><span class="line">    Assert.state(attrs <span class="keyword">instanceof</span> ServletRequestAttributes, <span class="string">&quot;No current ServletRequestAttributes&quot;</span>);</span><br><span class="line">    List&lt;MediaType&gt; requestedMediaTypes = <span class="keyword">this</span>.getMediaTypes(((ServletRequestAttributes)attrs).getRequest());</span><br><span class="line">    <span class="keyword">if</span> (requestedMediaTypes != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–å€™é€‰çš„è§†å›¾å¯¹è±¡</span></span><br><span class="line">        List&lt;View&gt; candidateViews = <span class="keyword">this</span>.getCandidateViews(viewName, locale, requestedMediaTypes);</span><br><span class="line">        <span class="comment">// é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆçš„è§†å›¾å¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡è¿”å›</span></span><br><span class="line">        View bestView = <span class="keyword">this</span>.getBestView(candidateViews, requestedMediaTypes, attrs);</span><br><span class="line">        <span class="keyword">if</span> (bestView != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> bestView;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»§ç»­ç‚¹è¿›å»çœ‹ï¼Œä»–æ˜¯æ€ä¹ˆè·å¾—å€™é€‰çš„è§†å›¾çš„å‘¢ï¼Ÿ<code>getCandidateViews</code>ä¸­çœ‹åˆ°ä»–æ˜¯æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ‹¿æ¥ï¼Œè¿›è¡Œ<code>while</code>å¾ªç¯ï¼ŒæŒ¨ä¸ªè§£æï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Iterator var5 = <span class="keyword">this</span>.viewResolvers.iterator();</span><br></pre></td></tr></table></figure><div class="note success simple"><p><strong>å¾—å‡ºç»“è®ºï¼š<code>ContentNegotiatingViewResolver</code> è¿™ä¸ªè§†å›¾è§£æå™¨å°±æ˜¯ç”¨æ¥ç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„</strong></p></div><ul><li>å†å»ç ”ç©¶ä¸‹ä»–çš„ç»„åˆé€»è¾‘ï¼Œçœ‹åˆ°æœ‰ä¸ªå±æ€§<code>viewResolvers</code>ï¼Œçœ‹çœ‹å®ƒæ˜¯åœ¨å“ªé‡Œè¿›è¡Œèµ‹å€¼çš„ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initServletContext</span><span class="params">(ServletContext servletContext)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå®ƒæ˜¯ä»beanFactoryå·¥å…·ä¸­è·å–å®¹å™¨ä¸­çš„æ‰€æœ‰è§†å›¾è§£æå™¨</span></span><br><span class="line">    <span class="comment">// ViewRescolver.class æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ¥ç»„åˆçš„</span></span><br><span class="line">    Collection&lt;ViewResolver&gt; matchingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(<span class="keyword">this</span>.obtainApplicationContext(), ViewResolver.class).values();</span><br><span class="line">    ViewResolver viewResolver;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.viewResolvers == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.viewResolvers = <span class="keyword">new</span> ArrayList(matchingBeans.size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...............</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ—¢ç„¶å®ƒæ˜¯åœ¨å®¹å™¨ä¸­å»æ‰¾è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥çŒœæƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»å®ç°ä¸€ä¸ªè§†å›¾è§£æå™¨äº†å‘¢ï¼Ÿ</li><li>æˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­å»æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è¿™ä¸ªç±»å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨çš„å°†å®ƒç»„åˆè¿›æ¥ï¼›æˆ‘ä»¬å»å®ç°ä¸€ä¸‹</li><li>åˆ›å»ºä¸€ä¸ª<code>MyMvcConfig</code>çš„ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰©å±•springmvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Beanæ”¾å…¥Spring</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewResolver <span class="title">myViewResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyViewResolver();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå·±çš„è§†å›¾è§£æå™¨MyViewResolver</span></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬å†™ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œè§†å›¾è§£æå™¨å°±éœ€è¦å®ç°ViewResolveræ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewResolver</span> <span class="keyword">implements</span> <span class="title">ViewResolver</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> View <span class="title">resolveViewName</span><span class="params">(String s, Locale locale)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç„¶åé€šè¿‡<code>Ctrl + N</code>æœç´¢<code>dispatcherServlet</code>æºç ï¼Œæ‰¾åˆ°<code>doDispatch</code>ç‚¹è¿›å»æ‰“ä¸ªæ–­ç‚¹ã€‚å› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½ç»è¿‡<code>doDispatch</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1fe9baec2f6fd8367c5f169e131d77d72cf6925a/2021/06/22/44537c89bc9cdf02ea768c91b81e4087.png"></p><ul><li>æ‰“å¥½æ–­ç‚¹åè¿›è¡Œ<code>debug</code>ï¼Œé‡å¯åéšä¾¿è®¿é—®ä¸€ä¸ªé¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@4d4d38523b162aa7b48444d6ae0f6524670686ed/2021/06/22/0191ef06d5623747c6587ef5b0b62997.png"></p><ul><li>æ‰¾åˆ°è§†å›¾è§£æå™¨<code>ViewResolver</code>,åˆ°æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å°±åœ¨è¿™é‡Œäº†ï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6d4b150d78ba23cd5a05a2f39bea65f2ddf2e711/2021/06/22/8a78a7d35ca2fef143840352ac61b880.png"></p><ul><li>æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦ä½¿ç”¨è‡ªå·±å®šåˆ¶åŒ–çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™Springå®¹å™¨ä¸­æ·»åŠ è¿™ä¸ªç»„ä»¶(Bean)å°±å¥½äº†ï¼å‰©ä¸‹çš„äº‹æƒ…SpringBootå°±ä¼šå¸®æˆ‘ä»¬åšäº†ï¼</li></ul><h2 id="è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"><a href="#è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨" class="headerlink" title="è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"></a>è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨</h2><ul><li><code>Ctrl+N</code>æœç´¢<code>WebMvcAutoConfiguration</code>æ‰¾åˆ°æ ¼å¼åŒ–è½¬æ¢å™¨ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FormattingConversionService <span class="title">mvcConversionService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æ ¼å¼åŒ–è§„åˆ™</span></span><br><span class="line">    WebConversionService conversionService = </span><br><span class="line">        <span class="keyword">new</span> WebConversionService(<span class="keyword">this</span>.mvcProperties.getDateFormat());</span><br><span class="line">    addFormatters(conversionService);</span><br><span class="line">    <span class="keyword">return</span> conversionService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç‚¹å¼€<code>mvcProperties</code>ï¼Œå†ç‚¹å¼€<code>WebMvcProperties</code>ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Date format to use. For instance, `dd/MM/yyyy`. é»˜è®¤çš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String dateFormat;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getDateFormat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.dateFormat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDateFormat</span><span class="params">(String dateFormat)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.format.setDate(dateFormat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬çš„<code>Properties</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªåŠ¨é…ç½®å®ƒï¼</li><li>å¦‚æœé…ç½®äº†è‡ªå·±çš„æ ¼å¼åŒ–æ–¹å¼ï¼Œå°±ä¼šæ³¨å†Œåˆ°<code>Bean</code>ä¸­ç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™ï¼š</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">format:</span></span><br><span class="line">      <span class="attr">date:</span> <span class="string">dd/MM/yyyy</span></span><br></pre></td></tr></table></figure><h1 id="æ‰©å±•SpringMVC"><a href="#æ‰©å±•SpringMVC" class="headerlink" title="æ‰©å±•SpringMVC"></a>æ‰©å±•SpringMVC</h1><h2 id="ä¿®æ”¹é»˜è®¤é…ç½®"><a href="#ä¿®æ”¹é»˜è®¤é…ç½®" class="headerlink" title="ä¿®æ”¹é»˜è®¤é…ç½®"></a>ä¿®æ”¹é»˜è®¤é…ç½®</h2><ul><li>è¿™ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è¿™ä¸ª<code>WebMVC</code>çš„è‡ªåŠ¨é…ç½®åŸç†åˆ†æï¼Œæˆ‘ä»¬è¦å­¦ä¼šä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œé€šè¿‡æºç æ¢ç©¶ï¼Œå¾—å‡ºç»“è®ºï¼›è¿™ä¸ªç»“è®ºä¸€å®šæ˜¯å±äºè‡ªå·±çš„ï¼Œè€Œä¸”ä¸€é€šç™¾é€šã€‚</li><li>SpringBootçš„åº•å±‚ï¼Œå¤§é‡ç”¨åˆ°äº†è¿™äº›è®¾è®¡ç»†èŠ‚æ€æƒ³ï¼Œæ‰€ä»¥ï¼Œæ²¡äº‹éœ€è¦å¤šé˜…è¯»æºç ï¼å¾—å‡ºç»“è®ºï¼›</li><li>SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆå¦‚æœç”¨æˆ·è‡ªå·±é…ç½®<code>@bean</code>ï¼‰ï¼Œå¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨è‡ªåŠ¨é…ç½®çš„ï¼›</li><li>å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è§†å›¾è§£æå™¨ï¼Œå°±å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼</li><li>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€ä¸ª<code>@Configuration</code>æ³¨è§£ç±»ï¼Œå¹¶ä¸”ç±»å‹è¦ä¸º<code>WebMvcConfigurer</code>ï¼Œè¿˜ä¸èƒ½æ ‡æ³¨<code>@EnableWebMvc</code>æ³¨è§£ï¼›æˆ‘ä»¬å»è‡ªå·±å†™ä¸€ä¸ªï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåŒ…å«<code>config</code>ï¼Œå†™ä¸€ä¸ªç±»<code>MyMvcConfig</code>:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åº”ä¸ºç±»å‹è¦æ±‚ä¸ºWebMvcConfigurerï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°å…¶æ¥å£</span></span><br><span class="line"><span class="comment">//å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»æ‰©å±•MVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span></span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/test&quot;</span>).setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®¿é—®é¡µé¢æµ‹è¯•ä¸€ä¸‹ã€‚ç¡®å®ä¹Ÿè·³è½¬è¿‡æ¥äº†ï¼æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬è¦æ‰©å±•SpringMVCï¼Œå®˜æ–¹å°±æ¨èæˆ‘ä»¬è¿™ä¹ˆå»ä½¿ç”¨ï¼Œæ—¢ä¿SpringBootç•™æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@21640a704be46f602f642869079ce974fba25d5d/2021/06/22/7c61aa50afc5fdec6b00db92dc766e17.png"></p><h2 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h2><ul><li><code>WebMvcAutoConfiguration</code> æ˜¯ SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç±»<code>WebMvcAutoConfigurationAdapter</code></li><li>è¿™ä¸ªç±»ä¸Šæœ‰ä¸€ä¸ªæ³¨è§£ï¼Œåœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼š<code>@Import(EnableWebMvcConfiguration.class)</code></li><li>æˆ‘ä»¬ç‚¹è¿›<code>EnableWebMvcConfiguration</code>è¿™ä¸ªç±»çœ‹ä¸€ä¸‹ï¼Œå®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»ï¼š<code>DelegatingWebMvcConfiguration</code></li><li>è¿™ä¸ªçˆ¶ç±»ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„webmvcConfigurer</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å»å¯»æ‰¾ä¸€ä¸ªæˆ‘ä»¬åˆšæ‰è®¾ç½®çš„<code>viewController</code>å½“åšå‚è€ƒï¼Œå‘ç°å®ƒè°ƒç”¨äº†ä¸€ä¸ª</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.configurers.addViewControllers(registry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬ç‚¹è¿›å»çœ‹ä¸€ä¸‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">    Iterator var2 = <span class="keyword">this</span>.delegates.iterator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®æ¥ä¸€èµ·è°ƒç”¨ï¼åŒ…æ‹¬æˆ‘ä»¬è‡ªå·±é…ç½®çš„å’ŒSpringç»™æˆ‘ä»¬é…ç½®çš„</span></span><br><span class="line">        WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();</span><br><span class="line">        delegate.addViewControllers(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success simple"><p><strong>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼šæ‰€æœ‰çš„<code>WebMvcConfiguration</code>éƒ½ä¼šè¢«ä½œç”¨ï¼Œä¸æ­¢Springè‡ªå·±çš„é…ç½®ç±»ï¼Œæˆ‘ä»¬è‡ªå·±çš„é…ç½®ç±»å½“ç„¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</strong></p></div><h2 id="å…¨é¢æ¥ç®¡SpringMVC"><a href="#å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="å…¨é¢æ¥ç®¡SpringMVC"></a>å…¨é¢æ¥ç®¡SpringMVC</h2><ul><li>å…¨é¢æ¥ç®¡å³ï¼šSpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å»é…ç½®ï¼</li><li>åªéœ€åœ¨æˆ‘ä»¬çš„é…ç½®ç±»ä¸­è¦åŠ ä¸€ä¸ª<code>@EnableWebMvc</code></li><li>å¦‚æœæˆ‘ä»¬å…¨é¢æ¥ç®¡äº†SpringMVCäº†ï¼Œæˆ‘ä»¬ä¹‹å‰SpringBootç»™æˆ‘ä»¬é…ç½®çš„é™æ€èµ„æºæ˜ å°„ä¸€å®šä¼šæ— æ•ˆï¼Œæ¯”å¦‚ç»™é…ç½®ç±»åŠ ä¸Šæ³¨è§£ï¼š<code>@EnableWebMvc</code>ï¼Œå°±æ— æ³•è®¿é—®äº†ï¼Œæ‰€æœ‰çš„SpringMVCè‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†ï¼å›å½’åˆ°äº†æœ€åˆçš„æ ·å­</li><li><strong>å½“ç„¶ï¼Œæˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨å…¨é¢æ¥ç®¡SpringMVC</strong></li><li>æ€è€ƒé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆåŠ äº†ä¸€ä¸ªæ³¨è§£ï¼Œè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</li><li>è¿™é‡Œå‘ç°å®ƒæ˜¯å¯¼å…¥äº†ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›å»çœ‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;DelegatingWebMvcConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebMvc &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±» <code>WebMvcConfigurationSupport</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å›é¡¾ä¸€ä¸‹Webmvcè‡ªåŠ¨é…ç½®ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ³¨è§£çš„æ„æ€å°±æ˜¯ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">    ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ€»ç»“ä¸€å¥è¯ï¼š<code>@EnableWebMvc</code>å°†<code>WebMvcConfigurationSupport</code>ç»„ä»¶å¯¼å…¥è¿›æ¥äº†ï¼›è€Œå¯¼å…¥çš„<code>WebMvcConfigurationSupport</code>åªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MVCè‡ªåŠ¨é…ç½®åŸç†&quot;&gt;&lt;a href=&quot;#MVCè‡ªåŠ¨é…ç½®åŸç†&quot; class=&quot;headerlink&quot; title=&quot;MVCè‡ªåŠ¨é…ç½®åŸç†&quot;&gt;&lt;/a&gt;MVCè‡ªåŠ¨é…ç½®åŸç†&lt;/h1&gt;&lt;h2 id=&quot;å®˜ç½‘é˜…è¯»&quot;&gt;&lt;a href=&quot;#å®˜ç½‘é˜…è¯»&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒThymeleafæ¨¡æ¿å¼•æ“</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot07.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot07.html</id>
    <published>2021-06-21T12:54:00.078Z</published>
    <updated>2021-06-22T06:30:45.676Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h1><h2 id="æ¨¡æ¿å¼•æ“"><a href="#æ¨¡æ¿å¼•æ“" class="headerlink" title="æ¨¡æ¿å¼•æ“"></a>æ¨¡æ¿å¼•æ“</h2><ul><li>å‰ç«¯äº¤ç»™æˆ‘ä»¬çš„é¡µé¢ï¼Œæ˜¯htmlé¡µé¢ã€‚å¦‚æœæ˜¯æˆ‘ä»¬ä»¥å‰å¼€å‘ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬è½¬æˆjspé¡µé¢ï¼Œjspå¥½å¤„å°±æ˜¯å½“æˆ‘ä»¬æŸ¥å‡ºä¸€äº›æ•°æ®è½¬å‘åˆ°JSPé¡µé¢ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨jspè½»æ¾å®ç°æ•°æ®çš„æ˜¾ç¤ºï¼ŒåŠäº¤äº’ç­‰ã€‚</li><li>jspæ”¯æŒéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬èƒ½å†™Javaä»£ç ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬ç°åœ¨çš„è¿™ç§æƒ…å†µï¼ŒSpringBootè¿™ä¸ªé¡¹ç›®é¦–å…ˆæ˜¯ä»¥jarçš„æ–¹å¼ï¼Œä¸æ˜¯warï¼Œç¬¬äºŒï¼Œæˆ‘ä»¬ç”¨çš„è¿˜æ˜¯åµŒå…¥å¼çš„Tomcatï¼Œæ‰€ä»¥å‘¢ï¼Œä»–ç°åœ¨é»˜è®¤æ˜¯ä¸æ”¯æŒjspçš„ã€‚</li><li>é‚£ä¸æ”¯æŒjspï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨çº¯é™æ€é¡µé¢çš„æ–¹å¼ï¼Œé‚£ç»™æˆ‘ä»¬å¼€å‘ä¼šå¸¦æ¥éå¸¸å¤§çš„éº»çƒ¦ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</li><li>SpringBootæ¨èä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ä»¬å…¶å®å¤§å®¶å¬åˆ°å¾ˆå¤šï¼Œå…¶å®jspå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œè¿˜æœ‰ç”¨çš„æ¯”è¾ƒå¤šçš„freemarkerï¼ŒåŒ…æ‹¬SpringBootç»™æˆ‘ä»¬æ¨èçš„<code>Thymeleaf</code>ï¼Œæ¨¡æ¿å¼•æ“æœ‰éå¸¸å¤šï¼Œä½†å†å¤šçš„æ¨¡æ¿å¼•æ“ï¼Œä»–ä»¬çš„æ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»€ä¹ˆæ ·ä¸€ä¸ªæ€æƒ³å‘¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š<img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@cfa20fa2bd1a2961f359d3c420bc112f231168ee/2021/06/22/8495420c6b78736f9495761f4954a868.png"></li><li>æ¨¡æ¿å¼•æ“çš„ä½œç”¨å°±æ˜¯æˆ‘ä»¬æ¥å†™ä¸€ä¸ªé¡µé¢æ¨¡æ¿ï¼Œæ¯”å¦‚æœ‰äº›å€¼å‘¢ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å†™ä¸€äº›è¡¨è¾¾å¼ã€‚è€Œè¿™äº›å€¼ï¼Œä»å“ªæ¥å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åå°å°è£…ä¸€äº›æ•°æ®ã€‚ç„¶åæŠŠè¿™ä¸ªæ¨¡æ¿å’Œè¿™ä¸ªæ•°æ®äº¤ç»™æˆ‘ä»¬æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“æŒ‰ç…§æˆ‘ä»¬è¿™ä¸ªæ•°æ®å¸®ä½ æŠŠè¿™è¡¨è¾¾å¼è§£æã€å¡«å……åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ç»™æˆ‘ä»¬å†™å‡ºå»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œéƒ½æ˜¯è¿™ä¸ªæ€æƒ³ã€‚</li></ul><h2 id="å¼•å…¥Thymeleaf"><a href="#å¼•å…¥Thymeleaf" class="headerlink" title="å¼•å…¥Thymeleaf"></a>å¼•å…¥Thymeleaf</h2><ul><li>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></li><li>Thymeleaf åœ¨Github çš„ä¸»é¡µï¼š<a href="https://github.com/thymeleaf/thymeleaf">https://github.com/thymeleaf/thymeleaf</a></li><li>Springå®˜æ–¹æ–‡æ¡£ï¼šæ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></li><li>å¯¹äºspringbootæ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…ä¸éƒ½æ˜¯ä¸€ä¸ªstartçš„äº‹æƒ…å˜›ï¼Œæˆ‘ä»¬å»åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸€ä¸‹</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@15a63e189b308d43e46f2b305d7f6e9b9a23fcbd/2021/06/22/51c759db52da5bd7b98baf3e9f17af77.png"></p><h2 id="Thymeleafåˆ†æ"><a href="#Thymeleafåˆ†æ" class="headerlink" title="Thymeleafåˆ†æ"></a>Thymeleafåˆ†æ</h2><ul><li>é¦–å…ˆå¾—æŒ‰ç…§SpringBootçš„è‡ªåŠ¨é…ç½®åŸç†çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªThymeleafçš„è‡ªåŠ¨é…ç½®è§„åˆ™ï¼Œåœ¨æŒ‰ç…§é‚£ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚</li><li>æˆ‘ä»¬å»æ‰¾ä¸€ä¸‹Thymeleafçš„è‡ªåŠ¨é…ç½®ç±»ï¼š<code>ThymeleafProperties</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(</span></span><br><span class="line"><span class="meta">    prefix = &quot;spring.thymeleaf&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">&quot;classpath:/templates/&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">&quot;.html&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplate = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplateLocation = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> String prefix = <span class="string">&quot;classpath:/templates/&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String suffix = <span class="string">&quot;.html&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String mode = <span class="string">&quot;HTML&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> Charset encoding;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°é»˜è®¤çš„å‰ç¼€å’Œåç¼€ï¼</li><li>æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬çš„htmlé¡µé¢æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„<code>templates</code>ä¸‹ï¼Œ<code>thymeleaf</code>å°±å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨æ¸²æŸ“äº†</li><li>ä½¿ç”¨<code>thymeleaf</code>ä»€ä¹ˆéƒ½ä¸éœ€è¦é…ç½®ï¼Œåªéœ€è¦å°†ä»–æ”¾åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼</li></ul><h2 id="æµ‹è¯•Thymeleaf"><a href="#æµ‹è¯•Thymeleaf" class="headerlink" title="æµ‹è¯•Thymeleaf"></a>æµ‹è¯•Thymeleaf</h2><ul><li>ç¼–å†™ä¸€ä¸ªæµ‹è¯•é¡µé¢  <code>test.html</code> æ”¾åœ¨<code>templates</code> ç›®å½•ä¸‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/xxx&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™ä¸€ä¸ª<code>TestController</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//classpath:/templates/test.html</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨é¡¹ç›®</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@7bbdfb0822574aa436a46bde74f9bb7cb1b47ffa/2021/06/22/650b094f475c4cc649a6bb421b33d4ab.png"></p><h1 id="Thymeleafè¯­æ³•"><a href="#Thymeleafè¯­æ³•" class="headerlink" title="Thymeleafè¯­æ³•"></a>Thymeleafè¯­æ³•</h1><ul><li>å­¦ä¹ è¯­æ³•å¯ä»¥å‚è€ƒThymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a>ï¼Œä¸‹è½½Thymeleafçš„å®˜æ–¹æ–‡æ¡£ï¼</li><li>å®˜ç½‘ç®€å•çš„Thymeleafæ¨¡æ¿</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../css/gtvg.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/gtvg.css&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;home.welcome&#125;&quot;</span>&gt;</span>Welcome to our grocery store!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h2><ul><li>åšä¸€ä¸ªç®€å•çš„ç»ƒä¹ ï¼šæŸ¥å‡ºä¸€äº›æ•°æ®ï¼Œåœ¨é¡µé¢ä¸­å±•ç¤º</li><li>ä¿®æ”¹æµ‹è¯•è¯·æ±‚ï¼Œå¢åŠ æ•°æ®ä¼ è¾“ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    <span class="comment">//å­˜å…¥æ•°æ®</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Hello,Thymeleaf&quot;</span>);</span><br><span class="line">    <span class="comment">//classpath:/templates/test.html</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™å‰ç«¯é¡µé¢ã€‚è¦ä½¿ç”¨thymeleafï¼Œéœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¯¼å…¥å‘½åç©ºé—´çš„çº¦æŸï¼Œæ–¹ä¾¿æç¤º</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/xxx&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--th:textå°±æ˜¯å°†divä¸­çš„å†…å®¹è®¾ç½®ä¸ºå®ƒæŒ‡å®šçš„å€¼ï¼Œå’Œä¹‹å‰å­¦ä¹ çš„Vueä¸€æ ·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1e90252459c60c406457075df2afe97492cb84ad/2021/06/22/ee6698020772ef8fe39136b1812de06a.png"></p><div class="note success simple"><p>æ‰€æœ‰çš„HTMLå…ƒç´ éƒ½å¯ä»¥è¢«thymeleafæ›¿æ¢æ¥ç®¡ï¼Œè¯­æ³•<code>th:å…ƒç´ å</code></p></div><h2 id="Thymeleafè¯­æ³•-1"><a href="#Thymeleafè¯­æ³•-1" class="headerlink" title="Thymeleafè¯­æ³•"></a>Thymeleafè¯­æ³•</h2><ul><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„çš„ <code>th:attr</code> æ¥æ›¿æ¢HTMLä¸­åŸç”Ÿå±æ€§çš„å€¼ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@c4d471d42b5d7ba43afbfd3d2080058fa1014972/2021/06/22/79762d4b558d4dcd7615035652de2dd2.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">        <span class="comment">//å­˜å…¥æ•°æ®</span></span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;users&quot;</span>, Arrays.asList(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">        <span class="comment">//classpath:/templates/test.html</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•é¡µé¢å–å‡ºæ•°æ®</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/xxx&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸è½¬ä¹‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:utext</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--éå†æ•°æ®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--th:eachæ¯æ¬¡éå†éƒ½ä¼šç”Ÿæˆå½“å‰è¿™ä¸ªæ ‡ç­¾ï¼šå®˜ç½‘#9--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span> <span class="attr">th:each</span>=<span class="string">&quot;user :$&#123;users&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¡Œå†…å†™æ³•ï¼šå®˜ç½‘#12--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:each</span>=<span class="string">&quot;user:$&#123;users&#125;&quot;</span>&gt;</span>[[$&#123;user&#125;]]<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@2863d1f934ae0393f3820b9bbbc297b9cb6340a7/2021/06/22/b1c4ddde50cb55a5a6624e4f3bde6265.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Thymeleaf&quot;&gt;&lt;a href=&quot;#Thymeleaf&quot; class=&quot;headerlink&quot; title=&quot;Thymeleaf&quot;&gt;&lt;/a&gt;Thymeleaf&lt;/h1&gt;&lt;h2 id=&quot;æ¨¡æ¿å¼•æ“&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿å¼•æ“&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒWebå¼€å‘é™æ€èµ„æºå¤„ç†</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot06.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot06.html</id>
    <published>2021-06-21T11:39:40.615Z</published>
    <updated>2021-06-21T12:47:32.736Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é™æ€èµ„æºå¤„ç†"><a href="#é™æ€èµ„æºå¤„ç†" class="headerlink" title="é™æ€èµ„æºå¤„ç†"></a>é™æ€èµ„æºå¤„ç†</h1><h2 id="æ˜ å°„è§„åˆ™"><a href="#æ˜ å°„è§„åˆ™" class="headerlink" title="æ˜ å°„è§„åˆ™"></a>æ˜ å°„è§„åˆ™</h2><ul><li>é™æ€èµ„æºæ˜ å°„è§„åˆ™ï¼šSpringBootä¸­ï¼ŒSpringMVCçš„webé…ç½®éƒ½åœ¨<code>WebMvcAutoConfiguration</code> è¿™ä¸ªé…ç½®ç±»é‡Œé¢ï¼›</li><li><code>WebMvcAutoConfigurationAdapter</code> ä¸­æœ‰å¾ˆå¤šé…ç½®æ–¹æ³•ï¼›æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š<code>addResourceHandlers</code> æ·»åŠ èµ„æºå¤„ç†</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        <span class="comment">// å·²ç¦ç”¨é»˜è®¤èµ„æºå¤„ç†</span></span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç¼“å­˜æ§åˆ¶</span></span><br><span class="line">    Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">    CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line">    <span class="comment">// webjars é…ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>)</span><br><span class="line">                                             .addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é™æ€èµ„æºé…ç½®</span></span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br><span class="line">                                             .addResourceLocations(getResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»æºä»£ç ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ <code>/webjars/**</code> ï¼Œ éƒ½éœ€è¦å» <code>classpath:/META-INF/resources/webjars/</code> æ‰¾å¯¹åº”çš„èµ„æºï¼›</li></ul><h2 id="webjars"><a href="#webjars" class="headerlink" title="webjars"></a>webjars</h2><ul><li><code>Webjars</code>æœ¬è´¨å°±æ˜¯ä»¥<code>jar</code>åŒ…çš„æ–¹å¼å¼•å…¥æˆ‘ä»¬çš„é™æ€èµ„æº ï¼Œ æˆ‘ä»¬ä»¥å‰è¦å¯¼å…¥ä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ï¼Œç›´æ¥å¯¼å…¥å³å¯</li><li>ä½¿ç”¨SpringBootéœ€è¦ä½¿ç”¨<code>Webjars</code>ï¼Œå¯ä»¥å‚è€ƒå®˜ç½‘ï¼š<a href="https://www.webjars.org/">https://www.webjars.org</a></li><li>è¦ä½¿ç”¨<code>jQuery</code>ï¼Œæˆ‘ä»¬åªè¦è¦å¼•å…¥jQueryå¯¹åº”ç‰ˆæœ¬çš„pomä¾èµ–å³å¯ï¼</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0e251dad9d03947496d3a26171d6cda5f7ea6033/2021/06/21/7a8db79bb19486dd3a8119cbf51ae59a.png"></p><ul><li>å¯ä»¥é€šè¿‡é‡å¯æœåŠ¡å™¨è®¿é—®ä¸€ä¸‹é™æ€èµ„æºï¼Œ<code>/webjars/</code>åé¢é»˜è®¤è·Ÿä¸‰çº§ç›®å½•<code>/META-INF/resources/webjars/</code>ï¼Œæ¯”å¦‚ä½¿ç”¨å¦‚ä¸‹åœ°å€è®¿é—®</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8080&#x2F;webjars&#x2F;jquery&#x2F;3.6.0&#x2F;jquery.js</span><br></pre></td></tr></table></figure><h2 id="ResourceProperties"><a href="#ResourceProperties" class="headerlink" title="ResourceProperties"></a>ResourceProperties</h2><ul><li>å®é™…å¼€å‘ä¸­ä½¿ç”¨<code>webjar</code>æ–¹å¼å¯¼å…¥é™æ€èµ„æºå¹¶ä¸å®ç”¨ã€‚æˆ‘ä»¬å»æ‰¾<code>staticPathPattern</code>å‘ç°ç¬¬äºŒç§æ˜ å°„è§„åˆ™ ï¼š<code>/**</code> , è®¿é—®å½“å‰çš„é¡¹ç›®ä»»æ„èµ„æºï¼Œå®ƒä¼šå»æ‰¾ <code>resourceProperties</code> è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹åˆ†æï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/ è¿›å…¥æ–¹æ³•</span><br><span class="line"><span class="keyword">public</span> String[] getStaticLocations() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.staticLocations;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°è·¯å¾„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; </span><br><span class="line">    <span class="string">&quot;classpath:/META-INF/resources/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;classpath:/resources/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;classpath:/static/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;classpath:/public/&quot;</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>ResourceProperties</code> å¯ä»¥è®¾ç½®å’Œæˆ‘ä»¬é™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼›è¿™é‡Œé¢æŒ‡å‘äº†å®ƒä¼šå»å¯»æ‰¾èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œå³ä¸Šé¢æ•°ç»„çš„å†…å®¹ã€‚</li><li>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œä»¥ä¸‹å››ä¸ªç›®å½•å­˜æ”¾çš„é™æ€èµ„æºå¯ä»¥è¢«æˆ‘ä»¬è¯†åˆ«ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;classpath:/META-INF/resources/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/resources/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/static/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/public/&quot;</span></span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å¯ä»¥åœ¨<code>resources</code>æ ¹ç›®å½•ä¸‹æ–°å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œéƒ½å¯ä»¥å­˜æ”¾æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ï¼›</li><li>æ¯”å¦‚æˆ‘ä»¬è®¿é—® <code>http://localhost:8080/1.js</code> , ä»–å°±ä¼šå»è¿™äº›æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼›</li><li>å½“å‡ºç°é‡å¤é™æ€èµ„æºæ—¶<code>resources</code>ä¸‹çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œ<code>static</code>å…¶æ¬¡ï¼Œç„¶å<code>public</code>ä¼˜å…ˆçº§æœ€ä½</li><li>ä¸€èˆ¬åœ¨<code>public</code>ä¸‹æ”¾ä¸€ä¸‹å…¬å…±çš„èµ„æºï¼Œæ¯”å¦‚Jsã€Cssã€‚åœ¨<code>static</code>ä¸‹æ”¾ä¸€ä¸‹é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€‚<code>resources</code>ä¸‹å¯ä»¥å­˜æ”¾ä¸€äº›uploadä¸Šä¼ çš„æ–‡ä»¶</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@b37fdd67e5ab152cf6210d9c9a06d6206ffb68f1/2021/06/21/045ce9d0a441f40ed690030ef0096998.png"></p><h2 id="è‡ªå®šä¹‰èµ„æºè·¯å¾„"><a href="#è‡ªå®šä¹‰èµ„æºè·¯å¾„" class="headerlink" title="è‡ªå®šä¹‰èµ„æºè·¯å¾„"></a>è‡ªå®šä¹‰èµ„æºè·¯å¾„</h2><ul><li>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šä¸€ä¸‹ï¼Œå“ªäº›æ–‡ä»¶å¤¹æ˜¯éœ€è¦æˆ‘ä»¬æ”¾é™æ€èµ„æºæ–‡ä»¶çš„ï¼Œåœ¨<code>application.properties</code>ä¸­é…ç½®ï¼›</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.resources.static-locations</span>=<span class="string">classpath:/coding/,classpath:/lzy/</span></span><br></pre></td></tr></table></figure><ul><li>ä¸€æ—¦è‡ªå·±å®šä¹‰äº†é™æ€æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŸæ¥çš„è‡ªåŠ¨é…ç½®å°±éƒ½ä¼šå¤±æ•ˆäº†ï¼</li></ul><h1 id="é¦–é¡µå¤„ç†"><a href="#é¦–é¡µå¤„ç†" class="headerlink" title="é¦–é¡µå¤„ç†"></a>é¦–é¡µå¤„ç†</h1><h2 id="æ¬¢è¿é¡µæ˜ å°„"><a href="#æ¬¢è¿é¡µæ˜ å°„" class="headerlink" title="æ¬¢è¿é¡µæ˜ å°„"></a>æ¬¢è¿é¡µæ˜ å°„</h2><ul><li>ç»§ç»­æŸ¥çœ‹<code>WebMvcAutoConfiguration</code>æºç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                           FormattingConversionService mvcConversionService,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                           ResourceUrlProvider mvcResourceUrlProvider)</span> </span>&#123;</span><br><span class="line">    WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="keyword">new</span> WelcomePageHandlerMapping(</span><br><span class="line">        <span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(), <span class="comment">// getWelcomePage è·å¾—æ¬¢è¿é¡µ</span></span><br><span class="line">        <span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">    <span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç‚¹è¿›å»ç»§ç»­çœ‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Optional&lt;Resource&gt; <span class="title">getWelcomePage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String[] locations = getResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">    <span class="comment">// ::æ˜¯java8 ä¸­æ–°å¼•å…¥çš„è¿ç®—ç¬¦</span></span><br><span class="line">    <span class="comment">// Class::functionçš„æ—¶å€™functionæ˜¯å±äºClassçš„ï¼Œåº”è¯¥æ˜¯é™æ€æ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="comment">// this::functionçš„funtionæ˜¯å±äºè¿™ä¸ªå¯¹è±¡çš„ã€‚</span></span><br><span class="line">    <span class="comment">// ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ç§è¯­æ³•ç³–è€Œå·²ï¼Œæ˜¯ä¸€ç§ç®€å†™</span></span><br><span class="line">    <span class="keyword">return</span> Arrays.stream(locations).map(<span class="keyword">this</span>::getIndexHtml).filter(<span class="keyword">this</span>::isReadable).findFirst();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¬¢è¿é¡µå°±æ˜¯ä¸€ä¸ªlocationä¸‹çš„çš„ index.html è€Œå·²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Resource <span class="title">getIndexHtml</span><span class="params">(String location)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.resourceLoader.getResource(location + <span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ¬¢è¿é¡µï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ <code>index.html</code> é¡µé¢ï¼›è¢« <code>/**</code> æ˜ å°„ã€‚</li><li>æ¯”å¦‚åœ¨ä»¥ä¸Šé™æ€èµ„æºçš„<code>public</code>æ–‡ä»¶å¤¹åœ¨æ–°å»ºé¦–é¡µ<code>index.html</code>ã€‚è®¿é—®  <code>http://localhost:8080/</code> ï¼Œå°±ä¼šæ‰¾é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„ <code>index.html</code></li></ul><div class="note success simple"><p>å…¶å®è¿˜æœ‰ä¸€ä¸ª<code>templates</code>æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­˜æ”¾é™æ€èµ„æºã€‚ä½†å…¶åªèƒ½æœ‰Controllerå±‚è®¿é—®ï¼Œç›¸å½“äºWEB-INFï¼Œé¦–é¡µ<code>index.html</code>ä¸€èˆ¬å­˜æ”¾åœ¨<code>templates</code>æ–‡ä»¶å¤¹ä¸­</p></div><h2 id="ç½‘ç«™å›¾æ ‡"><a href="#ç½‘ç«™å›¾æ ‡" class="headerlink" title="ç½‘ç«™å›¾æ ‡"></a>ç½‘ç«™å›¾æ ‡</h2><ul><li>ä¸å…¶ä»–é™æ€èµ„æºä¸€æ ·ï¼ŒSpring Bootåœ¨é…ç½®çš„é™æ€å†…å®¹ä½ç½®ä¸­æŸ¥æ‰¾ <code>favicon.ico</code>ã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå®ƒå°†è‡ªåŠ¨ç”¨ä½œåº”ç”¨ç¨‹åºçš„<code>favicon</code></li><li>å…³é—­SpringBooté»˜è®¤å›¾æ ‡</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³é—­é»˜è®¤å›¾æ ‡</span></span><br><span class="line"><span class="meta">spring.mvc.favicon.enabled</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure><ul><li>è‡ªå·±æ”¾ä¸€ä¸ªå›¾æ ‡åœ¨é™æ€èµ„æºç›®å½•ä¸‹ï¼Œæ¯”å¦‚ <code>public</code> ç›®å½•ä¸‹</li><li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼åˆ·æ–°ç½‘é¡µï¼Œå‘ç°å›¾æ ‡å·²ç»å˜æˆè‡ªå·±çš„äº†ï¼</li></ul><div class="note success simple"><p>é™ç‰ˆæœ¬åªéœ€è¦ä¿®æ”¹<code>pom.xml</code>çš„<code>parent</code>çš„ç‰ˆæœ¬å³å¯</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é™æ€èµ„æºå¤„ç†&quot;&gt;&lt;a href=&quot;#é™æ€èµ„æºå¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;é™æ€èµ„æºå¤„ç†&quot;&gt;&lt;/a&gt;é™æ€èµ„æºå¤„ç†&lt;/h1&gt;&lt;h2 id=&quot;æ˜ å°„è§„åˆ™&quot;&gt;&lt;a href=&quot;#æ˜ å°„è§„åˆ™&quot; class=&quot;headerlink&quot; title=&quot;æ˜ </summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒè‡ªåŠ¨é…ç½®åŸç†åŠè‡ªå®šä¹‰starter</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot05.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot05.html</id>
    <published>2021-06-21T10:15:25.113Z</published>
    <updated>2021-06-21T11:39:33.961Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h1><h2 id="åˆ†æåŸç†"><a href="#åˆ†æåŸç†" class="headerlink" title="åˆ†æåŸç†"></a>åˆ†æåŸç†</h2><ul><li>ä»¥<code>HttpEncodingAutoConfiguration</code>ï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼›</span></span><br><span class="line"><span class="meta">@Configuration</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›</span></span><br><span class="line">  <span class="comment">//è¿›å…¥è¿™ä¸ªHttpPropertiesæŸ¥çœ‹ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼›</span></span><br><span class="line">  <span class="comment">//å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;HttpProperties.class&#125;)</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//Springåº•å±‚@Conditionalæ³¨è§£</span></span><br><span class="line">  <span class="comment">//æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›</span></span><br><span class="line">  <span class="comment">//è¿™é‡Œçš„æ„æ€å°±æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(</span></span><br><span class="line"><span class="meta">    type = Type.SERVLET</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;CharacterEncodingFilter.class&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®ï¼šspring.http.encoding.enabledï¼›</span></span><br><span class="line">  <span class="comment">//å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</span></span><br><span class="line">  <span class="comment">//å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®pring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(</span></span><br><span class="line"><span class="meta">    prefix = &quot;spring.http.encoding&quot;,</span></span><br><span class="line"><span class="meta">    value = &#123;&quot;enabled&quot;&#125;,</span></span><br><span class="line"><span class="meta">    matchIfMissing = true</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Encoding properties;</span><br><span class="line">    <span class="comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingAutoConfiguration</span><span class="params">(HttpProperties properties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.properties = properties.getEncoding();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span> <span class="comment">//åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CharacterEncodingFilter <span class="title">characterEncodingFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">        filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">        filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST));</span><br><span class="line">        filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE));</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success simple"><p><strong>ä¸€å¥è¯æ€»ç»“ ï¼šæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼</strong></p></div><ul><li>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›</li><li>è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„<code>properties</code>ç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</li><li>æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨<code>xxxxProperties</code>ç±»ä¸­å°è£…ç€ï¼›</li><li>é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.http&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpProperties</span> </span>&#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å»<code>.yml</code>é…ç½®æ–‡ä»¶é‡Œé¢è¯•è¯•å‰ç¼€ï¼Œçœ‹æç¤ºï¼</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@c17a996ac6b346c9f55c46c619655fc4ac6c5a33/2021/06/21/6bd9bff64cc34ca22a2a055e2542ca41.png" width="50%"><ul><li>SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</li><li>æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼›</li><li>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶å­˜åœ¨åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ‰‹åŠ¨é…ç½®äº†ï¼‰</li><li>ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»<code>properties</code>ç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ï¼›<ul><li><code>xxxxAutoConfigurartion</code>ï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</li><li><code>xxxxProperties</code>ï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</li></ul></li></ul><h2 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h2><ul><li>è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›<code>@Conditional</code>æ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</li><li>ä½œç”¨ï¼šå¿…é¡»æ˜¯<code>@Conditional</code>æŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@dd2d9f69ac0099b107f9a29a92ee55a9547bbf39/2021/06/21/7cce9e37eaf2d76bde0b8bec5bf70422.png"></p><ul><li>é‚£ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åŠ è½½äº†è¿™ä¹ˆå¤šçš„é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆäº†</li><li>é‚£å¦‚ä½•çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼Ÿå¯ä»¥é€šè¿‡å¯ç”¨ <code>debug=true</code>å±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯springbootçš„è°ƒè¯•ç±»</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¾“å‡ºçš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ†ä»¥ä¸‹ä¸‰ç±»<ul><li><code>Positive matches</code>:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼šæ­£åŒ¹é…ï¼‰</li><li><code>Negative matches</code>:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼šè´ŸåŒ¹é…ï¼‰</li><li><code>Unconditional classes</code>: ï¼ˆæ²¡æœ‰æ¡ä»¶çš„ç±»ï¼‰</li></ul></li></ul><h1 id="è‡ªå®šä¹‰Starter"><a href="#è‡ªå®šä¹‰Starter" class="headerlink" title="è‡ªå®šä¹‰Starter"></a>è‡ªå®šä¹‰Starter</h1><h2 id="å¯åŠ¨å™¨è¯´æ˜"><a href="#å¯åŠ¨å™¨è¯´æ˜" class="headerlink" title="å¯åŠ¨å™¨è¯´æ˜"></a>å¯åŠ¨å™¨è¯´æ˜</h2><ul><li>å¯åŠ¨å™¨æ¨¡å—æ˜¯ä¸€ä¸ª ç©º <code>jar</code> æ–‡ä»¶ï¼Œä»…æä¾›è¾…åŠ©æ€§ä¾èµ–ç®¡ç†ï¼Œè¿™äº›ä¾èµ–å¯èƒ½ç”¨äºè‡ªåŠ¨è£…é…æˆ–è€…å…¶ä»–ç±»åº“ï¼›</li><li>å®˜æ–¹å‘½å<ul><li>å‰ç¼€ï¼š<code>spring-boot-starter-xxx</code></li><li>æ¯”å¦‚ï¼šspring-boot-starter-webâ€¦.</li></ul></li><li>è‡ªå®šä¹‰å‘½åï¼š<ul><li><code>xxx-spring-boot-starter</code></li><li>æ¯”å¦‚ï¼šmybatis-spring-boot-starter</li></ul></li></ul><h2 id="å¯åŠ¨å™¨å‡†å¤‡"><a href="#å¯åŠ¨å™¨å‡†å¤‡" class="headerlink" title="å¯åŠ¨å™¨å‡†å¤‡"></a>å¯åŠ¨å™¨å‡†å¤‡</h2><ul><li>æ–°å»ºä¸€ä¸ªç©ºé¡¹ç›® <code>spring-boot-starter-diy</code></li><li>å†æ–°å»ºä¸€ä¸ªæ™®é€šMavenæ¨¡å—ï¼š<code>lzy-spring-boot-starter</code></li><li>å†æ–°å»ºä¸€ä¸ªSpringBootæ¨¡å—ï¼š<code>lzy-spring-boot-starter-autoconfigure</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@99746fd9ed84f59f348ef3fbbfbb6238d601d4c3/2021/06/21/300bd95530a62d45cc103090e9c24419.png"></p><ul><li><p>åŸºæœ¬ç»“æ„å¦‚ä¸‹<img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@c636f358db9cd39bea9959164134d2ef5c987b21/2021/06/21/fbba6ededad338639191f0c8f15dba58.png"></p></li><li><p> åœ¨çˆ¶å·¥ç¨‹ä¸­ å¯¼å…¥  <code>autoconfigure</code> çš„ä¾èµ–ï¼</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.lzy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lzy-spring-boot-starter-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å°† <code>autoconfigure</code> é¡¹ç›®ä¸‹å¤šä½™çš„æ–‡ä»¶éƒ½åˆ æ‰ï¼Œ<code>pom.xml</code>ä¸­åªç•™ä¸‹ä¸€ä¸ª <code>starter</code>ï¼Œè¿™æ˜¯æ‰€æœ‰çš„å¯åŠ¨å™¨åŸºæœ¬é…ç½®ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@a3e45d4a46d21c24d91e0e1ae8f23a4d3abcdf49/2021/06/21/0dc8c5c76f9115447009d01daae2e7e4.png"></p><h2 id="å¯åŠ¨å™¨é…ç½®"><a href="#å¯åŠ¨å™¨é…ç½®" class="headerlink" title="å¯åŠ¨å™¨é…ç½®"></a>å¯åŠ¨å™¨é…ç½®</h2><ul><li>ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è‡ªåŠ¨é…ç½®åŸç†&quot;&gt;&lt;a href=&quot;#è‡ªåŠ¨é…ç½®åŸç†&quot; class=&quot;headerlink&quot; title=&quot;è‡ªåŠ¨é…ç½®åŸç†&quot;&gt;&lt;/a&gt;è‡ªåŠ¨é…ç½®åŸç†&lt;/h1&gt;&lt;h2 id=&quot;åˆ†æåŸç†&quot;&gt;&lt;a href=&quot;#åˆ†æåŸç†&quot; class=&quot;headerlink&quot; title=&quot;åˆ†</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SSMé¡¹ç›®ğŸ¯ç½‘æ˜“äº‘éŸ³ä¹å®æˆ˜ä¹‹ç™»å½•æ¨¡å—å’Œæ–‡ä»¶ä¸Šä¼ </title>
    <link href="http://xiaoliblog.cn/page/neteaseshop04.html"/>
    <id>http://xiaoliblog.cn/page/neteaseshop04.html</id>
    <published>2021-06-19T14:09:26.213Z</published>
    <updated>2021-06-21T08:57:56.754Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç™»å½•è§†å›¾"><a href="#ç™»å½•è§†å›¾" class="headerlink" title="ç™»å½•è§†å›¾"></a>ç™»å½•è§†å›¾</h1><ul><li>ç™»å½•é¡µé¢å½“ç”¨æˆ·åå¤±å»ç„¦ç‚¹åä¼šå¼‚æ­¥è·å–ç”¨æˆ·å¤´åƒä¿¡æ¯</li><li>ç™»å½•è°ƒç”¨äº†è…¾è®¯äº‘çš„æ»‘åŠ¨éªŒè¯ç æ¥å£</li></ul><h2 id="HTMLè§†å›¾"><a href="#HTMLè§†å›¾" class="headerlink" title="HTMLè§†å›¾"></a>HTMLè§†å›¾</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login layui-anim layui-anim-scaleSpring&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ç½‘æ˜“äº‘ç”¨æˆ·ç™»å½•<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/../../static/images/logo/sign-in-avatar.svg&quot;</span> <span class="attr">id</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color:#7f8085;&quot;</span>&gt;</span> éŸ³ä¹çš„åŠ›é‡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;r-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;30&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·ç”¨æˆ·å/é‚®ç®±&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">size</span>=<span class="string">&quot;30&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span> è®°ä½å¯†ç <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH&#125;/user/findpw&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;forgetps&quot;</span>&gt;</span>å¿˜è®°å¯†ç ?<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;loginSubmit()&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/admin/tologin&quot;</span>&gt;</span>ç®¡ç†å‘˜ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH&#125;/user/register&quot;</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>ç«‹å³æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@7eeea5450a9bee0261a5f9df0413920efa3172f2/2021/06/19/0d484cf4d6df1974d7f19b2f007fab3d.png"></p><h2 id="JSéƒ¨åˆ†"><a href="#JSéƒ¨åˆ†" class="headerlink" title="JSéƒ¨åˆ†"></a>JSéƒ¨åˆ†</h2><ul><li>å¼‚æ­¥è·å–å¤´åƒä¿¡æ¯</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–è¡¨å•å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> $username = $(<span class="string">&#x27;#username&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $password = $(<span class="string">&#x27;#password&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $btn = $(<span class="string">&#x27;#submit&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $form = $(<span class="string">&#x27;#r-form&#x27;</span>);</span><br><span class="line"><span class="comment">//å¦‚æœå¤±å»ç„¦ç‚¹ å»åå°æ‹¿å–å¤´åƒæ•°æ®</span></span><br><span class="line">$username.blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">&#x27;$&#123;APP_PATH&#125;/getUserAvatar&#x27;</span>,</span><br><span class="line">        data:&#123;<span class="attr">username</span>:$username.val()&#125;,</span><br><span class="line">        type:<span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="comment">//flag = 0,è¯´æ˜å­˜åœ¨ï¼Œå¾—åˆ°userå¯¹è±¡</span></span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">res.flag == <span class="number">1</span> </span>)</span>&#123;</span><br><span class="line">                $(<span class="string">&#x27;#avatar&#x27;</span>).attr(<span class="string">&#x27;src&#x27;</span>,res.hashMap.user.avatar)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                layer.msg(res.message,&#123;<span class="attr">icon</span>:<span class="number">2</span>,<span class="attr">time</span>:<span class="number">600</span>&#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚æ»‘åŠ¨éªŒè¯ç </li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">/éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ä¸ºç©ºçš„å‡½æ•°</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsNull</span>(<span class="params">username, password</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> val1 = username.val();</span><br><span class="line">    <span class="keyword">var</span> val2 = password.val();</span><br><span class="line">    <span class="keyword">if</span> (val1 == <span class="string">&#x27;&#x27;</span> || val2 == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æäº¤æ»‘åŠ¨éªŒè¯ç </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loginSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//è¡¨å•ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (IsNull($username, $password)) &#123;</span><br><span class="line">        layer.msg(<span class="string">&#x27;ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º&#x27;</span>,&#123;<span class="attr">time</span>:<span class="number">600</span>,<span class="attr">icon</span>:<span class="number">2</span>&#125;);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> loadIndex = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ»‘åŠ¨éªŒè¯ç å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> slideCode = <span class="keyword">new</span> TencentCaptcha(<span class="string">&#x27;2037160931&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// resï¼ˆç”¨æˆ·ä¸»åŠ¨å…³é—­éªŒè¯ç ï¼‰= &#123;ret: 2, ticket: null&#125;</span></span><br><span class="line">        <span class="comment">// resï¼ˆéªŒè¯æˆåŠŸï¼‰ = &#123;ret: 0, ticket: &quot;String&quot;, randstr: &quot;String&quot;&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (res.ret === <span class="number">0</span>) &#123;</span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                type: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">                url: <span class="string">&quot;$&#123;APP_PATH&#125;/login&quot;</span>,</span><br><span class="line">                data: &#123;<span class="attr">username</span>:$username.val(),<span class="attr">password</span>:$password.val(),<span class="attr">ticket</span>:res.ticket,<span class="attr">randstr</span>:res.randstr&#125;, <span class="comment">//æäº¤çš„æ•°æ®</span></span><br><span class="line">                dataType: <span class="string">&quot;json&quot;</span>,  <span class="comment">//æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹,ç”¨äºè§£å†³è·¨åŸŸé—®é¢˜</span></span><br><span class="line">                beforeSend:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    loadIndex = layer.load(<span class="number">0</span>,&#123;<span class="attr">shade</span>:[<span class="number">0.1</span>,<span class="string">&#x27;#fff&#x27;</span>]&#125;) <span class="comment">//0.1é€æ˜åº¦çš„ç™½è‰²èƒŒæ™¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">                complete:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    layer.close(loadIndex)</span><br><span class="line">                &#125;,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>)</span>&#123;</span><br><span class="line">                    <span class="function"><span class="title">if</span>(<span class="params">res.flag == <span class="number">1</span></span>)</span>&#123;</span><br><span class="line">                        layer.msg(<span class="string">&quot;ç™»å½•éªŒè¯æˆåŠŸ&quot;</span>,&#123;<span class="attr">time</span>:<span class="number">600</span>,<span class="attr">icon</span>:<span class="number">1</span>&#125;);</span><br><span class="line">                        <span class="built_in">window</span>.location.href = <span class="string">&quot;$&#123;APP_PATH&#125;/index&quot;</span></span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        layer.msg(res.message,&#123;<span class="attr">time</span>:<span class="number">600</span>,<span class="attr">icon</span>:<span class="number">2</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                error: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">                    <span class="comment">//è¯·æ±‚å¤±è´¥</span></span><br><span class="line">                    <span class="built_in">console</span>.log(e.status)</span><br><span class="line">                    <span class="built_in">console</span>.log(e.responseText)</span><br><span class="line">                    layer.msg(<span class="string">&quot;ä¸å¥½æ„æ€ï¼ŒæœåŠ¡å™¨è·‘åˆ°ç«æ˜Ÿå»äº†ï¼Œç™»å½•å¼‚å¸¸ï¼&quot;</span>,&#123;<span class="attr">time</span>:<span class="number">600</span>,<span class="attr">icon</span>:<span class="number">2</span>&#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            layer.msg(<span class="string">&#x27;éªŒè¯é”™è¯¯&#x27;</span>,&#123;<span class="attr">time</span>:<span class="number">600</span>,<span class="attr">icon</span>:<span class="number">2</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    slideCode.show(); <span class="comment">//æ˜¾ç¤ºæ»‘åŠ¨éªŒè¯ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åç«¯å¤„ç†"><a href="#åç«¯å¤„ç†" class="headerlink" title="åç«¯å¤„ç†"></a>åç«¯å¤„ç†</h1><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><ul><li>é¦–å…ˆæ˜¯å¤„ç†å¼‚æ­¥è·å–å¤´åƒä¿¡æ¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼‚æ­¥éªŒè¯ç”¨æˆ·å¤´åƒ</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/getUserAvatar&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">getUserAvatar</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//åç«¯æ ¡éªŒ</span></span><br><span class="line">   String regName = <span class="string">&quot;(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)&quot;</span>;</span><br><span class="line">   <span class="comment">//å¦‚æœä¸åŒ¹é…</span></span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="keyword">if</span>(!username.matches(regName))&#123;</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;ç”¨æˆ·åå¿…é¡»æ˜¯6-16æ•°å­—æˆ–å­—æ¯çš„ç»„åˆï¼Œæˆ–è€…2-5ä½æ±‰å­—&quot;</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      User user = userService.queryUserByUsername(username);</span><br><span class="line">      <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="comment">//ç”¨æˆ·å­˜åœ¨</span></span><br><span class="line">         returnMsg.isSuccess().add(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         returnMsg.fail(<span class="string">&quot;ç”¨æˆ·åä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span>  returnMsg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¤„ç†æ»‘åŠ¨éªŒè¯ç è¯·æ±‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">login</span><span class="params">(HttpServletRequest request, String ticket, String randstr)</span> </span>&#123;</span><br><span class="line">   String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">   String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">   DescribeCaptchaResult describeCaptchaResult = <span class="keyword">new</span> DescribeCaptchaResult();</span><br><span class="line">   User user1 = userService.queryUserBynameAndpwd(username, password);</span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="comment">//System.out.println(&quot;éªŒè¯ç ç»“æœ:&quot;+describeCaptchaResult.codeResponse(ticket,randstr));</span></span><br><span class="line">   <span class="comment">//å¦‚æœéªŒè¯ç è¯»å–éªŒè¯æˆåŠŸ</span></span><br><span class="line">   <span class="keyword">if</span> (describeCaptchaResult.codeResponse(ticket, randstr) &amp;&amp; user1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="comment">//ä¼ ä¸€ä¸ªç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">      <span class="comment">//ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°Session</span></span><br><span class="line">      request.getSession().setAttribute(SessionConstants.USER_SESSION, user1);</span><br><span class="line">      returnMsg.isSuccess(); <span class="comment">//æˆåŠŸflag=1</span></span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;ç™»å½•éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•!&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;d</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œä½¿ç”¨äº†å¸¸é‡å°è£…ç”¨æˆ·Sessionï¼Œå¯¹ä¸€äº›å…¨å±€ä½¿ç”¨çš„å¸¸é‡è¿›è¡Œå°è£…æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯ã€‚ä¾¿äºåæœŸç»´æŠ¤</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰å…¨å±€Sessionå¸¸é‡</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionConstants</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç”¨æˆ·ç™»å½•Session</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String USER_SESSION = <span class="string">&quot;userInfo&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ»‘åŠ¨éªŒè¯ç å·¥å…·ç±»"><a href="#æ»‘åŠ¨éªŒè¯ç å·¥å…·ç±»" class="headerlink" title="æ»‘åŠ¨éªŒè¯ç å·¥å…·ç±»"></a>æ»‘åŠ¨éªŒè¯ç å·¥å…·ç±»</h2><div class="note success simple"><p>ç”±äºä»£ç ä¸­éœ€è¦è·å–ç‰¹åœ°å‚æ•°ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ä¸äºˆå…¬å¸ƒï¼Œè¯·è¯»è€…è‡ªè¡Œè·å–å‚æ•°</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.captcha.v20190722.CaptchaClient;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.captcha.v20190722.models.DescribeCaptchaResultRequest;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.captcha.v20190722.models.DescribeCaptchaResultResponse;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.common.Credential;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.common.exception.TencentCloudSDKException;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.common.profile.ClientProfile;</span><br><span class="line"><span class="keyword">import</span> com.tencentcloudapi.common.profile.HttpProfile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DescribeCaptchaResult</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DescribeCaptchaResult</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å»è…¾è®¯äº‘æœåŠ¡è·å–ç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">codeResponse</span><span class="params">(String ticket,String randstr)</span></span>&#123;</span><br><span class="line">        String str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªè®¤è¯å¯¹è±¡ï¼Œå…¥å‚éœ€è¦ä¼ å…¥è…¾è®¯äº‘è´¦æˆ·å¯†é’¥å¯¹ secretId å’Œ secretKey</span></span><br><span class="line">            Credential cred = <span class="keyword">new</span> Credential(<span class="string">&quot;AKIDyhngMxxxxf3KR&quot;</span>,<span class="string">&quot;Zu1tqeEZbMvxxxYBYeBOO7&quot;</span>);</span><br><span class="line">            <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ª http é€‰é¡¹ï¼Œå¯é€‰ï¼Œæ— ç‰¹æ®Šéœ€æ±‚æ—¶å¯ä»¥è·³è¿‡</span></span><br><span class="line">            HttpProfile httpProfile = <span class="keyword">new</span> HttpProfile();</span><br><span class="line">            <span class="comment">//æ¥å£è¯·æ±‚åŸŸåï¼š captcha.tencentcloudapi.com</span></span><br><span class="line">            httpProfile.setEndpoint(<span class="string">&quot;captcha.tencentcloudapi.com&quot;</span>);</span><br><span class="line">            <span class="comment">/* å®ä¾‹åŒ–ä¸€ä¸ªå®¢æˆ·ç«¯é…ç½®å¯¹è±¡ */</span></span><br><span class="line">            ClientProfile clientProfile = <span class="keyword">new</span> ClientProfile();</span><br><span class="line">            clientProfile.setHttpProfile(httpProfile);</span><br><span class="line">            <span class="comment">/* å®ä¾‹åŒ– SMS çš„ client å¯¹è±¡</span></span><br><span class="line"><span class="comment">             * ç¬¬äºŒä¸ªå‚æ•°æ˜¯åœ°åŸŸä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥å¡«å†™å­—ç¬¦ä¸² ap-beijingï¼Œæˆ–è€…å¼•ç”¨é¢„è®¾çš„å¸¸é‡ */</span></span><br><span class="line">            CaptchaClient client = <span class="keyword">new</span> CaptchaClient(cred,<span class="string">&quot;ap-beijing&quot;</span>,clientProfile);</span><br><span class="line">            <span class="comment">//éœ€è¦UserIP,CaptchaAppIdå’ŒAppSecretKey</span></span><br><span class="line">            String params = <span class="string">&quot;&#123;\&quot;CaptchaType\&quot;:9,\&quot;Ticket\&quot;:\&quot;&quot;</span></span><br><span class="line">                    + ticket + <span class="string">&quot;\&quot;,\&quot;UserIp\&quot;:\&quot;127.0.0.1\&quot;,\&quot;Randstr\&quot;:\&quot;&quot;</span></span><br><span class="line">                    + randstr + <span class="string">&quot;\&quot;,\&quot;CaptchaAppId\&quot;:20xxx931,\&quot;AppSecretKey\&quot;:\&quot;0Sih3-_w8dsr1xxx**\&quot;&#125;&quot;</span>;</span><br><span class="line">            DescribeCaptchaResultRequest req = DescribeCaptchaResultRequest.fromJsonString(params,DescribeCaptchaResultRequest.class);</span><br><span class="line">            DescribeCaptchaResultResponse resp = client.DescribeCaptchaResult(req);</span><br><span class="line">            str = DescribeCaptchaResultRequest.toJsonString(resp);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (TencentCloudSDKException e)&#123;</span><br><span class="line">            System.out.println(e.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰“å°JSONå¯¹è±¡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;JSONå¯¹è±¡:&quot;</span>+str);</span><br><span class="line">        <span class="keyword">if</span>(str.indexOf(<span class="string">&quot;OK&quot;</span>)&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h1><ul><li>å…¶ä»–åŠŸèƒ½æ²¡æœ‰å¯è®²æ€§ï¼Œè®²ä¸€ä¸‹è°ƒç”¨LayUIçš„æ–‡ä»¶ä¸Šä¼ ç»„ä»¶+é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨å­˜å‚¨å›¾ç‰‡</li></ul><h2 id="LayUIç»„ä»¶"><a href="#LayUIç»„ä»¶" class="headerlink" title="LayUIç»„ä»¶"></a>LayUIç»„ä»¶</h2><ul><li>è¿™é‡Œç”¨åˆ°äº†LayUIæ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ŒHTMLç»“æ„å¦‚ä¸‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-upload&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;test1&quot;</span>&gt;</span>ä¸Šä¼ å›¾ç‰‡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-upload-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;layui-upload-img&quot;</span> <span class="attr">id</span>=<span class="string">&quot;demo1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:90px;height: 90px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demoText&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 95px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-progress layui-progress-big&quot;</span> <span class="attr">lay-showpercent</span>=<span class="string">&quot;yes&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-progress-bar&quot;</span> <span class="attr">lay-percent</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;list-progress&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JSä»£ç å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//layui ç”¨æˆ·æ·»åŠ ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line">layui.use([<span class="string">&#x27;upload&#x27;</span>, <span class="string">&#x27;element&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å¼•å…¥æ¨¡å—</span></span><br><span class="line">    <span class="keyword">var</span> $ = layui.jquery,</span><br><span class="line">        upload = layui.upload,</span><br><span class="line">        element = layui.element,</span><br><span class="line">        layer = layui.layer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸²æŸ“æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">    <span class="keyword">var</span> uploadInst = upload.render(&#123;</span><br><span class="line">        elem: <span class="string">&#x27;#test1&#x27;</span> <span class="comment">//ä¸Šä¼ æ–‡ä»¶æŒ‰é’®id</span></span><br><span class="line">            ,</span><br><span class="line">        url: <span class="string">&#x27;$&#123;APP_PATH&#125;/admin/upload&#x27;</span> <span class="comment">//æ–‡ä»¶ä¸Šä¼ æ¥å£</span></span><br><span class="line">            ,</span><br><span class="line">        accept: <span class="string">&#x27;images&#x27;</span> <span class="comment">//ç›´æ¥æ”¶å›¾ç‰‡</span></span><br><span class="line">            ,</span><br><span class="line">        auto: <span class="literal">true</span> <span class="comment">//æ˜¯å¦é€‰æ‹©æ–‡ä»¶ä»¥åè‡ªåŠ¨ä¸Šä¼  å¯ä»¥ç»™ä¸€ä¸ªå±æ€§æ·»åŠ æŒ‰é’®ç»‘å®š</span></span><br><span class="line">            ,</span><br><span class="line">        multipe: <span class="literal">true</span> <span class="comment">//å¤šæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">            <span class="comment">//,size: //è®¾ç½®æœ€å¤§å…è®¸ä¸Šä¼ çš„å¤§å° å•ä½kb</span></span><br><span class="line">            ,</span><br><span class="line">        acceptMime: <span class="string">&#x27;image/*&#x27;</span> <span class="comment">//æ‰“å¼€æ–‡ä»¶é€‰æ‹©æŒ‡å®šåªå‡ºç°å›¾ç‰‡ç±»å‹åç¼€çš„æ–‡ä»¶</span></span><br><span class="line">            ,</span><br><span class="line">        before: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//é¢„è¯»æœ¬åœ°æ–‡ä»¶ç¤ºä¾‹ï¼Œä¸æ”¯æŒie8</span></span><br><span class="line">            obj.preview(<span class="function"><span class="keyword">function</span> (<span class="params">index, file, result</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//#demo1ä¸ºimgæ ‡ç­¾</span></span><br><span class="line">                $(<span class="string">&#x27;#demo1&#x27;</span>).attr(<span class="string">&#x27;src&#x27;</span>, result); <span class="comment">//å›¾ç‰‡é“¾æ¥ï¼ˆbase64ï¼‰</span></span><br><span class="line">            &#125;);</span><br><span class="line">            element.progress(<span class="string">&#x27;demo&#x27;</span>, <span class="string">&#x27;0%&#x27;</span>); <span class="comment">//è¿›åº¦æ¡å¤ä½</span></span><br><span class="line">            layer.msg(<span class="string">&#x27;ä¸Šä¼ ä¸­&#x27;</span>, &#123;</span><br><span class="line">                icon: <span class="number">16</span>,</span><br><span class="line">                time: <span class="number">0</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        done: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="comment">//ä¸Šä¼ æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">            <span class="comment">//å¦‚æœä¸Šä¼ å¤±è´¥</span></span><br><span class="line">            <span class="keyword">if</span> (res.flag == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> layer.msg(<span class="string">&#x27;ä¸Šä¼ æˆåŠŸ&#x27;</span>, &#123;</span><br><span class="line">                    icon: <span class="number">1</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> layer.msg(<span class="string">&#x27;ä¸Šä¼ å¤±è´¥&#x27;</span>, &#123;</span><br><span class="line">                    icon: <span class="number">2</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä¸Šä¼ æˆåŠŸçš„ä¸€äº›æ“ä½œ</span></span><br><span class="line">            <span class="comment">//â€¦â€¦</span></span><br><span class="line">            $(<span class="string">&#x27;#demoText&#x27;</span>).html(<span class="string">&#x27;&#x27;</span>); <span class="comment">//ç½®ç©ºä¸Šä¼ å¤±è´¥çš„çŠ¶æ€</span></span><br><span class="line">        &#125;,</span><br><span class="line">        error: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//ä¸Šä¼ å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line">                <span class="comment">//æ¼”ç¤ºå¤±è´¥çŠ¶æ€ï¼Œå¹¶å®ç°é‡ä¼ </span></span><br><span class="line">                <span class="keyword">var</span> demoText = $(<span class="string">&#x27;#demoText&#x27;</span>);</span><br><span class="line">                demoText.html(<span class="string">&#x27;&lt;span style=&quot;color: #ff5722;&quot;&gt;ä¸Šä¼ å¤±è´¥&lt;/span&gt; &lt;a class=&quot;layui-btn layui-btn-xs demo-reload&quot;&gt;é‡è¯•&lt;/a&gt;&#x27;</span>);</span><br><span class="line">                demoText.find(<span class="string">&#x27;.demo-reload&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    uploadInst.upload();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿›åº¦æ¡</span></span><br><span class="line">            ,</span><br><span class="line">        progress: <span class="function"><span class="keyword">function</span> (<span class="params">n, elem, e</span>) </span>&#123;</span><br><span class="line">            element.progress(<span class="string">&#x27;demo&#x27;</span>, n + <span class="string">&#x27;%&#x27;</span>); <span class="comment">//å¯é…åˆ layui è¿›åº¦æ¡å…ƒç´ ä½¿ç”¨</span></span><br><span class="line">            <span class="keyword">if</span> (n == <span class="number">100</span>) &#123;</span><br><span class="line">                layer.msg(<span class="string">&#x27;ä¸Šä¼ å®Œæ¯•&#x27;</span>, &#123;</span><br><span class="line">                    icon: <span class="number">1</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨-1"><a href="#æ§åˆ¶å™¨-1" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">AliyunOSSClientUtil ossClientUtil;</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/upload&quot;,method = RequestMethod.POST)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile multipartFile)</span> </span>&#123;</span><br><span class="line">   user.setAvatar(<span class="string">&quot;&quot;</span>); <span class="comment">//ä¸Šä¼ ä¸€æ¬¡å…ˆæ¸…ç©ºåŸç…§ç‰‡</span></span><br><span class="line">   String FileType= ossClientUtil.getContentType(multipartFile);</span><br><span class="line">   String url = ossClientUtil.uploadDocument(multipartFile,FileType);</span><br><span class="line">   System.out.println(<span class="string">&quot;è·¯å¾„ï¼š&quot;</span>+url);</span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="keyword">if</span>(url!=<span class="keyword">null</span>)&#123;</span><br><span class="line">      returnMsg.isSuccess(url);</span><br><span class="line">      user.setAvatar(url);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span>  returnMsg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡å­˜å‚¨å·¥å…·ç±»"><a href="#å¯¹è±¡å­˜å‚¨å·¥å…·ç±»" class="headerlink" title="å¯¹è±¡å­˜å‚¨å·¥å…·ç±»"></a>å¯¹è±¡å­˜å‚¨å·¥å…·ç±»</h2><ul><li>é¦–å…ˆå°è£…ä¸€äº›éœ€è¦çš„å‚æ•°ï¼ˆç‰¹å®šå‚æ•°éœ€è‡ªè¡ŒæŸ¥æ‰¾ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜¿é‡Œäº‘OSSå‚æ•°å¸¸é‡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OSSClientConstants</span> </span>&#123;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å¤–ç½‘åŸŸå ä»¥ä¸Šæµ·ä¸ºä¾‹ï¼Œå…¶ä»–æŒ‰æƒ…å†µå¡«å†™</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ENDPOINT = <span class="string">&quot;oss-cn-shanghai.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å¯†é’¥Access Key ID</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACCESS_KEY_ID = <span class="string">&quot;LTAI5tGkaLxxxxZm&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å¯†é’¥Access Key Secret</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACCESS_KEY_SECRET = <span class="string">&quot;FG6ttcllvChgxxxytzJu&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„bucketåç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUCKET_NAME = <span class="string">&quot;origins-xiaoliblog&quot;</span>;</span><br><span class="line">    <span class="comment">//Bucket åŸŸåå³å¤–ç½‘è®¿é—®çš„åŸŸå</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUCKET_URL= <span class="string">&quot;http://origins-xiaoliblog.oss-cn-shanghai.aliyuncs.com/&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºOSSå·¥å…·ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClient;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.CannedAccessControlList;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.CreateBucketRequest;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.OSSObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//å®ä¾‹åŒ– ä¾¿äºåœ¨æ§åˆ¶å™¨ä¸­è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AliyunOSSClientUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å†…æˆ–å¤–ç½‘åŸŸå</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String ENDPOINT;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å¯†é’¥Access Key ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String ACCESS_KEY_ID;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„å¯†é’¥Access Key Secret</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String ACCESS_KEY_SECRET;</span><br><span class="line">    <span class="comment">//é˜¿é‡Œäº‘APIçš„bucketåç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line">    <span class="comment">//Bucket åŸŸåå³å¤–ç½‘è®¿é—®çš„åŸŸå</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String BUCKET_URL;</span><br><span class="line">    <span class="comment">//æ—¥æœŸæ ¼å¼åŒ–å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat SDF = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyymmdd&quot;</span>); <span class="comment">//æ—¥æœŸæ ¼å¼åŒ–å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å±æ€§</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        ENDPOINT = OSSClientConstants.ENDPOINT;</span><br><span class="line">        ACCESS_KEY_ID = OSSClientConstants.ACCESS_KEY_ID;</span><br><span class="line">        ACCESS_KEY_SECRET = OSSClientConstants.ACCESS_KEY_SECRET;</span><br><span class="line">        BUCKET_NAME = OSSClientConstants.BUCKET_NAME;</span><br><span class="line">        BUCKET_URL = OSSClientConstants.BUCKET_URL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é˜¿é‡Œäº‘OSSå®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ossClient</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OSSClient <span class="title">getOSSClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªOSSClientå¯¹è±¡</span></span><br><span class="line">        OSSClient ossClient = <span class="keyword">new</span> OSSClient(ENDPOINT, ACCESS_KEY_ID, ACCESS_KEY_SECRET);</span><br><span class="line">        <span class="comment">//é€šè¿‡è¿æ¥å¯¹è±¡åˆ¤æ–­Bucketä»“åº“æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span>(ossClient.doesBucketExist(BUCKET_NAME))&#123;</span><br><span class="line">            System.out.println(BUCKET_NAME+<span class="string">&quot;ä»“åº“å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å¦‚æœæ²¡æœ‰å°±é€šè¿‡APIæ¥å£åˆ›å»ºBucketä»“åº“</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Bucketä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„Bucket:&quot;</span>+BUCKET_NAME);</span><br><span class="line">            CreateBucketRequest bucketRequest = <span class="keyword">new</span> CreateBucketRequest(<span class="keyword">null</span>);</span><br><span class="line">            <span class="comment">//è®¾ç½®Bucketåç§°</span></span><br><span class="line">            bucketRequest.setBucketName(BUCKET_NAME);</span><br><span class="line">            <span class="comment">//è®¾ç½®æƒé™:å…¬å…±è¯»</span></span><br><span class="line">            bucketRequest.setCannedACL(CannedAccessControlList.PublicRead);</span><br><span class="line">            <span class="comment">//åˆ›å»ºæ–°Bucket</span></span><br><span class="line">            ossClient.createBucket(bucketRequest);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ossClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ¨¡æ‹Ÿæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ossClient ossè¿æ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucketName å­˜å‚¨ç©ºé—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folder   æ¨¡æ‹Ÿæ–‡ä»¶å¤¹åå¦‚&quot;qj_nanjing/&quot;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  æ–‡ä»¶å¤¹å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">createFolder</span><span class="params">(OSSClient ossClient,String bucketName,String folder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">        <span class="keyword">if</span>(!ossClient.doesObjectExist(bucketName,folder))&#123;</span><br><span class="line">            <span class="comment">//åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">            ossClient.putObject(bucketName,folder,<span class="keyword">new</span> ByteArrayInputStream(<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>]));</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ›å»ºæ–‡ä»¶å¤¹æˆåŠŸ&quot;</span>);</span><br><span class="line">            <span class="comment">//å¾—åˆ°æ–‡ä»¶å¤¹å</span></span><br><span class="line">            OSSObject ossObject = ossClient.getObject(bucketName,folder);</span><br><span class="line">            String fileDir = ossObject.getKey();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–‡ä»¶åä¸ºï¼š&quot;</span>+fileDir);</span><br><span class="line">            <span class="keyword">return</span> fileDir;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> folder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ å›¾ç‰‡è‡³OSS</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile æ–‡ä»¶å¯¹è±¡F</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> FileType  æ–‡ä»¶ç±»å‹F</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> url è¿”å›æ–‡ä»¶è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//MultipartFileæ˜¯ä¸€ä¸ªå°è£…äº†æ–‡ä»¶ä¿¡æ¯çš„å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">uploadDocument</span><span class="params">(MultipartFile multipartFile, String FileType)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—OSSè¿æ¥</span></span><br><span class="line">        OSSClient ossClient = <span class="keyword">this</span>.getOSSClient();</span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶çš„åç¼€</span></span><br><span class="line">        String suffix = multipartFile.getOriginalFilename();</span><br><span class="line">        suffix = suffix.substring(suffix.lastIndexOf(<span class="string">&quot;.&quot;</span>)); <span class="comment">//.åé¢çš„</span></span><br><span class="line">        <span class="comment">//è·å¾—å½“å‰ä¸Šä¼ æ—¥æœŸ</span></span><br><span class="line">        String date = SDF.format(<span class="keyword">new</span> Date());</span><br><span class="line">        <span class="comment">//é€šè¿‡UUIDåæ¥é¿å…æ–‡ä»¶é‡å</span></span><br><span class="line">        String uuid = UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//ç»„åˆæ–‡ä»¶åç§°</span></span><br><span class="line">        String filename = FileType + <span class="string">&quot;/&quot;</span> + date  + <span class="string">&quot;/&quot;</span> + uuid + suffix;</span><br><span class="line">        String url = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//é€šè¿‡OSSClientè·å¾—ä¸Šä¼ æ–‡ä»¶åè¿”å›çš„url</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ossClient.putObject(BUCKET_NAME,filename,<span class="keyword">new</span> ByteArrayInputStream(multipartFile.getBytes()));</span><br><span class="line">            url = BUCKET_URL + filename;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡æ–‡ä»¶ååˆ¤æ–­å¹¶è·å–OSSæœåŠ¡æ–‡ä»¶ä¸Šä¼ æ—¶æ–‡ä»¶çš„contentType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–‡ä»¶çš„contentType</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">getContentType</span><span class="params">(MultipartFile multipartFile)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶çš„åç¼€</span></span><br><span class="line">        String suffix = multipartFile.getOriginalFilename();</span><br><span class="line">        suffix = suffix.substring(suffix.lastIndexOf(<span class="string">&quot;.&quot;</span>)); <span class="comment">//.åé¢çš„</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.bmp&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/bmp&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.gif&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/gif&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.jpeg&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;.jpg&quot;</span>.equalsIgnoreCase(suffix)  || <span class="string">&quot;.png&quot;</span>.equalsIgnoreCase(suffix) ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/jpeg&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.html&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/html&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.txt&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.vsd&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/vnd.visio&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.ppt&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;pptx&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/vnd.ms-powerpoint&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.doc&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;docx&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/msword&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.xml&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/xml&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é»˜è®¤è¿”å›ç±»å‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;image/jpeg&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="JSå·¥å…·æ–¹æ³•"><a href="#JSå·¥å…·æ–¹æ³•" class="headerlink" title="JSå·¥å…·æ–¹æ³•"></a>JSå·¥å…·æ–¹æ³•</h1><ul><li>è·å–åœ°å€æ å‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–åœ°å€æ å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlParams</span>(<span class="params">param</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// ç”¨è¯¥å±æ€§è·å–é¡µé¢ URL åœ°å€ä»é—®å· (?) å¼€å§‹çš„ URLï¼ˆæŸ¥è¯¢éƒ¨åˆ†ï¼‰</span></span><br><span class="line">   <span class="keyword">var</span> url = <span class="built_in">window</span>.location.search;</span><br><span class="line">   <span class="comment">// æ­£åˆ™ç­›é€‰åœ°å€æ </span></span><br><span class="line">   <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;(^|&amp;)&quot;</span> + param + <span class="string">&quot;=([^&amp;]*)(&amp;|$)&quot;</span>);</span><br><span class="line">   <span class="comment">// åŒ¹é…ç›®æ ‡å‚æ•°</span></span><br><span class="line">   <span class="keyword">var</span> result = url.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">   <span class="comment">//è¿”å›å‚æ•°å€¼</span></span><br><span class="line">   <span class="keyword">return</span> result ? <span class="built_in">decodeURIComponent</span>(result[<span class="number">2</span>]) : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¯”å¦‚localhost:8080/query?keywords=å‘¨æ°ä¼¦</span></span><br><span class="line"><span class="keyword">var</span> query = getUrlParams(<span class="string">&quot;keywords&quot;</span>); <span class="comment">//å‘¨æ°ä¼¦</span></span><br></pre></td></tr></table></figure><ul><li>å›è½¦è·³è½¬</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;search_input&quot;</span> <span class="attr">onkeypress</span>=<span class="string">&quot;return EnterSongList()&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœç´¢æ¡†å›è½¦è·³è½¬</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EnterSongList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="function"><span class="title">if</span>(<span class="params">event.keyCode == <span class="number">13</span></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> keywords = $(<span class="string">&#x27;#search_input&#x27;</span>).val();</span><br><span class="line">      <span class="built_in">window</span>.location.href=<span class="string">&quot;$&#123;APP_PATH&#125;/user/songlist?keywords=&quot;</span>+keywords;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç™»å½•è§†å›¾&quot;&gt;&lt;a href=&quot;#ç™»å½•è§†å›¾&quot; class=&quot;headerlink&quot; title=&quot;ç™»å½•è§†å›¾&quot;&gt;&lt;/a&gt;ç™»å½•è§†å›¾&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ç™»å½•é¡µé¢å½“ç”¨æˆ·åå¤±å»ç„¦ç‚¹åä¼šå¼‚æ­¥è·å–ç”¨æˆ·å¤´åƒä¿¡æ¯&lt;/li&gt;
&lt;li&gt;ç™»å½•è°ƒç”¨äº†è…¾è®¯äº‘çš„æ»‘åŠ¨éªŒè¯ç æ¥å£&lt;/li&gt;
</summary>
      
    
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="å…¨æ ˆå®ä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%85%A8%E6%A0%88%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>SSMé¡¹ç›®ğŸ¯ç½‘æ˜“äº‘éŸ³ä¹å®æˆ˜ä¹‹æ³¨å†Œæ¨¡å—</title>
    <link href="http://xiaoliblog.cn/page/neteaseshop03.html"/>
    <id>http://xiaoliblog.cn/page/neteaseshop03.html</id>
    <published>2021-06-18T15:00:16.110Z</published>
    <updated>2021-06-18T15:25:32.999Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ³¨å†Œè§†å›¾"><a href="#æ³¨å†Œè§†å›¾" class="headerlink" title="æ³¨å†Œè§†å›¾"></a>æ³¨å†Œè§†å›¾</h1><h2 id="HTMLç»“æ„"><a href="#HTMLç»“æ„" class="headerlink" title="HTMLç»“æ„"></a>HTMLç»“æ„</h2><ul><li>ä¸é€šè¿‡è¡¨å•è‡ªåŠ¨æäº¤ï¼Œè€Œæ˜¯é€šè¿‡Ajaxæ–¹å¼æäº¤ï¼Œæœ€å¥½æ»¡è¶³ä»¥ä¸‹æ¡ä»¶<ul><li><code>&lt;form&gt;</code>ä¸éœ€è¦å†™æäº¤è·¯å¾„å’Œæ–¹å¼</li><li><code>&lt;input&gt;</code>æ ‡ç­¾ä¸éœ€è¦å¸¦<code>name</code>å±æ€§Â·</li><li>æœ€å¥½ç”¨<code>&lt;button&gt;</code> ï¼Œä¸”<code>type=&quot;button&quot;</code></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&quot;</span> <span class="attr">required</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span>æäº¤å¹¶æ³¨å†Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è§†å›¾é€šè¿‡Bootstrap+Layuiæ­å»º</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loginBox col-md-7 layui-anim layui-anim-scaleSpring&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¬¢è¿æ³¨å†Œç½‘æ˜“äº‘éŸ³ä¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>éŸ³ä¹ï¼Œæ˜¯ä¸€ç§æ€åº¦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;2-5ä½ä¸­æ–‡æˆ–è€…6-16ä½è‹±æ–‡æˆ–æ•°å­—çš„ç»„åˆ&quot;</span> <span class="attr">required</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;tips usernameTips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è‡³å°‘8ä½å¹¶åŒ…å«å¤§å°å†™å’Œæ•°å­—,ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">required</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;tips passwordTips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;repassword&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>ç¡®è®¤å¯†ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;repassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç è¿›è¡Œç¡®è®¤&quot;</span> <span class="attr">required</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;tips repasswordTips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç”¨æˆ·å@åŸŸåï¼ˆåŸŸååç¼€è‡³å°‘2ä¸ªå­—ç¬¦ï¼‰&quot;</span> <span class="attr">required</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;tips emailTips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;code&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>é‚®ç®±éªŒè¯ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;code&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥é‚®ç®±éªŒè¯ç &quot;</span> <span class="attr">required</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sendEmail&quot;</span>&gt;</span>ç‚¹å‡»å‘é€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span> æˆ‘å·²é˜…è¯»å¹¶åŒæ„ç›¸å…³æœåŠ¡æ¡æ¬¾å’Œéšç§æ”¿ç­–</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;tips checkboxTips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-offset-2 col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>æäº¤å¹¶æ³¨å†Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> <span class="attr">id</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 20px;&quot;</span>&gt;</span>é‡ç½®è¡¨å•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@8f73e4a11effedcb3be0bfcca165e681a69b3812/2021/06/18/8cbaa23b887a9285b1e279f5c5405110.png"></p><h2 id="JSæ ¡éªŒ"><a href="#JSæ ¡éªŒ" class="headerlink" title="JSæ ¡éªŒ"></a>JSæ ¡éªŒ</h2><ul><li>é€šè¿‡å¯¹DOMèŠ‚ç‚¹<code>&lt;label class=&quot;tips xxxTips&quot;&gt;&lt;/label&gt;</code>è¿›è¡Œæ·»åŠ ã€åˆ é™¤æç¤º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> $username = $(<span class="string">&#x27;#username&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $password = $(<span class="string">&#x27;#password&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $repassword = $(<span class="string">&#x27;#repassword&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $email = $(<span class="string">&#x27;#email&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $code = $(<span class="string">&#x27;#code&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ºæ¯ä¸ªè¡¨å•æäº¤å¤±å»ç„¦ç‚¹äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;form :input&quot;</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&quot;.tips&quot;</span>).empty(); <span class="comment">//åˆ é™¤ä»¥å‰çš„æé†’å…ƒç´ ï¼ˆfind()ï¼šæŸ¥æ‰¾åŒ¹é…å…ƒç´ é›†ä¸­å…ƒç´ çš„æ‰€æœ‰åŒ¹é…å…ƒç´ ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//éªŒè¯ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).is($username)) &#123;</span><br><span class="line">        <span class="keyword">var</span> username = $.trim(<span class="built_in">this</span>.value); <span class="comment">//å»ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">var</span> regName = <span class="regexp">/(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/</span>;;</span><br><span class="line">        <span class="keyword">if</span> (!regName.test(username)) &#123;</span><br><span class="line">            <span class="keyword">var</span> errorMsg = <span class="built_in">this</span>.placeholder; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.usernameTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¼‚æ­¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç”¨æˆ·å</span></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url: <span class="string">&quot;$&#123;APP_PATH&#125;/verifyUsername&quot;</span>,</span><br><span class="line">                type: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">                dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">                data: &#123;</span><br><span class="line">                    username: username</span><br><span class="line">                &#125;,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.flag == <span class="number">1</span>) &#123; <span class="comment">//ä¸å­˜åœ¨è¡¨ç¤ºå¯ç”¨</span></span><br><span class="line">                        <span class="keyword">var</span> successMsg = res.message; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">                        <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/p1_2.png&#x27;&gt;&quot;</span>;</span><br><span class="line">                        $(<span class="string">&quot;.usernameTips&quot;</span>).append(imgNode + successMsg);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123; <span class="comment">// å­˜åœ¨è¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">                        <span class="keyword">var</span> errorMsg = res.message; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">                        <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">                        $(<span class="string">&quot;.usernameTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éªŒè¯å¯†ç </span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).is($password)) &#123;</span><br><span class="line">        <span class="keyword">var</span> password = $.trim(<span class="built_in">this</span>.value); <span class="comment">//å»ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">var</span> regName = <span class="regexp">/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]&#123;8,&#125;$/</span>;</span><br><span class="line">        <span class="keyword">if</span> (!regName.test(password)) &#123;</span><br><span class="line">            <span class="keyword">var</span> errorMsg = <span class="built_in">this</span>.placeholder; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.passwordTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/p1_2.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.passwordTips&quot;</span>).append(imgNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å†æ¬¡ç¡®è®¤å¯†ç </span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).is($repassword)) &#123;</span><br><span class="line">        <span class="keyword">var</span> password = $(<span class="string">&quot;#password&quot;</span>).val(); <span class="comment">//åŸå¯†ç å€¼</span></span><br><span class="line">        <span class="keyword">var</span> repassword = $.trim(<span class="built_in">this</span>.value); <span class="comment">//å»ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">if</span> (password != repassword || repassword == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> errorMsg = <span class="string">&quot;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´&quot;</span>;</span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.repasswordTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/p1_2.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.repasswordTips&quot;</span>).append(imgNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éªŒè¯é‚®ç®±</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).is($email)) &#123;</span><br><span class="line">        <span class="keyword">var</span> email = $.trim(<span class="built_in">this</span>.value); <span class="comment">//å»ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">var</span> regName = <span class="regexp">/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]&#123;2,4&#125;)$/</span>;</span><br><span class="line">        <span class="keyword">if</span> (!regName.test(email)) &#123;</span><br><span class="line">            <span class="keyword">var</span> errorMsg = <span class="built_in">this</span>.placeholder; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.emailTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/p1_2.png&#x27;&gt;&quot;</span>;</span><br><span class="line">            $(<span class="string">&quot;.emailTips&quot;</span>).append(imgNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å¼‚æ­¥æ£€æµ‹"><a href="#å¼‚æ­¥æ£€æµ‹" class="headerlink" title="å¼‚æ­¥æ£€æµ‹"></a>å¼‚æ­¥æ£€æµ‹</h2><ul><li>åˆ›å»ºæ§åˆ¶å™¨å¤„ç†ç”¨æˆ·å¤±å»ç„¦ç‚¹åï¼Œå‘é€å¼‚æ­¥è¯·æ±‚æ ¡éªŒç”¨æˆ·å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼‚æ­¥éªŒè¯ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/verifyUsername&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">verifyUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//åç«¯æ ¡éªŒ</span></span><br><span class="line">   String regName = <span class="string">&quot;(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)&quot;</span>;</span><br><span class="line">   <span class="comment">//å¦‚æœä¸åŒ¹é…</span></span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="keyword">if</span>(!username.matches(regName))&#123;</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;ç”¨æˆ·åå¿…é¡»æ˜¯6-16æ•°å­—æˆ–å­—æ¯çš„ç»„åˆï¼Œæˆ–è€…2-5ä½æ±‰å­—&quot;</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      User user = userService.queryUserByUsername(username);</span><br><span class="line">      <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="comment">//ç”¨æˆ·å·²å­˜åœ¨</span></span><br><span class="line">         returnMsg.fail(<span class="string">&quot;æ­¤ç”¨æˆ·å·²å­˜åœ¨&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         returnMsg.isSuccess(<span class="string">&quot;æ­¤ç”¨æˆ·åå¯ç”¨&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span>  returnMsg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é‚®ç®±éªŒè¯"><a href="#é‚®ç®±éªŒè¯" class="headerlink" title="é‚®ç®±éªŒè¯"></a>é‚®ç®±éªŒè¯</h1><h2 id="JSéƒ¨åˆ†"><a href="#JSéƒ¨åˆ†" class="headerlink" title="JSéƒ¨åˆ†"></a>JSéƒ¨åˆ†</h2><ul><li>ç‚¹å‡»å‘é€æŒ‰é’®ï¼Œå…ˆåˆ¤æ–­é‚®ç®±æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºå°±å‘é€è¯·æ±‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘é€é‚®ç®±</span></span><br><span class="line">$(<span class="string">&#x27;#sendEmail&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">&quot;#email&quot;</span>).val() != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        time(<span class="built_in">this</span>)</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: <span class="string">&quot;$&#123;APP_PATH&#125;/sendEmail&quot;</span>,</span><br><span class="line">            type: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                email: $email.val()</span><br><span class="line">            &#125;,</span><br><span class="line">            dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.flag == <span class="number">1</span>) &#123;</span><br><span class="line">                    layer.msg(<span class="string">&#x27;å‘é€æˆåŠŸï¼è¯·æ³¨æ„æŸ¥æ”¶&#x27;</span>, &#123;</span><br><span class="line">                        icon: <span class="number">1</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    layer.msg(<span class="string">&#x27;res.message&#x27;</span>, &#123;</span><br><span class="line">                        time: <span class="number">600</span>,</span><br><span class="line">                        icon: <span class="number">2</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        layer.msg(<span class="string">&#x27;é‚®ç®±ä¸èƒ½ä¸ºç©º!&#x27;</span>, &#123;</span><br><span class="line">            time: <span class="number">600</span>,</span><br><span class="line">            icon: <span class="number">2</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>ç‚¹å‡»æŒ‰é’®åå‡ºç°å€’è®¡æ—¶æ•ˆæœï¼Œå½“timeä¸º0æ—¶ï¼Œå‘é€è¯·æ±‚æƒ…å†µéªŒè¯ç code</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å€’è®¡æ—¶æ•ˆæœ</span></span><br><span class="line"><span class="keyword">var</span> wait = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">time</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (wait == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//ä¹Ÿå¯åœ¨æ­¤å¤„ajaxå»æ¸…ç©ºéªŒè¯ç </span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: <span class="string">&quot;$&#123;APP_PATH&#125;/clearcode&quot;</span>,</span><br><span class="line">            dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.flag == <span class="number">1</span>) &#123;</span><br><span class="line">                    layer.msg(<span class="string">&#x27;éªŒè¯ç å·²å¤±æ•ˆï¼Œè¯·é‡æ–°å‘é€!&#x27;</span>, &#123;</span><br><span class="line">                        time: <span class="number">600</span>,</span><br><span class="line">                        icon: <span class="number">2</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    layer.msg(<span class="string">&#x27;éªŒè¯ç é‡å¤±è´¥ç½®&#x27;</span>, &#123;</span><br><span class="line">                        time: <span class="number">600</span>,</span><br><span class="line">                        icon: <span class="number">2</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            error: <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">                layer.msg(<span class="string">&#x27;æœåŠ¡è·‘åˆ°ç«æ˜Ÿå»äº†ï¼Œç”¨æˆ·ç™»å½•ä¿¡æ¯è·å–å¤±è´¥!&#x27;</span>, &#123;</span><br><span class="line">                    icon: <span class="number">2</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        obj.removeAttribute(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">        obj.innerHTML = <span class="string">&quot;å†æ¬¡å‘é€&quot;</span>;</span><br><span class="line">        obj.style.backgroundColor = <span class="string">&quot;#fe9900&quot;</span>;</span><br><span class="line">        wait = <span class="number">60</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        obj.setAttribute(<span class="string">&quot;disabled&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        obj.innerHTML = wait + <span class="string">&quot;ç§’åé‡æ–°è·å–&quot;</span>;</span><br><span class="line">        obj.style.backgroundColor = <span class="string">&quot;#8f8b8b&quot;</span>;</span><br><span class="line">        wait--;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            time(obj)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‚®ç®±å·¥å…·ç±»"><a href="#é‚®ç®±å·¥å…·ç±»" class="headerlink" title="é‚®ç®±å·¥å…·ç±»"></a>é‚®ç®±å·¥å…·ç±»</h2><ul><li>åˆ›å»ºä¸€ä¸ªé‚®ç®±å·¥å…·ç±»ç”¨äºå‘é€é‚®ç®±</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"><span class="keyword">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"><span class="keyword">import</span> com.netease.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç½‘ç«™3ç§’åŸåˆ™ï¼šä¸€ä¸ªç½‘é¡µç™½å±åŠ è½½è¶…è¿‡3ç§’ä»¥ä¸Šç”¨æˆ·ä½“éªŒå·®</span></span><br><span class="line"><span class="comment">//å¤šçº¿ç¨‹å®ç°ç”¨æˆ·ä½“éªŒ ï¼ˆå¼‚æ­¥å¤„ç†ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">sendEmail</span></span>&#123;</span><br><span class="line">    <span class="comment">//å‘ä»¶äººé‚®ç®±åœ°å€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String senderAddress = <span class="string">&quot;2312057536@qq.com&quot;</span>;</span><br><span class="line">    <span class="comment">//æ”¶ä»¶äººé‚®ç®±åœ°å€</span></span><br><span class="line">    <span class="comment">//public static String recipientAddress = &quot;2312057536@qq.com&quot;;</span></span><br><span class="line">    <span class="comment">//å‘ä»¶äººé‚®ç®±è´¦æˆ·å</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String senderAccount = <span class="string">&quot;ç½‘æ˜“äº‘å·¥ä½œå®¤&quot;</span>;</span><br><span class="line">    <span class="comment">//å‘ä»¶äººé‚®ç®±è´¦æˆ·å¯†ç (ç‹¬ç«‹å¯†ç æˆ–è€…æˆæƒç )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String senderPassword = <span class="string">&quot;npbhecqfbnmieaae&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¼ å…¥é‚®ç®±æ­£æ–‡å’Œæ”¶ä»¶äººé‚®ç®±</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendTo</span><span class="params">(String body,String recipientAddress)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//è¿æ¥é‚®ä»¶æœåŠ¡å™¨çš„å‚æ•°é…ç½®</span></span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        prop.setProperty(<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.qq.com&quot;</span>); <span class="comment">//è®¾ç½®qqé‚®ç®±æœåŠ¡å™¨</span></span><br><span class="line">        prop.setProperty(<span class="string">&quot;mail.transport.protocol&quot;</span>, <span class="string">&quot;smtp&quot;</span>); <span class="comment">//é‚®ä»¶å‘é€åè®®</span></span><br><span class="line">        prop.setProperty(<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>); <span class="comment">//éœ€è¦éªŒè¯ç”¨æˆ·åå¯†ç </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³äºqqé‚®ç®±ï¼Œè¿˜è¦è®¾ç½®sslåŠ å¯†ï¼ŒåŠ ä¸Šä¸€ä¸‹ä»£ç å³å¯,å¤§å‚ï¼Œå…¶ä»–é‚®ç®±ä¸éœ€è¦</span></span><br><span class="line">        MailSSLSocketFactory sf = <span class="keyword">new</span> MailSSLSocketFactory();</span><br><span class="line">        sf.setTrustAllHosts(<span class="keyword">true</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;mail.smtp.ssl.enable&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;mail.smtp.ssl.socketFactory&quot;</span>, sf);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå®šä¹‰æ•´ä¸ªç¨‹åºæ‰€éœ€è¦çš„ç¯å¢ƒä¿¡æ¯çš„Session å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//å…¶ä»–:Session session = Session.getInstance(props);</span></span><br><span class="line">        <span class="comment">//qqæ‰æœ‰ï¼å…¶ä»–é‚®ç®±å°±ä¸ç”¨</span></span><br><span class="line">        Session session = Session.getDefaultInstance(prop, <span class="keyword">new</span> Authenticator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> PasswordAuthentication <span class="title">getPasswordAuthentication</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">//å‘ä»¶äººé‚®ç®±ç”¨æˆ·åã€æˆæƒç </span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> PasswordAuthentication(senderAddress, senderPassword);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//å¼€å¯Sessionçš„debugæ¨¡å¼ï¼Œè¿™æ ·å°±å¯ä»¥çœ‹åˆ°ç¨‹åºå‘é€Emailçš„è¿è¡ŒçŠ¶æ€</span></span><br><span class="line">        session.setDebug(<span class="keyword">true</span>); <span class="comment">//å¼€å¯åå¯ä»¥çœ‹åˆ°è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ›å»ºé‚®ä»¶çš„å®ä¾‹å¯¹è±¡(åˆ©ç”¨å°è£…çš„æ–¹æ³•)</span></span><br><span class="line">        Message message = getMimeMessage(session,senderAddress,recipientAddress,body);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é€šè¿‡sessionå¾—åˆ°transportå¯¹è±¡</span></span><br><span class="line">        Transport transport = session.getTransport();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.ä½¿ç”¨é‚®ç®±çš„è´¦æˆ·åå’Œæˆæƒç è¿æ¥ä¸Šé‚®ç®±æœåŠ¡å™¨</span></span><br><span class="line">        transport.connect(senderAccount, senderPassword);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.å‘é€é‚®ä»¶</span></span><br><span class="line">        transport.sendMessage(message, message.getAllRecipients());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœåªæƒ³å‘é€ç»™æŒ‡å®šçš„äººï¼Œå¯ä»¥å¦‚ä¸‹å†™æ³•</span></span><br><span class="line">        <span class="comment">//transport.sendMessage(message, new Address[]&#123;new InternetAddress(&quot;xxx@qq.com&quot;)&#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.å…³é—­è¿æ¥</span></span><br><span class="line">        transport.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MimeMessage <span class="title">getMimeMessage</span><span class="params">(Session session,String senderAddress,String recipientAddress,String body)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºä¸€å°é‚®ä»¶</span></span><br><span class="line">        MimeMessage message = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. From: å‘ä»¶äºº</span></span><br><span class="line">        message.setFrom(<span class="keyword">new</span> InternetAddress(senderAddress));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. To: æ”¶ä»¶äººï¼ˆå¯ä»¥å¢åŠ å¤šä¸ªæ”¶ä»¶äººã€æŠ„é€ã€å¯†é€ï¼‰</span></span><br><span class="line">        message.setRecipient(MimeMessage.RecipientType.TO, <span class="keyword">new</span> InternetAddress(recipientAddress));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. Subject: é‚®ä»¶ä¸»é¢˜</span></span><br><span class="line">        message.setSubject(<span class="string">&quot;ç½‘æ˜“äº‘ç”¨æˆ·è´¦æˆ·éªŒè¯&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. Content: é‚®ä»¶æ­£æ–‡ï¼ˆå¯ä»¥ä½¿ç”¨htmlæ ‡ç­¾ï¼‰</span></span><br><span class="line">        message.setContent(body, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. è®¾ç½®å‘ä»¶æ—¶é—´</span></span><br><span class="line">        message.setSentDate(<span class="keyword">new</span> Date());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. ä¿å­˜è®¾ç½®</span></span><br><span class="line">        message.saveChanges();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å±‚"><a href="#æ§åˆ¶å±‚" class="headerlink" title="æ§åˆ¶å±‚"></a>æ§åˆ¶å±‚</h2><ul><li>é¦–å…ˆåˆ›å»ºè‡ªå®šä¹‰è¿”å›å‰ç«¯çš„æ¶ˆæ¯å·¥å…·ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * controllerç­‰æ¥æ”¶ajaxè°ƒç”¨ï¼Œè¿”å›æ¶ˆæ¯ä½“</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span></span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReturnMsg</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">2017120301</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer flag;  <span class="comment">//1 æˆåŠŸ 0 å¤±è´¥</span></span><br><span class="line">    <span class="keyword">private</span> String message; <span class="comment">//æç¤ºä¿¡æ¯ OKæˆåŠŸ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> OK=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> FAIL = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;String,Object&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">//ç”¨äºå­˜å‚¨é”®å€¼å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HashMap&lt;String, Object&gt; <span class="title">getHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hashMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–sessionå¯¹è±¡ hashMap.userInfo.å±æ€§å  æ”¾å…¥é”®å€¼å¯¹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String str,Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hashMap.put(str,obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReturnMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = OK;  <span class="comment">//1</span></span><br><span class="line">        <span class="keyword">this</span>.message = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æˆåŠŸä¸å¸¦ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">isSuccess</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = OK; <span class="comment">//1</span></span><br><span class="line">        <span class="keyword">this</span>.message = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æˆåŠŸå¸¦ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">isSuccess</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = OK; <span class="comment">//1</span></span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">fail</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = FAIL; <span class="comment">//0</span></span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlag</span><span class="params">(Integer flag)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReturnMsg</span><span class="params">(Integer flag, String message, HashMap&lt;String, Object&gt; hashMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = flag;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">        <span class="keyword">this</span>.hashMap = hashMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºä¸€ä¸ª<code>UserController</code>ç”¨äºå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œé€šè¿‡UUIDç”Ÿæˆ4ä½æ•°çš„éªŒè¯ç ï¼Œå­˜åˆ°ç”¨æˆ·å±æ€§<code>code</code>ä¸­ï¼Œå…¨å±€å®šä¹‰äº†ä¸€ä¸ªUserå¯¹è±¡ï¼Œç”¨äºæŒä¹…åŒ–æ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/sendEmail&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">sendEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//é€»è¾‘æ˜¯ ä¼ å…¥æ”¶ä»¶äººé‚®ç®±ï¼Œç„¶åå‘é€éªŒè¯ç ï¼ŒéªŒè¯ç å­˜å…¥æ•°æ®åº“ï¼Œç„¶åæ³¨å†ŒæŒ‰é’®è¿›è¡ŒéªŒè¯</span></span><br><span class="line">   <span class="comment">//å€’è®¡æ—¶ï¼Œå†å‘é€è¯·æ±‚æƒ…å†µéªŒè¯ç </span></span><br><span class="line">   String code = UUIDUtils.getUUID(<span class="number">4</span>);<span class="comment">//ç”Ÿæˆå››ä½éªŒè¯ç  å­˜å…¥ç”¨æˆ· å¹¶å‘é€é‚®ä»¶</span></span><br><span class="line">   user.setCode(code); <span class="comment">//å­˜å…¥User</span></span><br><span class="line">   String emailBody = <span class="string">&quot;æ‚¨çš„é‚®ç®±éªŒè¯ç ä¸º&lt;h1&gt;&quot;</span> + code + <span class="string">&quot;&lt;/h1&gt;è¯·åœ¨60s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å†…å®ŒæˆéªŒè¯ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼&quot;</span>;</span><br><span class="line">   String recipientAddress = email;</span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      sendEmail.sendTo(emailBody, recipientAddress);</span><br><span class="line">      returnMsg.isSuccess();</span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;å‘é€å¤±è´¥&quot;</span>);</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;å‘é€å¤±è´¥ï¼è¯·é‡æ–°å‘é€&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>60Såå†å‘é€è¯·æ±‚æƒ…å†µéªŒè¯ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¸…ç©ºéªŒè¯ç  éªŒè¯ç å¤±æ•ˆ</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/clearcode&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">clearcode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   user.setCode(<span class="string">&quot;&quot;</span>);</span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="keyword">if</span> (user.getCode().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">      returnMsg.isSuccess();</span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      returnMsg.fail(<span class="string">&quot;éªŒè¯ç æœªæ¸…ç©º&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è¡¨å•æäº¤"><a href="#è¡¨å•æäº¤" class="headerlink" title="è¡¨å•æäº¤"></a>è¡¨å•æäº¤</h1><h2 id="JSéƒ¨åˆ†-1"><a href="#JSéƒ¨åˆ†-1" class="headerlink" title="JSéƒ¨åˆ†"></a>JSéƒ¨åˆ†</h2><ul><li>è¡¨å•æäº¤çš„æ¡ä»¶<ul><li> é¦–å…ˆç¡®ä¿<code>tips</code>æ²¡æœ‰å­å…ƒç´ <code>img</code>æ‰èƒ½æäº¤å‘ajaxï¼ŒåŠæ²¡æœ‰æç¤ºä¿¡æ¯</li><li> ç¡®ä¿å‹¾é€‰äº†é˜…è¯»åè®®</li><li> ç„¶åå‘é€<code>addUser</code>è¯·æ±‚ï¼Œé‚®ç®±éªŒè¯ç è¿›è¡Œæ ¡éªŒåå†æ·»åŠ ç”¨æˆ·åˆ°æ•°æ®åº“</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨å•æäº¤éªŒè¯ ä¸»è¦å¯¹éªŒè¯ç è¿›è¡ŒéªŒè¯</span></span><br><span class="line">$(<span class="string">&#x27;#submit&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//é¦–å…ˆç¡®ä¿tipsæ²¡æœ‰å­å…ƒç´ imgæ‰èƒ½æäº¤å‘ajax</span></span><br><span class="line">    <span class="comment">//&lt;label class=&quot;tips repasswordTips&quot;&gt;&lt;img src=&quot;&quot;&gt;æ–‡å­—&lt;/label&gt;</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">&#x27;label.tips:has(img)&#x27;</span>).length) &#123;</span><br><span class="line">        <span class="comment">//å«æœ‰å­å…ƒç´  ä¸æäº¤</span></span><br><span class="line">        layer.msg(<span class="string">&#x27;è¯·æ­£ç¡®å¡«å†™æ³¨å†Œä¿¡æ¯&#x27;</span>, &#123;</span><br><span class="line">            time: <span class="number">600</span>,</span><br><span class="line">            icon: <span class="number">2</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $(<span class="string">&quot;.checkboxTips&quot;</span>).empty();</span><br><span class="line">    <span class="comment">//éªŒè¯ç æ ¡éªŒ</span></span><br><span class="line">    <span class="comment">//é˜…è¯»åè®®</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">&quot;input:checkbox&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>)) &#123;</span><br><span class="line">        <span class="comment">//å·²å‹¾é€‰å°±å‘ajaxè¯·æ±‚</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: <span class="string">&quot;$&#123;APP_PATH&#125;/addUser&quot;</span>,</span><br><span class="line">            type: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                username: $username.val(),</span><br><span class="line">                password: $password.val(),</span><br><span class="line">                email: $email.val(),</span><br><span class="line">                code: $code.val()</span><br><span class="line">            &#125;,</span><br><span class="line">            dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.flag == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">//æ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">                    layer.alert(<span class="string">&#x27;æ­å–œæ³¨å†ŒæˆåŠŸï¼Œ3ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢æˆ–è€…ç‚¹å‡»ç¡®å®šç«‹å³è·³è½¬&#x27;</span>, &#123;</span><br><span class="line">                        time: <span class="number">3</span> * <span class="number">1000</span>,</span><br><span class="line">                        icon: <span class="number">1</span>,</span><br><span class="line">                        success: <span class="function"><span class="keyword">function</span> (<span class="params">layero, index</span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">var</span> timeNum = <span class="built_in">this</span>.time / <span class="number">1000</span>,</span><br><span class="line">                                setText = <span class="function"><span class="keyword">function</span> (<span class="params">start</span>) </span>&#123;</span><br><span class="line">                                    layer.title((start ? timeNum : --timeNum) + <span class="string">&#x27; ç§’åå…³é—­&#x27;</span>, index);</span><br><span class="line">                                &#125;;</span><br><span class="line">                            setText(!<span class="number">0</span>);</span><br><span class="line">                            <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(setText, <span class="number">1000</span>);</span><br><span class="line">                            <span class="keyword">if</span> (timeNum &lt;= <span class="number">0</span>) <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        end: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                            <span class="built_in">window</span>.location.href = <span class="string">&quot;$&#123;APP_PATH&#125;/user/login&quot;</span></span><br><span class="line">                            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    layer.msg(res.message, &#123;</span><br><span class="line">                        time: <span class="number">600</span>,</span><br><span class="line">                        icon: <span class="number">2</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//type=button å›è°ƒå°±ä¸ä¼šé‡æ–°åˆ·æ–°é¡µé¢äº†</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">                layer.msg(<span class="string">&#x27;ä¸å¥½æ„æ€ï¼ŒæœåŠ¡å™¨è·‘åˆ°ç«æ˜Ÿå»äº†ï¼Œæ³¨å†Œå¼‚å¸¸ï¼&#x27;</span>, &#123;</span><br><span class="line">                    time: <span class="number">600</span>,</span><br><span class="line">                    icon: <span class="number">2</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//alert(&quot;è¯·å‹¾é€‰ç›¸å…³åè®®&quot;)</span></span><br><span class="line">        <span class="keyword">var</span> errorMsg = <span class="string">&quot;è¯·å‹¾é€‰æœ‰å…³åè®®&quot;</span>; <span class="comment">//è·å–è¾“å…¥æç¤ºæ¡†çš„å€¼</span></span><br><span class="line">        <span class="keyword">var</span> imgNode = <span class="string">&quot;&lt;img src=&#x27;$&#123;APP_PATH &#125;/static/images/logo/x.png&#x27;&gt;&quot;</span>;</span><br><span class="line">        $(<span class="string">&quot;.checkboxTips&quot;</span>).append(imgNode + errorMsg);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å±‚-1"><a href="#æ§åˆ¶å±‚-1" class="headerlink" title="æ§åˆ¶å±‚"></a>æ§åˆ¶å±‚</h2><ul><li>å¤„ç†ç”¨æˆ·æ³¨å†Œçš„è¯·æ±‚ï¼Œéœ€è¦é‚®ç®±éªŒè¯ç æ­£ç¡®åæ‰èƒ½æ‰§è¡Œç”¨æˆ·æ·»åŠ æ“ä½œ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ æ³¨å†Œç”¨æˆ·ï¼Œéœ€è¦è¿›è¡Œé‚®ç®±éªŒè¯ç çš„éªŒè¯</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/addUser&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ReturnMsg <span class="title">addUser</span><span class="params">(String username, String email, String password, String code)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//å­˜å…¥ç”¨æˆ·åï¼Œå¯†ç ï¼Œé‚®ç®±</span></span><br><span class="line">   Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">   map.put(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">   map.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">   map.put(<span class="string">&quot;email&quot;</span>, email);</span><br><span class="line">   ReturnMsg returnMsg = <span class="keyword">new</span> ReturnMsg();</span><br><span class="line">   <span class="comment">//é‚®ç®±éªŒè¯æ­£ç¡®</span></span><br><span class="line">   <span class="keyword">if</span> (code.equals(user.getCode())) &#123;</span><br><span class="line">      <span class="keyword">int</span> result = userService.addUserSelective(map);</span><br><span class="line">      System.out.println(result);</span><br><span class="line">      <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123; <span class="comment">//æ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">         returnMsg.isSuccess();</span><br><span class="line">         <span class="keyword">return</span> returnMsg;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         returnMsg.fail(<span class="string">&quot;æ³¨å†Œå¤±è´¥&quot;</span>);</span><br><span class="line">         <span class="keyword">return</span> returnMsg;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         returnMsg.fail(<span class="string">&quot;é‚®ç®±éªŒè¯ç ä¸æ­£ç¡®æˆ–å·²å¤±æ•ˆ!&quot;</span>);</span><br><span class="line">         <span class="keyword">return</span> returnMsg;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ³¨å†Œè§†å›¾&quot;&gt;&lt;a href=&quot;#æ³¨å†Œè§†å›¾&quot; class=&quot;headerlink&quot; title=&quot;æ³¨å†Œè§†å›¾&quot;&gt;&lt;/a&gt;æ³¨å†Œè§†å›¾&lt;/h1&gt;&lt;h2 id=&quot;HTMLç»“æ„&quot;&gt;&lt;a href=&quot;#HTMLç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;HTMLç»“</summary>
      
    
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="å…¨æ ˆå®ä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%85%A8%E6%A0%88%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>SSMé¡¹ç›®ğŸ¯ç½‘æ˜“äº‘éŸ³ä¹å®æˆ˜ä¹‹ç¯å¢ƒæ­å»º</title>
    <link href="http://xiaoliblog.cn/page/neteaseshop02.html"/>
    <id>http://xiaoliblog.cn/page/neteaseshop02.html</id>
    <published>2021-06-18T14:27:41.005Z</published>
    <updated>2021-06-21T09:17:42.576Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><div class="btns rounded center grid5">            <a href="https://gitee.com/xiaoliblog/netease-cloudmusic" title="ä¸‹è½½æºç "><i class="fas fa-download"></i>ä¸‹è½½æºç </a>          </div><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><ul><li>é¦–å…ˆåˆ›å»ºæ•°æ®åº“ï¼Œæœ¬ç³»ç»Ÿæš‚æ—¶å¤±æ•ˆäº†ç”¨æˆ·æ¨¡å—çš„åŠŸèƒ½ï¼Œåªéœ€åˆ›å»ºç”¨æˆ·è¡¨å³å¯ã€‚</li><li>æ¯ä¸ªäººç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„å¤´åƒavatar</li><li>å¢åŠ codeï¼Œç”¨äºåé¢é‚®ç®±éªŒè¯ç çš„æ“ä½œï¼Œstatuså­—æ®µå¯ä»¥å®ç°é‚®ç®±æ¿€æ´»</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@36365946f7ec9ea4e6d28412b871cf536545646c/2021/06/18/7e5e512db56fdd17b3a68703883cde79.png"></p><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><ul><li>é¡¹ç›®ç»“æ„æŒ‰ç…§MVCæ¨¡å¼æ­å»º</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">|--main</span><br><span class="line">   |--java</span><br><span class="line">      | com.netease</span><br><span class="line">         |--controller # æ§åˆ¶å™¨</span><br><span class="line">         |--dao     # æŒä¹…å±‚</span><br><span class="line">         |--interceptor  # æ‹¦æˆªå™¨</span><br><span class="line">         |--pojo   # å®ä½“ç±»</span><br><span class="line">         |--service  # ä¸šåŠ¡å±‚</span><br><span class="line">         |--utils  # å·¥å…·ç±»</span><br><span class="line">   |--resources</span><br><span class="line">      |--mapper  # å­˜æ”¾Mapperé…ç½®æ–‡ä»¶</span><br><span class="line">      |--applicationContext.xml</span><br><span class="line">      |--db.properties</span><br><span class="line">      |--mybatis-config.xml </span><br><span class="line">      |--springmvc-servlet.xml</span><br><span class="line">   |--webapp</span><br><span class="line">      |--CSSï¼ŒJSï¼Œå›¾ç‰‡ç­‰é™æ€æ–‡ä»¶</span><br><span class="line">      |--WEB-INF</span><br><span class="line">         |--admin  # ç®¡ç†å‘˜é¡µé¢</span><br><span class="line">         |--pages  # ç”¨æˆ·è®¿é—®é¡µé¢</span><br><span class="line">         |--web.xml</span><br><span class="line">      |--index.jsp</span><br><span class="line">|--test</span><br><span class="line">   |--java</span><br><span class="line">      |--MapperTest.java  #Springå•å…ƒæµ‹è¯•</span><br><span class="line">      |--MvcTest.java  # MVCæµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨Postmanä»£æ›¿</span><br><span class="line">      |--UtilsTest.java  #å·¥å…·ç±»æµ‹è¯•</span><br><span class="line">|--pom.xml</span><br></pre></td></tr></table></figure><h2 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Springæ ¸å¿ƒä¾èµ–--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Spring AOP--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjrt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--SpringAOP--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Spring WEB--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Spring Test--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--MyBatis--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--MyBatis-Spring--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JSTL--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Servlet--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--æœåŠ¡å™¨ä¸Šæœ‰å°±å‰”é™¤æ‰--&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JSP--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Junit--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--å¼•å…¥pageHelperåˆ†é¡µæ’ä»¶--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JSONå­—ç¬¦ä¸²è½¬æ¢--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JSR303æ•°æ®æ ¡éªŒ--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Lombok--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--é‚®ä»¶å·¥å…·åŒ…--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.activation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- è…¾è®¯äº‘æ»‘åŠ¨éªŒè¯ç --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.tencentcloudapi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tencentcloud-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- æ”¯ä»˜å®æ”¯ä»˜ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alipay.sdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alipay-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.58.ALL<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- é˜¿é‡Œäº‘oss --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.10.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--ä¸Šä¼ é˜¿é‡Œäº‘OSS--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.jdom/jdom --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jdom<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="SSMæ•´åˆ"><a href="#SSMæ•´åˆ" class="headerlink" title="SSMæ•´åˆ"></a>SSMæ•´åˆ</h1><h2 id="Web-xmlé…ç½®"><a href="#Web-xmlé…ç½®" class="headerlink" title="Web.xmlé…ç½®"></a>Web.xmlé…ç½®</h2><ul><li>é¦–å…ˆé…ç½®<code>Web.xml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¦–æ¬¡å¯åŠ¨è®¿é—®index.jsp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--404 500 é”™è¯¯é¡µé¢--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;error-page&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;error-code&gt;404&lt;/error-code&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;location&gt;404.jsp&lt;/location&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/error-page&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;error-page&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;location&gt;500&lt;/location&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;location&gt;500.jsp&lt;/location&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/error-page&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--sessionæ°¸ä¸è¿‡æœŸ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯åŠ¨springçš„å®¹å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®ä¼šæŠ¥é”™--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®è§†å›¾æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åŠ è½½springmvc-servlet.xmlé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æœ€å¤§æ–‡ä»¶ä¸Šä¼ é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">multipart-config</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">max-file-size</span>&gt;</span>10000000000<span class="tag">&lt;/<span class="name">max-file-size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">multipart-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="SpringMVCé…ç½®"><a href="#SpringMVCé…ç½®" class="headerlink" title="SpringMVCé…ç½®"></a>SpringMVCé…ç½®</h2><ul><li>å³<code>springmvc-servlet.xml</code>é…ç½®æ–‡ä»¶</li><li>åœ¨<code>WEB-INF</code>ä¸‹çš„é¡µé¢æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®çš„ï¼Œåªèƒ½é€šè¿‡è¯·æ±‚è·³è½¬<ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šè¯·æ±‚å¯ä»¥é€šè¿‡Controlleré‡Œå†™æ–¹æ³•è·³è½¬</li><li>ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨<code>&lt;mvc:view-controller path=&quot;&quot; view-name=&quot;&quot;/&gt;</code>æ ‡ç­¾å®ç°ï¼Œ<code>path</code>é‡Œå¡«è¯·æ±‚åç§°ï¼Œ<code>view-name</code>ä¸ºé¡µé¢çš„çœŸå®è·¯å¾„</li></ul></li><li><code>&lt;mvc:cors&gt;</code>ç”¨äºè§£å†³è·¨åŸŸè¯·æ±‚ï¼Œå› ä¸ºæœ¬é¡¹ç›®ä½¿ç”¨äº†Vueè¯·æ±‚ç½‘æ˜“äº‘æ¥å£ï¼Œä¼šå‡ºç°è·¨åŸŸç°è±¡</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--SpringMVCçš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ç½‘ç«™è·³è½¬é€»è¾‘çš„æ§åˆ¶ï¼Œé…ç½®  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.netease&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åªæ‰«ææ§åˆ¶å™¨ã€‚  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸ç»è¿‡æ§åˆ¶å™¨è·³è½¬é¡µé¢ï¼Œpathä¸ºè¯·æ±‚è·¯å¾„,view-nameä¸ºWEB-INFä¸‹çš„è§†å›¾è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--user ç”¨æˆ·è·³è½¬--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/login&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/login&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/register&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/register&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/shop&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/shop&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/findpw&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/findpw&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/songlist&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/songlist&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/user/setting&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/setting&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/index&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;../index&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;user/goodsinfo&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;pages/GoodsInfo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--admin ç®¡ç†å‘˜è·³è½¬--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/index&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/index&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/tologin&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/login&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/user_password&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/user_password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/web_info&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/web_info&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/web_adv&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/web_adv&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/order_table&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/order_table&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/user_table&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/user_table&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/product_table&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/product_table&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/admin/song_table&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;admin/song_table&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®è§†å›¾è§£æå™¨ï¼Œæ–¹ä¾¿é¡µé¢è¿”å›  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä¸¤ä¸ªæ ‡å‡†é…ç½®  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°†springmvcä¸èƒ½å¤„ç†çš„è¯·æ±‚äº¤ç»™tomcat --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èƒ½æ”¯æŒspringmvcæ›´é«˜çº§çš„ä¸€äº›åŠŸèƒ½ï¼ŒJSR303æ ¡éªŒï¼Œå¿«æ·çš„ajax...æ˜ å°„åŠ¨æ€è¯·æ±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®è§†å›¾è§£æå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åŒ…å«/user/è¯·æ±‚ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚ï¼Œæœ€å¥½å–ä¸€ä¸ªçˆ¶è·¯å¾„--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/user/**&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;loginInterceptor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.netease.interceptor.LoginInterceptor&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§£å†³è·¨åŸŸé—®é¢˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:cors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allowed-origins</span>=<span class="string">&quot;*&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allowed-methods</span>=<span class="string">&quot;POST, GET, OPTIONS, DELETE, PUT,PATCH&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allowed-headers</span>=<span class="string">&quot;Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allow-credentials</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:cors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Springé…ç½®"><a href="#Springé…ç½®" class="headerlink" title="Springé…ç½®"></a>Springé…ç½®</h2><ul><li>æ•°æ®åº“é…ç½®æ–‡ä»¶<code>db.properties</code></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.jdbcUrl</span>=<span class="string">jdbc:mysql://localhost:3306/music?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="meta">jdbc.user</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><ul><li><code>applicrionContext.xml</code>é…ç½®</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Springé…ç½®æ–‡ä»¶çš„æ ¸å¿ƒç‚¹ï¼ˆæ•°æ®æºã€ä¸mybatisçš„æ•´åˆï¼Œäº‹åŠ¡æ§åˆ¶ï¼‰ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.netease&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Springçš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œä¸»è¦é…ç½®å’Œä¸šåŠ¡é€»è¾‘æœ‰å…³çš„ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--=================== æ•°æ®æºï¼Œäº‹åŠ¡æ§åˆ¶ï¼Œxxx ================--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;pooledDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.jdbcUrl&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--================== é…ç½®å’ŒMyBatisçš„æ•´åˆ=============== --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;pooledDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šmybatisï¼Œmapperæ–‡ä»¶çš„ä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ‰«æå™¨ï¼Œå°†mybatisæ¥å£çš„å®ç°åŠ å…¥åˆ°iocå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ‰«ææ‰€æœ‰daoæ¥å£çš„å®ç°ï¼ŒåŠ å…¥åˆ°iocå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.netease.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ‰¹é‡çš„sqlSession --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®ä¸ºSIMPLE ç»“æœä¸å‡ºç°è´Ÿæ•°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--=============================================  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ===============äº‹åŠ¡æ§åˆ¶çš„é…ç½® ================--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ§åˆ¶ä½æ•°æ®æº  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;pooledDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ï¼Œä½¿ç”¨xmlé…ç½®å½¢å¼çš„äº‹åŠ¡ï¼ˆå¿…è¦ä¸»è¦çš„éƒ½æ˜¯ä½¿ç”¨é…ç½®å¼ï¼‰  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.netease.service..*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txPoint&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡å¢å¼º --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPoint&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®äº‹åŠ¡å¢å¼ºï¼Œäº‹åŠ¡å¦‚ä½•åˆ‡å…¥  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯äº‹åŠ¡æ–¹æ³• --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä»¥getå¼€å§‹çš„æ‰€æœ‰æ–¹æ³•  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SpringMVCé»˜è®¤æ˜¯å…³é—­fileuploadåŠŸèƒ½çš„ï¼Œå¼€å¯è¯¥èƒ½å¤Ÿå¹¶éªŒè¯æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒJSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10M)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MyBatisé…ç½®"><a href="#MyBatisé…ç½®" class="headerlink" title="MyBatisé…ç½®"></a>MyBatisé…ç½®</h2><ul><li><code>mybatis-config.xml</code>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹äºæ‰¹é‡æ›´æ–°æ“ä½œç¼“å­˜SQLä»¥æé«˜æ€§èƒ½  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultExecutorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.netease.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åˆ†é¡µå‚æ•°åˆç†åŒ–  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;reasonable&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><h2 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h2><ul><li>åˆ›å»ºä¸€ä¸ªå¾—åˆ°UUIDï¼Œæ—¥æœŸåŠéšæœºæ•°çš„å·¥å…·ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.utils;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UUIDUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getUUID</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String uuid = UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>).toLowerCase();</span><br><span class="line">        <span class="keyword">return</span> uuid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getUUID</span><span class="params">(<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(length&lt;=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String uuid = getUUID();</span><br><span class="line">        StringBuffer str = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            str.append(uuid.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getTime</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyyå¹´MMæœˆddæ—¥HH:mm:ss&quot;</span>);</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        String str = sdf.format(date);<span class="comment">//2021å¹´05æœˆ21æ—¥23:04:12</span></span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">getRandom</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="comment">//numä»¥å†…çš„éšæœº</span></span><br><span class="line">        <span class="keyword">int</span> randomnum = (<span class="keyword">int</span>)(<span class="number">1</span>+Math.random()*(end-start+start));</span><br><span class="line">        <span class="keyword">return</span> randomnum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h2><ul><li>å®ä½“ç±»Userï¼Œç”¨åˆ°äº†JSR303æ ¡éªŒ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.pojo;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="comment">//JSR303åç«¯æ ¡éªŒï¼Œéœ€è¦å¯¼å…¥Hibernate-ValidatoråŒ…</span></span><br><span class="line">    <span class="meta">@Pattern(regexp=&quot;(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)&quot;</span></span><br><span class="line"><span class="meta">            ,message=&quot;ç”¨æˆ·åå¿…é¡»æ˜¯2-5ä½ä¸­æ–‡æˆ–è€…6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]&#123;8,&#125;$&quot;</span></span><br><span class="line"><span class="meta">            ,message=&quot;è‡³å°‘8ä½å¹¶åŒ…å«å¤§å°å†™å’Œæ•°å­—,ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@Pattern(regexp=&quot;^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]&#123;2,6&#125;)$&quot;,</span></span><br><span class="line"><span class="meta">            message=&quot;ç”¨æˆ·å@åŸŸåï¼ˆåŸŸååç¼€è‡³å°‘2ä¸ªå­—ç¬¦ï¼‰&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> state;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Daoå±‚"><a href="#Daoå±‚" class="headerlink" title="Daoå±‚"></a>Daoå±‚</h2><ul><li><code>UserMapper</code>æ¥å£Â·</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netease.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ å¤šä¸ªç»“æœç”¨List</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ å•ä¸ªç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserBynameAndpwd</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span>String password)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åå’Œé‚®ç®±æŸ¥è¯¢å¯†ç </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryPassword</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;email&quot;)</span>String email)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ç”¨æˆ· ç”¨æˆ·åå‚æ•°è¿‡å¤š ä½¿ç”¨Map æœ‰é€‰æ‹©çš„å¢åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºè¡¨æ ¼æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clearUserInfo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ· å•ä¸ª</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idæ›´æ–°ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®IDé›†åˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteBatch</span><span class="params">(List&lt;Integer&gt; ids)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>UserMapperxml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceæŒ‡å®šDao/Mapperçš„å®Œæ•´è·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.netease.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è‡ªå®šä¹‰æ˜ å°„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.netease.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;state&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;state&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;code&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;code&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;avatar&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è‡ªå®šä¹‰SQLç‰‡æ®µ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;User_Column_List&quot;</span>&gt;</span></span><br><span class="line">        id,username,password,email,state,code,avatar</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByUsername&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;User_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_user where username = #&#123;username&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllUser&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;User_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByID&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;User_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ ç”¨æˆ· ä¸»é”®å›å¡« æœ‰åˆ™æ›´æ–°ï¼Œæ— åˆ™æ’å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUserSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        alter table tablename auot_increnment = 1;--&gt;</span></span><br><span class="line">        insert into t_user</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">                username,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">                password,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                email,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">                state,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code != null&quot;</span>&gt;</span></span><br><span class="line">                code,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">                avatar</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;username&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;password&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;email&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;state&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;code&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">                #&#123;avatar&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®IDåˆ é™¤ç”¨æˆ·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUserByID&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from t_user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserBynameAndpwd&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">        select  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;User_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®é‚®ç®±å’Œç”¨æˆ·åæŸ¥è¯¢å¯†ç --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryPassword&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;User_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_user where username = #&#123;username&#125; and email = #&#123;email&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ›´æ–°ç”¨æˆ·ä¿¡æ¯åŠ¨æ€SQLå®ç° åªæ›´æ–°æœ‰å€¼çš„æ•°æ®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUserSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        update t_user</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">                username = #&#123;username&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">                password = #&#123;password&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                email = #&#123;email&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">                state = #&#123;state&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code != null&quot;</span>&gt;</span></span><br><span class="line">                code = #&#123;code&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">                avatar = #&#123;avatar&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ¸…ç©ºç”¨æˆ·æ•°æ®,åŒ…å«ä¸»é”®ID--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;clearUserInfo&quot;</span>&gt;</span></span><br><span class="line">        truncate table t_user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®IDé›†åˆæ‰¹é‡åˆ é™¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatch&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        delete from t_user where id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;list&quot;</span> <span class="attr">index</span>=<span class="string">&quot;no&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            delete from t_user where id in (1,2,3,4,5,...)</span></span><br><span class="line"><span class="comment">            foreachç”¨æ¥å¾ªç¯ï¼Œcollectionç”¨äºæŒ‡å®šå¾ªç¯çš„æ•°æ®ç±»å‹:arraylist,map</span></span><br><span class="line"><span class="comment">            itemä¸ºæ¯ä¸€ä¸ªå¾ªç¯çš„æ•°æ®æŒ‡å®šä¸€ä¸ªåˆ«åï¼Œindexä¸ºå¾ªç¯ä¸­çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">            openä¸ºå¼€å§‹ï¼Œcloseä¸ºç»“æŸï¼Œseparatorä¸ºæ•°ç»„ä¹‹é—´çš„åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Serviceå±‚"><a href="#Serviceå±‚" class="headerlink" title="Serviceå±‚"></a>Serviceå±‚</h2><ul><li><code>UserService</code>æ¥å£</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netease.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserBynameAndpwd</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span>String password)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">    <span class="comment">//æ ¹æ®ç”¨æˆ·åå’Œé‚®ç®±æŸ¥è¯¢å¯†ç </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryPassword</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;email&quot;)</span>String email)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºè¡¨æ ¼æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clearUserInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®IDé›†åˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteBatch</span><span class="params">(List&lt;Integer&gt; ids)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>UserServiceImpl</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netease.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netease.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.netease.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryAllUser();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryUserByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserBynameAndpwd</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryUserBynameAndpwd(username,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryPassword</span><span class="params">(String username, String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryPassword(username,email);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.addUserSelective(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.deleteUserByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clearUserInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.clearUserInfo();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryUserByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryUserByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUserSelective</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.updateUserSelective(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteBatch</span><span class="params">(List&lt;Integer&gt; ids)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.deleteBatch(ids);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Springå•å…ƒæµ‹è¯•"><a href="#Springå•å…ƒæµ‹è¯•" class="headerlink" title="Springå•å…ƒæµ‹è¯•"></a>Springå•å…ƒæµ‹è¯•</h2><ul><li>Springå•å…ƒæµ‹è¯•éœ€è¦å¯¼å…¥<code>Spring-test</code>åŒ…</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.netease.dao.*;</span><br><span class="line"><span class="keyword">import</span> com.netease.pojo.*;</span><br><span class="line"><span class="keyword">import</span> com.netease.utils.UUIDUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Auther</span>: http://xiaoliblog.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2021/6/3</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: PACKAGE_NAME</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations=&#123;&quot;classpath:applicationContext.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AdministratorMapper administratorMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•UserMapper</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUserMapper</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1. æµ‹è¯•æ˜¯å¦æ‹¿åˆ°äº†IOCå®¹å™¨é‡Œçš„Bean</span></span><br><span class="line">        System.out.println(userMapper);</span><br><span class="line">        <span class="comment">//æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·æ•°æ® æ…ç”¨</span></span><br><span class="line"><span class="comment">//        int result = userMapper.clearUserInfo();</span></span><br><span class="line"><span class="comment">//        System.out.println(result);</span></span><br><span class="line"><span class="comment">//        if(result == 0)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ¸…ç©ºæ•°æ®æˆåŠŸ&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ¸…ç©ºæ•°æ®å¤±è´¥&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. æ’å…¥ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="comment">//        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        map.put(&quot;username&quot;,&quot;å»–æ–‡é¾™12&quot;);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;password&quot;,&quot;12345&quot;);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;email&quot;,&quot;231312313@1.com&quot;);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        try&#123;</span></span><br><span class="line"><span class="comment">//            int result1 =  userMapper.addUserSelective(map);</span></span><br><span class="line"><span class="comment">//            System.out.println(result1);</span></span><br><span class="line"><span class="comment">//            if(result1 &gt; 0)&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(&quot;æ’å…¥æˆåŠŸ----- &quot;);</span></span><br><span class="line"><span class="comment">//            &#125;else&#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(&quot;æ’å…¥å¤±è´¥&quot;);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;catch (Exception e)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;ç”¨æˆ·åå·²å­˜åœ¨ï¼Œä¸èƒ½æ’å…¥&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        int result = userMapper.deleteUserByID(50);</span></span><br><span class="line"><span class="comment">//        System.out.println(result);</span></span><br><span class="line"><span class="comment">//        if(result &gt; 0)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;åˆ é™¤æˆåŠŸ&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;åˆ é™¤å¤±è´¥ï¼Œç”¨æˆ·idä¸å­˜åœ¨&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//4. æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        List&lt;User&gt; userList = userMapper.queryAllUser();</span></span><br><span class="line"><span class="comment">//        for (User user1 : userList) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(user1);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. æ ¹æ®ç”¨æˆ·åå’Œé‚®ç®±æŸ¥è¯¢ç”¨æˆ·å¯†ç  //å¯èƒ½è¿”å›å¤šæ¡ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">//        User upassword = userMapper.queryPassword(&quot;å°æ˜&quot;,&quot;123231@123.com&quot;);</span></span><br><span class="line"><span class="comment">//        if(upassword!=null) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(upassword.getPassword());</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æŸ¥è¯¢æœªæ‰¾åˆ°&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//6. æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        User user = userMapper.queryUserBynameAndpwd(&quot;å°äº®&quot;,&quot;12345&quot;);</span></span><br><span class="line"><span class="comment">//        System.out.println(user);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7. æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        User user1 = userMapper.queryUserByID(1);</span></span><br><span class="line"><span class="comment">//        if(user1!=null) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(user1);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æŸ¥è¯¢æœªæ‰¾åˆ°&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        //8. æ›´æ–°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        Map&lt;String,Object&gt; map1 = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        map1.put(&quot;id&quot;,168); //æ ¹æ®id=3è¿›è¡Œæ›´æ–°</span></span><br><span class="line"><span class="comment">//        map1.put(&quot;username&quot;,&quot;å°å»–1&quot;);</span></span><br><span class="line"><span class="comment">//        map1.put(&quot;password&quot;,&quot;0000&quot;);</span></span><br><span class="line"><span class="comment">//        int res = userMapper.updateUserSelective(map1);</span></span><br><span class="line"><span class="comment">//        System.out.println(res);</span></span><br><span class="line"><span class="comment">//        System.out.println(map1);</span></span><br><span class="line"><span class="comment">//        if (res != 0)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ›´æ–°æˆåŠŸ&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ›´æ–°å¤±è´¥&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//9. æ‰¹é‡åˆå§‹åŒ–ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="comment">//        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span></span><br><span class="line"><span class="comment">//        for(int i=0;i&lt;50;i++)&#123;</span></span><br><span class="line"><span class="comment">//            Map&lt;String,Object&gt; map3 = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">//            map3.put(&quot;username&quot;, UUIDUtils.getUUID(6));</span></span><br><span class="line"><span class="comment">//            map3.put(&quot;password&quot;,UUIDUtils.getUUID(8));</span></span><br><span class="line"><span class="comment">//            map3.put(&quot;email&quot;,UUIDUtils.getUUID(8)+&quot;@qq.com&quot;);</span></span><br><span class="line"><span class="comment">//            map3.put(&quot;code&quot;,UUIDUtils.getUUID(4));</span></span><br><span class="line"><span class="comment">//            map3.put(&quot;avatar&quot;,&quot;https://cdn.jsdelivr.net/gh/xiaoliblog/MyCDNRepo/img/headerimg.png&quot;);</span></span><br><span class="line"><span class="comment">//            mapper.addUserSelective(map3);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;æ‰¹é‡åˆå§‹åŒ–å‘˜å·¥æˆåŠŸ&quot;);</span></span><br><span class="line"><span class="comment">//        //10. æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">//        User user2 = userMapper.queryUserByUsername(&quot;å°äº®&quot;);</span></span><br><span class="line"><span class="comment">//        if(user2!=null)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(user2);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æŸ¥æ— æ­¤äºº&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdministartorMapper</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(administratorMapper);</span><br><span class="line">        <span class="comment">//1. æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        Administrator administrator = administratorMapper.queryUserByUsernameAndPwd(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;12345&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(administrator != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åŒ¹é…æˆåŠŸ&quot;</span>+administrator);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœªæ‰¾åˆ°&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2. æ›´æ–°å¯†ç </span></span><br><span class="line"><span class="comment">//        int i = administratorMapper.updateUserSelective(&quot;admin&quot;,&quot;12345&quot;);</span></span><br><span class="line"><span class="comment">//        if(i&gt;0)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ›´æ–°æˆåŠŸ&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ›´æ–°å¤±è´¥&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç¯å¢ƒæ­å»º&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒæ­å»º&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒæ­å»º&quot;&gt;&lt;/a&gt;ç¯å¢ƒæ­å»º&lt;/h1&gt;&lt;div class=&quot;btns rounded center grid5&quot;&gt;
            &lt;a href=&quot;http</summary>
      
    
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="å…¨æ ˆå®ä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%85%A8%E6%A0%88%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>SSMé¡¹ç›®ğŸ¯ç½‘æ˜“äº‘éŸ³ä¹å®æˆ˜ä¹‹è½®æ’­å›¾</title>
    <link href="http://xiaoliblog.cn/page/neteaseshop01.html"/>
    <id>http://xiaoliblog.cn/page/neteaseshop01.html</id>
    <published>2021-06-17T16:00:00.000Z</published>
    <updated>2021-06-18T14:26:41.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¦–é¡µè½®æ’­å›¾"><a href="#é¦–é¡µè½®æ’­å›¾" class="headerlink" title="é¦–é¡µè½®æ’­å›¾"></a>é¦–é¡µè½®æ’­å›¾</h1><ul><li>ä½¿ç”¨CSSæ»¤é•œå®ç°èƒŒæ™¯è™šåŒ–</li><li>è½®æ’­å›¾ä¼šè‡ªé€‚åº”çª—å£çš„å®½åº¦å˜åŒ–ï¼Œä¸¤ä¾§ç®­å¤´ä¹Ÿä¼šéšå±å¹•å°ºå¯¸æ”¹å˜ä½ç½®</li><li>ä½¿ç”¨Javascriptçš„å®šæ—¶å™¨å®ç°è‡ªåŠ¨ç¿»é¡µï¼Œè‡ªåŠ¨ç¿»é¡µä¼šæœ‰æ¸éšå’Œæ¸æ˜¾çš„è¿‡æ¸¡æ•ˆæœ</li><li>ä¸¤ä¾§æŒ‰é’®å’Œå°åœ†ç‚¹éƒ½å¯ä»¥ç‚¹å‡»åˆ‡æ¢ï¼Œé¼ æ ‡ç§»å…¥ä¼šåœæ­¢è‡ªåŠ¨åˆ‡æ¢</li></ul><div class="btns rounded center grid5">            <a href="https://gitee.com/xiaoliblog/HTML_CSS_JS/tree/master/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E8%BD%AE%E6%92%AD%E5%9B%BE" title="ä¸‹è½½æºç "><i class="fas fa-download"></i>ä¸‹è½½æºç </a>          </div><h2 id="HTMLç»“æ„"><a href="#HTMLç»“æ„" class="headerlink" title="HTMLç»“æ„"></a>HTMLç»“æ„</h2><ul><li>å›¾ç‰‡é“¾æ¥ç­‰é€šè¿‡JSåŠ¨æ€ç”Ÿæˆã€‚å°åœ†ç‚¹æ•°é‡ä¹Ÿé€šè¿‡JSæ ¹æ®å›¾ç‰‡æ•°é‡åŠ¨æ€ç”Ÿæˆ</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span> <span class="attr">id</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--åˆ›å»ºèƒŒæ™¯åŒºåŸŸæ¥å®ç°è™šåŒ–èƒŒæ™¯--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner_bg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è½®æ’­å›¾å†…å®¹--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--å­˜æ”¾å›¾ç‰‡--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner_picture&quot;</span> <span class="attr">class</span>=<span class="string">&quot;picture&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">id</span>=<span class="string">&quot;banner_link&quot;</span> <span class="attr">class</span>=<span class="string">&quot;link&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;banner_image&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--é€‰æ‹©æŒ‡ç¤ºå°ç™½ç‚¹åŒºåŸŸ--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner_select&quot;</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--å·¦å³ç¿»é¡µæŒ‰é’®ï¼Œä½¿ç”¨å­—ä½“å›¾æ ‡--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner_bt_left&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bt left&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-Left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner_bt_right&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bt right&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-Right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="CSSæ ·å¼"><a href="#CSSæ ·å¼" class="headerlink" title="CSSæ ·å¼"></a>CSSæ ·å¼</h2><ul><li>é¦–å…ˆå¼•å…¥å­—ä½“å›¾æ ‡ï¼Œæ¥æºäºIconfont</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å­—ä½“å›¾æ ‡ï¼Œæ¥è‡ªäºiconfont.cn */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAKUAAsAAAAABmAAAAJJAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCCfgpQYwE2AiQDDAsIAAQgBYRtBzYboQXIrjGFMXYtSYlaOMcguOy7+/WSGRu8A8TD0xrr/ZnZRS1BEo1E0WiSNJFohGKJBLGRAt0zCe52v+nv/mQsYfN8t/yKvW1ncr12p2FrnEYphAThUBQAc9XWl4dsCcZWH2sjJHCl/5/L6U2gs6P57eyc1srGGnblR70A44AC3AujIyuRzFOQ3RGoJT8n0G6MZbR5eH6vlhXOukBcGx2r5VJFUaR+q1C3HC3iWaU1PaaUp/j78S2IZZIqc7buXR1kavvNW1u+bW6dhogqgZ6ukDFPKcRJa2fPREjURHtnapw61rzgrabhTRgTR6UT8dd5/k4wTbuJN75I8NYJCWRQl3udGGHkYAgh6vqGrjG7+bjN8I7+1Xfr4baPuzHuU9vskkIz/eSF+BcjBL2/E24t1lHA6yPlZoHHtO4oG/wUDRwppuFEc9FVX7VzWQ2kElSW8xpOod/v9MgQPExoNTQh12I0h6zVOFrI+Wqlw3X81FqtUGg35+h0hwFsIkobZn0SCL2+IOn2Almvb7SQP1AZ9ge13phAu5MYuLLDZJjVDcZYMIPkDUzaNuTFZTUZvEX9VMVcNGLmEXkwdfAdr9o/wgZ5iR3Dsw5ECIjbGg7Ja1hVLXTcFpiKk4t0C9eltpCctK3Vqg0MxQTKgMQbYKRaDQoni9Xa528h7Uklxj2BhvQRYgMzO/A5PAA9chso8CjvDJ5pASEIIKxVA4dkEapUWqBrX1RAKeHIJ7Q6C647jlDX2T5S/98paOfclyNFjqI6MDqX6RaSKAUA&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">    <span class="attribute">font-family            </span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">font-size              </span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-style             </span>: normal;</span><br><span class="line">    <span class="attribute">-webkit-font-smoothing </span>: antialiased;</span><br><span class="line">    <span class="attribute">-moz-osx-font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å³ç®­å¤´ */</span></span><br><span class="line"><span class="selector-class">.icon-Right</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\e608&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å·¦ç®­å¤´ */</span></span><br><span class="line"><span class="selector-class">.icon-Left</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\e609&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¸¸ç”¨é¢œè‰²æ¨¡æ¿å˜é‡å®šä¹‰ï¼Œå…¶ä¸­<code>:root</code>æ˜¯ä¸€ä¸ªä¼ªç±»ï¼Œç”¨äºå£°æ˜å…¨å±€å±æ€§ï¼Œä½¿ç”¨<code>var(attr)</code>æ¥å¼•ç”¨</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¸¸ç”¨æ¨¡æ¿ */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--background-color</span>: <span class="number">#2c3e50</span>;</span><br><span class="line">    <span class="attribute">--border-color    </span>: <span class="number">#7591AD</span>;</span><br><span class="line">    <span class="attribute">--text-color      </span>: <span class="number">#34495e</span>;</span><br><span class="line">    <span class="attribute">--color1          </span>: <span class="number">#EC3E27</span>;</span><br><span class="line">    <span class="attribute">--color2          </span>: <span class="number">#fd79a8</span>;</span><br><span class="line">    <span class="attribute">--color3          </span>: <span class="number">#0984e3</span>;</span><br><span class="line">    <span class="attribute">--color4          </span>: <span class="number">#00b894</span>;</span><br><span class="line">    <span class="attribute">--color5          </span>: <span class="number">#fdcb6e</span>;</span><br><span class="line">    <span class="attribute">--color6          </span>: <span class="number">#e056fd</span>;</span><br><span class="line">    <span class="attribute">--color7          </span>: <span class="number">#F97F51</span>;</span><br><span class="line">    <span class="attribute">--color8          </span>: <span class="number">#BDC581</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin   </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding  </span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin          </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding         </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background-color);</span><br><span class="line">    <span class="attribute">display         </span>: flex;</span><br><span class="line">    <span class="attribute">justify-content </span>: center;</span><br><span class="line">    <span class="attribute">align-items     </span>: center;</span><br><span class="line">    <span class="attribute">font-family     </span>: <span class="string">&#x27;Montserrat&#x27;</span>, sans-serif, Arial, <span class="string">&#x27;Microsoft Yahei&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>banner</code>è½®æ’­å›¾ç›’å­ï¼Œå®½åº¦ä¸º100%ï¼Œæ ¹æ®å±å¹•è‡ªé€‚åº”ï¼Œè¶…å‡ºéƒ¨åˆ†éšè—</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* banneråŒºåŸŸ */</span></span><br><span class="line"><span class="comment">/* ç›¸å¯¹å®šä½ */</span></span><br><span class="line"><span class="comment">/* å®½åº¦100% */</span></span><br><span class="line"><span class="comment">/* é«˜åº¦æ ¹æ®sectionåŒºåŸŸè‡ªåŠ¨é€‚åº” */</span></span><br><span class="line"><span class="selector-class">.banner</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width   </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>èƒŒæ™¯è™šåŒ–æ•ˆæœä¸åŸæ•ˆæœä¸åŒï¼ŒåŸæ•ˆæœç›´æ¥ä½¿ç”¨è™šåŒ–çš„å›¾ç‰‡åšèƒŒæ™¯ï¼Œè¿™é‡Œä½¿ç”¨CSSæ»¤é•œè¿›è¡ŒèƒŒæ™¯è™šåŒ–ã€‚èƒŒæ™¯å›¾ç‰‡ä¸è½®æ’­å›¾çš„å½“å‰å›¾ç‰‡ç›¸åŒï¼Œé€šè¿‡JSæ§åˆ¶</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* èƒŒæ™¯å›¾åœ°å€è¦æ ¹æ®å‰ç«¯æ˜¾ç¤ºçš„å›¾ç‰‡è¿›è¡Œå˜åŒ– */</span></span><br><span class="line"><span class="comment">/* é€æ˜åº¦å˜åŒ–åŒæ—¶æ›´æ¢èƒŒæ™¯ï¼Œ1-0.2æ›´æ¢èƒŒæ™¯-1æ˜¾ç¤ºæ–°èƒŒæ™¯ */</span></span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-class">.bg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute; <span class="comment">/* ç»å¯¹å®šä½ï¼Œè®©èƒŒæ™¯æµ®åŠ¨èµ·æ¥ */</span></span><br><span class="line">    <span class="attribute">width </span>: <span class="number">200%</span>; <span class="comment">/* å®½åº¦å’Œé«˜åº¦200% */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;   <span class="comment">/*è®¾ç½®ä¸º1ï¼Œä»¥ååªè¦&gt;1å°±ä¼šå‡ºç°åœ¨å…¶ä¸Šæ–¹*/</span></span><br><span class="line">    <span class="comment">/* background-image   : url(./images/4.jpg); */</span> <span class="comment">/*æ–¹ä¾¿è°ƒè¯•*/</span></span><br><span class="line">    <span class="attribute">background-size    </span>: <span class="number">4000px</span>; <span class="comment">/*å®½åº¦å æ»¡å±å¹•*/</span></span><br><span class="line">    <span class="attribute">background-position</span>: center center;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>); <span class="comment">/*è™šåŒ–*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@65ce92011d2ba69d79d56483ef95279659f4ce3b/2021/06/18/03b0a35c8db4577ff97d4f1957d6182b.png"></p><ul><li><code>section</code>å†…å®¹åŒºåŸŸï¼Œå³å›¾ç‰‡ã€ç¿»é¡µã€é€‰æ‹©åŒºåŸŸ</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å†…å®¹åŒºåŸŸ*/</span></span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-tag">section</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width    </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">990px</span>; <span class="comment">/* å®½åº¦ä¸º100%ï¼Œæœ€å¤§ä¸º990 */</span></span><br><span class="line">    <span class="attribute">height   </span>: <span class="number">300px</span>; <span class="comment">/* é«˜åº¦ä¸º300pxï¼Œæ•´ä¸ªè½®æ’­çš„æœ€å¤§é«˜åº¦ */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* marginå®ç°å±…ä¸­ */</span></span><br><span class="line">    <span class="comment">/* background-color: #00b894; */</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å›¾ç‰‡åŒºåŸŸ */</span></span><br><span class="line"><span class="comment">/* ç­‰äºsectionåŒºåŸŸ */</span></span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-tag">section</span> <span class="selector-class">.picture</span> &#123;</span><br><span class="line">    <span class="attribute">width </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å›¾ç‰‡åŒºåŸŸå†…çš„å›¾ç‰‡å®ç”¨object-fitè¿›è¡Œè‡ªé€‚åº”å¤§å°è£åˆ‡ */</span></span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-tag">section</span> <span class="selector-class">.picture</span> <span class="selector-class">.image</span> &#123;</span><br><span class="line">    <span class="attribute">width </span>: <span class="number">100%</span>; <span class="comment">/*100%æ˜¯ç›¸å¯¹äºsectionåŒºåŸŸ*/</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f58068e95c90d1687bcd38f482822ab4ffcd8a53/2021/06/18/f59aaf00e8071c788d4963a88d88548c.png"></p><ul><li><code>select</code>é€‰æ‹©ç‚¹åŒºåŸŸ</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è½®æ’­å›¾é€‰æ‹© */</span></span><br><span class="line"><span class="selector-class">.select</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width </span>: <span class="number">100%</span>; <span class="comment">/* å®½åº¦100%è‡ªé€‚åº” */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">30px</span>; <span class="comment">/* åˆ©ç”¨bottomå®ç°å®šä½ */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFFFFF44</span>; <span class="comment">/* å¢åŠ ä¸€ä¸ªæœ‰é€æ˜åº¦æ§åˆ¶çš„èƒŒæ™¯è‰² */</span></span><br><span class="line">    <span class="attribute">text-align </span>: center; <span class="comment">/* åˆ©ç”¨text-align=center,line-height=30pxå±…ä¸­ */</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@67132aff22369ca9e8dd292cf6216d8dd3c6c80f/2021/06/18/22e408015fcb85c660bf48d4f626f76a.png"></p><ul><li><code>select</code>åŒºåŸŸä¸­é€‰æ‹©ç‚¹çš„æ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è½®æ’­å›¾é€‰æ‹©çš„å…ƒç´  */</span></span><br><span class="line"><span class="comment">/* åˆå§‹åŒ–æ—¶ç•Œé¢ä¸Šæ²¡æœ‰ï¼Œåˆå§‹åŒ–å®Œæˆåæ ¹æ®æ•°æ®è‡ªåŠ¨ç”Ÿæˆ */</span></span><br><span class="line"><span class="selector-class">.select</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block; <span class="comment">/* ä½¿ç”¨inline-blockæ–¹å¼æ˜¾ç¤º */</span></span><br><span class="line">    <span class="attribute">width </span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>; <span class="comment">/* èƒŒæ™¯è‰²ç”¨ç™½è‰² */</span></span><br><span class="line">    <span class="attribute">box-shadow      </span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>); <span class="comment">/* å¢åŠ ä¸€ä¸ªæŠ•å½± */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* é€‰æ‹©å…ƒç´ çš„é¼ æ ‡ç§»å…¥æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.select</span> <span class="selector-class">.item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff4400</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€‰æ‹©å…ƒç´ é€‰ä¸­çš„æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.select</span> <span class="selector-class">.item</span><span class="selector-class">.checked</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff4400</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å·¦å³ç¿»é¡µæŒ‰é’®å®ç°</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å·¦å³ç¿»é¡µæŒ‰é’®é»˜è®¤æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.bt</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">top      </span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attribute">transition      </span>: all <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">display        </span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items    </span>: center;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bt</span><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bt</span><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bt</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bt</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å·¦å³æŒ‰é’®å“åº”å¼æ˜¾ç¤ºå®ç°</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å±å¹•å°ºå¯¸å°äº1110æ—¶ä»¥ä¸‹ä»£ç ç”Ÿæ•ˆï¼Œç›®çš„æ—¶è®©ä¸¤ä¸ªæŒ‰é’®ç§»åŠ¨åˆ°å›¾ç‰‡ä¸»ä½“å†…éƒ¨ï¼Œå› ä¸ºå½“å°äº1110æ—¶ */</span></span><br><span class="line"><span class="comment">/* åŠ ä¸Šå›¾ç‰‡æœ€å¤§ä¸º990ï¼Œè¿™æ—¶å€™å°±çœ‹ä¸åˆ°ä¸¤ä¾§çš„æŒ‰é’®äº† */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span><span class="number">1110px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bt</span><span class="selector-class">.left</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.bt</span><span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSéƒ¨åˆ†"><a href="#JSéƒ¨åˆ†" class="headerlink" title="JSéƒ¨åˆ†"></a>JSéƒ¨åˆ†</h2><ul><li>å®šä¹‰å…¨å±€é€šç”¨å˜é‡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰è½®æ’­å›¾çš„ç¼–å·,è®°å½•äº†å½“å‰æ˜¾ç¤ºä¸­çš„è½®æ’­å›¾çš„ç´¢å¼•ç¼–å·</span></span><br><span class="line"><span class="keyword">let</span> currentIndex = -<span class="number">1</span>;</span><br><span class="line"><span class="comment">// è‡ªåŠ¨ç¿»è½¬å®šæ—¶å™¨</span></span><br><span class="line"><span class="keyword">let</span> bannerTimer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½®æ’­å›¾çš„å›¾ç‰‡åœ°å€ä¸é“¾æ¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">let</span> links = [</span><br><span class="line">    &#123; <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;./images/1.jpg&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;#1&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;./images/2.jpg&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;#2&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;./images/3.jpg&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;#3&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;./images/4.jpg&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;#4&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;./images/5.jpg&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;#5&#x27;</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°æ“ä½œçš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">let</span> banner = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerBG = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_bg&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerPicture = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_picture&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerLink = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_link&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerImage = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_image&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerSelect = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_select&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerBTLeft = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_bt_left&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> bannerBTRight = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;banner_bt_right&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>è½®æ’­å›¾é€‰æ‹©åŠ¨ä½œæ–¹æ³•ï¼Œåˆ†æ‰‹åŠ¨é€‰æ‹©å’Œè‡ªåŠ¨é€‰æ‹©ä¸¤ç§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è½®æ’­å›¾é€‰æ‹©åŠ¨ä½œæ–¹æ³•</span></span><br><span class="line"><span class="comment">// selectæ‰‹åŠ¨é€‰æ‹©</span></span><br><span class="line"><span class="comment">//indexä¸ºå›¾ç‰‡ç´¢å¼•ç¼–å·ï¼Œä»0å¼€å§‹ä¸ºç¬¬ä¸€å¼ </span></span><br><span class="line"><span class="keyword">let</span> select = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// selectç”¨äºæ‰‹åŠ¨æ’­æ”¾ï¼Œæ‰€ä»¥åœæ­¢è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line">    banner_stop();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç‚¹å‡»é€‰æ‹©æŒ‡ç¤ºç‚¹æ—¶è·å–çš„ä¸ºæ–‡æœ¬ç±»å‹ï¼Œéœ€è¦è½¬æ•°å­—</span></span><br><span class="line">    index = <span class="built_in">Number</span>(index);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¶Šç•Œè¶…è¿‡ æœ€å¤§æ•°é‡ linksè¶Šç•Œï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= links.length) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰ä¸­å½“å‰å·²é€‰ä¸­çš„çš„ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (currentIndex == index) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–æ¶ˆå½“å‰çš„æŒ‡ç¤ºç‚¹é€‰ä¸­çŠ¶æ€ï¼Œåªå¤„ç†éåˆå§‹çŠ¶æ€çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (currentIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">        bannerSelect.children[currentIndex].classList.remove(<span class="string">&#x27;checked&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å˜æ›´å½“å‰è½®æ’­å›¾ç¼–å·</span></span><br><span class="line">    currentIndex = index;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°å½“å‰å…ƒç´ </span></span><br><span class="line">    currentLink = links[currentIndex];</span><br><span class="line">    <span class="comment">// èƒŒæ™¯å˜åŒ–</span></span><br><span class="line">    bannerBG.style.backgroundImage = <span class="string">&#x27;url(&#x27;</span> + currentLink.image + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">    <span class="comment">// å‰æ™¯å˜åŒ–</span></span><br><span class="line">    bannerImage.setAttribute(<span class="string">&#x27;src&#x27;</span>, currentLink.image);</span><br><span class="line">    <span class="comment">// é“¾æ¥å˜åŒ–</span></span><br><span class="line">    bannerLink.setAttribute(<span class="string">&#x27;href&#x27;</span>, currentLink.target);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¢åŠ æ–°çš„æŒ‡ç¤ºç‚¹é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">    bannerSelect.children[currentIndex].classList.add(<span class="string">&#x27;checked&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©ï¼ˆè‡ªåŠ¨ï¼‰</span></span><br><span class="line"><span class="comment">// index ä¸ºç¼–å· ä»0åˆ°links.length - 1</span></span><br><span class="line"><span class="keyword">let</span> auto_select = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è½¬æ•°å­—</span></span><br><span class="line">    index = <span class="built_in">Number</span>(index);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¶Šç•Œè¶…è¿‡ æœ€å¤§æ•°é‡ linksè¶Šç•Œï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= links.length) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰ä¸­å½“å‰å·²é€‰ä¸­çš„çš„ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (currentIndex == index) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–æ¶ˆå½“å‰çš„æŒ‡ç¤ºç‚¹é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">    bannerSelect.children[currentIndex].classList.remove(<span class="string">&#x27;checked&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å˜æ›´å½“å‰è½®æ’­å›¾ç¼–å·</span></span><br><span class="line">    currentIndex = index;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°å½“å‰å…ƒç´ </span></span><br><span class="line">    currentLink = links[currentIndex];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰æ™¯å›¾ç‰‡ï¼Œç¬¬ä¸€æ­¥è°ƒæ•´è¿‡åº¦æ—¶é—´ä¸º1s</span></span><br><span class="line">    bannerImage.style.transition = <span class="string">&#x27;opacity 0.5s ease-in 0s&#x27;</span>;</span><br><span class="line">    <span class="comment">// å‰æ™¯å›¾ç‰‡ï¼Œç¬¬äºŒæ­¥è°ƒæ•´ä¸é€æ˜åº¦åˆ°0.2</span></span><br><span class="line">    bannerImage.style.opacity = <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰æ­¥å»¶è¿Ÿå˜æ¢imgå›¾ç‰‡ï¼Œå¹¶é‡æ–°å®šä¹‰é€æ˜åº¦ä»¥åŠè¿‡åº¦æ—¶é—´å’Œè¿‡æ¸¡æ–¹å¼</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// èƒŒæ™¯å˜åŒ–</span></span><br><span class="line">        bannerBG.style.backgroundImage = <span class="string">&#x27;url(&#x27;</span> + currentLink.image + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        <span class="comment">// å‰æ™¯å˜åŒ–</span></span><br><span class="line">        bannerImage.setAttribute(<span class="string">&#x27;src&#x27;</span>, currentLink.image);</span><br><span class="line">        <span class="comment">// é“¾æ¥å˜åŒ–</span></span><br><span class="line">        bannerLink.setAttribute(<span class="string">&#x27;href&#x27;</span>, currentLink.target);</span><br><span class="line">        <span class="comment">// ä¸é€æ˜åº¦å˜åŒ–</span></span><br><span class="line">        bannerImage.style.transition = <span class="string">&#x27;opacity 0.5s ease-out 0s&#x27;</span>;</span><br><span class="line">        bannerImage.style.opacity = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¢åŠ æ–°çš„æŒ‡ç¤ºç‚¹é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// å¦‚æœå·²ç»é€šè¿‡æ‰‹åŠ¨ç‚¹å‡»äº†é€‰ä¸­åˆ™æ­¤å¤„ä¸å†æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.banner .checked&#x27;</span>)) &#123;</span><br><span class="line">            bannerSelect.children[currentIndex].style.transition = <span class="string">&#x27;background-color .5s&#x27;</span>;</span><br><span class="line">            bannerSelect.children[currentIndex].classList.add(<span class="string">&#x27;checked&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨ç¿»è½¬æ’­æ”¾ä¸åœæ­¢</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’­æ”¾</span></span><br><span class="line"><span class="keyword">let</span> banner_play = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 3000 æ‰§è¡Œ1æ¬¡ï¼Œè¿™é‡Œä¸å³ç¿»é€»è¾‘ä¸€è‡´</span></span><br><span class="line">    bannerTimer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–æ–°çš„index</span></span><br><span class="line">        <span class="keyword">let</span> index = currentIndex + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å³ç¿»è¶Šç•Œç­‰äºæœ€å·¦ä¾§å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (index &gt;= links.length) &#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åŠ è½½æ–°å›¾ç‰‡ï¼ˆè¿™é‡Œé€‰æ‹©è‡ªåŠ¨ï¼Œå¢åŠ åˆ‡æ¢æ•ˆæœï¼‰</span></span><br><span class="line">        auto_select(index);</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢</span></span><br><span class="line"><span class="keyword">let</span> banner_stop = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (bannerTimer) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(bannerTimer);</span><br><span class="line">        bannerTimer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é¡µé¢åˆå§‹åŒ–æ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> init = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 1. é¦–å…ˆæ ¹æ®linksæ•°ç»„ï¼ŒåŠ¨æ€ç”ŸæˆæŒ‡ç¤ºç‚¹é™„åŠ åˆ°é¡µé¢ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; links.length; index++) &#123;</span><br><span class="line">       <span class="comment">//åŠ¨æ€åˆ›å»º&lt;a class=&quot;item&quot; href=&quot;#&quot; data-index = index&gt;&lt;/a&gt;æ ‡ç­¾</span></span><br><span class="line">        <span class="keyword">let</span> item = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        <span class="comment">// ä¿®æ”¹å±æ€§</span></span><br><span class="line">        item.setAttribute(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;item&#x27;</span>);</span><br><span class="line">        item.setAttribute(<span class="string">&#x27;href&#x27;</span>, <span class="string">&#x27;#&#x27;</span>);</span><br><span class="line">        item.setAttribute(<span class="string">&#x27;data-index&#x27;</span>, index);</span><br><span class="line">        <span class="comment">// è¿½åŠ å…ƒç´ </span></span><br><span class="line">        bannerSelect.appendChild(item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. è°ƒç”¨æ‰‹åŠ¨é€‰æ‹©å’Œè‡ªåŠ¨é€‰æ‹©çš„æ–¹æ³•</span></span><br><span class="line">    select(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•ç”¨äºç»‘å®šæ‰€æœ‰éœ€è¦ç›‘å¬çš„äº‹ä»¶</span></span><br><span class="line">    bind();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªåŠ¨ç¿»è½¬æ’­æ”¾</span></span><br><span class="line">    banner_play();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>äº‹ä»¶ç»‘å®šæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> bind = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¦ç¿»é¡µäº‹ä»¶ç›‘å¬</span></span><br><span class="line">    bannerBTLeft.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–æ–°çš„index</span></span><br><span class="line">        <span class="keyword">let</span> index = currentIndex - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å·¦ç¿»è¶Šç•Œç­‰äºæœ€å³å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            index = links.length - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åŠ è½½æ–°å›¾ç‰‡</span></span><br><span class="line">        select(index);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å³ç¿»é¡µäº‹ä»¶ç›‘å¬</span></span><br><span class="line">    bannerBTRight.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–æ–°çš„index</span></span><br><span class="line">        <span class="keyword">let</span> index = currentIndex + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å³ç¿»è¶Šç•Œç­‰äºæœ€å·¦ä¾§å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (index &gt;= links.length) &#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åŠ è½½æ–°å›¾ç‰‡</span></span><br><span class="line">        select(index);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šselecté€‰æ‹©æŒ‡ç¤ºç‚¹çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> bannerSelect.children) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bannerSelect.children.hasOwnProperty(key)) &#123;</span><br><span class="line">            <span class="keyword">const</span> element = bannerSelect.children[key];</span><br><span class="line">            element.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// å–æ¶ˆé»˜è®¤ç‚¹å‡»è·³è½¬</span></span><br><span class="line">                e.preventDefault();</span><br><span class="line">                <span class="comment">// è·³è½¬åˆ°å½“å‰æŒ‡ç¤ºç‚¹ä¸­data-indexæ‰€æŒ‡å®šçš„å›¾ç‰‡ï¼Œè·å–çš„ä¸ºæ–‡æœ¬ç±»å‹</span></span><br><span class="line">                select(e.target.dataset.index);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šé¼ æ ‡ç§»å…¥äº‹ä»¶</span></span><br><span class="line">    banner.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// é˜²æ­¢é¼ æ ‡ä»å­å…ƒç´ ç§»å‡ºæ—¶è§¦å‘</span></span><br><span class="line">        <span class="keyword">if</span> (e.relatedTarget &amp;&amp; banner.compareDocumentPosition(e.relatedTarget) == <span class="number">10</span>) &#123;</span><br><span class="line">            banner_stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šé¼ æ ‡ç§»å‡ºäº‹ä»¶</span></span><br><span class="line">    banner.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// é˜²æ­¢é¼ æ ‡ä»å­å…ƒç´ ç§»å‡ºæ—¶è§¦å‘</span></span><br><span class="line">        <span class="keyword">if</span> (e.relatedTarget &amp;&amp; banner.compareDocumentPosition(e.relatedTarget) == <span class="number">10</span>) &#123;</span><br><span class="line">            banner_play();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">    banner.addEventListener(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        banner_stop();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é¡µé¢åŠ è½½</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡µé¢åŠ è½½å®Œæ¯•</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">    init();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¦–é¡µè½®æ’­å›¾&quot;&gt;&lt;a href=&quot;#é¦–é¡µè½®æ’­å›¾&quot; class=&quot;headerlink&quot; title=&quot;é¦–é¡µè½®æ’­å›¾&quot;&gt;&lt;/a&gt;é¦–é¡µè½®æ’­å›¾&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨CSSæ»¤é•œå®ç°èƒŒæ™¯è™šåŒ–&lt;/li&gt;
&lt;li&gt;è½®æ’­å›¾ä¼šè‡ªé€‚åº”çª—å£çš„å®½åº¦å˜åŒ–ï¼Œä¸¤ä¾§ç®­å¤´ä¹Ÿä¼šéšå±å¹•å°ºå¯¸æ”¹å˜ä½</summary>
      
    
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="å…¨æ ˆå®ä¾‹" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%85%A8%E6%A0%88%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="é¡¹ç›®æ¡ˆä¾‹" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>Webå¼€å‘å¸¸ç”¨æ’ä»¶åˆ†äº«</title>
    <link href="http://xiaoliblog.cn/page/plugins.html"/>
    <id>http://xiaoliblog.cn/page/plugins.html</id>
    <published>2021-06-14T12:04:08.952Z</published>
    <updated>2021-06-16T08:35:31.703Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Anime-js"><a href="#Anime-js" class="headerlink" title="Anime.js"></a>Anime.js</h1><ul><li>anime.js æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„Javascript åŠ¨ç”»åº“æ’ä»¶ã€‚anime.js å¯ä»¥å’ŒCSS3 å±æ€§ï¼ŒSVGï¼ŒDOM å…ƒç´ å’ŒJS å¯¹è±¡ä¸€èµ·å·¥ä½œï¼Œåˆ¶ä½œå‡ºå„ç§é«˜æ€§èƒ½ï¼Œå¹³æ»‘è¿‡æ¸¡çš„åŠ¨ç”»æ•ˆæœ</li><li>Animejsä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://www.animejs.cn/documentation/">https://www.animejs.cn/documentation/</a></li></ul><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨npmä¸‹è½½</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y <span class="comment"># åˆå§‹åŒ–é¡¹ç›®</span></span><br><span class="line">npm install animejs </span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä¸‹è½½åˆ°æœ¬åœ°å¼•å…¥ã€æ¨èã€‘</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸‰ç§æ˜¯å¼•å…¥CDN</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç›®æ ‡å±æ€§"><a href="#ç›®æ ‡å±æ€§" class="headerlink" title="ç›®æ ‡å±æ€§"></a>ç›®æ ‡å±æ€§</h2><ul><li>é¦–å…ˆç¡®ä¿å¼•å…¥äº†animeçš„jsæ–‡ä»¶</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;plugins/animejs/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç®€å•æ­å»ºæµ‹è¯•ç¯å¢ƒ</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">68</span>, <span class="number">64</span>, <span class="number">92</span>);</span><br><span class="line">   <span class="attribute">display</span>: flex;</span><br><span class="line">   <span class="attribute">justify-content</span>: center;</span><br><span class="line">   <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">background-color</span>: cornflowerblue;</span><br><span class="line">   <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡<code>anime()</code> æ–¹æ³•æ¥æ„é€ ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œä»¥<code>json</code> å¯¹è±¡çš„æ–¹å¼ä¼ å…¥éœ€è¦çš„å‚æ•°ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">anime(&#123;</span><br><span class="line">   targets:<span class="string">&#x27;.demo&#x27;</span>,</span><br><span class="line">   translateX: <span class="number">200</span>,</span><br><span class="line">   loop: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@08457c84d2a67075840ba499456d2ef821f37ae2/2021/06/15/72304f2b1adb46f623ddb894d1d0d263.png"></p><ul><li><code>targets</code>ä¹Ÿå¯ä»¥æŒ‡å‘DOMå…ƒç´ </li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> demo = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.demo&#x27;</span>)</span><br><span class="line">anime(&#123;</span><br><span class="line">   targets: demo,</span><br><span class="line">   translateX: <span class="number">200</span>,</span><br><span class="line">   loop: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>åŒ…å«æ•°å€¼çš„ä»»ä½•Objectå±æ€§éƒ½å¯ä»¥è®¾ç½®åŠ¨ç”»ï¼Œæ¯”å¦‚å¯¹JavaScriptå¯¹è±¡å±æ€§è¿›è¡Œè®¾ç½®åŠ¨ç”»</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> demo = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.demo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">   prop1: <span class="number">0</span>,</span><br><span class="line">   prop2: <span class="string">&#x27;0%&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">anime(&#123;</span><br><span class="line">   targets: myObject,</span><br><span class="line">   prop1: <span class="number">50</span>,</span><br><span class="line">   prop2: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">   easing: <span class="string">&#x27;linear&#x27;</span>,</span><br><span class="line">   round: <span class="number">1</span>,</span><br><span class="line">   update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      demo.innerHTML = <span class="built_in">JSON</span>.stringify(myObject);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@27f05900f6280dc312c6f439929e0ee3a8811aa8/2021/06/15/53f7f5740243c14afa577ab80e907df0.png"></p><ul><li>ä¹Ÿå¯ä»¥é€šè¿‡æ•°ç»„æ¥æŒ‡å®šå¤šä¸ªDOMå…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> demo = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.demo1&#x27;</span>)</span><br><span class="line">anime(&#123;</span><br><span class="line">   targets: [demo,<span class="string">&#x27;.demo2&#x27;</span>],</span><br><span class="line">   rotate: <span class="number">180</span>,</span><br><span class="line">   loop: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="Swiper"><a href="#Swiper" class="headerlink" title="Swiper"></a>Swiper</h1><ul><li> Swiperä¸­æ–‡å®˜æ–¹ç½‘å€ï¼š<a href="https://www.swiper.com.cn/">https://www.swiper.com.cn/</a></li><li> Swiperä½¿ç”¨å®˜æ–¹æ•™ç¨‹ï¼š<a href="https://www.swiper.com.cn/usage/index.html">https://www.swiper.com.cn/usage/index.html</a></li></ul><h2 id="Swiperä½¿ç”¨"><a href="#Swiperä½¿ç”¨" class="headerlink" title="Swiperä½¿ç”¨"></a>Swiperä½¿ç”¨</h2><ul><li>å¯ä»¥<a href="https://www.swiper.com.cn/download/index.html#file1">ä¸‹è½½Swiper</a>æœ¬åœ°å¼•å…¥ä¹Ÿå¯ä»¥å¼•å…¥CDN</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/swiper/swiper-bundle.min.css&quot;</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/swiper/swiper-bundle.min.js&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- å¦‚æœéœ€è¦å¯¼èˆªæŒ‰é’® --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- å¦‚æœéœ€è¦æ»šåŠ¨æ¡ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-scrollbar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.swiper-container</span> &#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆå§‹åŒ–ï¼ŒSwiperAPIå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.swiper.com.cn/api/index.html">https://www.swiper.com.cn/api/index.html</a></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">   direction: <span class="string">&#x27;vertical&#x27;</span>, <span class="comment">// å‚ç›´åˆ‡æ¢é€‰é¡¹</span></span><br><span class="line">   loop: <span class="literal">true</span>, <span class="comment">// å¾ªç¯æ¨¡å¼é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¦‚æœéœ€è¦åˆ†é¡µå™¨</span></span><br><span class="line">   pagination: &#123;</span><br><span class="line">      el: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">      type: <span class="string">&#x27;progressbar&#x27;</span><span class="comment">//å°†åˆ†é¡µçš„ç±»å‹æ”¹ä¸ºè¿›åº¦æ¡å°±è¡Œ</span></span><br><span class="line">   &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®</span></span><br><span class="line">   navigation: &#123;</span><br><span class="line">      nextEl: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span><br><span class="line">      prevEl: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span><br><span class="line">   &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¦‚æœéœ€è¦æ»šåŠ¨æ¡</span></span><br><span class="line">   scrollbar: &#123;</span><br><span class="line">      el: <span class="string">&#x27;.swiper-scrollbar&#x27;</span>,</span><br><span class="line">   &#125;,</span><br><span class="line">   autoplay: &#123;</span><br><span class="line">      delay: <span class="number">2500</span>,</span><br><span class="line">      disableOnInteraction: <span class="literal">false</span>,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Impress-js"><a href="#Impress-js" class="headerlink" title="Impress.js"></a>Impress.js</h1><ul><li>Impressjsæ’ä»¶å¯ä»¥å®ç°ç½‘é¡µç‰ˆPPTçš„åŠŸèƒ½ï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/bartaz/impress.js/archive/master.zip">https://github.com/bartaz/impress.js/archive/master.zip</a></li><li>åœ¨çº¿é¢„è§ˆåœ°å€ï¼š<a href="https://static.runoob.com/assets/impress-demo/index.html">https://static.runoob.com/assets/impress-demo/index.html</a>ï¼Œä½¿ç”¨ç©ºæ ¼é”®æˆ–è€…æ–¹å‘é”®è¿›è¡Œæ§åˆ¶</li></ul><h2 id="æ•°æ®å±æ€§"><a href="#æ•°æ®å±æ€§" class="headerlink" title="æ•°æ®å±æ€§"></a>æ•°æ®å±æ€§</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data-x = å¹»ç¯ç‰‡çš„xåæ ‡</span><br><span class="line">data-y = å¹»ç¯ç‰‡çš„yåæ ‡</span><br><span class="line">data-scale = é€šè¿‡æŒ‡å®šä¸€ä¸ªå€¼æ¥è¿›è¡Œç¼©æ”¾ï¼Œdata-scaleä¸º5åˆ™å°†ä¼šåœ¨ä½ å¹»ç¯ç‰‡åŸå§‹å°ºå¯¸åŸºç¡€æ”¾å¤§5å€</span><br><span class="line">data-rotate = é€šè¿‡ä¸€ä¸ªæ•°å­—åº¦æ•°æ¥ç¡®å®šæ—‹è½¬ä½ çš„å¹»ç¯ç‰‡</span><br><span class="line">data-rotate-x = ä¸º3Dç”¨ï¼Œè¿™ä¸ªæ•°å­—åº¦æ•°æ˜¯å®ƒåº”è¯¥ç›¸å¯¹xè½´æ—‹è½¬å¤šå°‘åº¦ã€‚ï¼ˆå‰å€¾/åä»°ï¼‰</span><br><span class="line">data-rotate-y = ä¸º3Dç”¨ï¼Œè¿™ä¸ªæ•°å­—åº¦æ•°æ˜¯å®ƒåº”è¯¥ç›¸å¯¹yè½´æ—‹è½¬å¤šå°‘åº¦ã€‚ ï¼ˆå·¦æ‘†/å³æ‘†ï¼‰</span><br><span class="line">data-rotate-z = ä¸º3Dç”¨ï¼Œè¿™ä¸ªæ•°å­—åº¦æ•°æ˜¯å®ƒåº”è¯¥ç›¸å¯¹zè½´æ—‹è½¬å¤šå°‘åº¦ã€‚</span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶ä½¿ç”¨"><a href="#æ’ä»¶ä½¿ç”¨" class="headerlink" title="æ’ä»¶ä½¿ç”¨"></a>æ’ä»¶ä½¿ç”¨</h2><ul><li>å¼•å…¥impressæ’ä»¶</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;plugins/impressjs/impress.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>HTMLç»“æ„</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;impress&quot;</span> <span class="attr">data-transition-duration</span>=<span class="string">&quot;2000&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ç¬¬ä¸€é¡µ æ¯ä¸ªå¹»ç¯ç‰‡æ˜¯ä¸€ä¸ª&lt;div&gt;å…ƒç´ ï¼Œå…¶classåç§°å«åšâ€™stepâ€™---&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;800&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;50&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;30&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;1600&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;100&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;60&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;40&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;3200&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;150&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;90&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-1000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-2000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-3000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-4000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-5000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-6000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-7000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;step shadow&quot;</span> <span class="attr">data-x</span>=<span class="string">&quot;-8000&quot;</span> <span class="attr">data-y</span>=<span class="string">&quot;200&quot;</span> <span class="attr">data-rotate-z</span>=<span class="string">&quot;120&quot;</span> <span class="attr">data-rotate-x</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img01.jpg&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨JSä¸­è¿›è¡Œåˆå§‹åŒ–</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">impress().init();</span><br></pre></td></tr></table></figure><ul><li>CSSæ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">650px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">9</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.shadow</span>&#123;</span><br><span class="line">   <span class="attribute">box-shadow</span>:<span class="number">0px</span> <span class="number">0px</span> <span class="number">30px</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="iTypedJS"><a href="#iTypedJS" class="headerlink" title="iTypedJS"></a>iTypedJS</h1><ul><li>iTypedJSé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/luisvinicius167/ityped">https://github.com/luisvinicius167/ityped</a></li><li>åœ¨çº¿æ¼”ç¤ºåœ°å€ï¼š<a href="https://ityped.surge.sh/">https://ityped.surge.sh/</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/ityped@0.0.5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;ityped&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ityped.init(<span class="string">&#x27;#ityped&#x27;</span>, &#123;</span><br><span class="line">   strings: [<span class="string">&#x27;æˆ‘æ˜¯æ–‡å­—ä¸€å“¦&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯æ–‡å­—äºŒå“¦&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯æ–‡å­—3å“¦&#x27;</span>, <span class="string">&#x27;æ²¡æœ‰æ–‡å­—å•¦ã€‚ã€‚ã€‚&#x27;</span>],</span><br><span class="line">   startDelay: <span class="number">200</span>,</span><br><span class="line">   loop: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@4d3e4ffbfe742e7709663440445cb9158a4964db/2021/06/16/cb293016b264c11a4f96868e0907cdbf.png"></p><h1 id="Hover-css"><a href="#Hover-css" class="headerlink" title="Hover.css"></a>Hover.css</h1><ul><li>Hover.CSSå®˜æ–¹åœ°å€ï¼š<a href="https://ianlunn.github.io/Hover/">https://ianlunn.github.io/Hover/</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç»™æ™®é€šå…ƒç´ åŠ </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--class=&quot;hvr-xxx&quot; æœ‰ç©ºæ ¼ç”¨-éš”å¼€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo hvr-curl-top-right&quot;</span>&gt;</span>Hover Me!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo hvr-float-shadow&quot;</span>&gt;</span>Hover Me!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç»™Iconå›¾è¡¨åŠ ã€‚é¦–å…ˆç»™å›¾æ ‡åŠ <code>class=hvr-icon</code>ç±»åï¼Œç„¶åç»™çˆ¶å…ƒç´ åŠ <code>class=hvr-icon-xx</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo hvr-icon-float-away&quot;</span>&gt;</span></span><br><span class="line">   Hover </span><br><span class="line">   <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-user hvr-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@3ca95c2ddbec7b6c5978f13bedc209df6c6b9f62/2021/06/16/374624e358ae4a8212b4c96dfbb9e260.png"></p><h1 id="Animate-CSS"><a href="#Animate-CSS" class="headerlink" title="Animate.CSS"></a>Animate.CSS</h1><ul><li>AnimateCSSå®˜æ–¹ç½‘å€ï¼š<a href="https://daneden.github.io/animate.css/">https://daneden.github.io/animate.css/</a></li><li>AnimateCSSä¸­æ–‡ç½‘å€ï¼š<a href="http://www.animate.net.cn/">http://www.animate.net.cn/</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--class=&quot;animated xxx&quot;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo animated fadeInUp infinite&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f8b166636b05cb5016c95d0a27d1e0d356b2cde7/2021/06/16/d02f26e6e23bb0cfba5dcd72f7899c57.png"></p><h1 id="CSShake"><a href="#CSShake" class="headerlink" title="CSShake"></a>CSShake</h1><ul><li>CSShakeå®˜æ–¹ç½‘å€ï¼š<a href="http://elrumordelaluz.github.io/csshake/">http://elrumordelaluz.github.io/csshake/</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://csshake.surge.sh/csshake.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--class=&quot;shake shake-xxx&quot; å…¶ä¸­demoä¸ºè‡ªå®šä¹‰çš„æ ·å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake&quot;</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-hard&quot;</span>&gt;</span>Bar<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-slow&quot;</span>&gt;</span>Baz<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-little&quot;</span>&gt;</span>Qux<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-horizontal&quot;</span>&gt;</span>Egg<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-vertical&quot;</span>&gt;</span>Ham<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-rotate&quot;</span>&gt;</span>Snake<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-opacity&quot;</span>&gt;</span>Apple<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-crazy&quot;</span>&gt;</span>Orange<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@5d365713dbfdb80b046da32c6df86074cefc066d/2021/06/16/923a882dd5cc2572ca135c4bc0d167c8.png"></p><ul><li>è¿˜å¯ä»¥é€šè¿‡å¢åŠ classæ¥æ§åˆ¶åŠ¨ç”»çš„çŠ¶æ€ï¼ˆæ¯”å¦‚ä¸€ç›´æ‘‡æ™ƒï¼Œè¿˜æ˜¯å…‰æ ‡æ”¾ä¸Šå»æ‘‡æ™ƒï¼‰</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¼ æ ‡ç»è¿‡å°±æŠ–åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-freeze&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸åœçš„æŠ–åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-constant&quot;</span>&gt;</span>Hola<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸åœçš„æŠ–åŠ¨ é¼ æ ‡ç»è¿‡åœæ­¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo shake shake-constant shake-constant--hover&quot;</span>&gt;</span>Halo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@60cd3e2bbdd1f6cecfca5bb0b320a263ab4aaf9f/2021/06/16/733649aabdd9ab594998632f02cbbe6a.png"></p><h1 id="Animista"><a href="#Animista" class="headerlink" title="Animista"></a>Animista</h1><ul><li>Animistaè½»æ¾æ„å»ºé…·CSSåŠ¨ç”»ï¼Œåœ¨çº¿è°ƒè¯•å¹¶ç”Ÿæˆæºä»£ç </li><li>Animistaå®˜ç½‘åœ°å€ï¼š<a href="https://animista.net/play/basic">https://animista.net/play/basic</a></li><li>é€‰æ‹©å¹¶è°ƒè¯•å¥½åŠ¨ç”»åï¼Œç‚¹å‡»ç”Ÿæˆæºä»£ç <img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1b8c6c856c43c3861165722307b71e6384ec2628/2021/06/16/f7391e89a6448c8497643c548eaaf729.png"></li><li>å¤åˆ¶ç±»æ ·å¼å’Œå…³é”®å¸§</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@31a841af2b30f979c58a9a2f8487989a3bbd233d/2021/06/16/5c76dc9a7cb8309e020c453ea7bd9d49.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.shadow-drop-2-bottom</span> &#123;</span><br><span class="line"><span class="attribute">-webkit-animation</span>: shadow-drop-<span class="number">2</span>-bottom <span class="number">0.4s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.250</span>, <span class="number">0.460</span>, <span class="number">0.450</span>, <span class="number">0.940</span>) both;</span><br><span class="line">        <span class="attribute">animation</span>: shadow-drop-<span class="number">2</span>-bottom <span class="number">0.4s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.250</span>, <span class="number">0.460</span>, <span class="number">0.450</span>, <span class="number">0.940</span>) both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> shadow-drop-<span class="number">2</span>-bottom &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>) <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>) <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateZ</span>(<span class="number">50px</span>) <span class="built_in">translateY</span>(-<span class="number">12px</span>);</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">50px</span>) <span class="built_in">translateY</span>(-<span class="number">12px</span>);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">20px</span> -<span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">20px</span> -<span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> shadow-drop-<span class="number">2</span>-bottom &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>) <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>) <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateZ</span>(<span class="number">50px</span>) <span class="built_in">translateY</span>(-<span class="number">12px</span>);</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">50px</span>) <span class="built_in">translateY</span>(-<span class="number">12px</span>);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">20px</span> -<span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">20px</span> -<span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç„¶åæŠŠç±»åæ·»åŠ åˆ°ä½ éœ€è¦çš„DOMå…ƒç´ ä¸Šå³å¯</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shadow-drop-2-bottom&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Anime-js&quot;&gt;&lt;a href=&quot;#Anime-js&quot; class=&quot;headerlink&quot; title=&quot;Anime.js&quot;&gt;&lt;/a&gt;Anime.js&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;anime.js æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„Javascript åŠ¨ç”»åº“æ’ä»¶ã€‚anime.</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="å¸¸ç”¨æ’ä»¶" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/"/>
    
    
    <category term="å¸¸ç”¨æ’ä»¶" scheme="http://xiaoliblog.cn/tags/%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒJSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot04.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot04.html</id>
    <published>2021-06-14T10:45:39.617Z</published>
    <updated>2021-06-14T11:18:07.016Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSR303æ•°æ®æ ¡éªŒ"><a href="#JSR303æ•°æ®æ ¡éªŒ" class="headerlink" title="JSR303æ•°æ®æ ¡éªŒ"></a>JSR303æ•°æ®æ ¡éªŒ</h1><h2 id="JSR303"><a href="#JSR303" class="headerlink" title="JSR303"></a>JSR303</h2><ul><li>Springbootä¸­å¯ä»¥ç”¨<code>@validated</code>æ¥æ ¡éªŒæ•°æ®ï¼Œå¦‚æœæ•°æ®å¼‚å¸¸åˆ™ä¼šç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿å¼‚å¸¸ä¸­å¿ƒç»Ÿä¸€å¤„ç†</li><li>å…ˆæ·»åŠ ç›¸å…³ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ¥å†™ä¸ªæ³¨è§£è®©æˆ‘ä»¬çš„nameåªèƒ½æ”¯æŒEmailæ ¼å¼ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span> <span class="comment">//æ•°æ®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Email(message = &quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç„¶ååœ¨ymlä¸­èµ‹å€¼ï¼Œå¯ä»¥çœ‹åˆ°å¹¶ä¸æ˜¯ä¸€ä¸ªé‚®ç®±æ ¼å¼</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»™å®ä½“ç±»èµ‹å€¼</span></span><br><span class="line"><span class="attr">Person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">xiaoli</span></span><br></pre></td></tr></table></figure><ul><li>ç„¶åè¿è¡Œæµ‹è¯•ç±»ï¼Œå‘ç°æŠ¥é”™</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f7cd154081e5a1e36b1888c7e48aa314bfc941d6/2021/06/14/62b437b8e2ca1e8ec783c670dca116bc.png"></p><div class="note success simple"><p>ä½¿ç”¨æ•°æ®æ ¡éªŒï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼› </p></div><h2 id="å¸¸è§å‚æ•°"><a href="#å¸¸è§å‚æ•°" class="headerlink" title="å¸¸è§å‚æ•°"></a>å¸¸è§å‚æ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotNull(message=&quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String userName;</span><br><span class="line"><span class="meta">@Max(value=120,message=&quot;å¹´é¾„æœ€å¤§ä¸èƒ½æŸ¥è¿‡120&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"><span class="meta">@Email(message=&quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String email;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç©ºæ£€æŸ¥</span><br><span class="line"><span class="meta">@Null</span>       éªŒè¯å¯¹è±¡æ˜¯å¦ä¸º<span class="keyword">null</span></span><br><span class="line"><span class="meta">@NotNull</span>    éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸º<span class="keyword">null</span>, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º<span class="number">0</span>çš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="meta">@NotBlank</span>   æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº<span class="number">0</span>,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼.</span><br><span class="line"><span class="meta">@NotEmpty</span>   æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Booelanæ£€æŸ¥</span><br><span class="line"><span class="meta">@AssertTrue</span>     éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º <span class="keyword">true</span>  </span><br><span class="line"><span class="meta">@AssertFalse</span>    éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º <span class="keyword">false</span>  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é•¿åº¦æ£€æŸ¥</span><br><span class="line"><span class="meta">@Size(min=, max=)</span> éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†…  </span><br><span class="line"><span class="meta">@Length(min=, max=)</span> string is between min and max included.</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ—¥æœŸæ£€æŸ¥</span><br><span class="line"><span class="meta">@Past</span>       éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰  </span><br><span class="line"><span class="meta">@Future</span>     éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å  </span><br><span class="line"><span class="meta">@Pattern</span>    éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</span><br></pre></td></tr></table></figure><h1 id="å¤šç¯å¢ƒåˆ‡æ¢"><a href="#å¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="å¤šç¯å¢ƒåˆ‡æ¢"></a>å¤šç¯å¢ƒåˆ‡æ¢</h1><ul><li><code>profile</code>æ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ä¸åŒçš„ç¯å¢ƒç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒï¼›</li></ul><h2 id="å¤šé…ç½®æ–‡ä»¶"><a href="#å¤šé…ç½®æ–‡ä»¶" class="headerlink" title="å¤šé…ç½®æ–‡ä»¶"></a>å¤šé…ç½®æ–‡ä»¶</h2><ul><li>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ <code>application-&#123;profile&#125;.properties/yml </code>, ç”¨æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒç‰ˆæœ¬ï¼›</li><li>ä¾‹å¦‚ï¼š<ul><li><code>application-test.properties</code> ä»£è¡¨æµ‹è¯•ç¯å¢ƒé…ç½®</li><li><code>application-dev.properties</code> ä»£è¡¨å¼€å‘ç¯å¢ƒé…ç½®</li></ul></li><li>ä½†æ˜¯Springbootå¹¶ä¸ä¼šç›´æ¥å¯åŠ¨è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨<code>application.properties</code>ä¸»é…ç½®æ–‡ä»¶ï¼›</li><li>æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ¥é€‰æ‹©éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨devç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„ç«¯å£å·è¿›è¡Œæµ‹è¯•ï¼›</span></span><br><span class="line"><span class="comment">#æˆ‘ä»¬å¯åŠ¨SpringBootï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢åˆ°devä¸‹çš„é…ç½®äº†ï¼›</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure><h2 id="yamlçš„å¤šæ–‡æ¡£å—"><a href="#yamlçš„å¤šæ–‡æ¡£å—" class="headerlink" title="yamlçš„å¤šæ–‡æ¡£å—"></a>yamlçš„å¤šæ–‡æ¡£å—</h2><ul><li>å’Œpropertiesé…ç½®æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨ymlå»å®ç°ä¸éœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ›´åŠ æ–¹ä¾¿äº† !</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="comment">#é€‰æ‹©è¦æ¿€æ´»é‚£ä¸ªç¯å¢ƒå—</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span> <span class="comment">#é…ç½®ç¯å¢ƒçš„åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span>  <span class="comment">#é…ç½®ç¯å¢ƒçš„åç§°</span></span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼šå¦‚æœymlå’ŒpropertiesåŒæ—¶éƒ½é…ç½®äº†ç«¯å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ¿€æ´»å…¶ä»–ç¯å¢ƒ ï¼Œ é»˜è®¤ä¼šä½¿ç”¨<code>properties</code>é…ç½®æ–‡ä»¶çš„ï¼</li></ul><h2 id="é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2><ul><li><p>å¤–éƒ¨åŠ è½½é…ç½®æ–‡ä»¶çš„æ–¹å¼ååˆ†å¤šï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å¸¸ç”¨çš„å³å¯ï¼Œåœ¨å¼€å‘çš„èµ„æºæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼</p><ul><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º<code>config</code>æ–‡ä»¶å¤¹å­˜æ”¾ï¼š<code>file:./config/</code></li><li>ç›´æ¥å­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼š<code>file:/</code></li><li>å­˜åœ¨ç±»è·¯å¾„çš„<code>config</code>æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>resources</code>æ–‡ä»¶å¤¹ï¼š<code>classpath:/config/</code></li><li>ç›´æ¥å­˜æ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š<code>classpath:/</code></li></ul></li><li><p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„<code>application.properties</code>æˆ–è€…<code>application.yml</code>æ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š</p><ul><li>ä¼˜å…ˆçº§1ï¼šé¡¹ç›®è·¯å¾„ä¸‹çš„<code>config</code>æ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶</li><li>ä¼˜å…ˆçº§2ï¼šé¡¹ç›®è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶</li><li>ä¼˜å…ˆçº§3ï¼šèµ„æºè·¯å¾„ä¸‹çš„<code>config</code>æ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶</li><li>ä¼˜å…ˆçº§4ï¼šèµ„æºè·¯å¾„ä¸‹é…ç½®æ–‡ä»¶</li></ul></li><li><p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p></li><li><p>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›äº’è¡¥é…ç½®ï¼›</p></li></ul><h2 id="æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶"><a href="#æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶" class="headerlink" title="æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶"></a>æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶</h2><ul><li>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡<code>spring.config.location</code>æ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</li><li>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åæœŸè¿ç»´åšçš„å¤šï¼Œç›¸åŒé…ç½®ï¼Œå¤–éƒ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-config.jar --spring.config.location=F:/application.properties</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSR303æ•°æ®æ ¡éªŒ&quot;&gt;&lt;a href=&quot;#JSR303æ•°æ®æ ¡éªŒ&quot; class=&quot;headerlink&quot; title=&quot;JSR303æ•°æ®æ ¡éªŒ&quot;&gt;&lt;/a&gt;JSR303æ•°æ®æ ¡éªŒ&lt;/h1&gt;&lt;h2 id=&quot;JSR303&quot;&gt;&lt;a href=&quot;#JSR303&quot; class=&quot;</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒyamlé…ç½®æ³¨å…¥</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot03.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot03.html</id>
    <published>2021-06-14T09:00:34.883Z</published>
    <updated>2021-06-14T11:06:50.745Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h1><ul><li>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ ï¼Œ é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„</li><li>ç¬¬ä¸€ç§é…ç½®æ–‡ä»¶ï¼š<code>application.properties</code><ul><li>è¯­æ³•ç»“æ„ ï¼š<code>key=value</code></li></ul></li><li>ç¬¬äºŒç« é…ç½®æ–‡ä»¶ï¼š<code>application.yml</code>ã€å®˜æ–¹æ¨èã€‘<ul><li>è¯­æ³•ç»“æ„ ï¼š<code>keyï¼šç©ºæ ¼ value</code></li></ul></li><li>é…ç½®æ–‡ä»¶çš„ä½œç”¨ ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼Œå› ä¸ºSpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†ï¼›</li><li>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹Tomcat é»˜è®¤å¯åŠ¨çš„ç«¯å£å·ï¼æµ‹è¯•ä¸€ä¸‹-</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure><ul><li>Springbootå„ç‰ˆæœ¬çš„å„ä¸ªåŠŸèƒ½ç‚¹å®˜æ–¹æ•™ç¨‹åœ°å€ï¼š<a href="https://docs.spring.io/spring-boot/docs/">https://docs.spring.io/spring-boot/docs/</a></li></ul><div class="note success simple"><p>æ›´å¤šé…ç½®å¯ä»¥å‚è€ƒ<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html">å®˜æ–¹é…ç½®æ–‡æ¡£</a></p></div><h1 id="yamlæ¦‚è¿°"><a href="#yamlæ¦‚è¿°" class="headerlink" title="yamlæ¦‚è¿°"></a>yamlæ¦‚è¿°</h1><ul><li><code>YAML</code>æ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</li><li><strong>è¿™ç§è¯­è¨€ä»¥æ•°æ®ä½œä¸ºä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»¥æ ‡è®°è¯­è¨€ä¸ºé‡ç‚¹ï¼</strong></li><li>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨xmlæ¥é…ç½®ï¼›æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç«¯å£é…ç½®ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹yamlå’Œxml</li><li>ä¼ ç»Ÿxmlé…ç½®ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;<span class="name">port</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>yamlé…ç½®ï¼š</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">serverï¼š</span></span><br><span class="line">  <span class="attr">prot:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h2 id="yamlåŸºç¡€è¯­æ³•"><a href="#yamlåŸºç¡€è¯­æ³•" class="headerlink" title="yamlåŸºç¡€è¯­æ³•"></a>yamlåŸºç¡€è¯­æ³•</h2><ul><li><p>ç©ºæ ¼ä¸èƒ½çœç•¥</p></li><li><p>ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„</p></li><li><p>å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„</p></li><li><p><strong>å­—é¢é‡ï¼šæ™®é€šçš„å€¼  [ æ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ä¸²  ]</strong></p><ul><li>å­—é¢é‡ç›´æ¥å†™åœ¨åé¢å°±å¯ä»¥ ï¼Œ å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸ŠåŒå¼•å·æˆ–è€…å•å¼•å·ï¼› </li></ul></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> <span class="string">v</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">xiaoli</span></span><br></pre></td></tr></table></figure><ul><li><p><code>&quot;&quot;</code> åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ï¼›</p><ul><li>æ¯”å¦‚ ï¼šname: â€œxiao \n liâ€   è¾“å‡º ï¼šxiao  æ¢è¡Œ   li</li></ul></li><li><p><code>&#39;</code>å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦æœ€ç»ˆä¼šå˜æˆå’Œæ™®é€šå­—ç¬¦ä¸€æ ·è¾“å‡º</p><ul><li>æ¯”å¦‚ ï¼šname: â€˜xiao \n liâ€™   è¾“å‡º ï¼šxiao  \n   li</li></ul></li><li><p><strong>å¯¹è±¡ã€Mapé”®å€¼å¯¹</strong></p></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¯¹è±¡ã€Mapæ ¼å¼</span></span><br><span class="line"><span class="attr">k:</span> </span><br><span class="line">    <span class="attr">v1:</span></span><br><span class="line">    <span class="attr">v2:</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼å¾—å…³ç³»ï¼Œæ³¨æ„ç¼©è¿›ï¼›æ¯”å¦‚ï¼š</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">xiaoli</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><ul><li>è¡Œå†…å†™æ³•</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span> &#123;<span class="attr">name:</span> <span class="string">xiaoli</span>,<span class="attr">age:</span> <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>æ•°ç»„ï¼ˆ Listã€set ï¼‰</strong><ul><li>ç”¨ <code>-</code> å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚ï¼š</li></ul></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">pig</span></span><br></pre></td></tr></table></figure><ul><li>è¡Œå†…å†™æ³•</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span> [<span class="string">cat</span>,<span class="string">dog</span>,<span class="string">pig</span>]</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹SpringBootçš„é»˜è®¤ç«¯å£å·<ul><li>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼Œç«¯å£å·çš„å‚æ•°ï¼Œå°±å¯ä»¥åˆ‡æ¢ç«¯å£ï¼›</li></ul></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br></pre></td></tr></table></figure><h2 id="æ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#æ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="æ³¨å…¥é…ç½®æ–‡ä»¶"></a>æ³¨å…¥é…ç½®æ–‡ä»¶</h2><ul><li><code>yaml</code>æ–‡ä»¶æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œä»–å¯ä»¥ç»™æˆ‘ä»¬çš„å®ä½“ç±»ç›´æ¥æ³¨å…¥åŒ¹é…å€¼ï¼</li><li>ç¼–å†™ä¸€ä¸ªå®ä½“ç±» Dog</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  <span class="comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŸæ¥æ˜¯é€šè¿‡<code>@Value</code>æ³¨å…¥å±æ€§å€¼çš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œbean</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;æ—ºè´¢&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;3&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨SpringBootçš„æµ‹è¯•ç±»ä¸‹æ³¨å…¥Dogç±»æµ‹è¯•ä¸€ä¸‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//å°†ç‹—ç‹—è‡ªåŠ¨æ³¨å…¥è¿›æ¥</span></span><br><span class="line">    Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(dog); <span class="comment">//æ‰“å°çœ‹ä¸‹ç‹—ç‹—å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è¿è¡Œç»“æœï¼Œ@Valueæ³¨å…¥æˆåŠŸ<img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@36c6f00aa2f60e9dfb90404c6e3d09518be8914d/2021/06/14/43ddd8b05afe947173cc8a035f9f5453.png"></p></li><li><p>æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„å®ä½“ç±»ï¼šPerson ç±»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨<code>resources</code>ä¸‹åˆ›å»º<code>application.yml</code>é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨yamlé…ç½®çš„æ–¹å¼è¿›è¡Œæ³¨å…¥</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»™å®ä½“ç±»èµ‹å€¼</span></span><br><span class="line"><span class="attr">Person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">xiaoli</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">21</span></span><br><span class="line">  <span class="attr">happy:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">1999</span><span class="string">/11/12</span></span><br><span class="line">  <span class="attr">map:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">  <span class="attr">list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">code</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">guitar</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æ—ºè´¢</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><ul><li>personè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å€¼åœ¨<code>yml</code>é…ç½®æ–‡ä»¶éƒ½å†™å¥½äº†ï¼Œç°åœ¨æ¥æ³¨å…¥åˆ°æˆ‘ä»¬çš„ç±»ä¸­ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@ConfigurationPropertiesä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ï¼›</span></span><br><span class="line"><span class="comment">å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="comment">å‚æ•° prefix = â€œpersonâ€ : å°†é…ç½®æ–‡ä»¶ä¸­çš„personä¸‹é¢çš„æ‰€æœ‰å±æ€§ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œbean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ­¤æ—¶IDEA æç¤ºï¼Œspringbooté…ç½®æ³¨è§£å¤„ç†å™¨æ²¡æœ‰æ‰¾åˆ°ï¼ŒæŸ¥çœ‹æ–‡æ¡£ï¼Œé…ç½®ä¸€ä¸ªä¾èµ–å³å¯ï¼Œçˆ†çº¢ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@eb4bd22033874e38d64a4719e85dc8d44d2d7cb4/2021/06/14/1e088ffa1b81fffacf4c56dc8e9cf8e9.png"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤ºï¼Œéœ€è¦é‡å¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¡®è®¤ä»¥ä¸Šé…ç½®éƒ½OKä¹‹åï¼Œå»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootDemoApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@97b6abaaba0f1c7a6ac9c36f50ea2f139124582c/2021/06/14/cfead688d17e174cf8705684bca5563f.png"></p><h2 id="åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"><a href="#åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶" class="headerlink" title="åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"></a>åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</h2><ul><li><code>@PropertySource</code> ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼›</li><li><code>@configurationProperties</code>ï¼šé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼›</li><li>æ¯”å¦‚å†åˆ›å»ºä¸€ä¸ª<code>person.properties</code>æ–‡ä»¶</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name</span>=<span class="string">xiaoli</span></span><br></pre></td></tr></table></figure><ul><li>ç„¶ååœ¨å®ä½“ç±»ä¸­æŒ‡å®šåŠ è½½<code>person.properties</code>æ–‡ä»¶ï¼Œé€šè¿‡ELè¡¨è¾¾å¼èµ‹å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@PropertySource(value = &quot;classpath:person.properties&quot;)</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œbean</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">   <span class="comment">//SPELè¡¨è¾¾å¼å–å‡ºé…ç½®æ–‡ä»¶çš„å€¼</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    ......  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶å ä½ç¬¦"><a href="#é…ç½®æ–‡ä»¶å ä½ç¬¦" class="headerlink" title="é…ç½®æ–‡ä»¶å ä½ç¬¦"></a>é…ç½®æ–‡ä»¶å ä½ç¬¦</h2><ul><li>é…ç½®æ–‡ä»¶è¿˜å¯ä»¥ç¼–å†™å ä½ç¬¦ç”Ÿæˆéšæœºæ•°</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">   <span class="attr">name:</span> <span class="string">xiaoli$&#123;random.uuid&#125;</span> <span class="comment"># éšæœºuuid</span></span><br><span class="line">   <span class="attr">age:</span> <span class="string">$&#123;random.int&#125;</span>  <span class="comment"># éšæœºint</span></span><br><span class="line">   <span class="attr">happy:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">birth:</span> <span class="number">2000</span><span class="string">/01/01</span></span><br><span class="line">   <span class="attr">map:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">   <span class="attr">list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">code</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">girl</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">   <span class="attr">dog:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">$&#123;person.hello:other&#125;_æ—ºè´¢</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><ul><li>å¯¹æ¯”ä¸€ä¸ªè¯»å–ymlæ–‡ä»¶ä½¿ç”¨<code>@ConfigurationProperties</code>å’Œè¯»å–propertiesæ–‡ä»¶ä½¿ç”¨<code>@Value</code>çš„åŒºåˆ«</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@ce7c1881012c74363b99f0781aaf34e5c68f7e83/2021/06/14/15889f3849e9f594f520ffa414d4b221.png"></p><ul><li><code>@ConfigurationProperties</code>åªéœ€è¦å†™ä¸€æ¬¡å³å¯ ï¼Œ<code> @Value</code>åˆ™éœ€è¦æ¯ä¸ªå­—æ®µéƒ½æ·»åŠ </li><li>æ¾æ•£ç»‘å®šï¼šè¿™ä¸ªä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚æˆ‘çš„ymlä¸­å†™çš„last-nameï¼Œè¿™ä¸ªå’ŒlastNameæ˜¯ä¸€æ ·çš„ï¼Œ<code>-</code> åé¢è·Ÿç€çš„å­—æ¯é»˜è®¤æ˜¯å¤§å†™çš„ã€‚è¿™å°±æ˜¯æ¾æ•£ç»‘å®šã€‚å¯ä»¥æµ‹è¯•ä¸€ä¸‹</li><li>JSR303æ•°æ®æ ¡éªŒ ï¼Œ è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å­—æ®µæ˜¯å¢åŠ ä¸€å±‚è¿‡æ»¤å™¨éªŒè¯ ï¼Œ å¯ä»¥ä¿è¯æ•°æ®çš„åˆæ³•æ€§</li><li>å¤æ‚ç±»å‹å°è£…ï¼Œymlä¸­å¯ä»¥å°è£…å¯¹è±¡ ï¼Œ ä½¿ç”¨valueå°±ä¸æ”¯æŒ</li><li>é…ç½®ymlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ å¼ºçƒˆæ¨è <code>yml</code>ï¼›</li><li>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ <code>@value</code>ï¼›</li><li>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥<code>@configurationProperties</code>ï¼Œä¸è¦çŠ¹è±«</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é…ç½®æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#é…ç½®æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®æ–‡ä»¶&quot;&gt;&lt;/a&gt;é…ç½®æ–‡ä»¶&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ ï¼Œ é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€ç§é…ç½®æ–‡ä»¶ï¼š&lt;cod</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒSpringBootåŸç†æ¢ç©¶</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot02.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot02.html</id>
    <published>2021-06-14T06:41:42.049Z</published>
    <updated>2021-06-14T08:55:45.284Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è‡ªåŠ¨è£…é…åŸç†"><a href="#è‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="è‡ªåŠ¨è£…é…åŸç†"></a>è‡ªåŠ¨è£…é…åŸç†</h1><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><ul><li>é¦–å…ˆçœ‹ä¸€ä¸‹<code>pom.xml</code>æ–‡ä»¶ï¼Œ<code>parent</code>æ ¸å¿ƒä¾èµ–éƒ½åœ¨çˆ¶å·¥ç¨‹ä¸­ï¼ä¸»è¦æ˜¯ç®¡ç†é¡¹ç›®çš„èµ„æºè¿‡æ»¤åŠæ’ä»¶ï¼</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ä½†æ˜¯å¦‚æœå¯¼å…¥çš„åŒ…æ²¡æœ‰åœ¨ä¾èµ–ä¸­ç®¡ç†ç€å°±éœ€è¦æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬äº†</li></ul><h2 id="å¯åŠ¨å™¨"><a href="#å¯åŠ¨å™¨" class="headerlink" title="å¯åŠ¨å™¨"></a>å¯åŠ¨å™¨</h2><ul><li><code>springboot-boot-starter-xxx</code>ï¼šå°±æ˜¯spring-bootçš„åœºæ™¯å¯åŠ¨å™¨</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>spring-boot-starter-web</code>ï¼šå¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ï¼›</li><li>SpringBootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„<code>starter</code> ï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™äº›<code>starter</code>å³å¯ï¼Œæ‰€æœ‰ç›¸å…³çš„ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ ï¼Œ æˆ‘ä»¬è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆæ ·çš„åœºæ™¯å¯åŠ¨å™¨å³å¯ ï¼›ä¹Ÿå¯ä»¥è‡ªå·±è‡ªå®šä¹‰ <code>starter</code>ï¼›</li></ul><h2 id="ä¸»å¯åŠ¨ç±»"><a href="#ä¸»å¯åŠ¨ç±»" class="headerlink" title="ä¸»å¯åŠ¨ç±»"></a>ä¸»å¯åŠ¨ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="comment">//è¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h1><h2 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h2><ul><li>ä½œç”¨ï¼šæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±» ï¼Œ SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼›</li><li>è¿›å…¥è¿™ä¸ªæ³¨è§£ï¼šå¯ä»¥çœ‹åˆ°ä¸Šé¢è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ³¨è§£ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">    excludeFilters = &#123;@Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;TypeExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">), @Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">)&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br><span class="line">   <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ComponentScan"><a href="#ComponentScan" class="headerlink" title="@ComponentScan"></a>@ComponentScan</h2><ul><li>è¿™ä¸ªæ³¨è§£åœ¨Springä¸­å¾ˆé‡è¦ ,å®ƒå¯¹åº”XMLé…ç½®ä¸­çš„å…ƒç´ ã€‚</li><li>ä½œç”¨ï¼šè‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶æˆ–è€…bean ï¼Œ å°†è¿™ä¸ªbeanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨ä¸­</li></ul><h2 id="SpringBootConfiguration"><a href="#SpringBootConfiguration" class="headerlink" title="@SpringBootConfiguration"></a>@SpringBootConfiguration</h2><ul><li>ä½œç”¨ï¼šSpringBootçš„é…ç½®ç±» ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Š ï¼Œ è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼›</li><li>æˆ‘ä»¬ç»§ç»­è¿›å»è¿™ä¸ªæ³¨è§£æŸ¥çœ‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹è¿›å»å¾—åˆ°ä¸‹é¢çš„ @Component</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Configuration &#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œçš„ <code>@Configuration</code>ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» ï¼Œé…ç½®ç±»å°±æ˜¯å¯¹åº”Springçš„xml é…ç½®æ–‡ä»¶ï¼›</li><li>é‡Œé¢çš„ <code>@Component</code> è¿™å°±è¯´æ˜ï¼Œå¯åŠ¨ç±»æœ¬èº«ä¹Ÿæ˜¯Springä¸­çš„ä¸€ä¸ªç»„ä»¶è€Œå·²ï¼Œè´Ÿè´£å¯åŠ¨åº”ç”¨ï¼</li></ul><h2 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h2><ul><li>@EnableAutoConfiguration ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ã€‚å‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›</li><li>ç‚¹è¿›æ³¨è§£ç»§ç»­æŸ¥çœ‹ï¼š</li><li><code>@AutoConfigurationPackage</code> ï¼šè‡ªåŠ¨é…ç½®åŒ…</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;Registrar.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>@import</code> ï¼šSpringåº•å±‚æ³¨è§£@import ï¼Œ ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</li><li><code>Registrar.class</code> ä½œç”¨ï¼šå°†ä¸»å¯åŠ¨ç±»çš„æ‰€åœ¨åŒ…åŠåŒ…ä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ ï¼›</li><li>è¿™ä¸ªåˆ†æå®Œäº†ï¼Œé€€åˆ°ä¸Šä¸€æ­¥ï¼Œç»§ç»­çœ‹</li><li><code>@Import(&#123;AutoConfigurationImportSelector.class&#125;)</code> ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶ ï¼›</li><li>AutoConfigurationImportSelector ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨å‘¢ï¼Ÿæˆ‘ä»¬ç‚¹å‡»å»è¿™ä¸ªç±»çœ‹æºç ï¼š</li><li>è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—å€™é€‰çš„é…ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> List&lt;String&gt; <span class="title">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„getSpringFactoriesLoaderFactoryClassï¼ˆï¼‰æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//è¿”å›çš„å°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹çœ‹çš„å¯åŠ¨è‡ªåŠ¨å¯¼å…¥é…ç½®æ–‡ä»¶çš„æ³¨è§£ç±»ï¼›EnableAutoConfiguration</span></span><br><span class="line">    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(<span class="keyword">this</span>.getSpringFactoriesLoaderFactoryClass(), <span class="keyword">this</span>.getBeanClassLoader());</span><br><span class="line">    Assert.notEmpty(configurations, <span class="string">&quot;No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº†  SpringFactoriesLoader ç±»çš„é™æ€æ–¹æ³•ï¼æˆ‘ä»¬è¿›å…¥SpringFactoriesLoaderç±»loadFactoryNames() æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">loadFactoryNames</span><span class="params">(Class&lt;?&gt; factoryClass, <span class="meta">@Nullable</span> ClassLoader classLoader)</span> </span>&#123;</span><br><span class="line">    String factoryClassName = factoryClass.getName();</span><br><span class="line">    <span class="comment">//è¿™é‡Œå®ƒåˆè°ƒç”¨äº† loadSpringFactories æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> (List)loadSpringFactories(classLoader).getOrDefault(factoryClassName, Collections.emptyList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬ç»§ç»­ç‚¹å‡»æŸ¥çœ‹ loadSpringFactories æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(<span class="meta">@Nullable</span> ClassLoader classLoader) &#123;</span><br><span class="line">    <span class="comment">//è·å¾—classLoader ï¼Œ æˆ‘ä»¬è¿”å›å¯ä»¥çœ‹åˆ°è¿™é‡Œå¾—åˆ°çš„å°±æ˜¯EnableAutoConfigurationæ ‡æ³¨çš„ç±»æœ¬èº«</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; result = (MultiValueMap)cache.get(classLoader);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å»è·å–ä¸€ä¸ªèµ„æº &quot;META-INF/spring.factories&quot;</span></span><br><span class="line">            Enumeration&lt;URL&gt; urls = classLoader != <span class="keyword">null</span> ? classLoader.getResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>) : ClassLoader.getSystemResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>);</span><br><span class="line">            LinkedMultiValueMap result = <span class="keyword">new</span> LinkedMultiValueMap();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å°†è¯»å–åˆ°çš„èµ„æºéå†ï¼Œå°è£…æˆä¸ºä¸€ä¸ªProperties</span></span><br><span class="line">            <span class="keyword">while</span>(urls.hasMoreElements()) &#123;</span><br><span class="line">                URL url = (URL)urls.nextElement();</span><br><span class="line">                UrlResource resource = <span class="keyword">new</span> UrlResource(url);</span><br><span class="line">                Properties properties = PropertiesLoaderUtils.loadProperties(resource);</span><br><span class="line">                Iterator var6 = properties.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span>(var6.hasNext()) &#123;</span><br><span class="line">                    Entry&lt;?, ?&gt; entry = (Entry)var6.next();</span><br><span class="line">                    String factoryClassName = ((String)entry.getKey()).trim();</span><br><span class="line">                    String[] var9 = StringUtils.commaDelimitedListToStringArray((String)entry.getValue());</span><br><span class="line">                    <span class="keyword">int</span> var10 = var9.length;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> var11 = <span class="number">0</span>; var11 &lt; var10; ++var11) &#123;</span><br><span class="line">                        String factoryName = var9[var11];</span><br><span class="line">                        result.add(factoryClassName, factoryName.trim());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cache.put(classLoader, result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException var13) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Unable to load factories from location [META-INF/spring.factories]&quot;</span>, var13);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‘ç°ä¸€ä¸ªå¤šæ¬¡å‡ºç°çš„æ–‡ä»¶ï¼š<code>spring.factories</code>ï¼Œå…¨å±€æœç´¢å®ƒ</li></ul><h2 id="spring-factories"><a href="#spring-factories" class="headerlink" title="spring.factories"></a>spring.factories</h2><ul><li>æˆ‘ä»¬æ ¹æ®æºå¤´æ‰“å¼€<code>spring.factories</code> ï¼Œ çœ‹åˆ°äº†å¾ˆå¤šè‡ªåŠ¨é…ç½®çš„æ–‡ä»¶ï¼›è¿™å°±æ˜¯è‡ªåŠ¨é…ç½®æ ¹æºæ‰€åœ¨ï¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@b6240e3183f626d491ec065a1ee5ffa9400bb5db/2021/06/14/07f412f1b18ddcac1e759ed58c66900a.png"></p><ul><li>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è‡ªåŠ¨é…ç½®ç±»éšä¾¿æ‰¾ä¸€ä¸ªæ‰“å¼€çœ‹çœ‹ï¼Œæ¯”å¦‚ ï¼š<code>WebMvcAutoConfiguration</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@d2d5048f444dcde8f82c5b5069428bd5c10b5db7/2021/06/14/ec2fc9711a58adbe348e6deccd85acf9.png"></p><ul><li>å¯ä»¥çœ‹åˆ°è¿™äº›ä¸€ä¸ªä¸ªçš„éƒ½æ˜¯JavaConfigé…ç½®ç±»ï¼Œè€Œä¸”éƒ½æ³¨å…¥äº†ä¸€äº›Beanï¼Œå¯ä»¥æ‰¾ä¸€äº›è‡ªå·±è®¤è¯†çš„ç±»ï¼Œçœ‹ç€ç†Ÿæ‚‰ä¸€ä¸‹ï¼</li><li>æ‰€ä»¥ï¼Œè‡ªåŠ¨é…ç½®çœŸæ­£å®ç°æ˜¯ä»<code>classpath</code>ä¸­æœå¯»æ‰€æœ‰çš„<code>META-INF/spring.factories</code>é…ç½®æ–‡ä»¶ ï¼Œå¹¶å°†å…¶ä¸­å¯¹åº”çš„ <code>org.springframework.boot.autoconfigure</code>. åŒ…ä¸‹çš„é…ç½®é¡¹ï¼Œé€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”æ ‡æ³¨äº† <code>@Configuration</code>çš„<code>JavaConfig</code>å½¢å¼çš„IOCå®¹å™¨é…ç½®ç±» ï¼Œ ç„¶åå°†è¿™äº›éƒ½æ±‡æ€»æˆä¸ºä¸€ä¸ªå®ä¾‹å¹¶åŠ è½½åˆ°IOCå®¹å™¨ä¸­</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„<code>META-INF/spring.factories</code>ä¸­è·å–<code>EnableAutoConfiguration</code>æŒ‡å®šçš„å€¼</li><li>å°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥å®¹å™¨ ï¼Œ è‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ ï¼Œ å¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›</li><li>æ•´ä¸ªJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨<code>springboot-autoconfigure</code>çš„jaråŒ…ä¸­ï¼›</li><li>å®ƒä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±» ï¼ˆ<code>xxxAutoConfiguration</code>ï¼‰, å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ ï¼Œ å¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ ï¼›</li><li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±» ï¼Œ å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</li></ul><h1 id="ä¸»å¯åŠ¨ç±»-1"><a href="#ä¸»å¯åŠ¨ç±»-1" class="headerlink" title="ä¸»å¯åŠ¨ç±»"></a>ä¸»å¯åŠ¨ç±»</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¯¥æ–¹æ³•ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯<code>SpringApplication</code>çš„å®ä¾‹åŒ–ï¼ŒäºŒæ˜¯<code>run</code>æ–¹æ³•çš„æ‰§è¡Œï¼›</li></ul><h2 id="SpringApplication"><a href="#SpringApplication" class="headerlink" title="SpringApplication"></a>SpringApplication</h2><ul><li>è¿™ä¸ªç±»ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š<ul><li>æ¨æ–­åº”ç”¨çš„ç±»å‹æ˜¯æ™®é€šçš„é¡¹ç›®è¿˜æ˜¯Webé¡¹ç›®</li><li>æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ ï¼Œ è®¾ç½®åˆ°<code>initializers</code>å±æ€§ä¸­</li><li>æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ°<code>listeners</code>å±æ€§ä¸­</li><li>æ¨æ–­å¹¶è®¾ç½®<code>main</code>æ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»</li></ul></li><li>æŸ¥çœ‹æ„é€ å™¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SpringApplication</span><span class="params">(ResourceLoader resourceLoader, Class... primarySources)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">    <span class="keyword">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();</span><br><span class="line">    <span class="keyword">this</span>.setInitializers(<span class="keyword">this</span>.getSpringFactoriesInstances();</span><br><span class="line">    <span class="keyword">this</span>.setListeners(<span class="keyword">this</span>.getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">    <span class="keyword">this</span>.mainApplicationClass = <span class="keyword">this</span>.deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="runæ–¹æ³•æµç¨‹åˆ†æ"><a href="#runæ–¹æ³•æµç¨‹åˆ†æ" class="headerlink" title="runæ–¹æ³•æµç¨‹åˆ†æ"></a>runæ–¹æ³•æµç¨‹åˆ†æ</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6046991cc7394f81babd7c153b490290e93c2bc1/2021/06/14/fba67064ed663d2864c4c265be86eee5.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è‡ªåŠ¨è£…é…åŸç†&quot;&gt;&lt;a href=&quot;#è‡ªåŠ¨è£…é…åŸç†&quot; class=&quot;headerlink&quot; title=&quot;è‡ªåŠ¨è£…é…åŸç†&quot;&gt;&lt;/a&gt;è‡ªåŠ¨è£…é…åŸç†&lt;/h1&gt;&lt;h2 id=&quot;pom-xml&quot;&gt;&lt;a href=&quot;#pom-xml&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootğŸƒå¾®æœåŠ¡æ¶æ„ä»‹ç»</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot01.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot01.html</id>
    <published>2021-06-14T06:40:36.375Z</published>
    <updated>2021-06-23T09:04:08.866Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¾®æœåŠ¡æ¶æ„"><a href="#å¾®æœåŠ¡æ¶æ„" class="headerlink" title="å¾®æœåŠ¡æ¶æ„"></a>å¾®æœåŠ¡æ¶æ„</h1><ul><li>å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservice Architectureï¼‰æ˜¯ä¸€ç§æ¶æ„æ¦‚å¿µï¼Œæ—¨åœ¨é€šè¿‡å°†åŠŸèƒ½åˆ†è§£åˆ°å„ä¸ªç¦»æ•£çš„æœåŠ¡ä¸­ä»¥å®ç°å¯¹è§£å†³æ–¹æ¡ˆçš„è§£è€¦ã€‚å®ƒè¦æ±‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªåº”ç”¨å¿…é¡»æ„å»ºæˆä¸€ç³»åˆ—å°æœåŠ¡çš„ç»„åˆï¼šå¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€šã€‚è¦å­¦ä¹ å¾®æœåŠ¡æ¶æ„å…ˆäº†è§£ä¸€ä¸‹è¿‡å»çš„å•ä½“åº”ç”¨æ¶æ„</li></ul><h2 id="å•ä½“åº”ç”¨æ¶æ„"><a href="#å•ä½“åº”ç”¨æ¶æ„" class="headerlink" title="å•ä½“åº”ç”¨æ¶æ„"></a>å•ä½“åº”ç”¨æ¶æ„</h2><ul><li>æ‰€è°“å•ä½“åº”ç”¨æ¶æ„ï¼ˆall in oneï¼‰æ˜¯æŒ‡ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªåº”ç”¨çš„ä¸­çš„æ‰€æœ‰åº”ç”¨æœåŠ¡éƒ½å°è£…åœ¨ä¸€ä¸ªåº”ç”¨ä¸­</li><li>æ— è®ºæ˜¯ERPã€CRMæˆ–æ˜¯å…¶ä»–ä»€ä¹ˆç³»ç»Ÿï¼Œä½ éƒ½æŠŠæ•°æ®åº“è®¿é—®ï¼Œwebè®¿é—®ï¼Œ ç­‰ç­‰å„ä¸ªåŠŸèƒ½æ”¾åˆ°ä¸€ä¸ªwaråŒ…å†…</li><li>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ˜“äºå¼€å‘å’Œæµ‹è¯•ï¼›ä¹Ÿååˆ†æ–¹ä¾¿éƒ¨ç½²ï¼›å½“éœ€è¦æ‰©å±•æ—¶ï¼Œåªéœ€è¦å°†warå¤åˆ¶å¤šä»½ï¼Œç„¶åæ”¾åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå†åšä¸ªè´Ÿè½½å‡è¡¡å°±å¯ä»¥äº†</li><li>å•ä½“åº”ç”¨æ¶æ„çš„ç¼ºç‚¹æ˜¯ï¼Œå“ªæ€•æˆ‘è¦ä¿®æ”¹ä¸€ä¸ªéå¸¸å°çš„åœ°æ–¹ï¼Œæˆ‘éƒ½éœ€è¦åœæ‰æ•´ä¸ªæœåŠ¡ï¼Œé‡æ–°æ‰“åŒ…ã€éƒ¨ç½²è¿™ä¸ªåº”ç”¨waråŒ…ã€‚ç‰¹åˆ«æ˜¯å¯¹äºä¸€ä¸ªå¤§å‹åº”ç”¨ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å§æ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨ä¸€ä¸ªåº”ç”¨é‡Œé¢ï¼Œå¦‚ä½•ç»´æŠ¤ã€å¦‚ä½•åˆ†å·¥åˆä½œéƒ½æ˜¯é—®é¢˜</li></ul><h2 id="å¾®æœåŠ¡æ¶æ„-1"><a href="#å¾®æœåŠ¡æ¶æ„-1" class="headerlink" title="å¾®æœåŠ¡æ¶æ„"></a>å¾®æœåŠ¡æ¶æ„</h2><ul><li>all in oneçš„æ¶æ„æ–¹å¼ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„åŠŸèƒ½å•å…ƒæ”¾åœ¨ä¸€ä¸ªåº”ç”¨é‡Œé¢ã€‚ç„¶åæˆ‘ä»¬æŠŠæ•´ä¸ªåº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚å¦‚æœè´Ÿè½½èƒ½åŠ›ä¸è¡Œï¼Œæˆ‘ä»¬å°†æ•´ä¸ªåº”ç”¨è¿›è¡Œæ°´å¹³å¤åˆ¶ï¼Œè¿›è¡Œæ‰©å±•ï¼Œç„¶ååœ¨è´Ÿè½½å‡è¡¡</li><li>æ‰€è°“å¾®æœåŠ¡æ¶æ„ï¼Œå°±æ˜¯æ‰“ç ´ä¹‹å‰all in oneçš„æ¶æ„æ–¹å¼ï¼ŒæŠŠæ¯ä¸ªåŠŸèƒ½å…ƒç´ ç‹¬ç«‹å‡ºæ¥ã€‚æŠŠç‹¬ç«‹å‡ºæ¥çš„åŠŸèƒ½å…ƒç´ çš„åŠ¨æ€ç»„åˆï¼Œéœ€è¦çš„åŠŸèƒ½å…ƒç´ æ‰å»æ‹¿æ¥ç»„åˆï¼Œéœ€è¦å¤šä¸€äº›æ—¶å¯ä»¥æ•´åˆå¤šä¸ªåŠŸèƒ½å…ƒç´ ã€‚æ‰€ä»¥å¾®æœåŠ¡æ¶æ„æ˜¯å¯¹åŠŸèƒ½å…ƒç´¢è¿›è¡Œå¤åˆ¶ï¼Œè€Œæ²¡æœ‰å¯¹æ•´ä¸ªåº”ç”¨è¿›è¡Œå¤åˆ¶</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@28c732cb27407cc491740fde2f92e2e007c1c6f5/2021/05/11/a327f7b66998c7f52b1b3643fccc4ae9.png" width="20%"><ul><li>å¾®æœåŠ¡æ¶æ„æ€æƒ³ç”±<code>Martin Fowler</code>ï¼ˆé©¬ä¸å¯Œå‹’ï¼‰æå‡ºï¼Œä»–å›½é™…è‘—åçš„OOä¸“å®¶ï¼Œæ•æ·å¼€å‘æ–¹æ³•çš„åˆ›å§‹äººä¹‹ä¸€ï¼Œç°ä¸ºThoughtWorkså…¬å¸çš„é¦–å¸­ç§‘å­¦å®¶ã€‚åœ¨é¢å‘å¯¹è±¡åˆ†æè®¾è®¡ã€UMLã€æ¨¡å¼ã€è½¯ä»¶å¼€å‘æ–¹æ³•å­¦ã€XPã€é‡æ„ç­‰æ–¹é¢ï¼Œéƒ½æ˜¯ä¸–ç•Œé¡¶çº§çš„ä¸“å®¶ï¼Œç°ä¸ºThought Workså…¬å¸çš„é¦–å¸­ç§‘å­¦å®¶</li><li>å…³äºå¾®æœåŠ¡æ¶æ„å¯ä»¥æŸ¥é˜…ä»–çš„è®ºæ–‡ï¼š<a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f25289db752b2df986adcd9d759d71613c8a9ad4/2021/05/11/626fcdb7a38dc2a61c40c4286e0a3301.png"></p><h2 id="å¦‚ä½•æ„å»º"><a href="#å¦‚ä½•æ„å»º" class="headerlink" title="å¦‚ä½•æ„å»º"></a>å¦‚ä½•æ„å»º</h2><ul><li>ä¸€ä¸ªå¤§å‹ç³»ç»Ÿçš„å¾®æœåŠ¡æ¶æ„ï¼Œå°±åƒä¸€ä¸ªå¤æ‚äº¤ç»‡çš„ç¥ç»ç½‘ç»œï¼Œæ¯ä¸€ä¸ªç¥ç»å…ƒå°±æ˜¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ ï¼Œå®ƒä»¬å„è‡ªå®Œæˆè‡ªå·±çš„åŠŸèƒ½ï¼Œç„¶åé€šè¿‡httpç›¸äº’è¯·æ±‚è°ƒç”¨</li><li>æ¯”å¦‚ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼ŒæŸ¥ç¼“å­˜ã€è¿æ•°æ®åº“ã€æµè§ˆé¡µé¢ã€ç»“è´¦ã€æ”¯ä»˜ç­‰æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„åŠŸèƒ½æœåŠ¡ï¼Œéƒ½è¢«å¾®åŒ–äº†ï¼Œå®ƒä»¬ä½œä¸ºä¸€ä¸ªä¸ªå¾®æœåŠ¡å…±åŒæ„å»ºäº†ä¸€ä¸ªåºå¤§çš„ç³»ç»Ÿã€‚å¦‚æœä¿®æ”¹å…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦æ›´æ–°å‡çº§å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½æœåŠ¡å•å…ƒå³å¯</li><li>ä½†æ˜¯è¿™ç§åºå¤§çš„ç³»ç»Ÿæ¶æ„ç»™éƒ¨ç½²å’Œè¿ç»´å¸¦æ¥å¾ˆå¤§çš„éš¾åº¦ã€‚äºæ˜¯, Springä¸ºæˆ‘ä»¬å¸¦æ¥äº†æ„å»ºå¤§å‹åˆ†å¸ƒå¼å¾®æœåŠ¡çš„å…¨å¥—ã€å…¨ç¨‹äº§å“:<ul><li>æ„å»ºä¸€ä¸ªä¸ªåŠŸèƒ½ç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨å•å…ƒï¼Œå¯ä»¥ä½¿ç”¨<code>SpringBoot</code>, å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿæ„å»ºä¸€ä¸ªåº”ç”¨</li><li>å¤§å‹åˆ†å¸ƒå¼ç½‘ç»œæœåŠ¡çš„è°ƒç”¨ï¼Œè¿™éƒ¨åˆ†ç”±<code>Spring Cloud</code>æ¥å®Œæˆï¼Œå®ç°åˆ†å¸ƒå¼</li><li>åœ¨åˆ†å¸ƒå¼ä¸­é—´,è¿›è¡Œæµå¼æ•°æ®è®¡ç®—ã€æ‰¹å¤„ç†ï¼Œæˆ‘ä»¬æœ‰<code>spring cloud data flow</code>.</li><li><code>Spring</code>ä¸ºæˆ‘ä»¬æƒ³æ¸…æ¥šäº†æ•´ä¸ªä»å¼€å§‹æ„å»ºåº”ç”¨åˆ°å¤§å‹åˆ†å¸ƒå¼åº”ç”¨å…¨æµç¨‹æ–¹æ¡ˆ</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@27233c186da60e06b9caaf4fa732fca25c0f4fe7/2021/03/21/04b9862db19c7014885fbe73f97ed935.png"></p><h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="SpringBootç®€ä»‹"><a href="#SpringBootç®€ä»‹" class="headerlink" title="SpringBootç®€ä»‹"></a>SpringBootç®€ä»‹</h2><ul><li><code>SpringBoot</code>å°±æ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼Œå®˜æ–¹è¯´æ˜¯ç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œ  you can â€œjust runâ€ï¼Œèƒ½è¿…é€Ÿçš„å¼€å‘webåº”ç”¨ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªHTTPæ¥å£</li><li>éšç€ Spring ä¸æ–­çš„å‘å±•ï¼Œæ¶‰åŠçš„é¢†åŸŸè¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®æ•´åˆå¼€å‘éœ€è¦é…åˆå„ç§å„æ ·çš„æ–‡ä»¶ï¼Œæ…¢æ…¢å˜å¾—ä¸é‚£ä¹ˆæ˜“ç”¨ç®€å•ï¼Œè¿èƒŒäº†æœ€åˆçš„ç†å¿µï¼Œç”šè‡³äººç§°é…ç½®åœ°ç‹±ã€‚<code>Spring Boot</code> æ­£æ˜¯åœ¨è¿™æ ·çš„ä¸€ä¸ªèƒŒæ™¯ä¸‹è¢«æŠ½è±¡å‡ºæ¥çš„å¼€å‘æ¡†æ¶ï¼Œç›®çš„ä¸ºäº†è®©å¤§å®¶æ›´å®¹æ˜“çš„ä½¿ç”¨ Spring ã€æ›´å®¹æ˜“çš„é›†æˆå„ç§å¸¸ç”¨çš„ä¸­é—´ä»¶ã€å¼€æºè½¯ä»¶</li><li><code>Spring Boot</code> åŸºäº Spring å¼€å‘ï¼Œ<code>Spirng Boot</code> æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒåŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚<code>Spring Boot</code> ä»¥<strong>çº¦å®šå¤§äºé…ç½®</strong>çš„æ ¸å¿ƒæ€æƒ³ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° <code>Spring Boot</code> åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼Œ<code>Spring Boot</code> åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„å¼€ç®±å³ç”¨</li><li>ç®€å•æ¥è¯´å°±æ˜¯<code>SpringBoot</code>å…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œ<code>Spring Boot</code>æ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ </li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e7d80aaad7f25a31b9399988e07f700ffc4cdf3d/2021/05/11/f639a14e5cb4169610211f09b9b8ac32.png"></p><h2 id="SpringBooté¡¹ç›®åˆ›å»º"><a href="#SpringBooté¡¹ç›®åˆ›å»º" class="headerlink" title="SpringBooté¡¹ç›®åˆ›å»º"></a>SpringBooté¡¹ç›®åˆ›å»º</h2><ul><li>Springå®˜æ–¹æä¾›äº†éå¸¸æ–¹ä¾¿çš„å·¥å…·è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºåº”ç”¨<ul><li><code>Spring Initializr</code>ï¼š<a href="https://start.spring.io/">https://start.spring.io/</a></li></ul></li><li><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€</strong>ï¼šä½¿ç”¨<code>Spring Initializr</code> çš„ Webé¡µé¢åˆ›å»ºé¡¹ç›®<ul><li>æ‰“å¼€ <a href="https://start.spring.io/">https://start.spring.io/</a></li><li>å¡«å†™é¡¹ç›®ä¿¡æ¯</li><li>ç‚¹å‡»ã€Generate Projectã€‘æŒ‰é’®ç”Ÿæˆé¡¹ç›®ï¼›ä¸‹è½½æ­¤é¡¹ç›®</li><li>è§£å‹é¡¹ç›®åŒ…ï¼Œå¹¶ç”¨IDEAä»¥Mavené¡¹ç›®å¯¼å…¥ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œç›´åˆ°é¡¹ç›®å¯¼å…¥å®Œæ¯•</li><li>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼ŒåŒ…æ¯”è¾ƒå¤šã€éœ€è¦è€å¿ƒç­‰å¾…ä¸€åˆ‡å°±ç»ª</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@88098a5704296a0cea91c4eb13303a4740b86eed/2021/05/11/f0db94f650d18832962c421cace44314.png"></p><ul><li><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒ</strong>ï¼šä½¿ç”¨ IDEA ç›´æ¥åˆ›å»ºé¡¹ç›®<ul><li>åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</li><li>åœ¨å³ä¾§é€‰æ‹©<code>spring initalizr</code> ï¼Œ å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯å»å®˜ç½‘çš„å¿«é€Ÿæ„å»ºå·¥å…·é‚£é‡Œå®ç°</li><li>å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼Œæ³¨æ„åŒ…åæœ€å¥½æ”¹ä¸€ä¸‹æ¯”è¾ƒå¥½</li><li>é€‰æ‹©åˆå§‹åŒ–çš„ç»„ä»¶ï¼ˆåˆå­¦å‹¾é€‰ Web å³å¯ï¼‰</li><li>å¡«å†™é¡¹ç›®è·¯å¾„</li><li>ç­‰å¾…é¡¹ç›®æ„å»ºæˆåŠŸ</li></ul></li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e7b1c819d643257314974bc19c362e1d32389657/2021/06/14/6b03857519b4eb23851900927073727b.png" width="80%"><div class="note success simple"><p>ä½¿ç”¨Springå®˜ç½‘åˆ›å»ºé¡¹ç›®å¯èƒ½ä¼šå‡ºç°ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œå¯ä»¥è‡ªå®šä¹‰URLä½¿ç”¨<code>http://start.aliyun.com</code> é˜¿é‡Œäº‘çš„é“¾æ¥è¿›è¡Œé¡¹ç›®åˆ›å»º</p></div><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><ul><li>å¦‚æœæ²¡æœ‰å‹¾é€‰Webï¼Œåªéœ€å¯¼å…¥webä¾èµ–å³å¯</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>éšä¾¿å»ºç«‹ä¸€ä¸ªControllerè¿›è¡Œæµ‹è¯•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç„¶åé‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®<code>http://localhost:8080/hello/hello</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@98e5f66fcc19189d49fef60b064224249a4f6b43/2021/06/14/a5f87651b7bf1a6792856531185a1b39.png"></p><ul><li>åœ¨<code>resources</code>ä¸‹æœ‰ä¸€ä¸ª<code>application.properties</code>å¯ä»¥ä¿®æ”¹ç«¯å£å·å’Œå…¶ä»–é…ç½®ä¿¡æ¯</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ”¹é¡¹ç›®çš„ç«¯å£å·</span></span><br><span class="line"><span class="meta">sever.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure><ul><li>è¿˜å¯ä»¥ä¿®æ”¹SpringBootå¯åŠ¨çš„Bannerå­—ç¬¦å›¾ï¼Œå¯ä»¥å‚è€ƒç½‘ç«™ï¼š<a href="https://www.bootschool.net/ascii/">https://www.bootschool.net/ascii/</a>ï¼Œå¤åˆ¶å­—ç¬¦å›¾ï¼Œåœ¨<code>resources</code>ä¸‹æ–°å»ºä¸€ä¸ª<code>banner.txt</code>æ–‡ä»¶ï¼Œç„¶åç²˜è´´è¿›å»ï¼Œé‡å¯é¡¹ç›®å³å¯</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f27b01fc31ba768aa4bd26db766fe03d4b9f5860/2021/06/14/4874302bcb90003243cd93a685d295e2.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¾®æœåŠ¡æ¶æ„&quot;&gt;&lt;a href=&quot;#å¾®æœåŠ¡æ¶æ„&quot; class=&quot;headerlink&quot; title=&quot;å¾®æœåŠ¡æ¶æ„&quot;&gt;&lt;/a&gt;å¾®æœåŠ¡æ¶æ„&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservice Architectureï¼‰æ˜¯ä¸€ç§æ¶æ„æ¦‚å¿µï¼Œæ—¨åœ¨é€šè¿‡å°†åŠŸèƒ½åˆ†è§£åˆ°å„ä¸ª</summary>
      
    
    
    
    <category term="Javaåç«¯" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Figmaå‰ç«¯UIè®¾è®¡å·¥å…·</title>
    <link href="http://xiaoliblog.cn/page/Figma.html"/>
    <id>http://xiaoliblog.cn/page/Figma.html</id>
    <published>2021-06-14T02:40:54.286Z</published>
    <updated>2021-06-14T05:55:15.678Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Figma"><a href="#Figma" class="headerlink" title="Figma"></a>Figma</h1><ul><li>Figmaæ˜¯ä¸€ä¸ªç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„è®¾è®¡è½¯ä»¶ï¼Œå…·æœ‰å¤šäººåä½œçš„åŠŸèƒ½</li><li>Figmaå®˜æ–¹ç½‘ç«™ï¼š<a href="https://www.figma.com/">https://www.figma.com/</a></li><li>Figmaä¸­æ–‡ç½‘ç«™ï¼š<a href="https://figmachina.com/">https://figmachina.com/</a></li><li>Figmaä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://figmachina.com/guide/">https://figmachina.com/guide/</a></li></ul><h2 id="ç™»å½•åŠæ³¨å†Œ"><a href="#ç™»å½•åŠæ³¨å†Œ" class="headerlink" title="ç™»å½•åŠæ³¨å†Œ"></a>ç™»å½•åŠæ³¨å†Œ</h2><ul><li>å‰å¾€ <a href="https://www.figma.com/">Figma.com</a>ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ Sign upï¼Œæˆ–è€…ç›´æ¥ç‚¹å‡» <a href="https://www.figma.com/signup">æ³¨å†Œé“¾æ¥</a></li></ul><h2 id="Figmaä½¿ç”¨"><a href="#Figmaä½¿ç”¨" class="headerlink" title="Figmaä½¿ç”¨"></a>Figmaä½¿ç”¨</h2><ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹é¡¹ç›®projectï¼Œç„¶åäº†è§£å…¶å·¥ä½œæ </li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@03c514228ed7289ceba653188aad7860c9fb6b9f/2021/06/14/426cfd5a16c27a6f5c8e96bfe34c7d9a.png"></p><ul><li>åœ¨å³ä¾§<code>Frame</code>ä¸­å¯ä»¥é€‰æ‹©å„ç§è®¾å¤‡ï¼Œæ¯”å¦‚ç§»åŠ¨ç«¯å’ŒPCç«¯ï¼Œæˆ‘ä»¬è®¾è®¡ç½‘é¡µä¸€èˆ¬éƒ½éœ€è¦è€ƒè™‘ä¸åŒçš„ç•Œé¢å°ºå¯¸</li><li>é¦–å…ˆå°±æ˜¯åˆ›å»ºä¸€ä¸ªç”»æ¡†<code>frame</code>ï¼Œç„¶åå¾€é‡Œé¢æ·»åŠ å…ƒç´ ï¼ŒæŒ‰ç©ºç™½é”®å¯ä»¥å˜æˆå°æ‰‹ç§»åŠ¨ã€‚æŒ‰ä½<code>Ctrl</code>ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ»šè½®è¿›è¡Œç¼©æ”¾</li><li>æŒ‰ä½<code>Alt</code>é”®ï¼Œé¼ æ ‡ç§»åˆ°åˆ°ç»„ä»¶è¾¹æ¡†å¤–å¯ä»¥æ˜¾ç¤ºè¾¹è·ï¼Œåœ¨å³è¾¹å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚æŒ‰ä½<code>AIt</code>é”®ä¹Ÿå¯ä»¥è¿›è¡Œå…ƒç´ å¤åˆ¶</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@8beb631610f15ba2f3d6d4f5032f1ad70bfed54d/2021/06/14/357e807d38993d11e5da3249c02053e4.png"></p><ul><li>å³è¾¹å¯ä»¥å¯¹é€‰ä¸­çš„å…ƒç´ æ ·å¼è¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—å¤§å°ç­‰ç­‰</li></ul><h2 id="æ ·å¼è®¾ç½®"><a href="#æ ·å¼è®¾ç½®" class="headerlink" title="æ ·å¼è®¾ç½®"></a>æ ·å¼è®¾ç½®</h2><ul><li>é¼ æ ‡ç§»åŠ¨åˆ°è¾¹è§’å¤„ï¼Œæ‹–åŠ¨å¯ä»¥æ”¹å˜ä¸ºåœ†è§’ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å³è¾¹é¢„è®¾æ è¿›è¡Œä¿®æ”¹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@555cb30ea50dc228642c50291569f9d9e42065bf/2021/06/14/447e6adedabc9d7d289fa586bd1552e3.png"></p><ul><li>ä¹Ÿå¯ä»¥å¯¹å•ä¸ªè§’è¿›è¡Œä¿®æ”¹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f2eb0850b1592ba3139a56b0b2be927a16c5ca97/2021/06/14/3b3c2ebffe02c0c11880109f7450ea4a.png"></p><ul><li>åœ¨å³è¾¹<code>Effects</code>ä¸­ç‚¹å‡»<code>+</code>å·ä¼šå‡ºç°ç›’å­é˜´å½±<img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@3882ce3d29d7f90eecff09ece1c93517a209a37b/2021/06/14/0e2345e1e870a42fcf4da567c436f7fe.png"></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@94d68a25a291821d56159a1ba093cf9058cf7f2a/2021/06/14/cb75f4d07d8888df08bb115dee904d7b.png"></p><ul><li>ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›å¾®è°ƒ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@832b37ae16b51adc0be3d3af11fa369a79b8f6d7/2021/06/14/392760949c423e7f62823e76e5353b2c.png"></p><ul><li>ç‚¹å‡»å·¦ä¸Šè§’çš„æ–‡å­—å·¥å…·æ·»åŠ æ–‡å­—ï¼Œç„¶åå¯ä»¥åœ¨å³è¾¹è¿›è¡Œæ–‡å­—æ ·å¼çš„è®¾ç½®</li><li>åœ¨å³ä¾§<code>Fill</code>ç‚¹å‡»<code>+</code>å·å¯ä»¥æ·»åŠ æ¸å˜è‰²</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@80c952ba205dc201c311d2d920079095e1c2fc3d/2021/06/14/0fe466b49178dd3d9001c4fa4cc059b9.png"></p><h2 id="Codeé¢„è§ˆ"><a href="#Codeé¢„è§ˆ" class="headerlink" title="Codeé¢„è§ˆ"></a>Codeé¢„è§ˆ</h2><ul><li>é€‰æ‹©é€‰åˆ¶ä½œçš„å…ƒç´ ï¼Œç‚¹å‡»å³ä¾§é€‰é¡¹å¡ä¸Š<code>Inspect</code>ï¼Œåœ¨ä¸‹é¢å¯ä»¥çœ‹åˆ°CSSä»£ç <img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@77b151f24e7c1bae5e8b1a630b5b742001080973/2021/06/14/68e43259c6c654a4bfe27573989e09e8.png"></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@8a625b41219b16a4aeb4296a0b35a5a0dce32009/2021/06/14/1e5812cf5226fec47d0bb2653bda09ee.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Figma&quot;&gt;&lt;a href=&quot;#Figma&quot; class=&quot;headerlink&quot; title=&quot;Figma&quot;&gt;&lt;/a&gt;Figma&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Figmaæ˜¯ä¸€ä¸ªç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„è®¾è®¡è½¯ä»¶ï¼Œå…·æœ‰å¤šäººåä½œçš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;Figmaå®˜æ–¹ç½‘ç«™ï¼š</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Figma" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/Figma/"/>
    
    
    <category term="Figma" scheme="http://xiaoliblog.cn/tags/Figma/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¢è¯•é¢˜ğŸ¯å›¾ç‰‡æ‡’åŠ è½½åŠdeferå’Œasync</title>
    <link href="http://xiaoliblog.cn/page/FrontInterview01.html"/>
    <id>http://xiaoliblog.cn/page/FrontInterview01.html</id>
    <published>2021-06-14T02:36:17.177Z</published>
    <updated>2021-06-14T05:07:31.083Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h1><ul><li>ä¸€ä¸ªé¡µé¢ä¼šæœ‰è®¸å¤šçš„å›¾ç‰‡ï¼Œæµè§ˆå™¨çš„å¯è§†åŒºåŸŸæ˜¯æœ‰é™çš„ï¼Œå½“æˆ‘ä»¬ç‚¹è¿›é¡µé¢ä½†æ²¡æœ‰æ»‘åŠ¨å…¨éƒ¨å±•ç¤ºæ—¶ï¼Œå…¶å®ä¸‹é¢çš„å›¾ç‰‡æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœè¯´åŠ è½½äº†ä¹Ÿç›¸å½“äºç™½åŠ è½½ï¼Œè€Œä¸”è¿˜é™ä½äº†ç½‘é¡µçš„åŠ è½½é€Ÿåº¦</li><li>è€Œæ‡’åŠ è½½å°±æ˜¯å»¶è¿ŸåŠ è½½ï¼Œåªæœ‰æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸæ—¶æ‰åŠ è½½å½“å‰çš„å›¾ç‰‡ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„å›¾ç‰‡ï¼Œä»è€Œåœ¨ä¸€ç¨‹åº¦å‡å°‘æœåŠ¡ç«¯çš„è¯·æ±‚åŠå¸¦å®½;</li></ul><h2 id="ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶"><a href="#ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶" class="headerlink" title="ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶"></a>ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶</h2><ul><li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶ï¼Œæ¥è¿›è¡Œåˆ¤æ–­ç”¨æˆ·æ»šåŠ¨ï¼Œç„¶åå†å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œå°±éœ€è¦çŸ¥é“ä¸¤ä¸ªå‚æ•°çª—å£æ˜¾ç¤ºåŒºçš„é«˜åº¦<code>window.innerHeight</code>å’Œå›¾ç‰‡è·ç¦»è§†çª—é¡¶éƒ¨çš„è·ç¦»<code>getBoundingClientRect().top</code></li><li>å¦‚æœå›¾ç‰‡è·ç¦»è§†çª—é¡¶éƒ¨çš„è·ç¦» <code>&gt;</code> æµè§ˆå™¨å¯è§†çª—å£çš„è·ç¦»ï¼Œè¯´æ˜å›¾ç‰‡åœ¨ä¸‹é¢ï¼Œå¯ä»¥å»¶è¿ŸåŠ è½½ </li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6607a6a55fb27a33e3601ab3db9ca60b84b775b7/2021/06/14/278c4cfc0bac3c7d4f48abe0ab16f48c.png"></p><ul><li>å›¾ç‰‡çš„åŠ è½½æ˜¯ç”±<code>src</code>çš„å€¼å¼•èµ·çš„ï¼Œå½“å¯¹<code>src</code>èµ‹å€¼æ—¶æµè§ˆå™¨ä¼šè¯·æ±‚å› ç‰‡èµ„æºï¼Œ åŸºäºè¿™ä¸ªï¼Œå¯ä»¥åˆ©ç”¨htmI5çš„è‡ªå®šä¹‰å±æ€§<code>data-xxx</code>æ¥ä¿å­˜å›¾ç‰‡çš„è·¯å¾„ï¼Œå½“æˆ‘ä»¬éœ€è¦åŠ è½½å›¾ç‰‡çš„æ—¶å€™æ‰å°†<code>data-xxx</code>çš„å€¼èµ‹äºˆsrcï¼Œå°±èƒ½å®ç°å›¾ç‰‡çš„æŒ‰éœ€åŠ è½½ï¼Œä¹Ÿå°±æ˜¯æ‡’åŠ è½½äº†;</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--data-srcå¯ä»¥ç”¨äºä¿å­˜å±æ€§å€¼ï¼Œå…¶ä¸ä¼šè¢«æµè§ˆå™¨æ‰§è¡Œ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;çœŸå®è·¯å¾„&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;img/pig.jpg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;img/pig.jpg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;img/pig.jpg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Londoners are under starter&#x27;s orders as the city gets ready for the Olympic Games<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å›¾ç‰‡å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> images = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">   images.forEach(<span class="function"><span class="params">image</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">//è·å–è·ç¦»å¯è§†çª—å£çš„é«˜åº¦</span></span><br><span class="line">      <span class="keyword">const</span> imageTop = image.getBoundingClientRect().top;</span><br><span class="line">      <span class="comment">//å›¾ç‰‡è·ç¦»è§†çª—é¡¶éƒ¨çš„è·ç¦» &lt; æµè§ˆå™¨å¯è§†çª—å£çš„è·ç¦»ï¼Œè¯´æ˜å‡ºç°åœ¨å¯è§†çª—å£ï¼Œèµ‹äºˆçœŸæ­£çš„src</span></span><br><span class="line">      <span class="function"><span class="title">if</span>(<span class="params">imageTop &lt; <span class="built_in">window</span>.innerHeight</span>)</span>&#123;</span><br><span class="line">         <span class="comment">//å›¾ç‰‡å¤„ç†</span></span><br><span class="line">         <span class="keyword">const</span> data_src = image.getAttribute(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">         image.setAttribute(<span class="string">&#x27;src&#x27;</span>, data_src);</span><br><span class="line">      &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;scrollè§¦å‘&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>æ‰“å¼€F12è®¾ç½®ç¦æ­¢ç¼“å­˜å’ŒFast 3Gè¿›è¡Œæµ‹è¯•</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0dae2cb7f990bfaa4a7c444f03685a4138fd5558/2021/06/14/e0476cdf8ad1d2aaae3c4dd0e0f10ba9.png"></p><ul><li>ä½†æ˜¯ä¼šå‘ç°å…¶è§¦å‘äº†å¤šæ¬¡<code>scroll</code>æ»šåŠ¨äº‹ä»¶ï¼Œåˆ°éœ€è¦åŠ è½½å¾ˆå¤šå†…å®¹æ—¶å°±ä¼šå¯¼è‡´ä»»åŠ¡çš„å †ç§¯ã€‚è€Œä¸”å³ä½¿å›¾ç‰‡å·²ç»åŠ è½½äº†è¿˜æ˜¯ä¼šä¸æ–­è§¦å‘äº‹ä»¶ï¼Œéå¸¸æ¶ˆè€—èµ„æº</li></ul><h2 id="IntersectionObserveræ¥å£"><a href="#IntersectionObserveræ¥å£" class="headerlink" title="IntersectionObserveræ¥å£"></a>IntersectionObserveræ¥å£</h2><ul><li>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/tuupola/lazyload">https://github.com/tuupola/lazyload</a></li><li><code>IntersectionObserver</code>ï¼ˆäº¤å‰è§‚å¯Ÿï¼‰æ˜¯<strong>ç›‘å¬ç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆæˆ–è§†çª—äº¤å‰çŠ¶æ€</strong>çš„æ‰‹æ®µï¼Œå¦‚æœç›®æ ‡å…ƒç´ æœªå®šä¹‰(ä¸ºnull)çš„è¯é»˜è®¤æ˜¯æ ¹æ®æµè§ˆå™¨è§†å›¾æ¡†å¯è§èŒƒå›´ï¼Œå…¶æ•ˆç‡è¦æ¯”ç›‘å¬scrollæ»šåŠ¨äº‹ä»¶å¿«</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6ef0a25fe4ba04c6232b28b7b8b6c0986db8e16f/2021/06/14/0c56c5c5f92b89c16cdd82ba03d3d7b0.png"></p><ul><li>å¯ä»¥çœ‹åˆ°ï¼Œäº¤å‰äº†å°±æ˜¯è¯´æ˜å½“å‰å…ƒç´ åœ¨è§†çª—é‡Œï¼Œå½“å‰å°±æ˜¯å¯è§çš„äº†</li><li>å…¶å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦<code>new</code>ä¸€ä¸ªå®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> IntersectionObserver(callback, options)</span><br></pre></td></tr></table></figure><ul><li>ä»¥ä¸Šä»£ç ä¼šè¿”å›ä¸€ä¸ª<code>IntersectionObserver</code>å®ä¾‹ï¼Œ<code>callback</code>æ˜¯å½“å…ƒç´ çš„å¯è§æ€§å˜åŒ–æ—¶å€™çš„å›è°ƒå‡½æ•°ï¼Œ<code>options</code>æ˜¯ä¸€äº›é…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰ï¼Œç›¸å…³é…ç½®å‚è€ƒï¼š<a href="https://www.jianshu.com/p/84a86e41eb2b">https://www.jianshu.com/p/84a86e41eb2b</a></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å›¾ç‰‡å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> images = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">   <span class="comment">//entriesä¸ºæ•°ç»„</span></span><br><span class="line">   <span class="keyword">const</span> callback = <span class="function"><span class="params">entries</span> =&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(entries)</span><br><span class="line">      entries.forEach(<span class="function"><span class="params">entry</span> =&gt;</span>&#123;</span><br><span class="line">         <span class="function"><span class="title">if</span>(<span class="params">entry.isIntersecting</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> image = entry.target;</span><br><span class="line">            <span class="keyword">const</span> data_src = image.getAttribute(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">            image.setAttribute(<span class="string">&#x27;src&#x27;</span>, data_src);</span><br><span class="line">            <span class="comment">//observer.unobserve(DOMèŠ‚ç‚¹); è¡¨ç¤ºå–æ¶ˆè§‚å¯Ÿ</span></span><br><span class="line">            observer.unobserve(image); <span class="comment">//å–æ¶ˆè§‚å¯Ÿ,ä¸å†è°ƒç”¨å›è°ƒå‡½æ•°</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘&#x27;</span>)  <span class="comment">//åªè§¦å‘ä¸‰æ¬¡ï¼Œä¸å†è§¦å‘</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> observer = <span class="keyword">new</span> IntersectionObserver(callback);</span><br><span class="line">      images.forEach(<span class="function"><span class="params">image</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//observer.observe(DOMèŠ‚ç‚¹) æ–¹æ³•è¡¨ç¤ºè§‚å¯Ÿ</span></span><br><span class="line">      observer.observe(image);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>å°è£…æˆä¸€ä¸ªå‡½æ•°</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;çœŸå®è·¯å¾„&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾ç‰‡æ‡’åŠ è½½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>img éœ€è¦æ‡’åŠ è½½çš„imgå…ƒç´ (æ ‡ç­¾)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>attr å›¾ç‰‡çš„çœŸå®urlåœ°å€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ImgLazyLoad</span>(<span class="params">img,attr</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> imgLazyLoad = <span class="built_in">document</span>.querySelectorAll(img) <span class="comment">// è·å–å…¨éƒ¨éœ€è¦åŠ è½½çš„å›¾ç‰‡</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">LazyLoad</span>(<span class="params">target</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">const</span> io = <span class="keyword">new</span> IntersectionObserver(<span class="function">(<span class="params">entries,Observer</span>)=&gt;</span>&#123;</span><br><span class="line">         entries.forEach(<span class="function"><span class="params">entry</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">entry.isIntersecting</span>)</span>&#123;</span><br><span class="line">               <span class="keyword">const</span> img = entry.target</span><br><span class="line">               <span class="keyword">const</span> src = img.getAttribute(attr)</span><br><span class="line">               img.setAttribute(<span class="string">&quot;src&quot;</span>,src)</span><br><span class="line">               Observer.disconnect()</span><br><span class="line">            &#125;   </span><br><span class="line">         &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">   io.observe(target)</span><br><span class="line">   &#125;</span><br><span class="line">   imgLazyLoad.forEach(LazyLoad)</span><br><span class="line">&#125;</span><br><span class="line">ImgLazyLoad(<span class="string">&quot;body img[data-src]&quot;</span>,<span class="string">&quot;data-src&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="deferå’Œasync"><a href="#deferå’Œasync" class="headerlink" title="deferå’Œasync"></a>deferå’Œasync</h1><h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><ul><li>åŒæ­¥ï¼šåŒæ­¥å°±æ¯”å¦‚ä¸¤ä¸ªäººè¿‡ç‹¬æœ¨æ¡¥ï¼Œåé¢çš„äººé€Ÿåº¦å—å‰é¢äººé€Ÿåº¦å½±å“</li><li>å¼‚æ­¥<code>async</code>ï¼šå¼‚æ­¥å°±æ¯”å¦‚ä¸¤æ¡é“è·¯ä¸€ä¸ªå‡ºå£ï¼Œé€Ÿåº¦å¿«çš„å¯ä»¥ä¼˜å…ˆå‡ºå»</li><li>æ¨è¿Ÿ<code>defer</code>ï¼šæ¨è¿Ÿä¹Ÿæ˜¯ä¸¤æ¡é“è·¯ä¸€ä¸ªå‡ºå£ï¼Œä½†é€Ÿåº¦å¿«çš„è¦ç­‰é€Ÿåº¦æ…¢çš„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@62f50d11282ff7097b7f444cc35cf26e65a28705/2021/06/14/4bed8ee9f0f6fb535ddcd22ace3827d4.png"></p><ul><li>åŒæ­¥åœ¨<code>Javascript</code>ä¸­æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå› ä¸ºå½“æµè§ˆå™¨åŠ è½½HTMLçš„æ—¶å€™ä¸€æ—¦é‡åˆ°äº†<code>script</code>æ ‡ç­¾ï¼Œå°±ä¼šåœä¸‹æ¥å…ˆæŠŠ<code>script</code>æ ‡ç­¾é‡Œé¢çš„å†…å®¹ç»™æ‰§è¡Œæ‰ã€‚</li><li>å¦‚æœ<code>script</code>æ ‡ç­¾é‡Œé¢æœ‰å¤–éƒ¨æ–‡ä»¶ï¼Œé‚£å°±å¿…é¡»ç­‰å¾…ä¸‹è½½å’Œæ‰§è¡Œçš„æ­¥éª¤ï¼Œè¿™æ ·æµè§ˆå™¨æ‰ä¼šç»§ç»­å¾€ä¸‹åŠ è½½ã€‚å¦‚æœå¤–éƒ¨æ–‡ä»¶åˆšå¥½åœ¨ä¸€ä¸ªç½‘ç»œæƒ…å†µæ¯”è¾ƒå·®çš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ•´ä¸ªç½‘é¡µçš„åŠ è½½éƒ½ä¼šå—åˆ°å¾ˆå¤§çš„å½±å“ï¼Œè¿™å°±æ˜¯åŒæ­¥å¸¦æ¥çš„é˜»å¡å¼Šç«¯ã€‚å¼‚æ­¥å’Œæ¨è¿Ÿæ˜¯è§£å†³åŒæ­¥çš„ä¸¤ä¸ªæ–¹æ³•</li></ul><h2 id="å¼‚æ­¥async"><a href="#å¼‚æ­¥async" class="headerlink" title="å¼‚æ­¥async"></a>å¼‚æ­¥async</h2><ul><li><code>async</code>å³å¼‚æ­¥æ‰§è¡Œï¼Œæµè§ˆå™¨åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†<code>async</code>å±æ€§ï¼Œæµè§ˆå™¨å°±ä¼šç«‹å³è¿›è¡Œä¸‹è½½ï¼Œä¸æ­¤åŒæ—¶ç»§ç»­åŠ è½½é¡µé¢</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@d20c4d10eb983f67b2fd5868122b556b240bed13/2021/06/14/05c35b86156baec6e7e73e75ef42a8b7.png"></p><ul><li>è™½ç„¶æ²¡æœ‰é˜»å¡çš„æƒ…å†µï¼Œä½†æ˜¯<code>async</code>ä¸‹çš„è„šæœ¬å…·ä½“ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå°±è¯´ä¸å®šäº†ï¼Œæœ‰æ—¶é¡µé¢è¿˜æ²¡åŠ è½½å®Œå°±æ‰§è¡Œäº†ï¼Œä¹Ÿæœ‰å¯èƒ½é¡µé¢åŠ è½½åæ‰ä¼šæ‰§è¡Œ</li><li>å› ä¸ºè¿™ç§ä¸ç¡®å®šæ€§ï¼Œå¦‚æœè„šæœ¬æ˜¯éœ€è¦ä¿®æ”¹DOMçš„ï¼Œé‚£ä¹ˆå°±åˆå¯èƒ½å‡ºé”™ã€‚å› æ­¤<code>async</code>æ¯”è¾ƒé€‚åˆç¬¬ä¸‰æ–¹è„šæœ¬</li></ul><h2 id="æ¨è¿Ÿdefer"><a href="#æ¨è¿Ÿdefer" class="headerlink" title="æ¨è¿Ÿdefer"></a>æ¨è¿Ÿdefer</h2><ul><li><code>defer</code>å³æ¨è¿Ÿæ‰§è¡Œï¼Œæµè§ˆå™¨åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†<code>defer</code>å±æ€§ï¼Œæµè§ˆå™¨å°±ä¼šç«‹å³è¿›è¡Œä¸‹è½½ï¼Œä¸æ­¤åŒæ—¶ç»§ç»­åŠ è½½é¡µé¢</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@fabb3ada2e9b670c26c23077c05d24dbdc818ad5/2021/06/14/2770865cb6b9b3008e6f68fc6e36366f.png"></p><ul><li>ä½†æ˜¯ä¸ç®¡è„šæœ¬æ˜¯å¦ä¸‹è½½å®Œäº†ï¼Œéƒ½ä¼šç­‰åˆ°æµè§ˆå™¨è§£æå®ŒHTMLä»¥åå†æ‰§è¡Œè„šæœ¬ã€‚å› æ­¤<code>defer</code>æ¯”è¾ƒé€‚åˆä¸DOMæœ‰å…³è”çš„è„šæœ¬</li><li>ä½†æ˜¯æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œä¸ç®¡æ˜¯<code>async</code>è¿˜æ˜¯<code>defer</code>ï¼Œä¸¤è€…éƒ½åªé€‚ç”¨äºå¤–éƒ¨è„šæœ¬ï¼Œè€Œä¸”è¿˜è¦æ³¨æ„å…¼å®¹æ€§é—®é¢˜ã€‚å¦‚æœæµè§ˆå™¨ä¸èƒ½è¯†åˆ«è¿™ä¸¤ä¸ªå±æ€§ï¼Œé‚£è¿˜æ˜¯æŠŠ<code>script</code>å†…å®¹æ”¾åœ¨é¡µé¢åº•éƒ¨æ¯”è¾ƒå¥½</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å›¾ç‰‡æ‡’åŠ è½½&quot;&gt;&lt;a href=&quot;#å›¾ç‰‡æ‡’åŠ è½½&quot; class=&quot;headerlink&quot; title=&quot;å›¾ç‰‡æ‡’åŠ è½½&quot;&gt;&lt;/a&gt;å›¾ç‰‡æ‡’åŠ è½½&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªé¡µé¢ä¼šæœ‰è®¸å¤šçš„å›¾ç‰‡ï¼Œæµè§ˆå™¨çš„å¯è§†åŒºåŸŸæ˜¯æœ‰é™çš„ï¼Œå½“æˆ‘ä»¬ç‚¹è¿›é¡µé¢ä½†æ²¡æœ‰æ»‘åŠ¨å…¨éƒ¨å±•ç¤ºæ—¶ï¼Œå…¶å®ä¸‹é¢çš„å›¾ç‰‡æ˜¯æ²¡</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="å‰ç«¯é¢è¯•é¢˜" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="å‰ç«¯é¢è¯•é¢˜" scheme="http://xiaoliblog.cn/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
</feed>
