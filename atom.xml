<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小李博客</title>
  
  
  <link href="http://xiaoliblog.cn/atom.xml" rel="self"/>
  
  <link href="http://xiaoliblog.cn/"/>
  <updated>2021-05-13T11:49:24.662Z</updated>
  <id>http://xiaoliblog.cn/</id>
  
  <author>
    <name>小李博客</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBoot🍃微服务架构介绍</title>
    <link href="http://xiaoliblog.cn/page/SpringBoot01.html"/>
    <id>http://xiaoliblog.cn/page/SpringBoot01.html</id>
    <published>2021-05-31T16:00:00.000Z</published>
    <updated>2021-05-13T11:49:24.662Z</updated>
    
    <content type="html"><![CDATA[<h1 id="微服务架构"><a href="#微服务架构" class="headerlink" title="微服务架构"></a>微服务架构</h1><ul><li>微服务架构（Microservice Architecture）是一种架构概念，旨在通过将功能分解到各个离散的服务中以实现对解决方案的解耦。它要求我们在开发一个应用的时候，这个应用必须构建成一系列小服务的组合：可以通过HTTP的方式进行互通。要学习微服务架构先了解一下过去的单体应用架构</li></ul><h2 id="单体应用架构"><a href="#单体应用架构" class="headerlink" title="单体应用架构"></a>单体应用架构</h2><ul><li>所谓单体应用架构（all in one）是指，我们将一个应用的中的所有应用服务都封装在一个应用中</li><li>无论是ERP、CRM或是其他什么系统，你都把数据库访问，web访问， 等等各个功能放到一个war包内</li><li>这样做的好处是，易于开发和测试；也十分方便部署；当需要扩展时，只需要将war复制多份，然后放到多个服务器上，再做个负载均衡就可以了</li><li>单体应用架构的缺点是，哪怕我要修改一个非常小的地方，我都需要停掉整个服务，重新打包、部署这个应用war包。特别是对于一个大型应用，我们不可能吧所有内容都放在一个应用里面，如何维护、如何分工合作都是问题</li></ul><h2 id="微服务架构-1"><a href="#微服务架构-1" class="headerlink" title="微服务架构"></a>微服务架构</h2><ul><li>all in one的架构方式，我们把所有的功能单元放在一个应用里面。然后我们把整个应用部署到服务器上。如果负载能力不行，我们将整个应用进行水平复制，进行扩展，然后在负载均衡</li><li>所谓微服务架构，就是打破之前all in one的架构方式，把每个功能元素独立出来。把独立出来的功能元素的动态组合，需要的功能元素才去拿来组合，需要多一些时可以整合多个功能元素。所以微服务架构是对功能元索进行复制，而没有对整个应用进行复制</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@28c732cb27407cc491740fde2f92e2e007c1c6f5/2021/05/11/a327f7b66998c7f52b1b3643fccc4ae9.png" width="20%"><ul><li>微服务架构思想由<code>Martin Fowler</code>（马丁富勒）提出，他国际著名的OO专家，敏捷开发方法的创始人之一，现为ThoughtWorks公司的首席科学家。在面向对象分析设计、UML、模式、软件开发方法学、XP、重构等方面，都是世界顶级的专家，现为Thought Works公司的首席科学家</li><li>关于微服务架构可以查阅他的论文：<a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f25289db752b2df986adcd9d759d71613c8a9ad4/2021/05/11/626fcdb7a38dc2a61c40c4286e0a3301.png"></p><h2 id="如何构建"><a href="#如何构建" class="headerlink" title="如何构建"></a>如何构建</h2><ul><li>一个大型系统的微服务架构，就像一个复杂交织的神经网络，每一个神经元就是一个功能元素，它们各自完成自己的功能，然后通过http相互请求调用</li><li>比如一个电商系统，查缓存、连数据库、浏览页面、结账、支付等服务都是一个个独立的功能服务，都被微化了，它们作为一个个微服务共同构建了一个庞大的系统。如果修改其中的一个功能，只需要更新升级其中一个功能服务单元即可</li><li>但是这种庞大的系统架构给部署和运维带来很大的难度。于是, Spring为我们带来了构建大型分布式微服务的全套、全程产品:<ul><li>构建一个个功能独立的微服务应用单元，可以使用<code>SpringBoot</code>, 可以帮我们快速构建一个应用</li><li>大型分布式网络服务的调用，这部分由<code>Spring Cloud</code>来完成，实现分布式</li><li>在分布式中间,进行流式数据计算、批处理，我们有<code>spring cloud data flow</code>.</li><li><code>Spring</code>为我们想清楚了整个从开始构建应用到大型分布式应用全流程方案</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@27233c186da60e06b9caaf4fa732fca25c0f4fe7/2021/03/21/04b9862db19c7014885fbe73f97ed935.png"></p><h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="SpringBoot简介"><a href="#SpringBoot简介" class="headerlink" title="SpringBoot简介"></a>SpringBoot简介</h2><ul><li><code>SpringBoot</code>就是一个javaweb的开发框架，和SpringMVC类似，对比其他javaweb框架的好处，官方说是简化开发，约定大于配置，  you can “just run”，能迅速的开发web应用，几行代码开发一个HTTP接口</li><li>随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那么易用简单，违背了最初的理念，甚至人称配置地狱。<code>Spring Boot</code> 正是在这样的一个背景下被抽象出来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件</li><li><code>Spring Boot</code> 基于 Spring 开发，<code>Spirng Boot</code> 本身并不提供 Spring 框架的核心及扩展功能，只是用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。<code>Spring Boot</code> 以<strong>约定大于配置</strong>的核心思想，默认帮我们进行了很多设置，多数 <code>Spring Boot</code> 应用只需要很少的 Spring 配置。同时它集成了大量常用的第三方库配置（例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等），<code>Spring Boot</code> 应用中这些第三方库几乎可以零配置的开箱即用</li><li>简单来说就是<code>SpringBoot</code>其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合了所有的jar包，<code>Spring Boot</code>整合了所有的框架 </li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e7d80aaad7f25a31b9399988e07f700ffc4cdf3d/2021/05/11/f639a14e5cb4169610211f09b9b8ac32.png"></p><h2 id="SpringBoot项目创建"><a href="#SpringBoot项目创建" class="headerlink" title="SpringBoot项目创建"></a>SpringBoot项目创建</h2><ul><li>Spring官方提供了非常方便的工具让我们快速构建应用<ul><li><code>Spring Initializr</code>：<a href="https://start.spring.io/">https://start.spring.io/</a></li></ul></li><li><strong>项目创建方式一</strong>：使用<code>Spring Initializr</code> 的 Web页面创建项目<ul><li>打开 <a href="https://start.spring.io/">https://start.spring.io/</a></li><li>填写项目信息</li><li>点击【Generate Project】按钮生成项目；下载此项目</li><li>解压项目包，并用IDEA以Maven项目导入，一路下一步即可，直到项目导入完毕</li><li>如果是第一次使用，可能速度会比较慢，包比较多、需要耐心等待一切就绪</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@88098a5704296a0cea91c4eb13303a4740b86eed/2021/05/11/f0db94f650d18832962c421cace44314.png"></p><ul><li><strong>项目创建方式二</strong>：使用 IDEA 直接创建项目<ul><li>创建一个新项目</li><li>在右侧选择<code>spring initalizr</code> ， 可以看到默认就是去官网的快速构建工具那里实现</li><li>填写项目信息</li><li>选择初始化的组件（初学勾选 Web 即可）</li><li>填写项目路径</li><li>等待项目构建成功</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@5a29fca4d64794952a83f85489334f92d935a94e/2021/05/11/8f2abb4da515a45d47e566af174ddee6.png"></p><h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><ul><li>通过上面步骤完成了基础项目的创建。就会自动生成以下文件。<ul><li>程序的主启动类</li><li>一个 <code>application.properties</code> 配置文件</li><li>一个 测试类</li><li>一个 <code>pom.xml</code></li></ul></li><li>打开pom.xml，看看Spring Boot项目的依赖</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;微服务架构&quot;&gt;&lt;a href=&quot;#微服务架构&quot; class=&quot;headerlink&quot; title=&quot;微服务架构&quot;&gt;&lt;/a&gt;微服务架构&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;微服务架构（Microservice Architecture）是一种架构概念，旨在通过将功能分解到各个</summary>
      
    
    
    
    <category term="Java后端" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/"/>
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/categories/Java%E5%90%8E%E7%AB%AF/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="http://xiaoliblog.cn/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>实现图片上传至阿里云OSS存储</title>
    <link href="http://xiaoliblog.cn/page/OSS.html"/>
    <id>http://xiaoliblog.cn/page/OSS.html</id>
    <published>2021-05-15T03:26:24.052Z</published>
    <updated>2021-05-15T15:00:25.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OSS对象存储服务"><a href="#OSS对象存储服务" class="headerlink" title="OSS对象存储服务"></a>OSS对象存储服务</h1><h2 id="OSS简介"><a href="#OSS简介" class="headerlink" title="OSS简介"></a>OSS简介</h2><ul><li>阿里云对象存储服务（Object Storage Service，简称OSS），是阿里云对外提供的海量、安全、低成本、高可靠的云存储服务。通过提供的简单的REST接口，在任何时间、任何地点、任何互联网设备上进行上传和下载数据。基于OSS，可以搭建出各种多媒体分享网站、网盘、个人和企业数据备份等基于大规模数据的服务</li><li>简单来说，OSS就是一个可以上传、下载、分享文件的服务，这一点从实用意义上来说与网盘是差不多的。OSS相比较网盘的优点在于其数据安全性更高（数据多重冗余备份，不易丢失）、使用可靠性更高（上下行速度等皆有保障），同时其还提供API接口和丰富的SDK包，而其缺点是带来一定的使用成本，但是目前此成本还是很低的。在今天，很多免费网盘都倒下了，有些网盘走向付费使用的道路，而其安全、可靠性又没有得到有效的提高，这也使得OSS的优势更加明显</li><li>参考阿里云官网<a href="https://help.aliyun.com/document_detail/31817.html?spm=a2c4g.11186623.6.551.60495afelzVesa">什么是对象存储OSS</a></li><li>CSDN博文《阿里云OSS(对象存储服务)简介》:<a href="https://blog.csdn.net/m0_37897502/article/details/80702805">https://blog.csdn.net/m0_37897502/article/details/80702805</a></li></ul><h2 id="OSS相关概念"><a href="#OSS相关概念" class="headerlink" title="OSS相关概念"></a>OSS相关概念</h2><ul><li><p><strong>存储类型（Storage Class）</strong><br>  OSS提供标准、低频访问、归档三种存储类型，全面覆盖从热到冷的各种数据存储场景</p><ul><li>标准存储类型提供通用的对象存储服务，适合频繁访问、有热点存在的各类音视频、图片、网站静态资源的存储，支持高吞吐计算场景，适合各类计算资源的存储。</li><li>低频访问存储类型适合长期保存、较少访问的数据（平均每月访问频率1到2次），适合各类移动应用、智能设备、企业数据的备份，低频访问支持实时数据访问。</li><li>归档存储类型在三种存储类型中单价最低，适合需要长周期保存的档案数据、医疗影像、科学资料、影视素材，能有效优化长期存储成本。保存为归档存储类型的数据，恢复到可读取状态需要等待1分钟的解冻时间</li></ul></li><li><p><strong>存储空间（Bucket）</strong><br>  存储空间是您用于存储对象（Object）的容器，所有的对象都必须隶属于某个存储空间。存储空间具有各种配置属性，包括地域、访问权限、存储类型等。您可以根据实际需求，创建不同类型的存储空间来存储不同的数据</p><ul><li>同一个存储空间的内部是扁平的，没有文件系统的目录等概念，所有的对象都直接隶属于其对应的存储空间。</li><li>每个用户可以拥有多个存储空间。</li><li>存储空间的名称在 OSS 范围内必须是全局唯一的，一旦创建之后无法修改名称。</li><li>存储空间内部的对象数目没有限制</li></ul></li><li><p><strong>对象（Object）</strong><br>  对象是OSS存储数据的基本单元，也被称为OSS的文件。对象由元信息（Object Meta）、用户数据（Data）和文件名（Key）组成。对象由存储空间内部唯一的Key来标识。对象元信息是一组键值对，表示了对象的一些属性，例如最后修改时间、大小等信息，同时您也可以在元信息中存储一些自定义的信息</p></li><li><p><strong>地域（Region）</strong><br>  地域表示OSS的数据中心所在物理位置。您可以根据费用、请求来源等选择合适的地域创建Bucket。一般来说，距离用户更近的 Region 访问速度更快<br>  Region是在创建 Bucket 的时候指定的，一旦指定之后就不允许更改，该 Bucket 下所有的 Object 都存储在对应的数据中心，目前不支持 Object 级别的 Region 设置</p></li><li><p><strong>访问域名（Endpoint）</strong><br>  Endpoint 表示 OSS 对外服务的访问域名。OSS 以 HTTP RESTful API 的形式对外提供服务，当访问不同的 Region 的时候，需要不同的域名。通过内网和外网访问同一个 Region 所需要的 Endpoint 也是不同的。例如杭州 Region 的外网 Endpoint 是 oss-cn-hangzhou.aliyuncs.com，内网 Endpoint 是 oss-cn-hangzhou-internal.aliyuncs.com</p></li><li><p><strong>访问密钥（AccessKey）</strong><br>  AccessKey，简称 AK，指的是访问身份验证中用到的 AccessKeyId 和AccessKeySecret。OSS 通过使用 AccessKeyId 和 AccessKeySecret 对称加密的方法来验证某个请求的发送者身份。AccessKeyId 用于标识用户，AccessKeySecret 是用户用于加密签名字符串和 OSS 用来验证签名字符串的密钥，其中 AccessKeySecret 必须保密。对于 OSS 来说，AccessKey 的来源有：</p><ul><li>Bucket 的拥有者申请的 AccessKey。</li><li>被 Bucket 的拥有者通过 RAM 授权给第三方请求者的 AccessKey。</li><li>被 Bucket 的拥有者通过 STS 授权给第三方请求者的 AccessKey。</li></ul></li></ul><h1 id="开通OSS云存储服务"><a href="#开通OSS云存储服务" class="headerlink" title="开通OSS云存储服务"></a>开通OSS云存储服务</h1><h2 id="资源包购买"><a href="#资源包购买" class="headerlink" title="资源包购买"></a>资源包购买</h2><ul><li>首先去阿里云购买对象存储OSS资源包：<a href="https://www.aliyun.com/product/oss/">https://www.aliyun.com/product/oss/</a></li><li>有两种方式<ul><li>第一种是【按量收费】，只需要开通OSS，就可以直接用OSS服务了，不需要付款什么的，按量收费，从我们的阿里云账户直接扣钱，边用边扣的模式</li><li>还有一种是【买套餐包月包年】，需要我们到页面付款一次结清</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@13e06f3049c22a1dfbcfa93fa20fa50ae060589b/2021/05/15/316e16010fde95d3c5dea830164b2e14.png"></p><div class="note success simple"><p>只供学习的话推荐默认标准型存储包5元半年即可</p></div><p>B</p><h2 id="创建Bucket"><a href="#创建Bucket" class="headerlink" title="创建Bucket"></a>创建Bucket</h2><ul><li>然后在控制台新建Bucket。Bucket的作用：相当于一个存储图片的仓库。然后下图就是配置仓库的信息，我们通过这个仓库的信息把图片上传到这个仓库里面</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@9733f5f17855ecc6d7c1c9cf1a21a468f99e0e92/2021/05/15/e6db5c75aec3b1e4ff8ff0498165030e.png"></p><h2 id="上传图片"><a href="#上传图片" class="headerlink" title="上传图片"></a>上传图片</h2><ul><li>在【文件管理】中，可直接上传图片，在浏览器访问到<code>https://origins-xiaoliblog.oss-cn-shanghai.aliyuncs.com/headerimg.jpg</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@99520012cdb36370dcb7f67ac23f2b1d9b606021/2021/05/15/437c5ff1d180c6bfb21e44f3066f7977.png"></p><ul><li>在【数据处理】-&gt;【图片处理】中，可添加水印的样式</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f60936de16509763630c7af737b84b53ae177c07/2021/05/15/efb5060d07dc6b4c46606ee5e4665f3d.png"></p><ul><li>在【图片处理】下的【访问设置】中，选择自定义分隔符，在图片路径后拼接分隔符与水印的规格名称，就能给图片添加上水印</li><li>开启【原图保护功能】的话，如果把路径后的水印规则给去掉，就不能访问该图片了</li></ul><h1 id="PicGo实现上传图片"><a href="#PicGo实现上传图片" class="headerlink" title="PicGo实现上传图片"></a>PicGo实现上传图片</h1><h2 id="下载PicGo"><a href="#下载PicGo" class="headerlink" title="下载PicGo"></a>下载PicGo</h2><ul><li>PicGo是一个开源项目，可以用来快捷上传图片到图床。</li><li>下载地址：<a href="https://github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a></li></ul><h2 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h2><ul><li>推荐最好是单独创建一个用户来单独操作OSS（用户的定义就是需要访问云资源的人员或应用程序），这样给这个用户赋予单独的访问OSS的权限，更加安全方便</li><li>进入【RAM访问控制】-【人员管理】-【用户】-【新建用户】</li><li>之后进行用户配置，注意要勾选【编程访问】，控制台密码登录可以不选择，登录名称，显示名称自己设定，如下图所示：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@9288bb83a8a15dcd5466ed25fd1be453c987da93/2021/05/15/ede7701236c874077e1b11f5f7218968.png"></p><ul><li>确定后得到创建用户的信息，这里要记下<code>AccessKey ID</code> 和 <code>AccessKeySecret</code>，之后配置PICGO用到，因为这个界面关掉之后就不好找了，所以最好记在记事本里</li><li>设置【用户权限】，使得用户只能访问OSS的服务。点击添加权限，如下图所示：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e8e25faf5afe938ee334e36077a6ec9f26b195f9/2021/05/15/975eb05843f32a7ab595717796de0d24.png"></p><h2 id="配置图床"><a href="#配置图床" class="headerlink" title="配置图床"></a>配置图床</h2><ul><li>点击阿里云账号头像，进入【Accesskey管理】，并点击【创建AccessKey】</li><li>复制<code>Accesskey</code>和<code>AccesskeySecret</code></li><li>存储空间名就是Bucket的名字</li><li>存储区域到阿里云OSS控制台去找，例如下图中存储区域就是 <code>oss-cn-shanghai</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@549119410b06135cfa1661e9204e8a0e05fe0249/2021/05/15/2df09b77c142aea7a2c0ee4eb6264eb1.png"></p><ul><li>存储路径是存储图片的位置，要求以<code>/</code>结尾。</li><li>自定义域名可以不填写</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@87d29a03cf3adbe4ecf2f23e03b00ff0d08941a6/2021/05/15/275217adae7f0bbc85c4417b745c6518.png"></p><h1 id="Java实现图片上传"><a href="#Java实现图片上传" class="headerlink" title="Java实现图片上传"></a>Java实现图片上传</h1><h2 id="简单上传"><a href="#简单上传" class="headerlink" title="简单上传"></a>简单上传</h2><ul><li>更多可阅读其<a href="https://help.aliyun.com/document_detail/32008.htm?spm=a2c4g.11186623.2.6.5ff2f2eelAu0ga#concept-32008-zh">开发者指南</a>，很丰富，很多花式上传下载</li><li>SDK源码请参见<a href="https://github.com/aliyun/aliyun-oss-java-sdk?spm=a2c4g.11186623.2.5.15c946a1OATgn8">GitHub</a>。更多信息请参见<a href="https://gosspublic.alicdn.com/AliyunJavaSDK/3.10.2/javadoc/index.html?spm=a2c4g.11186623.2.6.15c946a1OATgn8">OSS Java SDK API</a>文档</li><li>详细操作参考官方文档：<a href="https://developer.aliyun.com/article/702854">https://developer.aliyun.com/article/702854</a></li><li>首先导入SDK依赖</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阿里云oss --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.10.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-codec/commons-codec --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--文件上传--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--上传阿里云OSS--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.jdom/jdom --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jdom<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="参数常量封装"><a href="#参数常量封装" class="headerlink" title="参数常量封装"></a>参数常量封装</h2><ul><li>创建一个用于封装常量的类<code>OSSClientConstants</code>，便于修改</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//阿里云OSS参数常量类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OSSClientConstants</span> </span>&#123;</span><br><span class="line">    <span class="comment">//阿里云API的外网域名 以上海为例，其他按情况填写</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ENDPOINT = <span class="string">&quot;oss-cn-shanghai.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="comment">//阿里云API的密钥Access Key ID</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACCESS_KEY_ID = <span class="string">&quot;&lt;yourAccessKeyId&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">//阿里云API的密钥Access Key Secret</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACCESS_KEY_SECRET = <span class="string">&quot;&lt;yourAccessKeySecret&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">//阿里云API的bucket名称</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUCKET_NAME = <span class="string">&quot;origins-xiaoliblog&quot;</span>;</span><br><span class="line">    <span class="comment">//Bucket 域名即外网访问的域名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BUCKET_URL= <span class="string">&quot;http://origins-xiaoliblog.oss-cn-shanghai.aliyuncs.com/&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="构建工具类"><a href="#构建工具类" class="headerlink" title="构建工具类"></a>构建工具类</h2><ul><li>构建一个工具类<code>AliyunOSSClientUtil</code>用于封装对OSS对象存储的操作</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//实例化 便于在控制器中自动装配</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AliyunOSSClientUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">//阿里云API的内或外网域名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String ENDPOINT;</span><br><span class="line">    <span class="comment">//阿里云API的密钥Access Key ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String ACCESS_KEY_ID;</span><br><span class="line">    <span class="comment">//阿里云API的密钥Access Key Secret</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String ACCESS_KEY_SECRET;</span><br><span class="line">    <span class="comment">//阿里云API的bucket名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line">    <span class="comment">//Bucket 域名即外网访问的域名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String BUCKET_URL;</span><br><span class="line">    <span class="comment">//日期格式化对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat SDF = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyymmdd&quot;</span>); <span class="comment">//日期格式化对象</span></span><br><span class="line">    <span class="comment">//初始化属性</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        ENDPOINT = OSSClientConstants.ENDPOINT;</span><br><span class="line">        ACCESS_KEY_ID = OSSClientConstants.ACCESS_KEY_ID;</span><br><span class="line">        ACCESS_KEY_SECRET = OSSClientConstants.ACCESS_KEY_SECRET;</span><br><span class="line">        BUCKET_NAME = OSSClientConstants.BUCKET_NAME;</span><br><span class="line">        BUCKET_URL = OSSClientConstants.BUCKET_URL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取阿里云OSS客户端对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ossClient</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  OSSClient <span class="title">getOSSClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建一个OSSClient对象</span></span><br><span class="line">        OSSClient ossClient = <span class="keyword">new</span> OSSClient(ENDPOINT, ACCESS_KEY_ID, ACCESS_KEY_SECRET);</span><br><span class="line">        <span class="comment">//通过连接对象判断Bucket仓库是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(ossClient.doesBucketExist(BUCKET_NAME))&#123;</span><br><span class="line">            System.out.println(BUCKET_NAME+<span class="string">&quot;仓库存在&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//如果没有就通过API接口创建Bucket仓库</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Bucket不存在，创建新的Bucket:&quot;</span>+BUCKET_NAME);</span><br><span class="line">            CreateBucketRequest bucketRequest = <span class="keyword">new</span> CreateBucketRequest(<span class="keyword">null</span>);</span><br><span class="line">            <span class="comment">//设置Bucket名称</span></span><br><span class="line">            bucketRequest.setBucketName(BUCKET_NAME);</span><br><span class="line">            <span class="comment">//设置权限:公共读</span></span><br><span class="line">            bucketRequest.setCannedACL(CannedAccessControlList.PublicRead);</span><br><span class="line">            <span class="comment">//创建新Bucket</span></span><br><span class="line">            ossClient.createBucket(bucketRequest);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ossClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建模拟文件夹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ossClient oss连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucketName 存储空间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folder   模拟文件夹名如&quot;qj_nanjing/&quot;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  文件夹名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">createFolder</span><span class="params">(OSSClient ossClient,String bucketName,String folder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//判断文件夹是否存在，不存在则创建</span></span><br><span class="line">        <span class="keyword">if</span>(!ossClient.doesObjectExist(bucketName,folder))&#123;</span><br><span class="line">            <span class="comment">//创建文件夹</span></span><br><span class="line">            ossClient.putObject(bucketName,folder,<span class="keyword">new</span> ByteArrayInputStream(<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>]));</span><br><span class="line">            System.out.println(<span class="string">&quot;创建文件夹成功&quot;</span>);</span><br><span class="line">            <span class="comment">//得到文件夹名</span></span><br><span class="line">            OSSObject ossObject = ossClient.getObject(bucketName,folder);</span><br><span class="line">            String fileDir = ossObject.getKey();</span><br><span class="line">            System.out.println(<span class="string">&quot;文件名为：&quot;</span>+fileDir);</span><br><span class="line">            <span class="keyword">return</span> fileDir;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> folder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传图片至OSS</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile 文件对象F</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> FileType  文件类型F</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> url 返回文件访问路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//MultipartFile是一个封装了文件信息的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">uploadDocument</span><span class="params">(MultipartFile multipartFile,String FileType)</span></span>&#123;</span><br><span class="line">        <span class="comment">//获得OSS连接</span></span><br><span class="line">        OSSClient ossClient = <span class="keyword">this</span>.getOSSClient();</span><br><span class="line">        <span class="comment">//获取文件的后缀</span></span><br><span class="line">        String suffix = multipartFile.getOriginalFilename();</span><br><span class="line">        suffix = suffix.substring(suffix.lastIndexOf(<span class="string">&quot;.&quot;</span>)); <span class="comment">//.后面的</span></span><br><span class="line">        <span class="comment">//获得当前上传日期</span></span><br><span class="line">        String date = SDF.format(<span class="keyword">new</span> Date());</span><br><span class="line">        <span class="comment">//通过UUID名来避免文件重名</span></span><br><span class="line">        String uuid = UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//组合文件名称</span></span><br><span class="line">        String filename = FileType + <span class="string">&quot;/&quot;</span> + date  + <span class="string">&quot;/&quot;</span> + uuid + suffix;</span><br><span class="line">        String url = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//通过OSSClient获得上传文件后返回的url</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ossClient.putObject(BUCKET_NAME,filename,<span class="keyword">new</span> ByteArrayInputStream(multipartFile.getBytes()));</span><br><span class="line">            url = BUCKET_URL + filename;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭连接</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过文件名判断并获取OSS服务文件上传时文件的contentType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile 文件对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文件的contentType</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">getContentType</span><span class="params">(MultipartFile multipartFile)</span></span>&#123;</span><br><span class="line">        <span class="comment">//获取文件的后缀</span></span><br><span class="line">        String suffix = multipartFile.getOriginalFilename();</span><br><span class="line">        suffix = suffix.substring(suffix.lastIndexOf(<span class="string">&quot;.&quot;</span>)); <span class="comment">//.后面的</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.bmp&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/bmp&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.gif&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/gif&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.jpeg&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;.jpg&quot;</span>.equalsIgnoreCase(suffix)  || <span class="string">&quot;.png&quot;</span>.equalsIgnoreCase(suffix) ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;image/jpeg&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.html&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/html&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.txt&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.vsd&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/vnd.visio&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.ppt&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;pptx&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/vnd.ms-powerpoint&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.doc&quot;</span>.equalsIgnoreCase(suffix) || <span class="string">&quot;docx&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;application/msword&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;.xml&quot;</span>.equalsIgnoreCase(suffix)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;text/xml&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//默认返回类型</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;image/jpeg&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接口测试"><a href="#接口测试" class="headerlink" title="接口测试"></a>接口测试</h2><ul><li>客户端代码</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span>文件上传<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">        文件提交：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>创建控制器<code>UploadController</code>用于接收前端请求并调用工具类</li></ul><p>```java<br>@Controller<br>public class UploadController {<br>    @Autowired<br>    AliyunOSSClientUtil ossClientUtil;<br>    @RequestMapping(“/upload”)<br>    @ResponseBody //JSON字符串格式    RequestParm为了使其和表单的name一致<br>    public String uploadtest(@RequestParam(“file”) MultipartFile multipartFile){<br>        String FileType = ossClientUtil.getContentType(multipartFile);<br>        String url = ossClientUtil.uploadDocument(multipartFile,FileType);<br>        System.out.println(“路径:”+url);<br>       return “文件上传成功!”;<br>    }<br>}<br>``</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;OSS对象存储服务&quot;&gt;&lt;a href=&quot;#OSS对象存储服务&quot; class=&quot;headerlink&quot; title=&quot;OSS对象存储服务&quot;&gt;&lt;/a&gt;OSS对象存储服务&lt;/h1&gt;&lt;h2 id=&quot;OSS简介&quot;&gt;&lt;a href=&quot;#OSS简介&quot; class=&quot;header</summary>
      
    
    
    
    <category term="企业常用技术" scheme="http://xiaoliblog.cn/categories/%E4%BC%81%E4%B8%9A%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/"/>
    
    <category term="实现图片上传至阿里云OSS存储" scheme="http://xiaoliblog.cn/categories/%E4%BC%81%E4%B8%9A%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E8%87%B3%E9%98%BF%E9%87%8C%E4%BA%91OSS%E5%AD%98%E5%82%A8/"/>
    
    
    <category term="企业常用技术" scheme="http://xiaoliblog.cn/tags/%E4%BC%81%E4%B8%9A%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>小米商城🍃首页商品模块</title>
    <link href="http://xiaoliblog.cn/page/xiaomi02.html"/>
    <id>http://xiaoliblog.cn/page/xiaomi02.html</id>
    <published>2021-05-13T12:53:14.371Z</published>
    <updated>2021-05-13T13:38:26.995Z</updated>
    
    <content type="html"><![CDATA[<h1 id="首页数据加载"><a href="#首页数据加载" class="headerlink" title="首页数据加载"></a>首页数据加载</h1><ul><li>首页中需要的数据从后台获取并添加<ul><li>商品类型</li><li>每种类型下的商品</li></ul></li><li>业务层处理<ul><li>商品类型：com.xiaomi.service.<code>GoodsTypeService</code></li><li>商品： com.xiaomi.service.<code>GoodsShippingService</code></li></ul></li><li>首页控制器<ul><li>com.xiaomi.controller.<code>IndexController</code> ，加载首页数据的控制器⽅法，前端网页中通过 JQuery Ajax 请求获取数据</li></ul></li><li>然后开发首页视图：index.jsp渲染展示商品</li></ul><h2 id="商品类型"><a href="#商品类型" class="headerlink" title="商品类型"></a>商品类型</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;首页数据加载&quot;&gt;&lt;a href=&quot;#首页数据加载&quot; class=&quot;headerlink&quot; title=&quot;首页数据加载&quot;&gt;&lt;/a&gt;首页数据加载&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;首页中需要的数据从后台获取并添加&lt;ul&gt;
&lt;li&gt;商品类型&lt;/li&gt;
&lt;li&gt;每种类型下的商品&lt;</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>小米商城🍃用户模块</title>
    <link href="http://xiaoliblog.cn/page/xiaomi01.html"/>
    <id>http://xiaoliblog.cn/page/xiaomi01.html</id>
    <published>2021-05-13T11:45:28.390Z</published>
    <updated>2021-05-13T12:51:30.369Z</updated>
    
    <content type="html"><![CDATA[<h1 id="小米商城"><a href="#小米商城" class="headerlink" title="小米商城"></a>小米商城</h1><h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><ul><li>商城项⽬：（⼩⽶商城：Business -to- Customer B2C）</li><li>核⼼元素：⽤户、商品</li><li>扩展元素：<ul><li>⽤户 –&gt; 收货地址、⽤户扩展资料…</li><li>商品 –&gt; 商品图⽚、商品类型、商品套餐、售后服务…</li></ul></li><li>元素都可以抽象成实体类型，就是对应了数据库中的 table 表格</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> xiaomi;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> xiaomi <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> <span class="string">&#x27;utf8&#x27;</span>;</span><br><span class="line"><span class="keyword">USE</span> xiaomi;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------- 创建数据表</span></span><br><span class="line"><span class="comment">-- 用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`consumer`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;用户编号&#x27;</span>,</span><br><span class="line">   <span class="string">`username`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;用户账号&#x27;</span>,</span><br><span class="line">   <span class="string">`password`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;用户密码&#x27;</span>,</span><br><span class="line">   <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;待完善&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;电子邮箱&#x27;</span>,</span><br><span class="line">   <span class="string">`phone`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;待完善&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;联系方式&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 商品类型表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_type`</span>(</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品类型编号&#x27;</span>,</span><br><span class="line">   <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品类型名称&#x27;</span>,</span><br><span class="line">   <span class="string">`pid`</span> <span class="built_in">INT</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;上级类型&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 商品配置</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_configure`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;配置编号&#x27;</span>,</span><br><span class="line">   <span class="string">`info`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;配置描述&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属商品&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 商品套餐</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_package`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;套餐编号&#x27;</span>,</span><br><span class="line">   <span class="string">`info`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;套餐描述&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属商品&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 商品服务-售后服务</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_service`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;服务编号&#x27;</span>,</span><br><span class="line">   <span class="string">`info`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;服务描述&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属商品&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 商品表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品编号&#x27;</span>,</span><br><span class="line">   <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品名称&#x27;</span>,</span><br><span class="line">   <span class="string">`price`</span> <span class="keyword">DOUBLE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品单价&#x27;</span>,</span><br><span class="line">   <span class="string">`stock`</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品库存&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_type_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品类型&#x27;</span>,</span><br><span class="line">   <span class="string">`remark`</span> <span class="built_in">TEXT</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品描述&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 商品图片表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_images`</span>(</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;图片编号&#x27;</span>,</span><br><span class="line">   <span class="string">`path`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;图片路径&#x27;</span>,</span><br><span class="line">   <span class="string">`title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;小米品质&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;图片主题&#x27;</span>,</span><br><span class="line">   <span class="string">`alt`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;小米品质&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;图片描述&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属商品&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 购物车表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_cart`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">INT</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;购物编号&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品编号&#x27;</span>,</span><br><span class="line">   <span class="string">`buy_count`</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;购买数量&#x27;</span>,</span><br><span class="line">   <span class="string">`add_date`</span> DATETIME <span class="keyword">COMMENT</span> <span class="string">&#x27;添加时间&#x27;</span>,</span><br><span class="line">   <span class="string">`subtotal`</span> <span class="keyword">DOUBLE</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;小计金额&#x27;</span>,</span><br><span class="line">   <span class="string">`consumer_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属用户&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_order`</span>(</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">   <span class="string">`order_date`</span> DATETIME <span class="keyword">COMMENT</span> <span class="string">&#x27;下单时间&#x27;</span>,</span><br><span class="line">   <span class="string">`consumer_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属用户&#x27;</span>,</span><br><span class="line">   <span class="string">`status`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;待付款&#x27;</span>  <span class="keyword">COMMENT</span> <span class="string">&#x27;订单状态(待付款|已付款|已发货|已收货)&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_shipping_address_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;收货地址&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单商品</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_order_item`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;购买商品编号&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_img`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;商品图片&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_price`</span> <span class="keyword">DOUBLE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;成交金额&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_count`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;成交数量&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_subtotal`</span> <span class="keyword">DOUBLE</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;小计金额&#x27;</span>,</span><br><span class="line">   <span class="string">`goods_order_id`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属订单&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 收货地址</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`goods_shipping_address`</span> (</span><br><span class="line">   <span class="string">`id`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) PRIMARY <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;地址编号&#x27;</span>,</span><br><span class="line">   <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;收货人姓名&#x27;</span>,</span><br><span class="line">   <span class="string">`phone`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;收货人联系方式&#x27;</span>,</span><br><span class="line">   <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">COMMENT</span> <span class="string">&#x27;收货人电子邮箱&#x27;</span>,</span><br><span class="line">   <span class="string">`province`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">COMMENT</span> <span class="string">&#x27;省区&#x27;</span>,</span><br><span class="line">   <span class="string">`city`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">COMMENT</span> <span class="string">&#x27;市区&#x27;</span>,</span><br><span class="line">   <span class="string">`country`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">COMMENT</span> <span class="string">&#x27;县区&#x27;</span>,</span><br><span class="line">   <span class="string">`street`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">COMMENT</span> <span class="string">&#x27;街道&#x27;</span>,</span><br><span class="line">   <span class="string">`remark`</span> <span class="built_in">TEXT</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;描述&#x27;</span>,</span><br><span class="line">   <span class="string">`consumer_id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;所属用户&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 新增商品类型</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> goods_type(<span class="keyword">id</span>, <span class="keyword">NAME</span>, pid)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">101</span>, <span class="string">&quot;手机电话&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">102</span>, <span class="string">&quot;电视盒子&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">103</span>, <span class="string">&quot;笔记本 平板&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">104</span>, <span class="string">&quot;家电 插线板&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">105</span>, <span class="string">&quot;出行 穿戴&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">106</span>, <span class="string">&quot;智能 路由器&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">107</span>, <span class="string">&quot;电源 配件&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">108</span>, <span class="string">&quot;健康 儿童&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">109</span>, <span class="string">&quot;耳机 音箱&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">110</span>, <span class="string">&quot;生活 箱包&quot;</span>, <span class="literal">NULL</span>),</span><br><span class="line">      (<span class="number">10001</span>, <span class="string">&quot;小米CC&quot;</span>, <span class="number">101</span>),</span><br><span class="line">      (<span class="number">10002</span>, <span class="string">&quot;RedMi Note&quot;</span>, <span class="number">101</span>),</span><br><span class="line">      (<span class="number">10003</span>, <span class="string">&quot;黑鲨手机&quot;</span>, <span class="number">101</span>),</span><br><span class="line">      (<span class="number">20001</span>, <span class="string">&quot;小米电视4A&quot;</span>, <span class="number">102</span>),</span><br><span class="line">      (<span class="number">20002</span>, <span class="string">&quot;小米电视Pro&quot;</span>, <span class="number">102</span>),</span><br><span class="line">      (<span class="number">20003</span>, <span class="string">&quot;全面屏电视&quot;</span>, <span class="number">102</span>),</span><br><span class="line">      (<span class="number">30001</span>, <span class="string">&quot;小米笔记本&quot;</span>, <span class="number">103</span>),</span><br><span class="line">      (<span class="number">30002</span>, <span class="string">&quot;小米游戏本&quot;</span>, <span class="number">103</span>);</span><br><span class="line"><span class="comment">-- 新增商品数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> goods(<span class="string">`name`</span>, <span class="string">`price`</span>, <span class="string">`stock`</span>, <span class="string">`goods_type_id`</span>, <span class="string">`remark`</span>)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&quot;小米CC9e&quot;</span>, <span class="number">3499.0</span>, <span class="number">100</span>, <span class="number">10001</span>, <span class="string">&quot;8GB+256GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米CC9e&quot;</span>, <span class="number">2799.0</span>, <span class="number">100</span>, <span class="number">10001</span>, <span class="string">&quot;6GB+256GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米CC9e&quot;</span>, <span class="number">3099.0</span>, <span class="number">100</span>, <span class="number">10001</span>, <span class="string">&quot;8GB+128GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米CC9 Pro&quot;</span>, <span class="number">3499</span>, <span class="number">50</span>, <span class="number">10001</span>, <span class="string">&quot;8GB+256GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米CC9 Pro&quot;</span>, <span class="number">2799.0</span>, <span class="number">100</span>, <span class="number">10001</span>, <span class="string">&quot;6GB+256GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米CC9 Pro&quot;</span>, <span class="number">3099.0</span>, <span class="number">100</span>, <span class="number">10001</span>, <span class="string">&quot;8GB+128GB&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;红米8&quot;</span>, <span class="number">699.0</span>, <span class="number">100</span>, <span class="number">10002</span>, <span class="string">&quot;4GB+128GB 5000mAh&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;红米8A&quot;</span>, <span class="number">699.0</span>, <span class="number">100</span>, <span class="number">10002</span>, <span class="string">&quot;4GB+128GB 5000mAh 31天超长续航&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;红米7A&quot;</span>, <span class="number">579.0</span>, <span class="number">100</span>, <span class="number">10002</span>, <span class="string">&quot;3GB+128GB 小巧大电量，持久又流畅&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;黑鲨手机2 Pro&quot;</span>, <span class="number">2999.0</span>, <span class="number">100</span>, <span class="number">10003</span>, <span class="string">&quot;12GB+128GB 骁龙855 Plus旗舰处理器 / 全系标配12GB大运存 / 液冷3.0+，全域液冷升级 / 电竞级屏幕压感，操作快人一步 / 独显DC调光2.0 护眼全新升级&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;黑鲨手机2 Pro&quot;</span>, <span class="number">3499.0</span>, <span class="number">100</span>, <span class="number">10003</span>, <span class="string">&quot;12GB+256GB 骁龙855 Plus旗舰处理器 / 全系标配12GB大运存 / 液冷3.0+，全域液冷升级 / 电竞级屏幕压感，操作快人一步 / 独显DC调光2.0 护眼全新升级&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;黑鲨手机2 Pro&quot;</span>, <span class="number">3999.0</span>, <span class="number">100</span>, <span class="number">10003</span>, <span class="string">&quot;12GB+512GB 骁龙855 Plus旗舰处理器 / 全系标配12GB大运存 / 液冷3.0+，全域液冷升级 / 电竞级屏幕压感，操作快人一步 / 独显DC调光2.0 护眼全新升级&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米电视5 75英寸&quot;</span>, <span class="number">7999.0</span>, <span class="number">100</span>, <span class="number">20001</span>, <span class="string">&quot;「小米电视新品火爆预约中！」全面屏设计 / 金属机身 / 4K广色域屏幕 /纤薄机身 / 内置小爱同学 / 3GB+32GB大存储 / 支持8K视频内容&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米电视5 Pro 75英寸&quot;</span>, <span class="number">9999.0</span>, <span class="number">100</span>, <span class="number">20002</span>, <span class="string">&quot;「小米电视新品火爆预约中！」量子点屏幕 / 全面屏设计 / 超薄金属机身 / 4GB+64GB大存储 / MEMC运动补偿 / 内置小爱同学 / 支持8K视频内容&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米全面屏电视Pro 65英寸E65S&quot;</span>, <span class="number">3399.0</span>, <span class="number">100</span>, <span class="number">20003</span>, <span class="string">&quot;时尚金属全面屏设计 / 搭载Amlogic T972超强悍处理器 / 4K超高清画质 细腻如真 / 支持8K视频解码 / 2G+32G超大存储 / 内置小爱同学 语音控制更方便 / 智能Patchwall汇聚海量好内容&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米全面屏电视Pro 55英寸E55S&quot;</span>, <span class="number">3499.0</span>, <span class="number">100</span>, <span class="number">20003</span>, <span class="string">&quot;时尚金属全面屏设计 / 搭载Amlogic T972超强悍处理器 / 4K超高清画质 细腻如真 / 支持8K视频解码 / 2G+32G超大存储 / 内置小爱同学 语音控制更方便 / 智能Patchwall汇聚海量好内容&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米笔记本 13.3&quot;</span>, <span class="number">4499.0</span>, <span class="number">100</span>, <span class="number">30001</span>, <span class="string">&quot;第八代四核处理器，显卡再升级&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米笔记本Air 12.5\&quot;</span><span class="number">2019</span>款\<span class="string">&quot;&quot;</span>, <span class="number">3999.0</span>, <span class="number">100</span>, <span class="number">30001</span>, <span class="string">&quot;全高清屏幕 / 长续航全金属 / 超窄边框 / 像杂志一样随身携带 / 哈曼高品质扬声器&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米笔记本15.6\&quot;</span> <span class="number">2019</span>款 独显版<span class="string">&quot;, 4699.0, 100, 30001, &quot;</span>独立显卡/ 英特尔四核处理器 / 最高<span class="number">512</span>G高速固态硬盘 / 独立数字键盘 / 全面均衡的国民轻薄本<span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米笔记本<span class="number">15.6</span>\<span class="string">&quot; 2019款 集显版&quot;</span>, <span class="number">4499.0</span>, <span class="number">100</span>, <span class="number">30001</span>, <span class="string">&quot;高速固态硬盘 / 独立数字键盘 / 全面均衡的国民轻薄本&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;Pro 15 增强版 i7 16GB&quot;</span>, <span class="number">6999.0</span>, <span class="number">100</span>, <span class="number">30001</span>, <span class="string">&quot;全新十代酷睿处理器 / 大满贯接口 / 100%sRGB高色域 / 全尺寸背光键盘&quot;</span>),</span><br><span class="line">      (<span class="string">&quot;小米笔记本Pro 15.6\&quot;</span> <span class="number">2019</span>款<span class="string">&quot;, 5999.0, 100, 30001, &quot;</span>NVIDIA MX250 <span class="number">2</span>G独显 / 第八代Intel处理器 / PCIe 高速固态硬盘 / <span class="number">72</span>%NTSC高色域全高清屏 / 更强悍的专业笔记本<span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>Pro <span class="number">15.6</span>\<span class="string">&quot; GTX显卡&quot;</span>, <span class="number">7499.0</span>, <span class="number">100</span>, <span class="number">30001</span>, <span class="string">&quot;全新第八代英特尔酷睿处理器 ／ 升级金属双风扇 ／ 带宽提升80% ／ 15.6\&quot;</span>全高清大屏超窄边大视野<span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, 7999.0, 100, 30002, &quot;</span>i5 <span class="number">8</span>G <span class="number">1</span>T+<span class="number">256</span>G <span class="number">1060</span> <span class="number">6</span>G<span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, 8999.0, 100, 30002, &quot;</span>   i7 <span class="number">16</span>G <span class="number">512</span>G <span class="number">1060</span> <span class="number">6</span>G <span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, 7999.0, 100, 30002, &quot;</span>   i5 <span class="number">8</span>G <span class="number">512</span>G <span class="number">1060</span> <span class="number">6</span>G <span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, 6699.0, 100, 30002, &quot;</span>   i5 <span class="number">8</span>G <span class="number">1</span>T+<span class="number">256</span>G <span class="number">1050</span>Ti <span class="number">4</span>G <span class="string">&quot;),</span></span><br><span class="line"><span class="string">      (&quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, 8999.0, 100, 30002, &quot;</span>   i7 <span class="number">16</span>G <span class="number">1</span>T+<span class="number">256</span>G <span class="number">1060</span> <span class="number">6</span>G <span class="string">&quot;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 添加商品对应的图片：主要是图片路径~具体图片已经包含在项目文件夹中</span></span><br><span class="line"><span class="string">INSERT INTO goods_images(path, title, alt, goods_id)</span></span><br><span class="line"><span class="string">VALUES(&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">1</span>_1.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 1),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">1</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 1),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">2</span>_1.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">6</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 2),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">2</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">6</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 2),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">3</span>_1.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 3),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">3</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 3),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">3</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 3),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">4</span>_1.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">128</span>GB<span class="string">&quot;, 4),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">4</span>_2.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 4),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">5</span>_1.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 5),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">5</span>_2.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 5),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">6</span>_1.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 6),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">6</span>_2.jpg<span class="string">&quot;, &quot;</span>小米CC9 Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 6),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">7</span>_1.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 7),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">7</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 7),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">8</span>_1.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 8),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">8</span>_2.jpg<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 8),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">9</span>_1.jpg<span class="string">&quot;, &quot;</span>红米<span class="number">7</span>A<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 9),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">9</span>_2.jpg<span class="string">&quot;, &quot;</span>红米<span class="number">7</span>A<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 9),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">9</span>_3.jpg<span class="string">&quot;, &quot;</span>红米<span class="number">7</span>A<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 9),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">9</span>_4.jpg<span class="string">&quot;, &quot;</span>红米<span class="number">7</span>A<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 9),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">10</span>_1.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 10),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">10</span>_2.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 10),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">11</span>_1.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 11),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">11</span>_2.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 11),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">12</span>_1.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 12),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">12</span>_2.jpg<span class="string">&quot;, &quot;</span>黑鲨手机<span class="number">2</span> Pro<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 12),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">13</span>_1.jpg<span class="string">&quot;, &quot;</span>小米电视<span class="number">5</span> <span class="number">75</span>英寸<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 13),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">13</span>_2.jpg<span class="string">&quot;, &quot;</span>小米电视<span class="number">5</span> <span class="number">75</span>英寸<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 13),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">14</span>_1.jpg<span class="string">&quot;, &quot;</span>小米电视<span class="number">5</span> Pro <span class="number">75</span>英寸<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 14),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">14</span>_2.jpg<span class="string">&quot;, &quot;</span>小米电视<span class="number">5</span> Pro <span class="number">75</span>英寸<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 14),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">15</span>_1.jpg<span class="string">&quot;, &quot;</span>小米全面屏电视Pro <span class="number">65</span>英寸E65S<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 15),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">15</span>_2.jpg<span class="string">&quot;, &quot;</span>小米全面屏电视Pro <span class="number">65</span>英寸E65S<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 15),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">16</span>_1.jpg<span class="string">&quot;, &quot;</span>小米全面屏电视Pro <span class="number">55</span>英寸E55S<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 16),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">16</span>_2.jpg<span class="string">&quot;, &quot;</span>小米全面屏电视Pro <span class="number">55</span>英寸E55S<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 16),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">17</span>_1.png<span class="string">&quot;, &quot;</span>小米笔记本 <span class="number">13.3</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 17),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">17</span>_2.png<span class="string">&quot;, &quot;</span>小米笔记本 <span class="number">13.3</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 17),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">18</span>_1.jpg<span class="string">&quot;, &quot;</span>小米笔记本Air <span class="number">12.5</span>\<span class="string">&quot;2019款\&quot;&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 18),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">18</span>_2.jpg<span class="string">&quot;, &quot;</span>小米笔记本Air <span class="number">12.5</span>\<span class="string">&quot;2019款\&quot;&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 18),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">19</span>_1.png<span class="string">&quot;, &quot;</span>小米笔记本<span class="number">15.6</span>\<span class="string">&quot; 2019款 独显版&quot;</span>, <span class="string">&quot;8GB+256GB&quot;</span>, <span class="number">19</span>),</span><br><span class="line">      (<span class="string">&quot;static/images/goodsImage/19_2.png&quot;</span>, <span class="string">&quot;小米笔记本15.6\&quot;</span> <span class="number">2019</span>款 独显版<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 19),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">20</span>_1.png<span class="string">&quot;, &quot;</span>小米笔记本<span class="number">15.6</span>\<span class="string">&quot; 2019款 集显版&quot;</span>, <span class="string">&quot;8GB+256GB&quot;</span>, <span class="number">20</span>),</span><br><span class="line">      (<span class="string">&quot;static/images/goodsImage/20_2.png&quot;</span>, <span class="string">&quot;小米笔记本15.6\&quot;</span> <span class="number">2019</span>款 集显版<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 20),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">21</span>_1.png<span class="string">&quot;, &quot;</span>Pro <span class="number">15</span> 增强版 i7 <span class="number">16</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 21),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">21</span>_2.jpg<span class="string">&quot;, &quot;</span>Pro <span class="number">15</span> 增强版 i7 <span class="number">16</span>GB<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 21),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">22</span>_1.jpg<span class="string">&quot;, &quot;</span>小米笔记本Pro <span class="number">15.6</span>\<span class="string">&quot; 2019款&quot;</span>, <span class="string">&quot;8GB+256GB&quot;</span>, <span class="number">22</span>),</span><br><span class="line">      (<span class="string">&quot;static/images/goodsImage/22_2.jpg&quot;</span>, <span class="string">&quot;小米笔记本Pro 15.6\&quot;</span> <span class="number">2019</span>款<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 22),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">22</span>_1.jpg<span class="string">&quot;, &quot;</span>Pro <span class="number">15.6</span>\<span class="string">&quot; GTX显卡&quot;</span>, <span class="string">&quot;8GB+256GB&quot;</span>, <span class="number">23</span>),</span><br><span class="line">      (<span class="string">&quot;static/images/goodsImage/23_2.jpg&quot;</span>, <span class="string">&quot;Pro 15.6\&quot;</span> GTX显卡<span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 23),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">24</span>_1.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 24),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">24</span>_2.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 24),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">25</span>_1.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 25),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">25</span>_2.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 25),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">26</span>_1.png<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 26),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">26</span>_2.png<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 26),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">27</span>_1.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 27),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">27</span>_2.jpg<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 27),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">28</span>_1.png<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 28),</span></span><br><span class="line"><span class="string">      (&quot;</span><span class="keyword">static</span>/images/goodsImage/<span class="number">28</span>_2.png<span class="string">&quot;, &quot;</span>小米游戏本<span class="number">15.6</span><span class="string">&quot;, &quot;</span><span class="number">8</span>GB+<span class="number">256</span>GB<span class="string">&quot;, 28);</span></span><br></pre></td></tr></table></figure><h2 id="导入相关依赖"><a href="#导入相关依赖" class="headerlink" title="导入相关依赖"></a>导入相关依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入项目依赖的jar包 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SpringMVC、Spring --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--引入pageHelper分页插件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MBG 逆向工程--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 返回json字符串的支持 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JSR303数据校验支持；tomcat7及以上的服务器，</span></span><br><span class="line"><span class="comment">          tomcat7以下的服务器：el表达式。额外给服务器的lib包中替换新的标准的el</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring-Jdbc --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Spring-test --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring面向切面编程 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--MyBatis --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MyBatis整合Spring的适配包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池、驱动 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.mchange/c3p0 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- （jstl，servlet-api，junit） --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/jstl/jstl --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--服务器上有就剔除掉--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JSP--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.ibatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ibatis-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mybatis逆向工程"><a href="#mybatis逆向工程" class="headerlink" title="mybatis逆向工程"></a>mybatis逆向工程</h2><ul><li>逆向⼯程 是通过数据库中已经存在的数据表，反向⽣成 java 中的实体类 (⽣成对应的ORM持久层代码)</li><li>配置逆向⼯程的⽣成规则，就是描述数据库中那些表，⽣成对应的 java 中的实体类，同时⽣成映射配置⽂件。这个⽣成规则就是⼀个普通的配置⽂件</li><li>在项⽬的主⽬录中创建⼀个配置⽂件：<code>mybatis-generator-config.xml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/xiaomi&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.xiaomi.pojo&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;mapper&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">&quot;com.xiaomi.dao&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;consumer&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Consumer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Goods&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_images&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsImages&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_type&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsType&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_service&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsService&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_package&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsPackage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_configure&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsConfigure&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_cart&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsCart&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_order&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsOrder&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_order_item&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsOrderItem&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;goods_shipping_address&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;GoodsShippingAddress&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>通过配置⽂件指定的⽣成规则，⾃动构建实体类和数据访问类，参考官⽅⽂档</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MBGTest1</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">        File configFile = <span class="keyword">new</span> File(<span class="string">&quot;mybatis-generator-config.xml&quot;</span>);</span><br><span class="line">        ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">        Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">        DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">        MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SSM项目整合"><a href="#SSM项目整合" class="headerlink" title="SSM项目整合"></a>SSM项目整合</h2><ul><li>spring 配置⽂件： src/main/resources/<code>applicationContext.xml</code></li><li>springMVC 配置⽂件： src/main/resources/<code>springMVC.xml</code></li><li>mybatis 配置⽂件： src/main/resources/<code>mybatis-config.xml</code></li><li>数据源配置⽂件： src/main/resources/<code>db.properties</code></li><li>项⽬启动时，框架初始化，需要在 <code>web.xml</code> 中添加启动配置</li><li>在项⽬中创建对应的空的配置⽂件，同时给项⽬添加 <code>web</code> ⽀持</li></ul><div class="note success simple"><p>参考SSM高级整合即可</p></div><h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><ul><li>首先是Spring测试</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConsumerMapper consumerMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WebApplicationContext context;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span>  <span class="comment">//测试客户</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConsumerInsert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(consumerMapper);</span><br><span class="line">        <span class="comment">// 创建consumer对象</span></span><br><span class="line">        Consumer consumer = <span class="keyword">new</span> Consumer(<span class="string">&quot;damu&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        <span class="comment">// 将consumer对象增加到数据库中</span></span><br><span class="line">        consumerMapper.insertSelective(consumer);</span><br><span class="line">        System.out.println(<span class="string">&quot;数据insert执行完成&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span> <span class="comment">//查找客户</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConsumerSelectById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Consumer consumer = consumerMapper.selectByPrimaryKey(<span class="number">1</span>);</span><br><span class="line">        System.out.println(consumer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConsumerSelectByExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建一个查询条件【账号+密码】</span></span><br><span class="line">        ConsumerExample ce = <span class="keyword">new</span> ConsumerExample();</span><br><span class="line">        ce.createCriteria().andUsernameEqualTo(<span class="string">&quot;damu&quot;</span>)</span><br><span class="line">                .andPasswordEqualTo(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询数据</span></span><br><span class="line">        List&lt;Consumer&gt; consumers = consumerMapper.selectByExample(ce);</span><br><span class="line">        consumers.forEach(consumer-&gt; System.out.println(consumer));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="登录模块"><a href="#登录模块" class="headerlink" title="登录模块"></a>登录模块</h1><h2 id="响应数据封装"><a href="#响应数据封装" class="headerlink" title="响应数据封装"></a>响应数据封装</h2><ul><li>关于数据接⼝，提供给客户端调⽤，并且返回符合标准预期的数据访问接⼝，通常会有如下的要求<ul><li>固定格式的参数，根据需求提供给调⽤接⼝即可</li><li>返回数据—错误码：快捷判断响应结果是否正确的错误标志，HTTP：200正确;404资源未找到;500错误</li><li>返回数据—错误描述：针对某错误码具体错误信息的描述</li><li>返回数据—-数据封装：具体包含的⼀个或者多个数据</li></ul></li><li>定义一个工具类<code>ResponseMessage </code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseMessage</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String errorCode; <span class="comment">//错误码</span></span><br><span class="line">    <span class="keyword">private</span> String errorMsg; <span class="comment">//错误描述</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; objectMap = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">//数据封装</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> errorCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorCode</span><span class="params">(String errorCode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.errorCode = errorCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> errorMsg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorMsg</span><span class="params">(String errorMsg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.errorMsg = errorMsg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getObjectMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> objectMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObjectMap</span><span class="params">(Map&lt;String, Object&gt; objectMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.objectMap = objectMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseMessage <span class="title">addObject</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.objectMap.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//方便链式调用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResponseMessage <span class="title">success</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ResponseMessage rm = <span class="keyword">new</span> ResponseMessage();</span><br><span class="line">        rm.setErrorCode(<span class="string">&quot;100&quot;</span>);</span><br><span class="line">        rm.setErrorMsg(<span class="string">&quot;处理成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> rm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResponseMessage <span class="title">error</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ResponseMessage rm = <span class="keyword">new</span> ResponseMessage();</span><br><span class="line">        rm.setErrorCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">        rm.setErrorMsg(<span class="string">&quot;处理失败&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> rm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="控制器配置"><a href="#控制器配置" class="headerlink" title="控制器配置"></a>控制器配置</h2><ul><li>首先在service层创建用户业务<code>ConumerService</code>，调用Dao层方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConsumerMapper consumerMapper;</span><br><span class="line">    <span class="comment">//根据账户密码查询客户</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Consumer <span class="title">findConsumerWithUsernameAndPassword</span><span class="params">(Consumer consumer)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建一个条件对象</span></span><br><span class="line">        ConsumerExample ce = <span class="keyword">new</span> ConsumerExample();</span><br><span class="line">        ce.createCriteria().andUsernameEqualTo(consumer.getUsername())</span><br><span class="line">                .andPasswordEqualTo(consumer.getPassword());</span><br><span class="line">        <span class="comment">// 根据条件对象查询数据</span></span><br><span class="line">        List&lt;Consumer&gt; consumerList = consumerMapper.selectByExample(ce);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断返回结果</span></span><br><span class="line">        <span class="keyword">return</span> consumerList != <span class="keyword">null</span> &amp;&amp; consumerList.size() == <span class="number">1</span> ? consumerList.get(<span class="number">0</span>) : <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建控制器<code>ConsumerController</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/consumer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConsumerService consumerService;</span><br><span class="line">    <span class="comment">//乱码处理</span></span><br><span class="line">    <span class="meta">@PostMapping(value=&quot;/login/auth&quot;, produces = &#123;&quot;application/json;charset=UTF-8&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">// 序列化--&gt; 类型转换--&gt; jackson --&gt; json</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseMessage <span class="title">login</span><span class="params">(<span class="meta">@RequestParam</span> String username,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="meta">@RequestParam</span> String password,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 HttpSession session)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        重构：登录业务</span></span><br><span class="line"><span class="comment">            1. 验证账号+密码</span></span><br><span class="line"><span class="comment">            2. 登记用户 -- 会话跟踪【session】</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;接受到请求：/consumer/login/auth&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;账号：&quot;</span> + username + <span class="string">&quot;; 密码：&quot;</span> + password);</span><br><span class="line">        Consumer consumer = <span class="keyword">new</span> Consumer(username, password);</span><br><span class="line">        consumer = consumerService.findConsumerWithUsernameAndPassword(consumer);</span><br><span class="line">        System.out.println(<span class="string">&quot;登录结果：&quot;</span> + consumer);</span><br><span class="line">        <span class="comment">// 记录登录用户</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;loginConsumer&quot;</span>, consumer);</span><br><span class="line">        <span class="keyword">return</span> consumer != <span class="keyword">null</span> ? ResponseMessage.success() : ResponseMessage.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Web单元测试"><a href="#Web单元测试" class="headerlink" title="Web单元测试"></a>Web单元测试</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;, &quot;classpath:springMVC.xml&quot;&#125;)</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明一个模拟请求的对象</span></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line">    <span class="comment">// 需要一个web容器</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WebApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mockMvc = MockMvcBuilders.webAppContextSetup(context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogin</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        MvcResult mvcResult = mockMvc.perform(</span><br><span class="line">                MockMvcRequestBuilders.post(<span class="string">&quot;/consumer/login/auth&quot;</span>)</span><br><span class="line">                .param(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;damu&quot;</span>)</span><br><span class="line">                .param(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123&quot;</span>)).andReturn();</span><br><span class="line">        <span class="comment">// javax.servlet.http.HttpServletResponse 没有找到</span></span><br><span class="line">        <span class="comment">// tomcat没有配置，容器依赖没有加载</span></span><br><span class="line">        <span class="comment">// jsp / servlet</span></span><br><span class="line">        System.out.println(mvcResult.getResponse().getContentAsString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="登录页请求"><a href="#登录页请求" class="headerlink" title="登录页请求"></a>登录页请求</h2><ul><li>修改<code>login.jsp</code>网页视图</li><li>需要引入 JQuery Ajax 异步登录脚本</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 点击登录按钮时，发送ajax请求</span></span><br><span class="line">   $(<span class="string">&quot;#login-btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 发送ajax请求</span></span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">         url: <span class="string">&quot;/consumer/login/auth&quot;</span>,  <span class="comment">//控制器请求地址</span></span><br><span class="line">         method: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">         data: &#123;</span><br><span class="line">            <span class="string">&quot;username&quot;</span>: $(<span class="string">&quot;#username&quot;</span>).val(),</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: $(<span class="string">&quot;#password&quot;</span>).val()</span><br><span class="line">         &#125;,</span><br><span class="line">         success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;请求发送成功&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(response);</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">response.errorCode === <span class="string">&quot;100&quot;</span></span>)</span> &#123;</span><br><span class="line">               <span class="comment">// 登录成功</span></span><br><span class="line">               alert(<span class="string">&quot;恭喜，用户登录成功！&quot;</span>);  <span class="comment">//弹窗提示</span></span><br><span class="line">               <span class="built_in">window</span>.location = <span class="string">&quot;/index.jsp&quot;</span>; <span class="comment">//跳转到首页</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">// 登录失败</span></span><br><span class="line">            $(<span class="string">&quot;#error-username&quot;</span>).text(<span class="string">&quot;账号或者密码有误，请重新登录&quot;</span>).css(&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;);   <span class="comment">//显示提示信息</span></span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;请求发送失败..&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="注册模块"><a href="#注册模块" class="headerlink" title="注册模块"></a>注册模块</h1><h2 id="控制器配置-1"><a href="#控制器配置-1" class="headerlink" title="控制器配置"></a>控制器配置</h2><ul><li>在service层用户业务<code>ConumerService</code>，增加注册方法，并调用Dao层方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(Consumer consumer)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 验证用户的账号是否存在</span></span><br><span class="line">   ConsumerExample ce = <span class="keyword">new</span> ConsumerExample();</span><br><span class="line">   ce.createCriteria().andUsernameEqualTo(consumer.getUsername());</span><br><span class="line">   <span class="comment">// 根据条件对象查询数据</span></span><br><span class="line">   List&lt;Consumer&gt; consumerList = consumerMapper.selectByExample(ce);</span><br><span class="line">   <span class="keyword">if</span> (consumerList != <span class="keyword">null</span> &amp;&amp; consumerList.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;注册失败，账号已经存在，请使用其他账号注册&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 添加用户</span></span><br><span class="line">   consumerMapper.insertSelective(consumer);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;注册成功&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseMessage <span class="title">register</span><span class="params">(<span class="meta">@RequestParam</span> String username,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="meta">@RequestParam</span> String password)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 创建用户对象</span></span><br><span class="line">   Consumer consumer = <span class="keyword">new</span> Consumer(username, password);</span><br><span class="line">   <span class="comment">// 注册用户</span></span><br><span class="line">   String result = consumerService.register(consumer);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 判断结果</span></span><br><span class="line">   <span class="keyword">if</span> (result.contains(<span class="string">&quot;注册成功&quot;</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> ResponseMessage.success();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> ResponseMessage.error().addObject(<span class="string">&quot;msg&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="注册页请求"><a href="#注册页请求" class="headerlink" title="注册页请求"></a>注册页请求</h2><ul><li>修改<code>register.jsp</code>视图</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 点击注册按钮时，发送请求</span></span><br><span class="line">   $(<span class="string">&quot;#register-btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 发送Ajax请求</span></span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">         url: <span class="string">&quot;/consumer/register&quot;</span>,</span><br><span class="line">         method: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">         data: &#123;</span><br><span class="line">            <span class="string">&quot;username&quot;</span>: $(<span class="string">&quot;#username&quot;</span>).val(),</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: $(<span class="string">&quot;#password&quot;</span>).val()</span><br><span class="line">         &#125;,</span><br><span class="line">         success: <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">response.errorCode === <span class="string">&quot;100&quot;</span></span>)</span> &#123;</span><br><span class="line">               alert(<span class="string">&quot;Congratulations，账号注册成功，请登录吧&quot;</span>);</span><br><span class="line">               <span class="built_in">window</span>.location = <span class="string">&quot;/views/login.jsp&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               $(<span class="string">&quot;#errorMsg&quot;</span>).text(response.objectMap.msg).css(&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">&quot;#errorMsg&quot;</span>).text(<span class="string">&quot;请求迷路了，小二正在赶来的路上，请稍后再试..&quot;</span>).css(&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;);</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;小米商城&quot;&gt;&lt;a href=&quot;#小米商城&quot; class=&quot;headerlink&quot; title=&quot;小米商城&quot;&gt;&lt;/a&gt;小米商城&lt;/h1&gt;&lt;h2 id=&quot;数据库设计&quot;&gt;&lt;a href=&quot;#数据库设计&quot; class=&quot;headerlink&quot; title=&quot;数据库设计&quot;&gt;</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>SSM高级整合🍃删除模块</title>
    <link href="http://xiaoliblog.cn/page/ssmcrud05.html"/>
    <id>http://xiaoliblog.cn/page/ssmcrud05.html</id>
    <published>2021-05-09T12:08:49.075Z</published>
    <updated>2021-05-09T13:03:33.535Z</updated>
    
    <content type="html"><![CDATA[<h1 id="删除模块"><a href="#删除模块" class="headerlink" title="删除模块"></a>删除模块</h1><ul><li>可以单选进行单个删除</li><li>可以多选进行多个删除</li><li>点击删除会有是否删除的提示信息</li></ul><h2 id="单个删除"><a href="#单个删除" class="headerlink" title="单个删除"></a>单个删除</h2><ul><li><code>URI:/emp/id</code> DELETE</li><li>在<code>EmployeeService</code>中添加删除方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEmp</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        employeeMapper.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatch</span><span class="params">(List&lt;Integer&gt; ids)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        EmployeeExample example = <span class="keyword">new</span> EmployeeExample();</span><br><span class="line">        EmployeeExample.Criteria criteria = example.createCriteria();</span><br><span class="line">        <span class="comment">//delete from xxx where emp_id in(1,2,3)</span></span><br><span class="line">        criteria.andEmpIdIn(ids);</span><br><span class="line">        employeeMapper.deleteByExample(example);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>在控制器<code>EmployeeController</code>中添加单个删除的方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单个批量二合一</span></span><br><span class="line"><span class="comment">//批量删除：1-2-3</span></span><br><span class="line"><span class="comment">//单个删除：1</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/emp/&#123;ids&#125;&quot;,method=RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">deleteEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;ids&quot;)</span>String ids)</span></span>&#123;</span><br><span class="line">        <span class="comment">//批量删除</span></span><br><span class="line">        <span class="keyword">if</span>(ids.contains(<span class="string">&quot;-&quot;</span>))&#123;</span><br><span class="line">            List&lt;Integer&gt; del_ids = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            String[] str_ids = ids.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="comment">//组装id的集合</span></span><br><span class="line">            <span class="keyword">for</span> (String string : str_ids) &#123;</span><br><span class="line">                del_ids.add(Integer.parseInt(string));</span><br><span class="line">            &#125;</span><br><span class="line">            employeeService.deleteBatch(del_ids);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Integer id = Integer.parseInt(ids);</span><br><span class="line">            employeeService.deleteEmp(id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>单个删除发送Ajax</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单个删除</span></span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.delete_btn&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//1、弹出是否确认删除对话框</span></span><br><span class="line">        <span class="keyword">var</span> empName = $(<span class="built_in">this</span>).parents(<span class="string">&quot;tr&quot;</span>).find(<span class="string">&quot;td:eq(2)&quot;</span>).text();</span><br><span class="line">        <span class="keyword">var</span> empId = $(<span class="built_in">this</span>).attr(<span class="string">&quot;del-id&quot;</span>);</span><br><span class="line">        <span class="comment">//alert($(this).parents(&quot;tr&quot;).find(&quot;td:eq(1)&quot;).text());</span></span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">confirm(<span class="string">&quot;确认删除【&quot;</span>+empName+<span class="string">&quot;】吗？&quot;</span>)</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//确认，发送ajax请求删除即可</span></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp/&quot;</span>+empId,</span><br><span class="line">                type:<span class="string">&quot;DELETE&quot;</span>,</span><br><span class="line">                success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">                    alert(result.msg);</span><br><span class="line">                    <span class="comment">//回到本页</span></span><br><span class="line">                    to_page(currentPage);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="全选-全不选"><a href="#全选-全不选" class="headerlink" title="全选/全不选"></a>全选/全不选</h2><ul><li>实现页面全选和全不选的效果</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完成全选/全不选功能</span></span><br><span class="line">    $(<span class="string">&quot;#check_all&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//attr获取checked是undefined，布尔类型用prop;</span></span><br><span class="line">        <span class="comment">//我们这些dom原生的属性；attr获取自定义属性的值；</span></span><br><span class="line">        <span class="comment">//prop修改和读取dom原生属性的值</span></span><br><span class="line">        $(<span class="string">&quot;.check_item&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>,$(<span class="built_in">this</span>).prop(<span class="string">&quot;checked&quot;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//check_item</span></span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.check_item&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//判断当前选择中的元素是否5个</span></span><br><span class="line">        <span class="keyword">var</span> flag = $(<span class="string">&quot;.check_item:checked&quot;</span>).length==$(<span class="string">&quot;.check_item&quot;</span>).length;</span><br><span class="line">        $(<span class="string">&quot;#check_all&quot;</span>).prop(<span class="string">&quot;checked&quot;</span>,flag);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="批量删除"><a href="#批量删除" class="headerlink" title="批量删除"></a>批量删除</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击全部删除，就批量删除</span></span><br><span class="line">    $(<span class="string">&quot;#emp_delete_all_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">var</span> empNames = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> del_idstr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        $.each($(<span class="string">&quot;.check_item:checked&quot;</span>),<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//this</span></span><br><span class="line">            empNames += $(<span class="built_in">this</span>).parents(<span class="string">&quot;tr&quot;</span>).find(<span class="string">&quot;td:eq(2)&quot;</span>).text()+<span class="string">&quot;,&quot;</span>;</span><br><span class="line">            <span class="comment">//组装员工id字符串</span></span><br><span class="line">            del_idstr += $(<span class="built_in">this</span>).parents(<span class="string">&quot;tr&quot;</span>).find(<span class="string">&quot;td:eq(1)&quot;</span>).text()+<span class="string">&quot;-&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//去除empNames多余的,</span></span><br><span class="line">        empNames = empNames.substring(<span class="number">0</span>, empNames.length-<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//去除删除的id多余的-</span></span><br><span class="line">        del_idstr = del_idstr.substring(<span class="number">0</span>, del_idstr.length-<span class="number">1</span>);</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">confirm(<span class="string">&quot;确认删除【&quot;</span>+empNames+<span class="string">&quot;】吗？&quot;</span>)</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//发送ajax请求删除</span></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp/&quot;</span>+del_idstr,</span><br><span class="line">                type:<span class="string">&quot;DELETE&quot;</span>,</span><br><span class="line">                success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">                    alert(result.msg);</span><br><span class="line">                    <span class="comment">//回到当前页面</span></span><br><span class="line">                    to_page(currentPage);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f51d1253757d619c5bc108cd10850e8ddf753f61/2021/05/09/b1d55d8b6b19b6f739c1fb8f1dac655e.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;删除模块&quot;&gt;&lt;a href=&quot;#删除模块&quot; class=&quot;headerlink&quot; title=&quot;删除模块&quot;&gt;&lt;/a&gt;删除模块&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;可以单选进行单个删除&lt;/li&gt;
&lt;li&gt;可以多选进行多个删除&lt;/li&gt;
&lt;li&gt;点击删除会有是否删除的提示信息&lt;</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>SSM高级整合🍃修改模块</title>
    <link href="http://xiaoliblog.cn/page/ssmcrud04.html"/>
    <id>http://xiaoliblog.cn/page/ssmcrud04.html</id>
    <published>2021-05-09T11:10:14.844Z</published>
    <updated>2021-05-09T12:05:40.834Z</updated>
    
    <content type="html"><![CDATA[<h1 id="修改模块"><a href="#修改模块" class="headerlink" title="修改模块"></a>修改模块</h1><ul><li>点击编辑按钮弹出编辑输入框</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@a774248be6fb639ee72a358f4c53ba583c318f36/2021/05/09/5142ed243d2c2c8e8a84fb09c8327768.png" width="70%"><h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><ul><li>点击编辑弹出用户修改模态框（显示用户信息）</li><li>点击更新，完成用户修改</li></ul><h2 id="模态框"><a href="#模态框" class="headerlink" title="模态框"></a>模态框</h2><ul><li>修改<code>index.jsp</code>文件，新增修改模态框</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 员工修改的模态框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;empUpdateModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span>&gt;</span>员工修改<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;form-control-static&quot;</span> <span class="attr">id</span>=<span class="string">&quot;empName_update_static&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email_update_input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;email@atguigu.com&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio-inline&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gender1_update_input&quot;</span> <span class="attr">value</span>=<span class="string">&quot;M&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span> 男</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio-inline&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gender2_update_input&quot;</span> <span class="attr">value</span>=<span class="string">&quot;F&quot;</span>&gt;</span> 女</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-4&quot;</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- 部门提交部门id即可 --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dId&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;emp_update_btn&quot;</span>&gt;</span>更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h2><ul><li>给编辑按钮绑定事件，弹出模态框。注意单纯绑定是绑定不上的，因为数据是Ajax之后取到的</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、我们是按钮创建之前就绑定了click，所以绑定不上。因为数据是Ajax发送之后得到的</span></span><br><span class="line"><span class="comment">//1）、可以在创建按钮的时候绑定。    2）、绑定点击.live()</span></span><br><span class="line"><span class="comment">//jquery新版没有live，使用on进行替代</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.edit_btn&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//alert(&quot;edit&quot;);</span></span><br><span class="line">   <span class="comment">//1、查出部门信息，并显示部门列表</span></span><br><span class="line">   getDepts(<span class="string">&quot;#empUpdateModal select&quot;</span>);</span><br><span class="line">   <span class="comment">//2、查出员工信息，显示员工信息，方法在下面有讲解</span></span><br><span class="line">   getEmp($(<span class="built_in">this</span>).attr(<span class="string">&quot;edit-id&quot;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="comment">//3、把员工的id传递给模态框的更新按钮</span></span><br><span class="line">   $(<span class="string">&quot;#emp_update_btn&quot;</span>).attr(<span class="string">&quot;edit-id&quot;</span>,$(<span class="built_in">this</span>).attr(<span class="string">&quot;edit-id&quot;</span>));</span><br><span class="line">   $(<span class="string">&quot;#empUpdateModal&quot;</span>).modal(&#123;</span><br><span class="line">      backdrop:<span class="string">&quot;static&quot;</span></span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="显示信息"><a href="#显示信息" class="headerlink" title="显示信息"></a>显示信息</h2><ul><li>首先在<code>EmployeeService</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//按照员工id查询员工</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmp</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        Employee employee = employeeMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在<code>EmployeeController</code>控制器中添加方法，<code>id</code>来源于请求路径中</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id查询员工</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/emp/&#123;id&#125;&quot;,method=RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">getEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Employee employee = employeeService.getEmp(id);</span><br><span class="line">        <span class="keyword">return</span> Msg.success().add(<span class="string">&quot;emp&quot;</span>, employee);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>发送Ajax请求</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEmp</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">   $.ajax(&#123;</span><br><span class="line">      url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp/&quot;</span>+id,</span><br><span class="line">      type:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">         <span class="comment">//console.log(result);</span></span><br><span class="line">         <span class="keyword">var</span> empData = result.extend.emp;</span><br><span class="line">         $(<span class="string">&quot;#empName_update_static&quot;</span>).text(empData.empName);</span><br><span class="line">         $(<span class="string">&quot;#email_update_input&quot;</span>).val(empData.email);</span><br><span class="line">         $(<span class="string">&quot;#empUpdateModal input[name=gender]&quot;</span>).val([empData.gender]);</span><br><span class="line">         $(<span class="string">&quot;#empUpdateModal select&quot;</span>).val([empData.dId]);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Ajax发送PUT请求"><a href="#Ajax发送PUT请求" class="headerlink" title="Ajax发送PUT请求"></a>Ajax发送PUT请求</h2><ul><li>点击更新，更新员工信息，关掉对话框并回到当前位置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击更新，更新员工信息</span></span><br><span class="line">    $(<span class="string">&quot;#emp_update_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//验证邮箱是否合法</span></span><br><span class="line">        <span class="comment">//1、校验邮箱信息</span></span><br><span class="line">        <span class="keyword">var</span> email = $(<span class="string">&quot;#email_update_input&quot;</span>).val();</span><br><span class="line">        <span class="keyword">var</span> regEmail = <span class="regexp">/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$/</span>;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">!regEmail.test(email)</span>)</span>&#123;</span><br><span class="line">            show_validate_msg(<span class="string">&quot;#email_update_input&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;邮箱格式不正确&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            show_validate_msg(<span class="string">&quot;#email_update_input&quot;</span>, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、发送ajax请求保存更新的员工数据</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp/&quot;</span>+$(<span class="built_in">this</span>).attr(<span class="string">&quot;edit-id&quot;</span>),</span><br><span class="line">            type:<span class="string">&quot;PUT&quot;</span>,</span><br><span class="line">            data:$(<span class="string">&quot;#empUpdateModal form&quot;</span>).serialize(),</span><br><span class="line">            success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">                <span class="comment">//alert(result.msg);</span></span><br><span class="line">                <span class="comment">//1、关闭对话框</span></span><br><span class="line">                $(<span class="string">&quot;#empUpdateModal&quot;</span>).modal(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">                <span class="comment">//回到当前页面</span></span><br><span class="line">                to_page(currentPage);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><ul><li>在<code>EmployeeService</code>业务层中添加方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateEmp</span><span class="params">(Employee employee)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        employeeMapper.updateByPrimaryKeySelective(employee);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>在控制器<code>EmployeeController</code>中增加保存更新员工的方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/emp/&#123;empId&#125;&quot;,method=RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">saveEmp</span><span class="params">(Employee employee,HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请求体中的值：&quot;</span>+request.getParameter(<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;将要更新的员工数据：&quot;</span>+employee);</span><br><span class="line">        employeeService.updateEmp(employee);</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>如果直接发送<code>ajax=PUT</code>形式的请求，封装的数据变为</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee [empId=<span class="number">1014</span>, empName=<span class="keyword">null</span>, gender=<span class="keyword">null</span>, email=<span class="keyword">null</span>, dId=<span class="keyword">null</span>]</span><br></pre></td></tr></table></figure><ul><li><p>问题：请求体中有数据；但是Employee对象封装不上</p></li><li><p>Tomcat原因：</p><ul><li>将请求体中的数据，封装一个<code>map</code></li><li><code>request.getParameter(&quot;empName&quot;)</code>就会从这个map中取值。</li><li>SpringMVC封装POJO对象的时候。会把POJO中每个属性的值，<code>request.getParamter(&quot;email&quot;)</code>;</li></ul></li><li><p>AJAX发送PUT请求出现问题</p><ul><li><code>PUT</code>请求，请求体中的数据，<code>request.getParameter(&quot;empName&quot;)</code>拿不到</li><li>Tomcat一看是<code>PUT</code>不会封装请求体中的数据为<code>map</code>，只有<code>POST</code>形式的请求才封装请求体为map</li></ul></li><li><p>解决方案：我们要能支持直接发送PUT之类的请求还要封装请求体中的数据</p><ul><li>配置上<code>HttpPutFormContentFilter</code>；他的作用是将请求体中的数据解析包装成一个<code>map</code></li><li><code>request</code>被重新包装，<code>request.getParameter()</code>被重写，就会从自己封装的<code>map</code>中取数据</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--web.xml中配置--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;修改模块&quot;&gt;&lt;a href=&quot;#修改模块&quot; class=&quot;headerlink&quot; title=&quot;修改模块&quot;&gt;&lt;/a&gt;修改模块&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;点击编辑按钮弹出编辑输入框&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;https://cdn.jsdelivr.</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>SSM高级整合🍃新增模块</title>
    <link href="http://xiaoliblog.cn/page/ssmcrud03.html"/>
    <id>http://xiaoliblog.cn/page/ssmcrud03.html</id>
    <published>2021-05-09T08:03:32.426Z</published>
    <updated>2021-05-09T10:33:09.125Z</updated>
    
    <content type="html"><![CDATA[<h1 id="新增模块"><a href="#新增模块" class="headerlink" title="新增模块"></a>新增模块</h1><ul><li>点击新增按钮会弹出一个输入界面</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1db58e11f18b14508b51b8471960db2b0d90a1c6/2021/05/09/bed9f209fd17725826ca3c574b66c26b.png" width="70%"><h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><ul><li>在<code>index.jsp</code>页面点击”按钮”，弹出新增对话框</li><li>去数据库查询部门列表，显示在对话框中</li><li>用户输入数据并进行校验完成保存<ul><li>jQuery前端校验+Ajax用户名重复校验+重要数据配上后端校验和数据库唯一约束 </li></ul></li><li>Restful风格URI：<ul><li><code>/emp/&#123;id&#125;</code>  GET查询员工</li><li><code>/emp</code> 发POST即保存员工</li><li><code>/emp/&#123;id&#125;</code> PUT请求修改员工</li><li><code>/epm/&#123;id&#125;</code> DELETE删除员工</li></ul></li></ul><h2 id="模态框"><a href="#模态框" class="headerlink" title="模态框"></a>模态框</h2><ul><li>弹出来的界面可以使用Boostrap提供的JavaScript插件<a href="https://v3.bootcss.com/javascript/#modals">模态框</a>实现</li><li>修改<code>index.jsp</code>文件，新增模态框</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 员工添加的模态框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;empAddModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myModalLabel&quot;</span>&gt;</span>员工添加<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;empName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;empName_add_input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;empName&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email_add_input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;email@atguigu.com&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio-inline&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gender1_add_input&quot;</span> <span class="attr">value</span>=<span class="string">&quot;M&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span> 男</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio-inline&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gender2_add_input&quot;</span> <span class="attr">value</span>=<span class="string">&quot;F&quot;</span>&gt;</span> 女</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-4&quot;</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- 部门提交部门id即可 --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dId&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;emp_save_btn&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>给新增按钮绑定事件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击新增按钮弹出模态框。</span></span><br><span class="line">   $(<span class="string">&quot;#emp_add_modal_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="comment">//弹出模态框</span></span><br><span class="line">       $(<span class="string">&quot;#empAddModal&quot;</span>).modal(&#123;</span><br><span class="line">           backdrop:<span class="string">&quot;static&quot;</span></span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure><h2 id="发现Ajax请求"><a href="#发现Ajax请求" class="headerlink" title="发现Ajax请求"></a>发现Ajax请求</h2><ul><li>模态框弹出之前应该发送Ajax请求，弹出部门信息显示在下拉列表中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//清空表单样式及内容</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reset_form</span>(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">        $(ele)[<span class="number">0</span>].reset();</span><br><span class="line">        <span class="comment">//清空表单样式</span></span><br><span class="line">        $(ele).find(<span class="string">&quot;*&quot;</span>).removeClass(<span class="string">&quot;has-error has-success&quot;</span>);</span><br><span class="line">        $(ele).find(<span class="string">&quot;.help-block&quot;</span>).text(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击新增按钮弹出模态框。</span></span><br><span class="line">    $(<span class="string">&quot;#emp_add_modal_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//清除表单数据（表单完整重置（表单的数据，表单的样式））</span></span><br><span class="line">        reset_form(<span class="string">&quot;#empAddModal form&quot;</span>);</span><br><span class="line">        <span class="comment">//s$(&quot;&quot;)[0].reset();</span></span><br><span class="line">        <span class="comment">//发送ajax请求，查出部门信息，显示在下拉列表中</span></span><br><span class="line">        getDepts(<span class="string">&quot;#empAddModal select&quot;</span>);</span><br><span class="line">        <span class="comment">//弹出模态框</span></span><br><span class="line">        $(<span class="string">&quot;#empAddModal&quot;</span>).modal(&#123;</span><br><span class="line">            backdrop:<span class="string">&quot;static&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><ul><li>发送Ajax的方法<code>getDepts()</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查出所有的部门信息并显示在下拉列表中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDepts</span>(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//清空之前下拉列表的值</span></span><br><span class="line">    $(ele).empty();</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">    <span class="comment">//需要一个控制器处理请求</span></span><br><span class="line">        url:<span class="string">&quot;$&#123;APP_PATH&#125;/depts&quot;</span>,</span><br><span class="line">        type:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//&#123;&quot;code&quot;:100,&quot;msg&quot;:&quot;处理成功！&quot;,</span></span><br><span class="line">            <span class="comment">//&quot;extend&quot;:&#123;&quot;depts&quot;:[&#123;&quot;deptId&quot;:1,&quot;deptName&quot;:&quot;开发部&quot;&#125;,&#123;&quot;deptId&quot;:2,&quot;deptName&quot;:&quot;测试部&quot;&#125;]&#125;&#125;</span></span><br><span class="line">            <span class="comment">//console.log(result);</span></span><br><span class="line">            <span class="comment">//显示部门信息在下拉列表中</span></span><br><span class="line">            <span class="comment">//$(&quot;#empAddModal select&quot;).append(&quot;&quot;)</span></span><br><span class="line">            $.each(result.extend.depts,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> optionEle = $(<span class="string">&quot;&lt;option&gt;&lt;/option&gt;&quot;</span>).append(<span class="built_in">this</span>.deptName).attr(<span class="string">&quot;value&quot;</span>,<span class="built_in">this</span>.deptId);</span><br><span class="line">                optionEle.appendTo(ele);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="控制器处理请求"><a href="#控制器处理请求" class="headerlink" title="控制器处理请求"></a>控制器处理请求</h2><ul><li>先创建业务层<code>DepartmentService</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Department&gt; <span class="title">getDepts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//查出的所有部门信息</span></span><br><span class="line">        List&lt;Department&gt; list = departmentMapper.selectByExample(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建一个控制器<code>DepartmentController</code>处理和部门有关的请求</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentService departmentService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*返回所有部门信息*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/depts&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">getDepts</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Department&gt; list = departmentService.getDepts();</span><br><span class="line">        <span class="keyword">return</span> Msg.success().add(<span class="string">&quot;depts&quot;</span>,list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="实现保存模块"><a href="#实现保存模块" class="headerlink" title="实现保存模块"></a>实现保存模块</h1><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><ul><li>点击保存，模态框中填写的表单数据提交给服务器进行保存</li><li>首先在<code>EmployeeService</code>中新增员工保存方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"><span class="comment">//员工保存</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveEmp</span><span class="params">(Employee employee)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        employeeMapper.insertSelective(employee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在<code>EmployeeController</code>中新增员工保存的方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 员工保存</span></span><br><span class="line"><span class="comment">//1、支持JSR303校验</span></span><br><span class="line"><span class="comment">///2、导入Hibernate-Validator</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/emp&quot;,method=RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">saveEmp</span><span class="params">(<span class="meta">@Valid</span> Employee employee,BindingResult result)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(result.hasErrors())&#123;</span><br><span class="line">            <span class="comment">//校验失败，应该返回失败，在模态框中显示校验失败的错误信息</span></span><br><span class="line">            Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            List&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">            <span class="keyword">for</span> (FieldError fieldError : errors) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;错误的字段名：&quot;</span>+fieldError.getField());</span><br><span class="line">                System.out.println(<span class="string">&quot;错误信息：&quot;</span>+fieldError.getDefaultMessage());</span><br><span class="line">                map.put(fieldError.getField(), fieldError.getDefaultMessage());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">&quot;errorFields&quot;</span>, map);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            employeeService.saveEmp(employee);</span><br><span class="line">            <span class="keyword">return</span> Msg.success();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="发送Ajax"><a href="#发送Ajax" class="headerlink" title="发送Ajax"></a>发送Ajax</h2><ul><li>取得表单的值后发送Ajax给服务器，后端控制器处理请求，调用方法插入到数据库中</li><li>服务器返回JSON结果，保存成功就关闭模态框并跳转到最后一页</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击保存，保存员工。</span></span><br><span class="line">   $(<span class="string">&quot;#emp_save_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="comment">//1、模态框中填写的表单数据提交给服务器进行保存</span></span><br><span class="line">       <span class="comment">//1、先对要提交给服务器的数据进行校验</span></span><br><span class="line">       <span class="function"><span class="title">if</span>(<span class="params">!validate_add_form()</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">//1、判断之前的ajax用户名校验是否成功。如果成功。</span></span><br><span class="line">       <span class="keyword">if</span>($(<span class="built_in">this</span>).attr(<span class="string">&quot;ajax-va&quot;</span>)==<span class="string">&quot;error&quot;</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2、发送ajax请求保存员工</span></span><br><span class="line">       $.ajax(&#123;</span><br><span class="line">           url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp&quot;</span>,</span><br><span class="line">           type:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">           <span class="comment">//jQuery中拿取表单内容的方法</span></span><br><span class="line">           data:$(<span class="string">&quot;#empAddModal form&quot;</span>).serialize(),</span><br><span class="line">           success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">               <span class="comment">//alert(result.msg);</span></span><br><span class="line">               <span class="function"><span class="title">if</span>(<span class="params">result.code == <span class="number">100</span></span>)</span>&#123;</span><br><span class="line">                   <span class="comment">//员工保存成功；</span></span><br><span class="line">                   <span class="comment">//1、关闭模态框</span></span><br><span class="line">                   $(<span class="string">&quot;#empAddModal&quot;</span>).modal(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                   <span class="comment">//2、来到最后一页，显示刚才保存的数据</span></span><br><span class="line">                   <span class="comment">//发送ajax请求显示最后一页数据即可</span></span><br><span class="line">                   to_page(totalRecord);</span><br><span class="line">               &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   <span class="comment">//显示失败信息</span></span><br><span class="line">                   <span class="comment">//console.log(result);</span></span><br><span class="line">                   <span class="comment">//有哪个字段的错误信息就显示哪个字段的；</span></span><br><span class="line">                   <span class="function"><span class="title">if</span>(<span class="params"><span class="literal">undefined</span> != result.extend.errorFields.email</span>)</span>&#123;</span><br><span class="line">                       <span class="comment">//显示邮箱错误信息</span></span><br><span class="line">                       show_validate_msg(<span class="string">&quot;#email_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, result.extend.errorFields.email);</span><br><span class="line">                   &#125;</span><br><span class="line">                   <span class="function"><span class="title">if</span>(<span class="params"><span class="literal">undefined</span> != result.extend.errorFields.empName</span>)</span>&#123;</span><br><span class="line">                       <span class="comment">//显示员工名字的错误信息</span></span><br><span class="line">                       show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, result.extend.errorFields.empName);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure><h1 id="数据校验功能"><a href="#数据校验功能" class="headerlink" title="数据校验功能"></a>数据校验功能</h1><ul><li>需要对提交保存的数据进行校验</li></ul><h2 id="表单校验"><a href="#表单校验" class="headerlink" title="表单校验"></a>表单校验</h2><ul><li>校验表单数据</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//校验表单数据</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">validate_add_form</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//1、拿到要校验的数据，使用正则表达式</span></span><br><span class="line">        <span class="keyword">var</span> empName = $(<span class="string">&quot;#empName_add_input&quot;</span>).val();</span><br><span class="line">        <span class="keyword">var</span> regName = <span class="regexp">/(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/</span>;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">!regName.test(empName)</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//alert(&quot;用户名可以是2-5位中文或者6-16位英文和数字的组合&quot;);</span></span><br><span class="line">            show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;用户名可以是2-5位中文或者6-16位英文和数字的组合&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、校验邮箱信息</span></span><br><span class="line">        <span class="keyword">var</span> email = $(<span class="string">&quot;#email_add_input&quot;</span>).val();</span><br><span class="line">        <span class="keyword">var</span> regEmail = <span class="regexp">/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$/</span>;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">!regEmail.test(email)</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//alert(&quot;邮箱格式不正确&quot;);</span></span><br><span class="line">            <span class="comment">//应该清空这个元素之前的样式</span></span><br><span class="line">            show_validate_msg(<span class="string">&quot;#email_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;邮箱格式不正确&quot;</span>);</span><br><span class="line">            <span class="comment">/* $(&quot;#email_add_input&quot;).parent().addClass(&quot;has-error&quot;);</span></span><br><span class="line"><span class="comment">            $(&quot;#email_add_input&quot;).next(&quot;span&quot;).text(&quot;邮箱格式不正确&quot;); */</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            show_validate_msg(<span class="string">&quot;#email_add_input&quot;</span>, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="提示信息"><a href="#提示信息" class="headerlink" title="提示信息"></a>提示信息</h2><ul><li>用到了Bootstrap中的<a href="https://v3.bootcss.com/css/#forms-control-validation">校验状态样式</a></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示校验结果的提示信息</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show_validate_msg</span>(<span class="params">ele,status,msg</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//清除当前元素的校验状态</span></span><br><span class="line">        $(ele).parent().removeClass(<span class="string">&quot;has-success has-error&quot;</span>);</span><br><span class="line">        $(ele).next(<span class="string">&quot;span&quot;</span>).text(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params"><span class="string">&quot;success&quot;</span>==status</span>)</span>&#123;</span><br><span class="line">            $(ele).parent().addClass(<span class="string">&quot;has-success&quot;</span>);</span><br><span class="line">            $(ele).next(<span class="string">&quot;span&quot;</span>).text(msg);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="function"><span class="title">if</span>(<span class="params"><span class="string">&quot;error&quot;</span> == status</span>)</span>&#123;</span><br><span class="line">            $(ele).parent().addClass(<span class="string">&quot;has-error&quot;</span>);</span><br><span class="line">            $(ele).next(<span class="string">&quot;span&quot;</span>).text(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="用户名校验"><a href="#用户名校验" class="headerlink" title="用户名校验"></a>用户名校验</h2><ul><li><p>需要异步校验用户名是否重复，当输入框改变就校验用户名</p></li><li><p>在<code>EmployeeService</code>中新增方法</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检验用户名是否可用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> empName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  true：代表当前姓名可用   fasle：不可用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkUser</span><span class="params">(String empName)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        EmployeeExample example = <span class="keyword">new</span> EmployeeExample();</span><br><span class="line">        <span class="comment">//查询条件</span></span><br><span class="line">        EmployeeExample.Criteria criteria = example.createCriteria();</span><br><span class="line">        <span class="comment">//拼装条件</span></span><br><span class="line">        criteria.andEmpNameEqualTo(empName);</span><br><span class="line">        <span class="comment">//返回查到的记录数</span></span><br><span class="line">        <span class="keyword">long</span> count = employeeMapper.countByExample(example);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>; <span class="comment">//为0表示没有记录，当前用户名可用</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>修改<code>EmployeeController</code>新增用户名校验的方法，记得和前端的校验规则统一起来</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/checkuser&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">checkuser</span><span class="params">(<span class="meta">@RequestParam(&quot;empName&quot;)</span>String empName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//先判断用户名是否是合法的表达式;</span></span><br><span class="line">        String regx = <span class="string">&quot;(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(!empName.matches(regx))&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">&quot;va_msg&quot;</span>, <span class="string">&quot;用户名必须是6-16位数字和字母的组合或者2-5位中文&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//数据库用户名重复校验</span></span><br><span class="line">        <span class="keyword">boolean</span> b = employeeService.checkUser(empName);</span><br><span class="line">        <span class="keyword">if</span>(b)&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.success(); <span class="comment">//可用</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">&quot;va_msg&quot;</span>, <span class="string">&quot;用户名不可用&quot;</span>); <span class="comment">//返回提示信息</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>发送Ajax请求校验用户名是否可用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//校验用户名是否可用</span></span><br><span class="line">$(<span class="string">&quot;#empName_add_input&quot;</span>).change(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//发送ajax请求校验用户名是否可用</span></span><br><span class="line">    <span class="keyword">var</span> empName = <span class="built_in">this</span>.value;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">&quot;$&#123;APP_PATH&#125;/checkuser&quot;</span>,</span><br><span class="line">        data:<span class="string">&quot;empName=&quot;</span>+empName,</span><br><span class="line">        type:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">result.code==<span class="number">100</span></span>)</span>&#123;</span><br><span class="line">                show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>,<span class="string">&quot;success&quot;</span>,<span class="string">&quot;用户名可用&quot;</span>);</span><br><span class="line">                $(<span class="string">&quot;#emp_save_btn&quot;</span>).attr(<span class="string">&quot;ajax-va&quot;</span>,<span class="string">&quot;success&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>,<span class="string">&quot;error&quot;</span>,result.extend.va_msg);</span><br><span class="line">                $(<span class="string">&quot;#emp_save_btn&quot;</span>).attr(<span class="string">&quot;ajax-va&quot;</span>,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><div class="note warning simple"><p>因为用户名是监听表单内容发生改变时调用，当如果表单内容不变时会出错，所以需要打开模态框就对表单进行清空</p></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//清空表单样式及内容</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reset_form</span>(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">        $(ele)[<span class="number">0</span>].reset();</span><br><span class="line">        <span class="comment">//清空表单样式</span></span><br><span class="line">        $(ele).find(<span class="string">&quot;*&quot;</span>).removeClass(<span class="string">&quot;has-error has-success&quot;</span>);</span><br><span class="line">        $(ele).find(<span class="string">&quot;.help-block&quot;</span>).text(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击新增按钮弹出模态框。</span></span><br><span class="line">    $(<span class="string">&quot;#emp_add_modal_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//清除表单数据（表单完整重置（表单的数据，表单的样式））</span></span><br><span class="line">        reset_form(<span class="string">&quot;#empAddModal form&quot;</span>);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h2 id="后端校验"><a href="#后端校验" class="headerlink" title="后端校验"></a>后端校验</h2><ul><li>前端校验很容易被人改动，不够安全。最完整的校验应该是前端校验+后端校验+数据库约束</li><li>可以使用JSR303进行校验，需要导入<code>Hibernate-Validator</code>包，在实体类员工<code>Employee</code>上给每一个字段加上相应要求</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer empId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pattern(regexp=&quot;(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)&quot;</span></span><br><span class="line"><span class="meta">            ,message=&quot;用户名必须是2-5位中文或者6-16位英文和数字的组合&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String empName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Email</span></span><br><span class="line">    <span class="meta">@Pattern(regexp=&quot;^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]&#123;2,6&#125;)$&quot;,</span></span><br><span class="line"><span class="meta">            message=&quot;邮箱格式不正确&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer dId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//希望查询员工的时候把部门信息也查询出来</span></span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line">   <span class="comment">//getter,setter,无参和有参构造</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>修改控制器<code>EmployeeController</code>中的员工保存方法 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 员工保存</span></span><br><span class="line"><span class="comment"> * 1、支持JSR303校验</span></span><br><span class="line"><span class="comment"> * 2、导入Hibernate-Validator</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/emp&quot;,method=RequestMethod.POST)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Msg <span class="title">saveEmp</span><span class="params">(<span class="meta">@Valid</span> Employee employee,BindingResult result)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(result.hasErrors())&#123;</span><br><span class="line">        <span class="comment">//校验失败，应该返回失败，在模态框中显示校验失败的错误信息</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        List&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">        <span class="keyword">for</span> (FieldError fieldError : errors) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;错误的字段名：&quot;</span>+fieldError.getField());</span><br><span class="line">            System.out.println(<span class="string">&quot;错误信息：&quot;</span>+fieldError.getDefaultMessage());</span><br><span class="line">            map.put(fieldError.getField(), fieldError.getDefaultMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Msg.fail().add(<span class="string">&quot;errorFields&quot;</span>, map);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        employeeService.saveEmp(employee);</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>前端保存事件修改</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击保存，保存员工。</span></span><br><span class="line">   $(<span class="string">&quot;#emp_save_btn&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="comment">//1、模态框中填写的表单数据提交给服务器进行保存</span></span><br><span class="line">       <span class="comment">//1、先对要提交给服务器的数据进行校验</span></span><br><span class="line">       <span class="function"><span class="title">if</span>(<span class="params">!validate_add_form()</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">//1、判断之前的ajax用户名校验是否成功。如果成功。</span></span><br><span class="line">       <span class="keyword">if</span>($(<span class="built_in">this</span>).attr(<span class="string">&quot;ajax-va&quot;</span>)==<span class="string">&quot;error&quot;</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2、发送ajax请求保存员工</span></span><br><span class="line">       $.ajax(&#123;</span><br><span class="line">           url:<span class="string">&quot;$&#123;APP_PATH&#125;/emp&quot;</span>,</span><br><span class="line">           type:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">           <span class="comment">//jQuery中拿取表单内容的方法</span></span><br><span class="line">           data:$(<span class="string">&quot;#empAddModal form&quot;</span>).serialize(),</span><br><span class="line">           success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">               <span class="comment">//alert(result.msg);</span></span><br><span class="line">               <span class="function"><span class="title">if</span>(<span class="params">result.code == <span class="number">100</span></span>)</span>&#123;</span><br><span class="line">                   <span class="comment">//员工保存成功；</span></span><br><span class="line">                   <span class="comment">//1、关闭模态框</span></span><br><span class="line">                   $(<span class="string">&quot;#empAddModal&quot;</span>).modal(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                   <span class="comment">//2、来到最后一页，显示刚才保存的数据</span></span><br><span class="line">                   <span class="comment">//发送ajax请求显示最后一页数据即可</span></span><br><span class="line">                   to_page(totalRecord);</span><br><span class="line">               &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   <span class="comment">//显示失败信息</span></span><br><span class="line">                   <span class="comment">//console.log(result);</span></span><br><span class="line">                   <span class="comment">//有哪个字段的错误信息就显示哪个字段的；</span></span><br><span class="line">                   <span class="function"><span class="title">if</span>(<span class="params"><span class="literal">undefined</span> != result.extend.errorFields.email</span>)</span>&#123;</span><br><span class="line">                       <span class="comment">//显示邮箱错误信息</span></span><br><span class="line">                       show_validate_msg(<span class="string">&quot;#email_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, result.extend.errorFields.email);</span><br><span class="line">                   &#125;</span><br><span class="line">                   <span class="function"><span class="title">if</span>(<span class="params"><span class="literal">undefined</span> != result.extend.errorFields.empName</span>)</span>&#123;</span><br><span class="line">                       <span class="comment">//显示员工名字的错误信息</span></span><br><span class="line">                       show_validate_msg(<span class="string">&quot;#empName_add_input&quot;</span>, <span class="string">&quot;error&quot;</span>, result.extend.errorFields.empName);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;新增模块&quot;&gt;&lt;a href=&quot;#新增模块&quot; class=&quot;headerlink&quot; title=&quot;新增模块&quot;&gt;&lt;/a&gt;新增模块&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;点击新增按钮会弹出一个输入界面&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;https://cdn.jsdeliv</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>SSM高级整合🍃分页查询模块</title>
    <link href="http://xiaoliblog.cn/page/ssmcrud02.html"/>
    <id>http://xiaoliblog.cn/page/ssmcrud02.html</id>
    <published>2021-05-08T13:08:38.617Z</published>
    <updated>2021-05-09T09:09:14.915Z</updated>
    
    <content type="html"><![CDATA[<h1 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h1><h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><ul><li>首先访问<code>index.jsp</code>页面</li><li><code>index.jsp</code>页面发送出查询员工列表请求</li><li><code>EmployeeController</code>来接受请求，查出员工数据</li><li>来到<code>list.jsp</code>页面进行展示</li><li>规定查询请求`URL=”/emps”</li><li>Restful风格URI：<ul><li><code>/emp/&#123;id&#125;</code>  GET查询员工</li><li><code>/emp</code> 发POST即保存员工</li><li><code>/emp/&#123;id&#125;</code> PUT请求修改员工</li><li><code>/epm/&#123;id&#125;</code> DELETE删除员工</li></ul></li></ul><h2 id="业务层"><a href="#业务层" class="headerlink" title="业务层"></a>业务层</h2><ul><li><code>Service</code>业务层要调用Dao及<code>Mapper</code>层的方法</li><li>创建<code>EmployeeService</code>业务层</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span> <span class="comment">//业务逻辑组件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Autowired</span>  <span class="comment">//自动装配Mapper/Dao层</span></span><br><span class="line">   EmployeeMapper employeeMapper;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//由于Mybatis逆向工程已经生成了查询所有的方法</span></span><br><span class="line">   <span class="comment">//查询所有员工</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> employeeMapper.selectByExampleWithDept(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分页插件"><a href="#分页插件" class="headerlink" title="分页插件"></a>分页插件</h2><ul><li>首先引入<code>PageHelper</code>分页插件的依赖</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入pageHelper分页插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>然后在<code>mybatis-config.xml</code>中注册</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--分页参数合理化  --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;reasonable&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="forEach方式"><a href="#forEach方式" class="headerlink" title="forEach方式"></a>forEach方式</h1><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><ul><li>创建<code>EmployeeController</code>控制器，控制器要掉<code>Service</code>业务层方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span>   <span class="comment">//自动装配Service层</span></span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询员工数据（分页查询），pn为PageNum第几页，defaultValue为默认值</span></span><br><span class="line">    <span class="comment">// @RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmps</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="meta">@RequestParam(value = &quot;pn&quot;, defaultValue = &quot;1&quot;)</span> Integer pn,</span></span></span><br><span class="line"><span class="function"><span class="params">            Model model)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 这不是一个分页查询；</span></span><br><span class="line">        <span class="comment">// 引入PageHelper分页插件</span></span><br><span class="line">        <span class="comment">// 在查询之前只需要调用，传入页码，以及每页的大小</span></span><br><span class="line">        PageHelper.startPage(pn, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">// startPage后面紧跟的这个查询就是一个分页查询</span></span><br><span class="line">        List&lt;Employee&gt; emps = employeeService.getAll();</span><br><span class="line">        <span class="comment">// 使用pageInfo包装查询后的结果，只需要将pageInfo交给页面就行了。</span></span><br><span class="line">        <span class="comment">// 封装了详细的分页信息,包括有我们查询出来的数据，传入连续显示的页数</span></span><br><span class="line">        PageInfo page = <span class="keyword">new</span> PageInfo(emps, <span class="number">5</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageInfo&quot;</span>, page); <span class="comment">//作为属性对象发送给list视图，视图通过$&#123;&#125;取得数据</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>; <span class="comment">//返回list.jsp</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在WEB-INF下创建<code>views</code>文件夹存放视图，创建<code>list.jsp</code>显示员工信息的视图</li><li>默认只能访问<code>index.jsp</code>页面，所以要在<code>index.jsp</code>页面添加请求转发语句到<code>emps</code>请求，通过控制器来转到<code>list.jsp</code>视图·</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">&quot;/emps&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">jsp:forward</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="分页请求测试"><a href="#分页请求测试" class="headerlink" title="分页请求测试"></a>分页请求测试</h2><ul><li>新间一个<code>MvcTest</code>测试类，使用Spring测试模块提供的模拟测试请求功能，测试CRUD请求的正确性</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Spring4测试的时候，需要servlet3.0的支持</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123; &quot;classpath:applicationContext.xml&quot;,</span></span><br><span class="line"><span class="meta">        &quot;file:src/main/webapp/WEB-INF/dispatcherServlet-servlet.xml&quot; &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MvcTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 传入Springmvc的ioc</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    WebApplicationContext context;</span><br><span class="line">    <span class="comment">// 虚拟mvc请求，获取到处理结果。</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span> <span class="comment">//每次都要用，需要进行初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initMokcMvc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mockMvc = MockMvcBuilders.webAppContextSetup(context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPage</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//模拟请求拿到返回值</span></span><br><span class="line">        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">&quot;/emps&quot;</span>).param(<span class="string">&quot;pn&quot;</span>, <span class="string">&quot;5&quot;</span>))</span><br><span class="line">                .andReturn();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//请求成功以后，请求域中会有pageInfo；我们可以取出pageInfo进行验证</span></span><br><span class="line">        MockHttpServletRequest request = result.getRequest();</span><br><span class="line">        PageInfo pi = (PageInfo) request.getAttribute(<span class="string">&quot;pageInfo&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;当前页码：&quot;</span>+pi.getPageNum());</span><br><span class="line">        System.out.println(<span class="string">&quot;总页码：&quot;</span>+pi.getPages());</span><br><span class="line">        System.out.println(<span class="string">&quot;总记录数：&quot;</span>+pi.getTotal());</span><br><span class="line">        System.out.println(<span class="string">&quot;在页面需要连续显示的页码&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span>[] nums = pi.getNavigatepageNums();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : nums) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取员工数据</span></span><br><span class="line">        List&lt;Employee&gt; list = pi.getList();</span><br><span class="line">        <span class="keyword">for</span> (Employee employee : list) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ID：&quot;</span>+employee.getEmpId()+<span class="string">&quot;==&gt;Name:&quot;</span>+employee.getEmpName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success simple"><p>测试拿到数据即可</p></div><h2 id="搭建分页视图"><a href="#搭建分页视图" class="headerlink" title="搭建分页视图"></a>搭建分页视图</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1aec544584d90abbe1f564cf10887407f0e0c7bd/2021/05/08/42d7ad0a60a3f1c1d9577438dbe24ae6.png"></p><ul><li>使用Bootstrap搭建<code>list.jsp</code>分页显示页面</li><li>JSP页面头信息</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">isELIgnored</span>=<span class="string">&quot;false&quot;</span> %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">&quot;java&quot;</span> <span class="attr">contentType</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">pageEncoding</span>=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@taglib</span> <span class="attr">uri</span>=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;c&quot;</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>web路径中不以<code>/</code>开始的相对路径，找资源，以当前资源的路径为基准，经常容易出问题。</li><li>以<code>/</code>开始的路径，找资源，以服务器的路径为标准(<code>http://localhost:8080</code>)；需要加上项目名</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">pageContext.setAttribute</span>(&quot;<span class="attr">APP_PATH</span>&quot;, <span class="attr">request.getContextPath</span>());%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/js/jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>采用Bootstrap栅格系统搭建视图</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搭建显示页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 标题 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD BY PL<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 col-md-offset-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 显示表格数据 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;pageInfo.list &#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$&#123;emp.empId &#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$&#123;emp.empName &#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$&#123;emp.gender==&quot;M&quot;?&quot;男&quot;:&quot;女&quot; &#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$&#123;emp.email &#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--部门信息--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$&#123;emp.department.deptName &#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!--字体图标--&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-pencil&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                编辑</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-trash&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                删除</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 显示分页信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--分页文字信息  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span>当前 $&#123;pageInfo.pageNum &#125;页,总$&#123;pageInfo.pages &#125;</span><br><span class="line">            页,总 $&#123;pageInfo.total &#125; 条记录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 分页条信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/emps?pn=1&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--如果有上一页就发请求显示，否则则首页按钮和前进按钮禁用--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;pageInfo.hasPreviousPage &#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/emps?pn=$&#123;pageInfo.pageNum-1&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;laquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!--拿到页码数--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;pageInfo.navigatepageNums &#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;page_Num&quot;</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--判断当前页码是否是当前页，如果是则高亮显示--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;page_Num == pageInfo.pageNum &#125;&quot;</span>&gt;</span></span><br><span class="line">                             <span class="comment">&lt;!--发送请求--&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>$&#123;page_Num &#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--判断当前页码不是当前页，则取消高亮显示--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;page_Num != pageInfo.pageNum &#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/emps?pn=$&#123;page_Num &#125;&quot;</span>&gt;</span>$&#123;page_Num &#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!--判断是否有下一页，有才显示，否则末尾按钮禁用--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;pageInfo.hasNextPage &#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/emps?pn=$&#123;pageInfo.pageNum+1 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;raquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--pages表示总页数--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/emps?pn=$&#123;pageInfo.pages&#125;&quot;</span>&gt;</span>末页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note success simple"><p>分页的参数和属性可以查看官方文档，可以合理运用三元运算符<code>${emp.gender==&quot;M&quot;?&quot;男&quot;:&quot;女&quot; }</code></p></div><h1 id="JSON数据方式"><a href="#JSON数据方式" class="headerlink" title="JSON数据方式"></a>JSON数据方式</h1><ul><li>以上只适用于浏览器客户端，对于安卓或者IOS等移动客户端是行不通的。所以可以通过返回JSON数据进行统一解析</li><li>使用纯Ajax进行查询，<code>index.jsp</code>页面直接发送<code>ajax</code>请求进行员工分页数据的查询</li><li>服务器将查出的数据，以<code>JSON</code>字符串的形式返回给浏览器</li><li>浏览器收到JS字符串，可以使用JS对JSON进行解析，使用JS通过DOM增删改改变页面</li><li>返回JSON。实现客户端的无关性</li></ul><h2 id="通用类"><a href="#通用类" class="headerlink" title="通用类"></a>通用类</h2><ul><li>在实体包<code>bean</code>下创建通用的返回JSON的类<code>Msg</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Msg</span> </span>&#123;</span><br><span class="line">    <span class="comment">//状态码   100-成功    200-失败</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="comment">//提示信息</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用户要返回给浏览器的数据</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; extend = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Msg <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Msg result = <span class="keyword">new</span> Msg();</span><br><span class="line">        result.setCode(<span class="number">100</span>);</span><br><span class="line">        result.setMsg(<span class="string">&quot;处理成功！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Msg <span class="title">fail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Msg result = <span class="keyword">new</span> Msg();</span><br><span class="line">        result.setCode(<span class="number">200</span>);</span><br><span class="line">        result.setMsg(<span class="string">&quot;处理失败！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//实现链式调用</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">add</span><span class="params">(String key,Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getExtend().put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getExtend</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> extend;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setExtend</span><span class="params">(Map&lt;String, Object&gt; extend)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.extend = extend;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="控制器-1"><a href="#控制器-1" class="headerlink" title="控制器"></a>控制器</h2><ul><li>修改<code>EmployeeeController</code>控制器，添加方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入jackson包。此包负责将pageInfo对象转为JSON字符串</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Msg <span class="title">getEmpsWithJson</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">   <span class="meta">@RequestParam(value = &quot;pn&quot;, defaultValue = &quot;1&quot;)</span> Integer pn)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 引入PageHelper分页插件</span></span><br><span class="line">   <span class="comment">// 在查询之前只需要调用，传入页码，以及每页的大小</span></span><br><span class="line">   PageHelper.startPage(pn, <span class="number">5</span>);</span><br><span class="line">   <span class="comment">// startPage后面紧跟的这个查询就是一个分页查询</span></span><br><span class="line">   List&lt;Employee&gt; emps = employeeService.getAll();</span><br><span class="line">   <span class="comment">// 使用pageInfo包装查询后的结果，只需要将pageInfo交给页面就行了。</span></span><br><span class="line">   <span class="comment">// 封装了详细的分页信息,包括有我们查询出来的数据，传入连续显示的页数</span></span><br><span class="line">   PageInfo page = <span class="keyword">new</span> PageInfo(emps, <span class="number">5</span>);</span><br><span class="line">   <span class="keyword">return</span> Msg.success().add(<span class="string">&quot;pageInfo&quot;</span>, page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@78ef3d0b98a0ccdc1792a4af31025702a2421332/2021/05/09/2578d637990dca7e61b8fe9d0623ff3a.png"></p><ul><li>采用<a href="https://www.sojson.com/">JSON格式化工具</a>格式化结果如下</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;code&quot;</span>: <span class="number">100</span>,</span><br><span class="line"><span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;处理成功！&quot;</span>,</span><br><span class="line"><span class="attr">&quot;extend&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;pageInfo&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;pageNum&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;pageSize&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;size&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;startRow&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;endRow&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;total&quot;</span>: <span class="number">201</span>,</span><br><span class="line"><span class="attr">&quot;pages&quot;</span>: <span class="number">41</span>,</span><br><span class="line"><span class="attr">&quot;list&quot;</span>: [&#123;</span><br><span class="line"><span class="attr">&quot;empId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;empName&quot;</span>: <span class="string">&quot;jerry&quot;</span>,</span><br><span class="line"><span class="attr">&quot;gender&quot;</span>: <span class="string">&quot;M&quot;</span>,</span><br><span class="line"><span class="attr">&quot;email&quot;</span>: <span class="string">&quot;jerry@pl.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;dId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;department&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;deptId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;deptName&quot;</span>: <span class="string">&quot;开发部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="attr">&quot;empId&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;empName&quot;</span>: <span class="string">&quot;5f0a10&quot;</span>,</span><br><span class="line"><span class="attr">&quot;gender&quot;</span>: <span class="string">&quot;M&quot;</span>,</span><br><span class="line"><span class="attr">&quot;email&quot;</span>: <span class="string">&quot;5f0a10@pl.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;dId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;department&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;deptId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;deptName&quot;</span>: <span class="string">&quot;开发部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="attr">&quot;empId&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;empName&quot;</span>: <span class="string">&quot;5c3ea1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;gender&quot;</span>: <span class="string">&quot;M&quot;</span>,</span><br><span class="line"><span class="attr">&quot;email&quot;</span>: <span class="string">&quot;5c3ea1@pl.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;dId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;department&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;deptId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;deptName&quot;</span>: <span class="string">&quot;开发部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="attr">&quot;empId&quot;</span>: <span class="number">4</span>,</span><br><span class="line"><span class="attr">&quot;empName&quot;</span>: <span class="string">&quot;1c8592&quot;</span>,</span><br><span class="line"><span class="attr">&quot;gender&quot;</span>: <span class="string">&quot;M&quot;</span>,</span><br><span class="line"><span class="attr">&quot;email&quot;</span>: <span class="string">&quot;1c8592@pl.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;dId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;department&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;deptId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;deptName&quot;</span>: <span class="string">&quot;开发部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="attr">&quot;empId&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;empName&quot;</span>: <span class="string">&quot;65b5b3&quot;</span>,</span><br><span class="line"><span class="attr">&quot;gender&quot;</span>: <span class="string">&quot;M&quot;</span>,</span><br><span class="line"><span class="attr">&quot;email&quot;</span>: <span class="string">&quot;65b5b3@pl.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;dId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;department&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;deptId&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;deptName&quot;</span>: <span class="string">&quot;开发部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;],</span><br><span class="line"><span class="attr">&quot;prePage&quot;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">&quot;nextPage&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;isFirstPage&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;isLastPage&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">&quot;hasPreviousPage&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">&quot;hasNextPage&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;navigatePages&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;navigatepageNums&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line"><span class="attr">&quot;navigateFirstPage&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;navigateLastPage&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;lastPage&quot;</span>: <span class="number">5</span>,</span><br><span class="line"><span class="attr">&quot;firstPage&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="视图修改"><a href="#视图修改" class="headerlink" title="视图修改"></a>视图修改</h2><ul><li>修改<code>index.jsp</code>页面，一进入首页就发送Ajax拿取数据并解析</li><li>同样要引入Boostrap框架，搭建的显示页面如下</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搭建显示页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 标题 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD BY PL<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 col-md-offset-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;emp_add_modal_btn&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span> <span class="attr">id</span>=<span class="string">&quot;emp_delete_all_btn&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 显示表格数据 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span> <span class="attr">id</span>=<span class="string">&quot;emps_table&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;check_all&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--发送Ajax构建表格体--&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 显示分页信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--分页文字信息  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span> <span class="attr">id</span>=<span class="string">&quot;page_info_area&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 分页条信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span> <span class="attr">id</span>=<span class="string">&quot;page_nav_area&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="发送Ajax请求"><a href="#发送Ajax请求" class="headerlink" title="发送Ajax请求"></a>发送Ajax请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> totalRecord,currentPage; <span class="comment">//全局变量，总记录数和当前页</span></span><br><span class="line"><span class="comment">//1、页面加载完成以后，直接去发送ajax请求,要到分页数据</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//去首页</span></span><br><span class="line">    to_page(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">to_page</span>(<span class="params">pn</span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">&quot;$&#123;APP_PATH&#125;/emps&quot;</span>,</span><br><span class="line">        data:<span class="string">&quot;pn=&quot;</span>+pn,</span><br><span class="line">        type:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//console.log(result);</span></span><br><span class="line">            <span class="comment">//1、解析并显示员工数据</span></span><br><span class="line">            build_emps_table(result);</span><br><span class="line">            <span class="comment">//2、解析并显示分页信息</span></span><br><span class="line">            build_page_info(result);</span><br><span class="line">            <span class="comment">//3、解析显示分页条数据</span></span><br><span class="line">            build_page_nav(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析并显示员工数据</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">build_emps_table</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//在传入新数据之前，需要清空table表格</span></span><br><span class="line">    $(<span class="string">&quot;#emps_table tbody&quot;</span>).empty();</span><br><span class="line">    <span class="comment">//对照JSON进行解析</span></span><br><span class="line">    <span class="keyword">var</span> emps = result.extend.pageInfo.list;</span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    $.each(emps,<span class="function"><span class="keyword">function</span>(<span class="params">index,item</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> checkBoxTd = $(<span class="string">&quot;&lt;td&gt;&lt;input type=&#x27;checkbox&#x27; class=&#x27;check_item&#x27;/&gt;&lt;/td&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> empIdTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(item.empId);</span><br><span class="line">        <span class="keyword">var</span> empNameTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(item.empName);</span><br><span class="line">        <span class="keyword">var</span> genderTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(item.gender==<span class="string">&#x27;M&#x27;</span>?<span class="string">&quot;男&quot;</span>:<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> emailTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(item.email);</span><br><span class="line">        <span class="keyword">var</span> deptNameTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(item.department.deptName);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         &lt;button class=&quot;&quot;&gt;</span></span><br><span class="line"><span class="comment">         &lt;span class=&quot;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="comment">         编辑</span></span><br><span class="line"><span class="comment">         &lt;/button&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//addClass添加类名 append在元素内部添加DOM元素</span></span><br><span class="line">        <span class="keyword">var</span> editBtn = $(<span class="string">&quot;&lt;button&gt;&lt;/button&gt;&quot;</span>).addClass(<span class="string">&quot;btn btn-primary btn-sm edit_btn&quot;</span>)</span><br><span class="line">            .append($(<span class="string">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>).addClass(<span class="string">&quot;glyphicon glyphicon-pencil&quot;</span>)).append(<span class="string">&quot;编辑&quot;</span>);</span><br><span class="line">        <span class="comment">//为编辑按钮添加一个自定义的属性，来表示当前员工id</span></span><br><span class="line">        editBtn.attr(<span class="string">&quot;edit-id&quot;</span>,item.empId);</span><br><span class="line">        <span class="keyword">var</span> delBtn =  $(<span class="string">&quot;&lt;button&gt;&lt;/button&gt;&quot;</span>).addClass(<span class="string">&quot;btn btn-danger btn-sm delete_btn&quot;</span>)</span><br><span class="line">            .append($(<span class="string">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>).addClass(<span class="string">&quot;glyphicon glyphicon-trash&quot;</span>)).append(<span class="string">&quot;删除&quot;</span>);</span><br><span class="line">        <span class="comment">//为删除按钮添加一个自定义的属性来表示当前删除的员工id</span></span><br><span class="line">        delBtn.attr(<span class="string">&quot;del-id&quot;</span>,item.empId);</span><br><span class="line">        <span class="keyword">var</span> btnTd = $(<span class="string">&quot;&lt;td&gt;&lt;/td&gt;&quot;</span>).append(editBtn).append(<span class="string">&quot; &quot;</span>).append(delBtn);</span><br><span class="line">        <span class="comment">//var delBtn =</span></span><br><span class="line">        <span class="comment">//append方法执行完成以后还是返回原来的元素&lt;tr&gt;&lt;/tr&gt;</span></span><br><span class="line">        $(<span class="string">&quot;&lt;tr&gt;&lt;/tr&gt;&quot;</span>).append(checkBoxTd)</span><br><span class="line">            .append(empIdTd)</span><br><span class="line">            .append(empNameTd)</span><br><span class="line">            .append(genderTd)</span><br><span class="line">            .append(emailTd)</span><br><span class="line">            .append(deptNameTd)</span><br><span class="line">            .append(btnTd)</span><br><span class="line">            .appendTo(<span class="string">&quot;#emps_table tbody&quot;</span>); <span class="comment">//添加到表格体中</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析并显示分页信息</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析左下角显示分页信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">build_page_info</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    $(<span class="string">&quot;#page_info_area&quot;</span>).empty();</span><br><span class="line">    $(<span class="string">&quot;#page_info_area&quot;</span>).append(<span class="string">&quot;当前&quot;</span>+result.extend.pageInfo.pageNum+<span class="string">&quot;页,总&quot;</span>+</span><br><span class="line">        result.extend.pageInfo.pages+<span class="string">&quot;页,总&quot;</span>+</span><br><span class="line">        result.extend.pageInfo.total+<span class="string">&quot;条记录&quot;</span>);</span><br><span class="line">    totalRecord = result.extend.pageInfo.total;</span><br><span class="line">    currentPage = result.extend.pageInfo.pageNum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解析显示分页条数据</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析显示分页条，点击分页要能去下一页....</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">build_page_nav</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//page_nav_area</span></span><br><span class="line">    $(<span class="string">&quot;#page_nav_area&quot;</span>).empty();</span><br><span class="line">    <span class="keyword">var</span> ul = $(<span class="string">&quot;&lt;ul&gt;&lt;/ul&gt;&quot;</span>).addClass(<span class="string">&quot;pagination&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构建元素</span></span><br><span class="line">    <span class="keyword">var</span> firstPageLi = $(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>).append($(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).append(<span class="string">&quot;首页&quot;</span>).attr(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;#&quot;</span>));</span><br><span class="line">    <span class="comment">//转义字符&amp;laquo;表示&lt;前一页</span></span><br><span class="line">    <span class="keyword">var</span> prePageLi = $(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>).append($(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).append(<span class="string">&quot;&amp;laquo;&quot;</span>));</span><br><span class="line">    <span class="comment">//如果当前页没有前一页了，就禁掉首页和前一页按钮</span></span><br><span class="line">    <span class="function"><span class="title">if</span>(<span class="params">result.extend.pageInfo.hasPreviousPage == <span class="literal">false</span></span>)</span>&#123;</span><br><span class="line">        firstPageLi.addClass(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">        prePageLi.addClass(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//未禁用才绑定事件发请求</span></span><br><span class="line">        <span class="comment">//为元素添加点击翻页的事件</span></span><br><span class="line">        firstPageLi.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            to_page(<span class="number">1</span>); <span class="comment">//首页</span></span><br><span class="line">        &#125;);</span><br><span class="line">        prePageLi.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//传入当前页页码并调用函数</span></span><br><span class="line">            to_page(result.extend.pageInfo.pageNum -<span class="number">1</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转义字符&amp;raquo;表示&gt;下一页</span></span><br><span class="line">    <span class="keyword">var</span> nextPageLi = $(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>).append($(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).append(<span class="string">&quot;&amp;raquo;&quot;</span>));</span><br><span class="line">    <span class="keyword">var</span> lastPageLi = $(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>).append($(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).append(<span class="string">&quot;末页&quot;</span>).attr(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;#&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果当前页没有后一页了，就禁用末页和后一页按钮</span></span><br><span class="line">    <span class="function"><span class="title">if</span>(<span class="params">result.extend.pageInfo.hasNextPage == <span class="literal">false</span></span>)</span>&#123;</span><br><span class="line">        nextPageLi.addClass(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">        lastPageLi.addClass(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//未禁用才绑定事件发请求</span></span><br><span class="line">        nextPageLi.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//传入页码并调用函数</span></span><br><span class="line">            to_page(result.extend.pageInfo.pageNum +<span class="number">1</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        lastPageLi.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//传入总页数，直接跳到最后一页</span></span><br><span class="line">            to_page(result.extend.pageInfo.pages);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加首页和前一页 的提示</span></span><br><span class="line">    ul.append(firstPageLi).append(prePageLi);</span><br><span class="line">    <span class="comment">//1,2，3遍历给ul中添加页码提示</span></span><br><span class="line">    $.each(result.extend.pageInfo.navigatepageNums,<span class="function"><span class="keyword">function</span>(<span class="params">index,item</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> numLi = $(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>).append($(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).append(item));</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">result.extend.pageInfo.pageNum == item</span>)</span>&#123;</span><br><span class="line">            numLi.addClass(<span class="string">&quot;active&quot;</span>); <span class="comment">//当前页高亮显示</span></span><br><span class="line">        &#125;</span><br><span class="line">        numLi.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            to_page(item);</span><br><span class="line">        &#125;);</span><br><span class="line">        ul.append(numLi);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//添加下一页和末页 的提示</span></span><br><span class="line">    ul.append(nextPageLi).append(lastPageLi);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把ul加入到nav</span></span><br><span class="line">    <span class="keyword">var</span> navEle = $(<span class="string">&quot;&lt;nav&gt;&lt;/nav&gt;&quot;</span>).append(ul);</span><br><span class="line">    navEle.appendTo(<span class="string">&quot;#page_nav_area&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success simple"><p>PageHelper分页记得配置参数合理化参数</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;分页查询&quot;&gt;&lt;a href=&quot;#分页查询&quot; class=&quot;headerlink&quot; title=&quot;分页查询&quot;&gt;&lt;/a&gt;分页查询&lt;/h1&gt;&lt;h2 id=&quot;实现思路&quot;&gt;&lt;a href=&quot;#实现思路&quot; class=&quot;headerlink&quot; title=&quot;实现思路&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>jQuery实现QQ音乐播放器🥳功能实现</title>
    <link href="http://xiaoliblog.cn/page/project07.html"/>
    <id>http://xiaoliblog.cn/page/project07.html</id>
    <published>2021-05-08T11:39:18.484Z</published>
    <updated>2021-05-08T11:41:42.784Z</updated>
    
    <content type="html"><![CDATA[<h1 id="歌曲播放"><a href="#歌曲播放" class="headerlink" title="歌曲播放"></a>歌曲播放</h1><h2 id="播放工具类封装"><a href="#播放工具类封装" class="headerlink" title="播放工具类封装"></a>播放工具类封装</h2><ul><li>为了防止<code>index.js</code>代码过多，我们可以封装成一个工具类</li><li>新建一个<code>player.js</code>文件，在<code>index.html</code>中引入，注意要在<code>index.js</code>之前引入</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//闭包函数，为了使函数内部数据和外部数据隔绝</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Player</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//封装一个类，返回原型上的 init()`方法，也就是通过 init()`创建类</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Player.prototype.init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//定义这个类的原型，将构造函数指向 Player，并定义 init 方法</span></span><br><span class="line">    Player.prototype = &#123;</span><br><span class="line">        <span class="title">constructor</span>: <span class="title">Player</span>,</span><br><span class="line">        <span class="title">init</span>: <span class="title">function</span> (<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//将 Player 原型上的 init 方法的原型指向 Player 的原型，将这个对象开放给 window</span></span><br><span class="line">    Player.prototype.init.prototype = Player.prototype;</span><br><span class="line">    <span class="built_in">window</span>.Player = Player;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure><h2 id="播放暂停"><a href="#播放暂停" class="headerlink" title="播放暂停"></a>播放暂停</h2><ul><li>在 HTML 页面插入一个 <code>audio</code> 标签，用于播放音乐</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在<code>index.js</code>中引入 <code>player</code> 工具库，实例化一个 <code>Player</code> 对象，并且传入 <code>audio</code> 对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $audio = $(<span class="string">&quot;audio&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> player = <span class="keyword">new</span> Player($audio);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改加载歌曲列表的函数，把Ajax取到的数据给player</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPlayerList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   $.ajax(&#123;</span><br><span class="line">      url: <span class="string">&quot;./source/musiclist.json&quot;</span>,</span><br><span class="line">      dataType: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">         success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//得到Ajax取到的数据</span></span><br><span class="line">            player.musicList = data;</span><br><span class="line">            <span class="comment">//....</span></span><br><span class="line">         &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>当按钮被点击时，调用播放音乐的方法</li><li>实现播放 / 暂停音乐的方法，当创建音乐标签时，在标签中保存索引及音乐信息</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个方法创建一条音乐</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMusicItem</span>(<span class="params">index, music</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $item = $(...);</span><br><span class="line">    $item.get(<span class="number">0</span>).index = index;</span><br><span class="line">    $item.get(<span class="number">0</span>).music = music;</span><br><span class="line">    <span class="keyword">return</span> $item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>接收两个参数，分别为 <code>index</code> 和<code>music</code> 信息，定义一个遍历，用于记录当前索引，判断是否为同一首音乐</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Player.prototype = &#123;</span><br><span class="line">    currentIndex: -<span class="number">1</span>,</span><br><span class="line">    playMusic: <span class="function"><span class="keyword">function</span> (<span class="params">index, music</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 判断是否是同一首音乐</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.currentIndex == index) &#123;</span><br><span class="line">            <span class="comment">// 同一首音乐</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.audio.paused) &#123;</span><br><span class="line">                <span class="built_in">this</span>.audio.play();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.audio.pause();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//   不是同一首音乐</span></span><br><span class="line">            <span class="built_in">this</span>.$audio.attr(<span class="string">&quot;src&quot;</span>, music.link_url);</span><br><span class="line">            <span class="built_in">this</span>.audio.play();</span><br><span class="line">            <span class="built_in">this</span>.currentIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="底部播放-暂停-上一首-下一首"><a href="#底部播放-暂停-上一首-下一首" class="headerlink" title="底部播放 / 暂停 / 上一首 / 下一首"></a>底部播放 / 暂停 / 上一首 / 下一首</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$musicPlay.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断有没有播放过音乐</span></span><br><span class="line">    <span class="keyword">if</span> (player.currentIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 没有播放过</span></span><br><span class="line">        $(<span class="string">&quot;.list_music&quot;</span>).eq(<span class="number">0</span>).find(<span class="string">&quot;.list_menu_play&quot;</span>).trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 已经播放过</span></span><br><span class="line">        $(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">            .eq(player.currentIndex)</span><br><span class="line">            .find(<span class="string">&quot;.list_menu_play&quot;</span>)</span><br><span class="line">            .trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 5 监听底部控制区域上一首按钮的点击</span></span><br><span class="line">$(<span class="string">&quot;.music_pre&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">        .eq(player.preIndex())</span><br><span class="line">        .find(<span class="string">&quot;.list_menu_play&quot;</span>)</span><br><span class="line">        .trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 6 监听底部控制区域下一首按钮的点击</span></span><br><span class="line">$(<span class="string">&quot;.music_next&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">        .eq(player.nextIndex())</span><br><span class="line">        .find(<span class="string">&quot;.list_menu_play&quot;</span>)</span><br><span class="line">        .trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>对象的 <code>preIndex</code> 与 <code>nextIndex</code> 方法用于处理索引</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">preIndex: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="built_in">this</span>.currentIndex - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        index = <span class="built_in">this</span>.musicList.length - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">&#125;,</span><br><span class="line">    nextIndex: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="built_in">this</span>.currentIndex + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (index &gt; <span class="built_in">this</span>.musicList.length - <span class="number">1</span>) &#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h2 id="删除歌曲"><a href="#删除歌曲" class="headerlink" title="删除歌曲"></a>删除歌曲</h2><ul><li>删除数据时需要注意的就是前台删除数据后，后台也无需保存数据。并且需要对标签保存的数据进行重新排序</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 7. 监听删除按钮的点击</span></span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_menu_del&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 找到被点击的音乐</span></span><br><span class="line">    <span class="keyword">var</span> $item = $(<span class="built_in">this</span>).parents(<span class="string">&quot;.list_music&quot;</span>);</span><br><span class="line">    <span class="comment">// 判断当前删除的是否是正在播放的</span></span><br><span class="line">    <span class="keyword">if</span> ($item.get(<span class="number">0</span>).index == player.currentIndex) &#123;</span><br><span class="line">        $(<span class="string">&quot;.music_next&quot;</span>).trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    $item.remove();</span><br><span class="line">    player.changeMusic($item.get(<span class="number">0</span>).index);</span><br><span class="line">    <span class="comment">// 重新排序</span></span><br><span class="line">    $(<span class="string">&quot;.list_music&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">        ele.index = index;</span><br><span class="line">        $(ele)</span><br><span class="line">            .find(<span class="string">&quot;.list_number&quot;</span>)</span><br><span class="line">            .text(index + <span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>删除后需要注意删除的数据是否是正在播放的音乐的前边，如果是需要将索引 - 1。否则会出现下一曲跳歌的现象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">changeMusic: <span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 删除对应的数据</span></span><br><span class="line">    <span class="built_in">this</span>.musicList.splice(index, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//判断当前删除的是否是正在播放的前面的音乐</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="built_in">this</span>.currentIndex) &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentIndex = <span class="built_in">this</span>.currentIndex - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="切换歌曲信息"><a href="#切换歌曲信息" class="headerlink" title="切换歌曲信息"></a>切换歌曲信息</h2><ul><li>更换歌曲信息涉及到的基本信息包括：右侧信息栏、图片、歌手、歌曲名、专辑名、底部控制条的名称、时间</li><li>实现这个这个功能也很简单，只是一些元素的替换。调用位置有两处<ul><li>第一次获取歌曲时（成功）的回调</li><li>初始化列表的第一个音乐</li></ul></li><li>当点击其他歌曲时</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. 初始化歌曲信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMusicInfo</span>(<span class="params">music</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取对应的元素</span></span><br><span class="line">    <span class="keyword">var</span> $musicImage = $(<span class="string">&quot;.song_info_pic img&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicName = $(<span class="string">&quot;.song_info_name a&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicSinger = $(<span class="string">&quot;.song_info_singer a&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicAblum = $(<span class="string">&quot;.song_info_ablum a&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicProgressName = $(<span class="string">&quot;.music_progress_name&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicProgressTime = $(<span class="string">&quot;.music_progress_time&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> $musicBg = $(<span class="string">&quot;.mask_bg&quot;</span>);</span><br><span class="line">    <span class="comment">// 给获取的到的元素赋值</span></span><br><span class="line">    $musicImage.attr(<span class="string">&quot;src&quot;</span>, music.cover);</span><br><span class="line">    $musicName.text(music.name);</span><br><span class="line">    $musicSinger.text(music.singer);</span><br><span class="line">    $musicAblum.text(music.album);</span><br><span class="line">    $musicProgressName.text(music.name + <span class="string">&quot;/&quot;</span> + music.singer);</span><br><span class="line">    $musicProgressTime.text(<span class="string">&quot;00:00 / &quot;</span> + music.time);</span><br><span class="line">    $musicBg.css(<span class="string">&quot;background&quot;</span>, <span class="string">&#x27;url(&quot;&#x27;</span> + music.cover + <span class="string">&#x27;&quot;)&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        initMusicInfo(data[<span class="number">0</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_menu_play&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 3.6 切换歌曲信息</span></span><br><span class="line">    initMusicInfo($item.get(<span class="number">0</span>).music);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="进度条的实现"><a href="#进度条的实现" class="headerlink" title="进度条的实现"></a>进度条的实现</h2><ul><li>获取被点击位置距离窗口的位置</li><li>获取默认距离窗口的位置</li><li>被点击的位置减去默认距离窗口的位置</li><li>点击进度条时，调整小圆点以及前景色的位置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">progressClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $this = <span class="built_in">this</span>; <span class="comment">//this 是progress</span></span><br><span class="line">    <span class="comment">// 监听背景的点击</span></span><br><span class="line">    <span class="built_in">this</span>.$progressBar.click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//   获取背景距离窗口默认的位置</span></span><br><span class="line">        <span class="keyword">var</span> normalLeft = $(<span class="built_in">this</span>).offset().left;</span><br><span class="line">        <span class="comment">//   获取点击的位置距离窗口默认的位置</span></span><br><span class="line">        <span class="keyword">var</span> eventLeft = event.pageX;</span><br><span class="line">        <span class="comment">//   设置前景的宽度</span></span><br><span class="line">        $this.$progressLine.css(<span class="string">&quot;width&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">        $this.$progressDot.css(<span class="string">&quot;left&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="进度条的拖动"><a href="#进度条的拖动" class="headerlink" title="进度条的拖动"></a>进度条的拖动</h2><ul><li>鼠标拖拽使用 <code>mousemove</code> 方法监听，但必须在鼠标按下后监听</li><li>实现逻辑与点击一致</li><li>鼠标抬起则释放 <code>mousemove</code> 事件即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">progressMove: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $this = <span class="built_in">this</span>;</span><br><span class="line">    <span class="comment">// 1. 监听的鼠标的按下事件</span></span><br><span class="line">    <span class="built_in">this</span>.$progressBar.mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//   获取背景距离窗口默认的位置</span></span><br><span class="line">        <span class="keyword">var</span> normalLeft = $(<span class="built_in">this</span>).offset().left;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 监听鼠标的移动事件</span></span><br><span class="line">        $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//   获取点击的位置距离窗口默认的位置</span></span><br><span class="line">            <span class="keyword">var</span> eventLeft = event.pageX;</span><br><span class="line">            <span class="comment">//   设置前景的宽度</span></span><br><span class="line">            $this.$progressLine.css(<span class="string">&quot;width&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">            $this.$progressDot.css(<span class="string">&quot;left&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 监听鼠标的抬起事件</span></span><br><span class="line">    $(<span class="built_in">document</span>).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">document</span>).off(<span class="string">&quot;mousemove&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="音乐时间、进度条同步"><a href="#音乐时间、进度条同步" class="headerlink" title="音乐时间、进度条同步"></a>音乐时间、进度条同步</h2><ul><li>通过 <code>timeupdate</code> 事件监听是否播放，正在播放时，会不断触发这个事件。在事件内部通过 <code>duration</code> 与 <code>currentTime</code> 获取当前时长和总时长。</li><li>于是可以在 <code>player</code> 类中新增加方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">musicTimeUpdate: <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $this = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">this</span>.$audio.on(<span class="string">&quot;timeupdate&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> duration = $this.audio.duration;</span><br><span class="line">        <span class="keyword">var</span> currentTime = $this.audio.currentTime;</span><br><span class="line">        <span class="keyword">var</span> timeStr = $this.formatDate(currentTime, duration);</span><br><span class="line">        callBack(currentTime, duration, timeStr);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">// 格式化时间</span></span><br><span class="line">    formatDate: <span class="function"><span class="keyword">function</span> (<span class="params">currentTime, duration</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 结束时间</span></span><br><span class="line">        <span class="keyword">var</span> endMin = <span class="built_in">parseInt</span>(duration / <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">var</span> endSec = <span class="built_in">parseInt</span>(duration % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (endMin &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            endMin = <span class="string">&quot;0&quot;</span> + endMin;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (endSec &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            endSec = <span class="string">&quot;0&quot;</span> + endSec;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 开始时间</span></span><br><span class="line">        <span class="keyword">var</span> startMin = <span class="built_in">parseInt</span>(currentTime / <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">var</span> startSec = <span class="built_in">parseInt</span>(currentTime % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (startMin &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            startMin = <span class="string">&quot;0&quot;</span> + startMin;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (startSec &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            startSec = <span class="string">&quot;0&quot;</span> + startSec;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> startMin + <span class="string">&quot;:&quot;</span> + startSec + <span class="string">&quot; / &quot;</span> + endMin + <span class="string">&quot;:&quot;</span> + endSec;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><ul><li>在我们的<code> index.js</code> 中只需要调用这个方法即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8. 监听播放的进度</span></span><br><span class="line">player.musicTimeUpdate(<span class="function"><span class="keyword">function</span> (<span class="params">currentTime, duration, timeStr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 同步时间</span></span><br><span class="line">    $(<span class="string">&quot;.music_progress_time&quot;</span>).text(timeStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>同样的为进度条新增方法 <code>setProgress</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setProgress: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value &lt; <span class="number">0</span> || value &gt; <span class="number">100</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.$progressLine.css(&#123;</span><br><span class="line">        width: value + <span class="string">&quot;%&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">this</span>.$progressDot.css(&#123;</span><br><span class="line">        left: value + <span class="string">&quot;%&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>这样完成后，在主函数中计算出当前时间所占比例即可调用此方法进行设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8. 监听播放的进度</span></span><br><span class="line">player.musicTimeUpdate(<span class="function"><span class="keyword">function</span> (<span class="params">currentTime, duration, timeStr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 同步进度条</span></span><br><span class="line">    <span class="comment">// 计算播放比例</span></span><br><span class="line">    <span class="keyword">var</span> value = (currentTime / duration) * <span class="number">100</span>;</span><br><span class="line">    progress.setProgress(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>因为使用了百分比进行修改元素，那么 css 的定位方式也需要修改一下</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.music_progress_info</span> <span class="selector-class">.music_progress_bar</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_bar</span> <span class="selector-class">.music_progress_dot</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="点击进度条与歌曲同步"><a href="#点击进度条与歌曲同步" class="headerlink" title="点击进度条与歌曲同步"></a>点击进度条与歌曲同步</h2><ul><li>实现思路：<ul><li>计算出总时长除以已播放时长的比例</li><li>将歌曲进度设置为歌曲时长乘以上一步的比例</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">progress.progressClick(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    player.musicSeekTo(value);</span><br><span class="line">&#125;);</span><br><span class="line">progress.progressMove(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    player.musicSeekTo(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">musicSeekTo: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.audio.currentTime = <span class="built_in">this</span>.audio.duration * value;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>为了实现拖拽时声音能够继续播放，因此将设置的方法改到 <code>mouseup</code> 事件中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">progressMove: <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $this = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> normalLeft, eventLeft;</span><br><span class="line">    <span class="comment">// 1. 监听的鼠标的按下事件</span></span><br><span class="line">    <span class="built_in">this</span>.$progressBar.mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//   获取背景距离窗口默认的位置</span></span><br><span class="line">        normalLeft = $(<span class="built_in">this</span>).offset().left;</span><br><span class="line">        $this.isMove = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 2. 监听鼠标的移动事件</span></span><br><span class="line">        $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//   获取点击的位置距离窗口默认的位置</span></span><br><span class="line">            eventLeft = event.pageX;</span><br><span class="line">            <span class="comment">//   设置前景的宽度</span></span><br><span class="line">            $this.$progressLine.css(<span class="string">&quot;width&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">            $this.$progressDot.css(<span class="string">&quot;left&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 监听鼠标的抬起事件</span></span><br><span class="line">    $(<span class="built_in">document</span>).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">document</span>).off(<span class="string">&quot;mousemove&quot;</span>);</span><br><span class="line">        $this.isMove = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// 计算进度条的比例</span></span><br><span class="line">        <span class="keyword">var</span> value = (eventLeft - normalLeft) / $this.$progressBar.width();</span><br><span class="line">        callBack(value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="声音控制"><a href="#声音控制" class="headerlink" title="声音控制"></a>声音控制</h2><ul><li>声音控制与进度条控制几乎一致</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $voiceBar = $(<span class="string">&quot;.music_voice_bar&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> $voiceLine = $(<span class="string">&quot;.music_voice_line&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> $voiceDot = $(<span class="string">&quot;.music_voice_dot&quot;</span>);</span><br><span class="line">voicePregress = Progress($voiceBar, $voiceLine, $voiceDot);</span><br><span class="line">voicePregress.progressClick(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    player.musicVoiceSeekTo(value);</span><br><span class="line">&#125;);</span><br><span class="line">voicePregress.progressMove(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    player.musicVoiceSeekTo(value);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>接下来为 <code>player</code> 类新增方法即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">musicVoiceSeekTo: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 取值0~1</span></span><br><span class="line">    <span class="built_in">this</span>.audio.volume = value;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="bug-修复"><a href="#bug-修复" class="headerlink" title="bug 修复"></a>bug 修复</h2><ul><li>音乐进度的跳转应为一个正常的数字</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">musicSeekTo: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(value)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.audio.currentTime = <span class="built_in">this</span>.audio.duration * value;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>音量同理且音量范围为 0~1</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">musicVoiceSeekTo: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(value)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (value &lt; <span class="number">0</span> || value &gt; <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// 取值0~1</span></span><br><span class="line">    <span class="built_in">this</span>.audio.volume = value;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>拖拽超出范围</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">progressMove: <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> barWidth = <span class="built_in">this</span>.$progressBar.width();</span><br><span class="line">    <span class="comment">// 1. 监听的鼠标的按下事件</span></span><br><span class="line">    <span class="built_in">this</span>.$progressBar.mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> offset = eventLeft - normalLeft;</span><br><span class="line">            <span class="keyword">if</span> (offset &gt;= <span class="number">0</span> &amp;&amp; offset &lt;= barWidth) &#123;</span><br><span class="line">                <span class="comment">//   设置前景的宽度</span></span><br><span class="line">                $this.$progressLine.css(<span class="string">&quot;width&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">                $this.$progressDot.css(<span class="string">&quot;left&quot;</span>, eventLeft - normalLeft);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h1 id="歌词设置"><a href="#歌词设置" class="headerlink" title="歌词设置"></a>歌词设置</h1><h2 id="歌词解析并且加载"><a href="#歌词解析并且加载" class="headerlink" title="歌词解析并且加载"></a>歌词解析并且加载</h2><ul><li>解析创建一个新的类用于解析歌词</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Lyric</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Lyric.prototype.init(path);</span><br><span class="line">    &#125;</span><br><span class="line">    Lyric.prototype = &#123;</span><br><span class="line">        <span class="title">constructor</span>: <span class="title">Lyric</span>,</span><br><span class="line">        <span class="title">init</span>: <span class="title">function</span> (<span class="params">path</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.path = path;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 保存匹配的时间</span></span><br><span class="line">        times: [],</span><br><span class="line">        <span class="comment">// 保存匹配的歌词</span></span><br><span class="line">        lyrics: [],</span><br><span class="line">        loadLyric: <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> $this = <span class="built_in">this</span>;</span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url: $this.path,</span><br><span class="line">                dataType: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                    $this.pareLyric(data);</span><br><span class="line">                    callBack();</span><br><span class="line">                &#125;,</span><br><span class="line">                error: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;&#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 解析歌词的方法</span></span><br><span class="line">        pareLyric: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> $this = <span class="built_in">this</span>;</span><br><span class="line">            <span class="keyword">var</span> array = data.split(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="comment">// 正则表达式匹配内容</span></span><br><span class="line">            <span class="keyword">var</span> timeReg = <span class="regexp">/\[(\d*:\d*\.\d*)\]/</span>;</span><br><span class="line">            <span class="comment">// 遍历取出每一条歌词</span></span><br><span class="line">            $.each(array, <span class="function"><span class="keyword">function</span> (<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//   处理歌词</span></span><br><span class="line">                <span class="keyword">var</span> lrc = ele.split(<span class="string">&quot;]&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">                <span class="comment">//   排除空字符串(没有歌词)</span></span><br><span class="line">                <span class="keyword">if</span> (lrc.length == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                $this.lyrics.push(lrc);</span><br><span class="line">                <span class="keyword">var</span> res = timeReg.exec(ele);</span><br><span class="line">                <span class="keyword">if</span> (res == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">var</span> timeStr = res[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">var</span> res2 = timeStr.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">                <span class="keyword">var</span> min = <span class="built_in">parseInt</span>(res2[<span class="number">0</span>]) * <span class="number">60</span>;</span><br><span class="line">                <span class="keyword">var</span> sec = <span class="built_in">parseFloat</span>(res2[<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">var</span> time = <span class="built_in">parseFloat</span>(<span class="built_in">Number</span>(min + sec).toFixed(<span class="number">2</span>));</span><br><span class="line">                $this.times.push(time);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="built_in">console</span>.log($this.times);</span><br><span class="line">            <span class="built_in">console</span>.log($this.lyrics);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    Lyric.prototype.init.prototype = Lyric.prototype;</span><br><span class="line">    <span class="built_in">window</span>.Lyric = Lyric;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure><ul><li>接下来只需要在自己的 JavaScript 中初始化这个类并且调用方法即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. 初始化歌词信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMusicLyric</span>(<span class="params">music</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> lyric = <span class="keyword">new</span> Lyric(music.link_lrc);</span><br><span class="line">    <span class="keyword">var</span> $lryicContainer = $(<span class="string">&quot;.song_lyric&quot;</span>);</span><br><span class="line">    lyric.loadLyric(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 创建歌词列表</span></span><br><span class="line">        $.each(lyric.lyrics, <span class="function"><span class="keyword">function</span> (<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> $item = $(<span class="string">&quot;&lt;li&gt;&quot;</span> + ele + <span class="string">&quot;&lt;/li&gt;&quot;</span>);</span><br><span class="line">            $lryicContainer.append($item);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建好了之后，还需要对样式进行一点点小的修改</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content_right</span> <span class="selector-class">.song_lyric</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="歌词同步"><a href="#歌词同步" class="headerlink" title="歌词同步"></a>歌词同步</h2><ul><li>歌词同步需要在监听播放的进度中去设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8. 监听播放的进度</span></span><br><span class="line">player.musicTimeUpdate(<span class="function"><span class="keyword">function</span> (<span class="params">currentTime, duration, timeStr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 实现歌词的同步</span></span><br><span class="line">    <span class="keyword">var</span> index = lyric.currentIndex(currentTime);</span><br><span class="line">    <span class="keyword">var</span> $item = $(<span class="string">&quot;.song_lyric li&quot;</span>).eq(index);</span><br><span class="line">    $item.addClass(<span class="string">&quot;cur&quot;</span>);</span><br><span class="line">    $item.siblings().removeClass(<span class="string">&quot;cur&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (index &lt;= <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">    $(<span class="string">&quot;.song_lyric&quot;</span>).css(&#123;</span><br><span class="line">        marginTop: (-index + <span class="number">2</span>) * <span class="number">30</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>因为使用了 <code>margin-top</code> 滚动歌词，那么需要将 html 也该动</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song_lyric_container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;song_lyric&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>为了实现切换歌曲时，歌词也可以切换，也需要在切换歌曲时将保存的歌曲信息也切换</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">loadLyric: <span class="function"><span class="keyword">function</span> (<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    $this.times = [];</span><br><span class="line">    $this.lyrics = [];</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMusicLyric</span>(<span class="params">music</span>) </span>&#123;</span><br><span class="line">    $lryicContainer.html(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_menu_play&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 3.7切换歌词信息</span></span><br><span class="line">    initMusicLyric($item.get(<span class="number">0</span>).music);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;歌曲播放&quot;&gt;&lt;a href=&quot;#歌曲播放&quot; class=&quot;headerlink&quot; title=&quot;歌曲播放&quot;&gt;&lt;/a&gt;歌曲播放&lt;/h1&gt;&lt;h2 id=&quot;播放工具类封装&quot;&gt;&lt;a href=&quot;#播放工具类封装&quot; class=&quot;headerlink&quot; title=&quot;播放工</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="前端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%89%8D%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>SSM高级整合🍃基础模块</title>
    <link href="http://xiaoliblog.cn/page/ssmcrud01.html"/>
    <id>http://xiaoliblog.cn/page/ssmcrud01.html</id>
    <published>2021-05-07T16:00:00.000Z</published>
    <updated>2021-05-09T13:06:06.022Z</updated>
    
    <content type="html"><![CDATA[<h1 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1aec544584d90abbe1f564cf10887407f0e0c7bd/2021/05/08/42d7ad0a60a3f1c1d9577438dbe24ae6.png"></p><div class="btns rounded center grid5">            <a href="https://gitee.com/xiaoliblog/ssm_-crud" title="下载源码"><i class="fas fa-download"></i>下载源码</a>          </div><h2 id="功能点"><a href="#功能点" class="headerlink" title="功能点"></a>功能点</h2><ul><li>分页</li><li>数据校验 =  <code>jquery</code>前端校验+<code>JSR303</code>后端校验</li><li><code>ajax</code></li><li><code>Rest</code>风格的URI；使用HTTP协议请求方式的动词，来表示对资源的操作（GET（查询），POST（新增），PUT（修改），DELETE（删除）</li><li>Restful风格URI：<ul><li><code>/emp/&#123;id&#125;</code>  GET查询员工</li><li><code>/emp</code> 发POST即保存员工</li><li><code>/emp/&#123;id&#125;</code> PUT请求修改员工</li><li><code>/epm/&#123;id&#125;</code> DELETE删除员工</li></ul></li></ul><h2 id="技术点"><a href="#技术点" class="headerlink" title="技术点"></a>技术点</h2><ul><li>基础框架<code>ssm</code>（SpringMVC+Spring+MyBatis）</li><li>数据库<code>MySQL</code></li><li>前端框架<code>bootstrap</code>快速搭建简洁美观的界面</li><li>项目的依赖管理<code>Maven</code></li><li>分页<code>pagehelper</code></li><li>逆向工程<code>MyBatis Generator</code></li></ul><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="相关依赖"><a href="#相关依赖" class="headerlink" title="相关依赖"></a>相关依赖</h2><ul><li>创建一个<code>maven</code>工程</li><li>引入项目依赖的jar包（<code>spring</code>、<code>springmvc</code>、 <code>mybatis</code>、 数据库连接池，驱动包， 其他（<code>jstl</code>，<code>servlet-api</code>，<code>junit</code>）</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入项目依赖的jar包 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SpringMVC、Spring --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--引入pageHelper分页插件 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- MBG 逆向工程--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 返回json字符串的支持 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--JSR303数据校验支持；tomcat7及以上的服务器，</span></span><br><span class="line"><span class="comment">        tomcat7以下的服务器：el表达式。额外给服务器的lib包中替换新的标准的el</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- Spring-Jdbc --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--Spring-test --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- Spring面向切面编程 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--MyBatis --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- MyBatis整合Spring的适配包 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 数据库连接池、驱动 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.mchange/c3p0 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- （jstl，servlet-api，junit） --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/jstl/jstl --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--服务器上有就剔除掉--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--JSP--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.ibatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ibatis-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">|--main</span><br><span class="line">  |--java</span><br><span class="line">     |--com.ssmcrud</span><br><span class="line">        |--bean   &#x2F;&#x2F;实体类</span><br><span class="line">        |--controller &#x2F;&#x2F;控制器</span><br><span class="line">        |--dao  &#x2F;&#x2F;Mapper接口</span><br><span class="line">        |--service  &#x2F;&#x2F;业务层</span><br><span class="line">  |--resources</span><br><span class="line">     |--mapper &#x2F;&#x2F;存放mapper.xml</span><br><span class="line">     |--applicationContext.xml &#x2F;&#x2F;配置SpringIOC，事务，数据源</span><br><span class="line">     |--dbconfig.properties</span><br><span class="line">     |--mybatis-cofig.xml</span><br><span class="line">  |--webapp</span><br><span class="line">     |--static  &#x2F;&#x2F;存放Bootstrap和js</span><br><span class="line">     |--WEB-INF</span><br><span class="line">        |--views  &#x2F;&#x2F;存放jsp视图</span><br><span class="line">        |--dispacherServlet-servlet.xml &#x2F;&#x2F;SpringMVC配置视图解析器</span><br><span class="line">     |--index.jsp</span><br><span class="line">|--test</span><br><span class="line">   |--java</span><br><span class="line">      |--MapperTest  &#x2F;&#x2F;Spring测试</span><br><span class="line">      |--MBGTest &#x2F;&#x2F;Mbatis逆向工程测试</span><br><span class="line">      |--MVCTest &#x2F;&#x2F;Spring MVC测试</span><br><span class="line">|--mgb.xml &#x2F;&#x2F;逆向工程配置文件</span><br></pre></td></tr></table></figure><h2 id="引入Bootstrap"><a href="#引入Bootstrap" class="headerlink" title="引入Bootstrap"></a>引入Bootstrap</h2><ul><li>在<code>webapp</code>下创建<code>static</code>存放静态文件，在<code>index.jsp</code>引入<code>bootstrap</code>前端框架和<code>jQuery</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 最新版本的 Bootstrap 核心 CSS 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--本地引入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">pageContext.setAttribute</span>(&quot;<span class="attr">APP_PATH</span>&quot;, <span class="attr">request.getContextPath</span>()); %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- web路径：</span></span><br><span class="line"><span class="comment">    不以/开始的相对路径，找资源，以当前资源的路径为基准，经常容易出问题。</span></span><br><span class="line"><span class="comment">    以/开始的相对路径，找资源，以服务器的路径为标准(http://localhost:3306)；需要加上项目名</span></span><br><span class="line"><span class="comment">    http://localhost:3306/crud</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/jQuery/jquery-3.4.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;APP_PATH &#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><ul><li>创建一个<code>ssm_crud</code>数据库，新建Department部门表<code>tbl_dept</code>和Employee员工表<code>tbl_emp</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@7acbcdc427ad13306dd9b51dc9b582ec2aa05652/2021/05/08/17742d7a2989d3984fc18df9819c6ec6.png"></p><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@dbc396eb17cd59407a206ecc08abb43bcd1cd9cb/2021/05/08/bd981aa7a0d5bb983f6ef5737fe799ec.png"></p><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h2 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h2><ul><li>配置<code>web.xml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--启动spring的容器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Bootstraps the root web application context before servlet initialization --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--2、springmvc的前端控制器，拦截所有请求  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 3、字符编码过滤器，一定要放在所有过滤器之前 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 4、使用Rest风格的URI，将页面普通的post请求转为指定的delete或者put请求 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="SpringMVC配置"><a href="#SpringMVC配置" class="headerlink" title="SpringMVC配置"></a>SpringMVC配置</h2><ul><li>在<code>WEB-INF</code>下创建<code>dispatcherServlet-servlet.xml</code>用于配置前端控制器</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--SpringMVC的配置文件，包含网站跳转逻辑的控制，配置  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ssmcrud&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--只扫描控制器。  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器，方便页面返回  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/views/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--两个标准配置  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 将springmvc不能处理的请求交给tomcat --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 能支持springmvc更高级的一些功能，JSR303校验，快捷的ajax...映射动态请求 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="配置Spring"><a href="#配置Spring" class="headerlink" title="配置Spring"></a>配置Spring</h2><ul><li>创建<code>dbconfig.properties</code>数据库配置文件</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.jdbcUrl</span>=<span class="string">jdbc:mysql://localhost:3306/ssm_crud</span></span><br><span class="line"><span class="meta">jdbc.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.user</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><ul><li>配置<code>resources</code>目录下的<code>applicationContext.xml</code>配置文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ssmcrud&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spring的配置文件，这里主要配置和业务逻辑有关的 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--=================== 数据源，事务控制，xxx ================--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:dbconfig.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;pooledDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.jdbcUrl&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--================== 配置和MyBatis的整合=============== --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定mybatis全局配置文件的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;pooledDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定mybatis，mapper文件的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置扫描器，将mybatis接口的实现加入到ioc容器中 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--扫描所有dao接口的实现，加入到ioc容器中 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.ssmcrud.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置一个可以执行批量的sqlSession --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--=============================================  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ===============事务控制的配置 ================--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--控制住数据源  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;pooledDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启基于注解的事务，使用xml配置形式的事务（必要主要的都是使用配置式）  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 切入点表达式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.ssmcrud.service..*(..))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txPoint&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置事务增强 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPoint&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置事务增强，事务如何切入  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 所有方法都是事务方法 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--以get开始的所有方法  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spring配置文件的核心点（数据源、与mybatis的整合，事务控制） --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MyBatis逆向工程"><a href="#MyBatis逆向工程" class="headerlink" title="MyBatis逆向工程"></a>MyBatis逆向工程</h2><ul><li>配置<code>mybatis-config.xml</code>配置文件，使用mybatis的逆向工程生成对应的bean以及mapper<ul><li>MyBatis Generator官方文档：&lt;<a href="http://mybatis.org/generator/">http://mybatis.org/generator/</a> &gt;</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.ssmcrud.bean&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--分页参数合理化  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;reasonable&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在项目模块下创建<code>mgb.xml</code>配置文件，即与pom.xml同级</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置数据库连接 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm_crud&quot;</span> <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 指定javaBean生成的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.ssmcrud.bean&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--指定sql映射文件生成的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 指定dao接口生成的位置，mapper接口 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">&quot;com.ssmcrud.dao&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- table指定每个表的生成策略 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Department&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在test测试包下创建<code>MBGTest</code>测试类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzy.crud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MBGTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">        File configFile = <span class="keyword">new</span> File(<span class="string">&quot;mbg.xml&quot;</span>);</span><br><span class="line">        ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">        Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">        DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">        MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>生成结果如下</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@59dd4d20e068a2bfd13be9e140c5eeb045eef24e/2021/05/03/6dadf43ceca560e23f116a40d8081b0f.png" width="40%"><h2 id="修改Mapper文件"><a href="#修改Mapper文件" class="headerlink" title="修改Mapper文件"></a>修改Mapper文件</h2><ul><li>自动生成的查询不包含联表查询，比如查询员工的同时显示部门号</li><li>首先在<code>Employee</code>实体类Bean中添加部门<code>Department</code>属性，并添加<code>Get</code>和<code>Set</code>方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个员工对应一个部门</span></span><br><span class="line"><span class="comment">//希望查询员工的同时部门信息也查询</span></span><br><span class="line"><span class="keyword">private</span> Department department;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Department <span class="title">getDepartment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> department;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDepartment</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.department = department;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在<code>EmployeeMapper</code>员工Dao接口中新增两个方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询员工信息并带上部门信息</span></span><br><span class="line"><span class="function">List&lt;Employee&gt; <span class="title">selectByExampleWithDept</span><span class="params">(EmployeeExample example)</span></span>;</span><br><span class="line"><span class="comment">//查询员工信息并带上部门信息</span></span><br><span class="line"><span class="function">Employee <span class="title">selectByPrimaryKeyWithDept</span><span class="params">(Integer empId)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>然后修改<code>EmployeeMapper.xml</code>配置文件，新增两个联表查询语句</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自定义新的映射，并添加部门自动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;WithDeptResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.ssmcrud.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;CHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;d_id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定联合查询出的部门字段的封装--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;department&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.ssmcrud.bean.Department&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--自定义新的SQL重用语句--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--包含员工信息和部门信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;WithDept_Column_List&quot;</span>&gt;</span></span><br><span class="line">    e.emp_id, e.emp_name, e.gender, e.email, d.d_id , d.dept_id , d.dept_name</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--查询员工同时带部门信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByExampleWithDept&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;WithDeptResultMap&quot;</span>&gt;</span></span><br><span class="line">   select</span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;distinct&quot;</span>&gt;</span></span><br><span class="line">      distinct</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;WithDept_Column_List&quot;</span> /&gt;</span></span><br><span class="line">      FROM tbl_emp e</span><br><span class="line">      left join tbl_dept d on e.`d_id`=d.`dept_id`</span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter != null&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Example_Where_Clause&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;orderByClause != null&quot;</span>&gt;</span></span><br><span class="line">      order by $&#123;orderByClause&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--查询单个员工同时带部门信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKeyWithDept&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;WithDeptResultMap&quot;</span>&gt;</span></span><br><span class="line">   select</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;WithDept_Column_List&quot;</span> /&gt;</span></span><br><span class="line">      FROM tbl_emp e</span><br><span class="line">      left join tbl_dept d on e.`d_id`=d.`dept_id`</span><br><span class="line">      where emp_id = #&#123;empId,jdbcType=INTEGER&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Spring测试"><a href="#Spring测试" class="headerlink" title="Spring测试"></a>Spring测试</h1><ul><li>环境搭建完后往表里面添加数据并测试Spring环境是否搭建成功    </li></ul><h2 id="Spring单元测试"><a href="#Spring单元测试" class="headerlink" title="Spring单元测试"></a>Spring单元测试</h2><ul><li>使用Spring的单元测试，需要导入相关依赖，注意JUnit版本要在4.12及以上</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Spring-test --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>原生测试方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1,创建springIOC容器</span></span><br><span class="line">ApplicationContext ioc = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">//2,从容器中获取mapper</span></span><br><span class="line">DepartmentMapper ben = ioc.getBean(DepartmentMapper.class);</span><br></pre></td></tr></table></figure><ul><li>使用Spring单元测试方法<ul><li><code>@ContextConfiguration</code>注解参数为配置文件路径</li><li>使用<code>@RunWith</code>配置使用的单元测试</li><li>直接<code>@Autowired</code>要使用的组件即可</li></ul></li></ul><div class="note success simple"><p>由于mybatis逆向工程生成的实体类可能没有构造方法，需要先手动加上无参和有参构造方法才能使用</p></div><ul><li>先在<code>applicationContext.xml</code>中配置个可以执行批量的<code>sqlSession</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置一个可以执行批量的sqlSession --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations=&#123;&quot;classpath:applicationContext.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*测试departmentmapper*/</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCRUD</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//测试是否拿到了IOC容器里的Bean</span></span><br><span class="line">        System.out.println(departmentMapper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1,插入几个部门</span></span><br><span class="line">        departmentMapper.insertSelective(<span class="keyword">new</span> Department(<span class="keyword">null</span>,<span class="string">&quot;开发部&quot;</span>));</span><br><span class="line">        departmentMapper.insertSelective(<span class="keyword">new</span> Department(<span class="keyword">null</span>,<span class="string">&quot;测试部&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2,生成员工数据，测试员工插入</span></span><br><span class="line">        employeeMapper.insertSelective(<span class="keyword">new</span> Employee(<span class="keyword">null</span>,<span class="string">&quot;jerry&quot;</span>,<span class="string">&quot;M&quot;</span>,<span class="string">&quot;jerry@pl.com&quot;</span>,<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3，批量插入多个员工，使用可以执行批量操作的sqlsession</span></span><br><span class="line">        EmployeeMapper mapper = sqlSession.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">200</span>;i++)&#123;</span><br><span class="line">           <span class="comment">//对较长的UUID进行字符串截取</span></span><br><span class="line">           String uid = UUID.randomUUID().toString().substring(<span class="number">0</span>,<span class="number">5</span>)+i;</span><br><span class="line">           mapper.insertSelective(<span class="keyword">new</span> Employee(<span class="keyword">null</span>,uid,<span class="string">&quot;M&quot;</span>,uid+<span class="string">&quot;@pl.com&quot;</span>,<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;批量添加员工成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>生成数据为</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0dd2207ada3e98761e7f709730dcf143ed3da25e/2021/05/08/7c021bee3a236f616f5a37af31ce466a.png"></p><h2 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h2><ul><li><code>UUID</code>（Universally Unique Identifier）：通用唯一识别码，是一种软件建构的标准\</li><li><code>UUID</code> 目的是让分布式系统中的所有元素，都能有唯一的辨识信息，而不需要通过中央控制端来做辨识信息的指定。</li><li><code>UUID</code>是指在一台机器上生成的数字，它保证对在同一时空中的所有机器都是唯一的</li><li><code>UUID</code>由以下几部分组合：<ul><li>当前日期和时间，UUID的第一个部分与时间有关，如果你在生成一个UUID之后，过几秒又生成一个UUID，则第一个部分不同，其余相同。</li><li>时钟序列</li><li>全局唯一的IEEE机器识别号，如果有网卡，从网卡MAC地址获得，没有网卡以其他方式获得</li></ul></li><li>UUID的唯一缺陷在于生成的结果串会比较长</li><li>标准的UUID格式为：xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (8-4-4-4-12) </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UUIDTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      String uId = UUID.randomUUID().toString();</span><br><span class="line">      System.out.println(uId); <span class="comment">//生成xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx形式字符串</span></span><br><span class="line">      System.out.println(uId.replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>)); <span class="comment">//去掉-符号</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;项目简介&quot;&gt;&lt;a href=&quot;#项目简介&quot; class=&quot;headerlink&quot; title=&quot;项目简介&quot;&gt;&lt;/a&gt;项目简介&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/xiaoliblog/image@1aec544</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="后端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%90%8E%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="SSM" scheme="http://xiaoliblog.cn/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>ECMAScript 6🌞面向对象编程</title>
    <link href="http://xiaoliblog.cn/page/ECMAScript03.html"/>
    <id>http://xiaoliblog.cn/page/ECMAScript03.html</id>
    <published>2021-05-07T10:42:01.571Z</published>
    <updated>2021-05-07T15:17:16.133Z</updated>
    
    <content type="html"><![CDATA[<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><ul><li>面向对象的思维特点<ul><li>抽取（抽象）对象共用的属性和行为组织（封装）成一个类（模板）</li><li>对类进行实例化，获取类的对象 </li></ul></li><li>面向对象编程我们考虑的是有哪些对象，按照面向对象的思维特点不断的创建对象使用对象指挥对象做事情</li></ul><h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><ul><li>在JavaScript中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等</li><li>在ES6中新增加了类的概念，可以使用<code>class</code>关键字声明一个类，之后以这个类来实例化对象</li><li>类抽象了对象的公共部分，它泛指某一大类</li><li>对象特指某一个，通过类实例化一个具体的对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//创建类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">   <span class="comment">//constructor构造函数会返回一个实例对象</span></span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">name,age</span>)</span>&#123; <span class="comment">//属性</span></span><br><span class="line">      <span class="built_in">this</span>.name = name;</span><br><span class="line">      <span class="built_in">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//注意：方法与方法之不是逗号,这是类，不是对象！</span></span><br><span class="line">   <span class="function"><span class="title">sing</span>(<span class="params">song</span>)</span>&#123;  <span class="comment">//方法</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + song);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建实例对象，会自动调用constructor构造函数</span></span><br><span class="line"><span class="keyword">var</span> lisi = <span class="keyword">new</span> People(<span class="string">&#x27;李四&#x27;</span>,<span class="number">21</span>);</span><br><span class="line"><span class="keyword">var</span> wangwu = <span class="keyword">new</span> People(<span class="string">&quot;王五&quot;</span>,<span class="number">22</span>);</span><br><span class="line"><span class="built_in">console</span>.log(lisi);</span><br><span class="line"><span class="built_in">console</span>.log(wangwu);</span><br><span class="line"></span><br><span class="line">lisi.sing(<span class="string">&quot;-告白气球&quot;</span>);</span><br><span class="line">wangwu.sing(<span class="string">&quot;-青花瓷&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f8c16f3b13022ca3f7de7886a50b0fc31d6d1a3c/2021/05/07/419be35c3009972f88928b703704fffd.png"></p><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul><li>父类中的<code>this</code>指向的是父类构造函数创建的实例对象，子类若想在调用的父类的方法中使用自身的变量，则需要通过<code>super</code>调用父类构造函数将其值传入父类中</li><li>当在访问<code>this</code>或在子构造函数<code>return</code>之前， 必须在子构造函数中先调用<code>super</code>构造函数</li><li>在子类访问<code>this</code>或在子类的构造函数返回实例对象前，必须调用<code>super</code>父类构造函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.x = x;</span><br><span class="line">      <span class="built_in">this</span>.y = y;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">sum</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.x + <span class="built_in">this</span>.y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//extends关键字继承，用super调用父类构造函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// 通过super调用父类的构造函数</span></span><br><span class="line">      <span class="built_in">super</span>(x, y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">son.sum(); <span class="comment">//3</span></span><br></pre></td></tr></table></figure><ul><li><code>super</code>关键字用于访问和调用对象父类上的函数。可以调用父类的构造函数，也可以调用父类的普通函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;this is father&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>() <span class="comment">//调用父类构造函数</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">super</span>.say() + <span class="string">&#x27; this is son&#x27;</span>); </span><br><span class="line">      <span class="comment">//结果：this is father this is son</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son()</span><br><span class="line">son.say()</span><br><span class="line"><span class="comment">// 若父类和子类含有相同的函数，则会应用就近原则，优先调用子类的函数</span></span><br></pre></td></tr></table></figure><div class="note warning simple"><p>在<code>onsole</code>码中打印某函数的结果时，应该采用<code>eturn</code>方式返回数据，而不应该在原函数中打印，这是错误的编程方式</p></div><h2 id="Tab实例"><a href="#Tab实例" class="headerlink" title="Tab实例"></a>Tab实例</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6f17ec414c084b1a64ce6b9e61e2911755232304/2021/05/07/71a8ee85e8260355b81b6dd48a5fc017.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">      Js 面向对象 动态添加标签页</span><br><span class="line">   <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabsbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tab&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- tab 标签 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;fisrstnav&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;liactive&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabadd&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- tab 内容 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabscon&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;conactive&quot;</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 要点1：点击标签栏可以切换相应样式</span></span><br><span class="line"><span class="comment">// 要点2：双击标签栏显示输入框，可修改其中的数据</span></span><br><span class="line"><span class="comment">// 要点3：点击添加按钮可添加标签栏</span></span><br><span class="line"><span class="comment">// 要点4：点击X可以删除标签栏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tab</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">        that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="built_in">this</span>.main = <span class="built_in">document</span>.querySelector(id);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取添加按钮的元素</span></span><br><span class="line">        <span class="built_in">this</span>.add = <span class="built_in">this</span>.main.querySelector(<span class="string">&quot;.tabadd&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取li的父元素</span></span><br><span class="line">        <span class="built_in">this</span>.ul = <span class="built_in">this</span>.main.querySelector(<span class="string">&quot;.fisrstnav ul:first-child&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取section的父元素</span></span><br><span class="line">        <span class="built_in">this</span>.fsection = <span class="built_in">this</span>.main.querySelector(<span class="string">&quot;.tabscon&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 初始化操作，让相关的元素绑定事件</span></span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.updateNode();</span><br><span class="line">        <span class="comment">// 为+绑定添加事件</span></span><br><span class="line">        <span class="built_in">this</span>.add.onclick = <span class="built_in">this</span>.addTab;</span><br><span class="line">        <span class="comment">// 为li绑定切换事件</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">            <span class="built_in">this</span>.lis[i].index = i;</span><br><span class="line">            <span class="built_in">this</span>.lis[i].onclick = <span class="built_in">this</span>.toggleTab;</span><br><span class="line">            <span class="built_in">this</span>.guanbis[i].index = i;</span><br><span class="line">            <span class="built_in">this</span>.guanbis[i].onclick = <span class="built_in">this</span>.deleteTab;</span><br><span class="line">            <span class="comment">// 绑定双击事件</span></span><br><span class="line">            <span class="built_in">this</span>.spans[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">            <span class="built_in">this</span>.sections[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 重新获取lis和sections</span></span><br><span class="line">    <span class="function"><span class="title">updateNode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lis = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.sections = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&quot;section&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.guanbis = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&quot;.icon-guanbi&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.spans = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&quot;.fisrstnav li span:first-child&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 切换功能</span></span><br><span class="line">    <span class="function"><span class="title">toggleTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">//clearClass函数是类的公共函数，所有只能通过that调用</span></span><br><span class="line">        that.clearClass();</span><br><span class="line">        <span class="comment">// 该函数的调用者为li,所以函数内部的this指向的都是li元素，所有可以通过this.index获取到值</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;tab&quot;</span> + <span class="built_in">this</span>.index);</span><br><span class="line">        <span class="built_in">this</span>.className = <span class="string">&quot;liactive&quot;</span>;</span><br><span class="line">        that.sections[<span class="built_in">this</span>.index].className = <span class="string">&quot;conactive&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//清除所有样式</span></span><br><span class="line">    <span class="function"><span class="title">clearClass</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">            <span class="built_in">this</span>.lis[i].className = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="built_in">this</span>.sections[i].className = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 添加功能</span></span><br><span class="line">    <span class="function"><span class="title">addTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        that.clearClass();</span><br><span class="line">        <span class="comment">// 添加tab和section</span></span><br><span class="line">        <span class="keyword">var</span> random = <span class="built_in">Math</span>.random();</span><br><span class="line">        <span class="keyword">var</span> newTab =</span><br><span class="line">            <span class="string">&#x27;&lt;li class=&quot;liactive&quot;&gt;&lt;span&gt;测试1&lt;/span&gt;&lt;span class=&quot;iconfont icon-guanbi&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> newSection = <span class="string">`&lt;section class=&quot;conactive&quot;&gt;测试<span class="subst">$&#123;random&#125;</span>&lt;/section&gt;`</span>;</span><br><span class="line">        <span class="comment">// 在ul内部的最后一个元素的后面添加标签</span></span><br><span class="line">        that.ul.insertAdjacentHTML(<span class="string">&quot;beforeend&quot;</span>, newTab);</span><br><span class="line">        that.fsection.insertAdjacentHTML(<span class="string">&quot;beforeend&quot;</span>, newSection);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重新获取lis和sections元素，并绑定事件</span></span><br><span class="line">        that.init();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 删除功能</span></span><br><span class="line">    <span class="function"><span class="title">deleteTab</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// ❤由于父元素绑定了点击切换事件，所有应该阻止点击时冒泡</span></span><br><span class="line">        e.stopPropagation();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;delete&quot;</span> + <span class="built_in">this</span>.index);</span><br><span class="line">        <span class="keyword">var</span> index = <span class="built_in">this</span>.index;</span><br><span class="line">        <span class="comment">// ❤删除对应的li和section和guanbi</span></span><br><span class="line">        that.lis[index].remove();</span><br><span class="line">        that.sections[index].remove();</span><br><span class="line">        that.guanbis[index].remove();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 若删除的是当前元素，则conactive样式已经不存在，if判断为空，然后继续后面的操作，即自动切换至上一个元素</span></span><br><span class="line">        <span class="comment">// 若删除的不是当前元素，即conactive样式还是存在的，if判断为真，此时不会切换至上一个元素</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">&quot;.conactive&quot;</span>)) &#123;</span><br><span class="line">            that.init();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ❤若删除的是第一个元素，则会切换至第二个元素，且只有第二个元素存在时，才进行此操作</span></span><br><span class="line">        <span class="comment">// ❤若删除的不是第一个元素，则会选择上一个元素</span></span><br><span class="line">        index === <span class="number">0</span> ?</span><br><span class="line">            that.lis[<span class="number">1</span>] &amp;&amp; that.lis[<span class="number">1</span>].click() :</span><br><span class="line">            that.lis[--index].click();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ❤删除后重新初始化</span></span><br><span class="line">        that.init();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 编辑功能</span></span><br><span class="line">    <span class="function"><span class="title">editTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> _that = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 双击时禁止选中文字</span></span><br><span class="line">        <span class="built_in">window</span>.getSelection ?</span><br><span class="line">            <span class="built_in">window</span>.getSelection().removeAllRanges() :</span><br><span class="line">            <span class="built_in">document</span>.selection.empty();</span><br><span class="line">        <span class="comment">// 为span的内容换成表单</span></span><br><span class="line">        <span class="keyword">var</span> str = <span class="built_in">this</span>.innerHTML;</span><br><span class="line">        <span class="built_in">this</span>.innerHTML = <span class="string">`&lt;input type=&#x27;text&#x27; value=<span class="subst">$&#123;str&#125;</span> /&gt;`</span>;</span><br><span class="line">        <span class="comment">// 获取input的元素</span></span><br><span class="line">        <span class="keyword">var</span> input = <span class="built_in">this</span>.children[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// 选中input中的文字,增强用户体验</span></span><br><span class="line">        input.select();</span><br><span class="line">        <span class="comment">// 离开输出框</span></span><br><span class="line">        input.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 方式一：</span></span><br><span class="line">            <span class="comment">// _that.innerHTML = input.value;</span></span><br><span class="line">            <span class="comment">// 方式二：</span></span><br><span class="line">            <span class="built_in">this</span>.parentNode.innerHTML = input.value;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ❤按回车键实现输入框失去焦点同样的效果</span></span><br><span class="line">        input.onkeyup = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) &#123;</span><br><span class="line">                <span class="comment">// 手动调用输入框失去焦点事件</span></span><br><span class="line">                <span class="built_in">this</span>.blur();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tab = <span class="keyword">new</span> Tab(<span class="string">&quot;#tab&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// dom相关：</span></span><br><span class="line"><span class="comment">// 获取单个dom元素：document.querySelector(&#x27;.fisrstnav ul:first-child&#x27;)</span></span><br><span class="line"><span class="comment">// 获取所有满足条件的dom元素：.querySelectorAll(&quot;li&quot;);</span></span><br><span class="line"><span class="comment">// 绑定单击事件：.onclick=function()&#123;&#125;</span></span><br><span class="line"><span class="comment">// 绑定双击事件： .ondblclick</span></span><br><span class="line"><span class="comment">// 在ul的最后一个元素的后面添加标签：ul.insertAdjacentHTML(&quot;beforeend&quot;, newTab); 其他取值：beforstart,afterstart,afterend</span></span><br><span class="line"><span class="comment">// 阻止冒泡：e.stopPropagation()</span></span><br><span class="line"><span class="comment">// 删除自身元素: .remove()</span></span><br><span class="line"><span class="comment">// 双击禁止选中文字：window.getSelection ?window.getSelection().removeAllRanges() :document.selection.empty();</span></span><br><span class="line"><span class="comment">// 选中输入框的文字：input.select()</span></span><br><span class="line"><span class="comment">// 绑定失焦事件：input.onblur=function()&#123;&#125;</span></span><br><span class="line"><span class="comment">// 添加回车键事件：input.onkeyup=function(e)&#123;if(e.keyCode===13)&#123;.......&#125;&#125;</span></span><br></pre></td></tr></table></figure><h1 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h1><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><ul><li>在ES6之前，对象不是基于类创建的，而是用一种称为<code>构建函数</code>的特殊函数来定义对象</li><li>创建对象可以通过以下三种方式<ul><li>对象字面量</li><li><code>new Object()</code></li><li>自定义构造函数</li></ul></li><li>构造函数中的属性和方法称为成员，成员可以添加<ul><li>实例成员就是构造函数内部通过<code>this</code>添加的成员，实例成员只能通过实例对象访问</li><li>静态成员是指在构造函数本身添加的成员。，静态成员只能通过构造函数访问</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：通过new Object()创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：通过对象字面量创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式三：通过构造函数创建对象</span></span><br><span class="line"><span class="comment">// 构造函数的首字母要大写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 实例成员是指通过this添加的成员</span></span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">   <span class="built_in">this</span>.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;sing a song&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> adele = <span class="keyword">new</span> Star(<span class="string">&#x27;阿黛尔&#x27;</span>, <span class="number">20</span>)</span><br><span class="line">adele.sing(); <span class="comment">//实例成员只能通过实例对象访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员是指在构造函数本身添加的成员</span></span><br><span class="line">Star.sex = <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.dir(Star);</span><br><span class="line"><span class="built_in">console</span>.log(Star.sex); <span class="comment">//静态成员只能通过构造函数访问</span></span><br><span class="line"><span class="built_in">console</span>.log(adele.sex);</span><br></pre></td></tr></table></figure><h2 id="原型对象-1"><a href="#原型对象-1" class="headerlink" title="原型对象"></a>原型对象</h2><ul><li><strong>构造函数存在浪费内存的问题</strong>，比如下图所示，若函数定义在构造函数内部，则每一个创建出来的对象都会为其单独开辟一个内存地址空间。这样会存在浪费地址空间的问题</li><li>如果希望所有的对象使用同一个函数，这样就比较节省内存，这就引出了原型对象</li><li>构造函数通过原型分配的函数是所有对象所<code>共享</code>的。JavaScript规定，<code>每一个构造函数都有一个prototype属性</code>，指向另一个对象。注意这个<code>prototype</code>就是一个对象，这个对象的所有属性和方法，都会被构造函数所拥有</li><li>我们可以把那些不变的方法，直接定义在<code>prototype</code>对象上，这样所有对象的实例就可以共享这些方法</li><li>一般情况下，公共属性定义在构造函数中，而公共方法定义在原型对象上</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">   <span class="comment">//1.若函数定义在构造函数内部，则每一个创建出来的对象都会为其单独开辟一个内存地址空间。这样会存在浪费地址空间的问题</span></span><br><span class="line">   <span class="comment">// this.sing = function() &#123;</span></span><br><span class="line">   <span class="comment">//     console.log(this.name + &#x27;sing a song&#x27;);</span></span><br><span class="line">   <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.每一个构造函数都有一个原型对象，在原型对象上定义方法可以实现所有对象共享该方法，即共享同一块地址空间。</span></span><br><span class="line">Star.prototype.sing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot;sing a song&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Star.prototype.gender = <span class="string">&quot;female&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> adele = <span class="keyword">new</span> Star(<span class="string">&quot;阿黛尔&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> wf = <span class="keyword">new</span> Star(<span class="string">&quot;王菲&quot;</span>);</span><br><span class="line">adele.sing();</span><br><span class="line">wf.sing();</span><br><span class="line"><span class="built_in">console</span>.log(adele.sing === wf.sing); <span class="comment">//true</span></span><br><span class="line"><span class="comment">// console.dir(Star);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(adele.name);</span><br><span class="line"><span class="built_in">console</span>.log(adele.gender);</span><br><span class="line"><span class="comment">// 3.❤一般情况下，公共属性定义在构造函数中，而公共方法定义在原型对象上</span></span><br></pre></td></tr></table></figure><h2 id="对象原型"><a href="#对象原型" class="headerlink" title="对象原型"></a>对象原型</h2><ul><li>对象都会有一个属性<code>__proto__</code>指向构造函数的<code>prototype</code>原型对象，之所以我们对象可以使用构造函数<code>prototype</code>原型对象的属性和方法，就是因为对象有<code>__proto__</code>原型的存在</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">   x:<span class="number">1</span>,</span><br><span class="line">   y:<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@cb191f79a6b6c300962e7c5593f6d089e1447840/2021/05/07/4804d6743b22afbff740fd867f91b261.png"></p><ul><li>通过实例对象调用方法时的查找规则：<ul><li>先去对象本身查看是否存在该函数 </li><li>如果不存在则去<code>__proto__</code>属性上查找，即指向的构造函数的原型对象<code>prototype</code>身上</li></ul></li><li><code>__proto__</code>对象原型的意义就在于为对象的查找机制提供一个方向，或者说一条路线，但是它是一个非标准属性，因此实际开发中，不可用使用这个属性，它只是内部指向原型对象<code>prototype</code></li><li>对象原型与原型对象<ul><li> 原型对象是指构造函数的原型对象<code>Star.prototype</code></li><li> 对象原型是指 创建出来的每一个对象身上，都有一个<code>__proto__</code>属性，该属性被称为对象原型</li></ul></li><li><code>__proto__</code>对象原型和原型对象<code>prototype</code>是等价的</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@50d062822ac3c088aef42185ebf6e8ff9ca08274/2021/05/07/ccac11ba73ae0fbf03800f4bdf5c7c57.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">      <span class="built_in">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line">   Star.prototype.sing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot;sing a song&quot;</span>);</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>,<span class="number">21</span>)</span><br><span class="line">   <span class="keyword">var</span> zxy = <span class="keyword">new</span> Star(<span class="string">&#x27;张学友&#x27;</span>,<span class="number">22</span>)</span><br><span class="line">   ldh.sing()</span><br><span class="line">   <span class="built_in">console</span>.log(ldh) <span class="comment">//对象身上系统自动添加一个__proto__指向我们构造函数的原型对象</span></span><br><span class="line">   <span class="comment">//__proto__对象原型和原型对象prototype是等价的</span></span><br><span class="line">   <span class="built_in">console</span>.log(ldh.__proto__ === Star.prototype) <span class="comment">//true</span></span><br><span class="line">   <span class="comment">//方法查找规则：</span></span><br><span class="line">   <span class="comment">//1.首先其ldh对象身上查找是否有sing方法</span></span><br><span class="line">   <span class="comment">//2. 如果没有，由于__proto__的存在，就去指向的构造函数原型对象prototype身上查找</span></span><br></pre></td></tr></table></figure><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><ul><li>对象原型<code>__proto__</code>和构造函数<code>prototype</code>原型对象里面都有一个<code>constructor</code>属性，<code>constructor</code>称为构造函数，因为它指回构造函数本身</li><li><code>constructor</code>主要用于记录该对象引用于哪个构造函数，它可以让原型对象重新指向原来的构造函数</li><li>若为构造函数的原型对象赋值为一个新的对象，则会覆盖掉原来的<code>constructor</code>属性</li><li>如果修改了原来的原型对象，给原型对象赋值的是一个对象，则必须手动为原型对象添加<code>constructor</code>属性</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Star.prototype = &#123;</span><br><span class="line">   <span class="comment">//如果不手动指向则会覆盖掉原来的constructor属性</span></span><br><span class="line">   <span class="title">constructor</span>: <span class="title">Star</span>,</span><br><span class="line">   <span class="title">sing</span>: <span class="title">function</span> (<span class="params"></span>) &#123; <span class="comment">//方法1</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot;sing a song&quot;</span>);</span><br><span class="line">   &#125;,</span><br><span class="line">   movie : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//方法1</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot;play a movie&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">21</span>)</span><br><span class="line"><span class="keyword">var</span> zxy = <span class="keyword">new</span> Star(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">22</span>)</span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype.constructor);</span><br><span class="line"><span class="built_in">console</span>.log(ldh.__proto__.constructor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三角关系"><a href="#三角关系" class="headerlink" title="三角关系"></a>三角关系</h2><ul><li>构造函数、原型对象、实例之间的三角关系<ul><li>构造函数通过<code>prototype</code>属性指向原型对象</li><li>原型对象上的<code>constructor</code>属性又指回了构造函数</li><li>实例对象通过<code>__proto__</code>属性指向了原型对象，还可以通过<code>__prototype.constructor</code>指向构造函数</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@3e1a50e46fb464d2257b756bed42e9edb3a6fc71/2021/05/07/aad1032d0b83a578e676a5f6db2b10e5.png"></p><h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><ul><li>通过原型链的延续我们可以实现Js中的继承，原型链的顶端是<code>Object.prototype.__proto__</code>，而<code>Object.prototype</code>是一切对象的原型，所以这个对象上所有的属性都能被我们使用，它不能有任何对象为原型，所以递归访问<code>_proto_</code>的终点<code>Object.prototype.__proto__</code>等于<code>null</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1fa465759d9ec8987a80280775e243e4deb27931/2021/05/07/351738065d98bddb9eeacf163772bf74.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">21</span>);</span><br><span class="line"><span class="comment">//1. 只要是对象就有__proto__原型,指向原型对象</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype)</span><br><span class="line"><span class="comment">//2. 我们Star原型对象里面的__proto__原型指向的是 Object.prototype</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype.__proto__ === <span class="built_in">Object</span>.prototype); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__); <span class="comment">//null</span></span><br></pre></td></tr></table></figure><ul><li>通过原型链可以明确成员查找规则<ul><li>当访问一个对象的属性（包括方法）时，首先查找这个<strong>对象自身</strong>有没有该属性</li><li>如果没有就查找它的原型（也就是<code>__proto__</code>指向的<code>prototype</code>原型对象)</li><li>如果还没有就查找原型对象的原型( <code>Object</code>的原型对象)</li><li>依此类推一直找到Object为止 (<code>null</code> ) </li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">21</span>);</span><br><span class="line"><span class="comment">//要想输出sex为男</span></span><br><span class="line"><span class="comment">//第一种，对象本身就有</span></span><br><span class="line">ldh.sex=<span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="comment">//第二种，往上找到对象的原型</span></span><br><span class="line">Star.prototype.sex=<span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="comment">//第三种，再往上找到Object的原型</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.sex=<span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.sex)</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果出现冲突，根据就近原则，即选取对象本身具有的</span></span><br></pre></td></tr></table></figure><h2 id="扩展内置对象"><a href="#扩展内置对象" class="headerlink" title="扩展内置对象"></a>扩展内置对象</h2><ul><li>可以通过原型对象对原来的内置对象进行扩展自定义的方法。比如给数组增加自定义求偶数和的功能</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype);</span><br><span class="line"><span class="comment">// 在内置对象构造函数的原型对象上扩展自己想要的方法</span></span><br><span class="line"><span class="comment">//比如添加数组求和方法</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">      sum += <span class="built_in">this</span>[i]</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr.sum());  <span class="comment">//15</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2.sum());   <span class="comment">//21</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype);</span><br></pre></td></tr></table></figure><ul><li>注意：数组和字符串内置对象不能给原型对象覆盖操作<code>Array.prototype= &#123;&#125;</code> , 只能是<code>Array.prototype.xx = function()&#123;&#125;</code>的方式</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下这种方法会覆盖原来具有的方法，是不可取的，会报错</span></span><br><span class="line"><span class="built_in">Array</span>.prototype = &#123;</span><br><span class="line">   sum: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">         sum += <span class="built_in">this</span>[i]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> sum;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="继承-1"><a href="#继承-1" class="headerlink" title="继承"></a>继承</h1><ul><li>ES6之前并没有给我们提供<code>extends</code>继承。我们可以通过<code>构造函数+原型对象</code>模拟实现继承,被称为<strong>组合继承</strong></li></ul><h2 id="call-方法"><a href="#call-方法" class="headerlink" title="call()方法"></a>call()方法</h2><ul><li><code>call()</code>方法可以调用函数并且修改函数运行时的<code>this</code>指向</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fn.call(thisArg,arg1,arg2...)</span><br><span class="line"><span class="comment">//thisArg: 当前调用函数this的指向对象</span></span><br><span class="line"><span class="comment">//arg1,arg2:传递的其他参数</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//call()方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;我想喝咖啡&#x27;</span>)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>) <span class="comment">//默认指向Window</span></span><br><span class="line">   <span class="built_in">console</span>.log(x+y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">   name: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1. call()可以调用函数</span></span><br><span class="line">fn.call();</span><br><span class="line"><span class="comment">//2. 改变函数的this指向，使其指向obj</span></span><br><span class="line">fn.call(obj);</span><br><span class="line"><span class="comment">//3. 改变this指向并且传入参数</span></span><br><span class="line">fn.call(obj,<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@6eaa947c0ceea5d4531bb8746b88b19accfcb55e/2021/05/07/4d9c44a48af2a4d6f44b5a652d455a3e.png"></p><h2 id="利用父构造函数继承属性"><a href="#利用父构造函数继承属性" class="headerlink" title="利用父构造函数继承属性"></a>利用父构造函数继承属性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//借用父构造函数继承属性</span></span><br><span class="line"><span class="comment">//1.父构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   <span class="comment">//this指向父构造函数的对象实例</span></span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2. 子构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   <span class="comment">//this指向子构造函数对象实例</span></span><br><span class="line">   <span class="comment">//把父构造函数的this修改为子构造的this，子构造函数就可以使用name和age属性了</span></span><br><span class="line">   Father.call(<span class="built_in">this</span>,name,age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&quot;刘德华&quot;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="built_in">console</span>.log(son)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@eac31892540d3f116aa147e089cd83dea827cf43/2021/05/07/3557a67bfcbc27928252ce70ba6c508b.png"></p><h2 id="利用原型对象继承方法"><a href="#利用原型对象继承方法" class="headerlink" title="利用原型对象继承方法"></a>利用原型对象继承方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//借用父构造函数继承属性</span></span><br><span class="line"><span class="comment">//1.父构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   <span class="comment">//this指向父构造函数的对象实例</span></span><br><span class="line">   <span class="built_in">this</span>.name = name;</span><br><span class="line">   <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.money = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;挣钱&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2. 子构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   <span class="comment">//this指向子构造函数对象实例</span></span><br><span class="line">   <span class="comment">//把父构造函数的this修改为子构造的this，子构造函数就可以使用name和age属性了</span></span><br><span class="line">   Father.call(<span class="built_in">this</span>,name,age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Son.prototype = Father.prototype; 这样直接赋值会有问题，如果修改了子原型对象，父原型对象也会被修改</span></span><br><span class="line"><span class="comment">//new Father()实例化对象</span></span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father();</span><br><span class="line"><span class="comment">//如果利用对象的形式修改了原型对象，别忘了利用constructor指回原来的原型对象</span></span><br><span class="line">Son.prototype.constructor = Son;</span><br><span class="line"><span class="comment">//这个是子构造函数专门的方法</span></span><br><span class="line">Son.prototype.exam = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;孩子要考试&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&quot;刘德华&quot;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="built_in">console</span>.log(son)</span><br><span class="line"><span class="built_in">console</span>.log(Father.prototype)</span><br><span class="line"><span class="built_in">console</span>.log(Son.prototype.constructor)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@32bc14ea1da5a653ce7ee5c1d8c73bdbe989cbef/2021/05/07/65b6e55a286b49e7c561576ceaee55e2.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;面向对象&quot;&gt;&lt;a href=&quot;#面向对象&quot; class=&quot;headerlink&quot; title=&quot;面向对象&quot;&gt;&lt;/a&gt;面向对象&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;面向对象的思维特点&lt;ul&gt;
&lt;li&gt;抽取（抽象）对象共用的属性和行为组织（封装）成一个类（模板）&lt;/li&gt;
&lt;l</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ECMAScript 6" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/ECMAScript-6/"/>
    
    
    <category term="ECMAScript 6" scheme="http://xiaoliblog.cn/tags/ECMAScript-6/"/>
    
  </entry>
  
  <entry>
    <title>jQuery实现QQ音乐播放器🥳页面设计</title>
    <link href="http://xiaoliblog.cn/page/project06.html"/>
    <id>http://xiaoliblog.cn/page/project06.html</id>
    <published>2021-05-05T08:04:40.061Z</published>
    <updated>2021-05-09T14:32:55.372Z</updated>
    
    <content type="html"><![CDATA[<h1 id="布局结构"><a href="#布局结构" class="headerlink" title="布局结构"></a>布局结构</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@b7fb931923599ac66e23c631a0cb1b350cba92b2/2021/05/06/c9e2b9abf88fbd1642682290cc769eb8.png"></p><div class="btns rounded center grid5">            <a href="https://gitee.com/xiaoliblog/some-project/tree/master/QQ%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8" title="下载源码"><i class="fas fa-download"></i>下载源码</a><a href="https://antmoe.gitee.io/project/2020/06/qqMusic/" title="在线Demo"><i class="fas fa-book-open"></i>在线Demo</a>          </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_in&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer_in&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="顶部布局"><a href="#顶部布局" class="headerlink" title="顶部布局"></a>顶部布局</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0ae0cd14d1ecbddeca18a2accf7c4abc8b00e46d/2021/05/06/b144288e3baaf4516ae30d83e849106c.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.logo</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>; <span class="comment">/*透明度降低*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.logo</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>; <span class="comment">/*鼠标经过透明度升高，有明亮效果*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.logo</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">78px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="comment">/*logo*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/player_logo.png&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.register</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">45px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.register</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.register</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="内容结构"><a href="#内容结构" class="headerlink" title="内容结构"></a>内容结构</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@12c68e979707712aadb887c6ba65fd34aa6f95dd/2021/05/06/3ff6084b7e4f87ca630b837c890f4ee2.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_in&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="工具条布局"><a href="#工具条布局" class="headerlink" title="工具条布局"></a>工具条布局</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@3d8f63cf6a0d377e4a23d5d0f9a471278516a583/2021/05/06/d6a6f7e134a0ac1712e7527024a1a4ca.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_left&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_toolbar&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>收藏<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>添加到<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>清空列表<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">460px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.content_in</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_in</span> <span class="selector-class">.content_left</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_left</span> <span class="selector-class">.content_toolbar</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">122px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>; <span class="comment">/*明亮特效*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="comment">/*精灵图*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/icon_sprite.png&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: -<span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*单独设置每个图片的位置(用PS测试)*/</span></span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">60px</span> -<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(2)</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">20px</span> -<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(3)</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">40px</span> -<span class="number">240px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(4)</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">100px</span> -<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_toolbar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(5)</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">40px</span> -<span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***********顶部END************/</span></span><br></pre></td></tr></table></figure><h2 id="播放列表布局"><a href="#播放列表布局" class="headerlink" title="播放列表布局"></a>播放列表布局</h2><ul><li>歌曲列表可以视作逐行的列表，第一行为标题，下边为歌曲</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e051eb9abe9ab79e0d98b0fd1cff95f35bbac0d8/2021/05/06/a43c17f545773da9d5e2d6e53fb148e2.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_left&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_list&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;list_title&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_check&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_number&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_name&quot;</span>&gt;</span>歌曲<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_singer&quot;</span>&gt;</span>歌手<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_time&quot;</span>&gt;</span>时长<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;list_music&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_check&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_number&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_name&quot;</span>&gt;</span>告白气球<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_singer&quot;</span>&gt;</span>周杰伦<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_time&quot;</span>&gt;</span>03:35<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--其下的歌曲列表通过JS动态获取--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content_left</span> <span class="selector-class">.content_list</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">user-select</span>: none; <span class="comment">/*禁用用户复制*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="comment">/*opacity: 0.5;*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_check</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*勾选框*/</span></span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_check</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_number</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_name</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_singer</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success simple"><p><code>user-select: none;</code> 可以禁用用户复制功能</p></div><h2 id="完善播放列表"><a href="#完善播放列表" class="headerlink" title="完善播放列表"></a>完善播放列表</h2><ul><li>选择框是一个伪选择框，当被点击时，通过添加类名<code>list_checked</code>切换图片即可</li><li>鼠标悬停的图标采用精灵图，使用 a 标签加背景图，然后使用 jQuery 监听鼠标的移入移出事件</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e54f5e5be956a92350f736d0bdf7bf9d3de52751/2021/05/06/d2759631979fb7a1ae907453285865e6.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;list_music&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_check&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_number&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_name&quot;</span>&gt;</span>告白气球</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_menu&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;播放&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;添加&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;下载&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;分享&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_singer&quot;</span>&gt;</span>周杰伦<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list_time&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>03:35<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;删除&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*用a标签设置图标*/</span></span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="comment">/*精灵图*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/icon_list_menu.png&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*精灵图位置*/</span></span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">120px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">120px</span> -<span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">120px</span> -<span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">120px</span> -<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_time</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/icon_list_menu.png&quot;</span>) no-repeat -<span class="number">120px</span> -<span class="number">160px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 监听歌曲的移入移出事件</span></span><br><span class="line">  $(<span class="string">&quot;.list_music&quot;</span>).hover(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  <span class="comment">//移入</span></span><br><span class="line">      <span class="comment">//   显示子菜单 在使用JQuery动画时最好先调用stop(),以下使用了淡入淡出</span></span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_menu&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time a&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">      <span class="comment">//   隐藏时长</span></span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time span&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//移出</span></span><br><span class="line">      <span class="comment">//   隐藏子菜单</span></span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_menu&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time a&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">      <span class="comment">//   显示时长</span></span><br><span class="line">      $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time span&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 2. 监听复选框的点击事件</span></span><br><span class="line">  $(<span class="string">&quot;.list_check&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">this</span>).toggleClass(<span class="string">&quot;list_checked&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="自定义滚动条"><a href="#自定义滚动条" class="headerlink" title="自定义滚动条"></a>自定义滚动条</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@bc46bb0c38bfb70f0a614864f426427cd0c40d40/2021/05/06/7875cd85e5cc5e7a74bcad446be093ec.png"></p><ul><li>首先设置父盒子超出隐藏，防止歌曲过多导致布局出问题</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.centent_left</span> <span class="selector-class">.content_list</span>&#123;</span><br><span class="line">   <span class="attribute">overflow</span>:auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>自定义滚动条使用了一个 jQuery 插件<a href="http://manos.malihu.gr/jquery-custom-content-scroller/">jQuery custom content scroller</a>，利用这个插件可以轻松设置滚动条样式</li><li>下载后本地导入CSS和JS，注意其是依赖jQuery的插件，需要先引入jQuery</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;jquery.mCustomScrollbar.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--注意引入的顺序问题，先引入插件和框架后引入自己的样式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/index.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--先导入jQuery-&gt;框架插件-&gt;自己的JS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.12.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery.mCustomScrollbar.concat.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>利用JS初始化插件，为需要添加的元素调用 <code>mCustomScrollbar()</code> 方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// 0.自定义滚动条,给需要修改样式的父盒子添加</span></span><br><span class="line">   $(<span class="string">&quot;.content_list&quot;</span>).mCustomScrollbar();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>在HTML中为该元素添加自定义属性 <code>data-mcs-theme=&quot;dark&quot;</code>，样式设置可以在<a href="http://manos.malihu.gr/repository/custom-scrollbar/demo/examples/scrollbar_themes_demo.html">Scrollbar themes</a>查找</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_list&quot;</span> <span class="attr">data-mcs-theme</span>=<span class="string">&#x27;minimal-dark&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>对滚动条进行微调，比如宽度</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">._mCS_1</span> <span class="selector-class">.mCSB_scrollTools</span> <span class="selector-class">.mCSB_dragger_bar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="音乐歌曲信息"><a href="#音乐歌曲信息" class="headerlink" title="音乐歌曲信息"></a>音乐歌曲信息</h2><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@d1dc1cbdebed6de15ad614c144c92d953ff33be4/2021/05/06/2ee3dbdaa803dc16d5a4d0ff094ff623.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content_right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song_info&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--a标签为背景--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript;;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;song_info_pic&quot;</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--img为前景即歌曲图片--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/lnj.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song_info_name&quot;</span>&gt;</span>歌曲名称:</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>告白气球<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song_info_singer&quot;</span>&gt;</span>歌手名:</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>周杰伦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song_info_ablum&quot;</span>&gt;</span>专辑名:</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>周杰伦的床边故事<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;song_lyric&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cur&quot;</span>&gt;</span>第一条歌词<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二条歌词<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content_right</span> <span class="selector-class">.song_info</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.song_info</span> <span class="selector-class">.song_info_pic</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="comment">/*背景图片*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/album_cover_player.png&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">201px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*歌曲图片宽高*/</span></span><br><span class="line"><span class="selector-class">.song_info_pic</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.song_info</span> <span class="selector-tag">div</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.song_info</span> <span class="selector-tag">div</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_right</span> <span class="selector-class">.song_lyric</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: gray;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*歌词*/</span></span><br><span class="line"><span class="selector-class">.content_right</span> <span class="selector-class">.song_lyric</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_right</span> <span class="selector-class">.song_lyric</span> <span class="selector-class">.cur</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#31c27c</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="底部结构"><a href="#底部结构" class="headerlink" title="底部结构"></a>底部结构</h1><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@c5dc53f0ea6cdb9c08d6eab3b4486e2dd610e4d9/2021/05/06/ea8cf67404b83bcc3e22cbe91159dc39.png"></p><h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><ul><li>进度条可大致分为四部分<ul><li>图标</li><li>使用 a 标签加背景图即可</li><li>歌曲进度条（因为此区域需包含进度条及歌曲名称、时间等信息。因此使用 div 作为布局）</li><li>音量部分（此部分包含图标及一个拖动条，因此也使用 div 作为盒子进行布局）</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer_in&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_pre&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_play&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_mode&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_fav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_down&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_comment&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_only&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="comment">/*精灵图*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/player.png&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*上一首*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_pre</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">19px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*播放*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_play</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">29px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*下一首*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_next</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">19px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">52px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*进度条*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_progress_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">670px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*循环*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_mode</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">205px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*喜欢*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_fav</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">96px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*下载*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_down</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*评论*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_comment</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*纯净*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_only</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">74px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">27px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">281px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*音量*/</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_voice_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="进度条"><a href="#进度条" class="headerlink" title="进度条"></a>进度条</h2><ul><li>歌曲部分进度条分歌曲信息和进度条，两个 span 元素即可</li><li>进度条使用一种通用的结构。三层结构分别表示背景、前景、圆。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_info&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_top&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_name&quot;</span>&gt;</span>告白气球/周杰伦<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_time&quot;</span>&gt;</span>00:00 / 03:35<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_bar&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_line&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_progress_dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>音量部分与歌曲信息的进度条同理，图标同样使用 a 标签与图片结合</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_info&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_bar&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_line&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;music_voice_dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 歌曲进度条 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_progress_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">670px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_info</span> <span class="selector-class">.music_progress_top</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#000000</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_top</span> <span class="selector-class">.music_progress_name</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_top</span> <span class="selector-class">.music_progress_name</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_top</span> <span class="selector-class">.music_progress_time</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music_progress_info</span> <span class="selector-class">.music_progress_bar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_bar</span> <span class="selector-class">.music_progress_line</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_progress_bar</span> <span class="selector-class">.music_progress_dot</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 音量控制 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_voice_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_voice_info</span> <span class="selector-class">.music_voice_icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">144px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_voice_info</span> <span class="selector-class">.music_voice_bar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_voice_bar</span> <span class="selector-class">.music_voice_line</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.music_voice_bar</span> <span class="selector-class">.music_voice_dot</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="底部微调完善"><a href="#底部微调完善" class="headerlink" title="底部微调完善"></a>底部微调完善</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_play</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: -<span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_progress_info</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_voice_info</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 播放按钮点击 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_play2</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 循环模式样式切换 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_mode2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">23px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">260px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_mode3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">19px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">74px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_mode4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">232px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 喜欢按钮 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_fav2</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">30px</span> -<span class="number">96px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 纯净模式 */</span></span><br><span class="line"><span class="selector-class">.footer_in</span> <span class="selector-class">.music_only2</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0px</span> -<span class="number">310px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="高斯模糊背景"><a href="#高斯模糊背景" class="headerlink" title="高斯模糊背景"></a>高斯模糊背景</h1><ul><li>通过切换不同音乐会根据音乐图片切换不同的模糊背景</li><li>模糊背景通过使用一张音乐图片加一个淡灰色的蒙版即可</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask_bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 背景设置 */</span></span><br><span class="line"><span class="selector-class">.mask_bg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/*音乐图片*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/lnj.jpg&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/*铺满整个屏幕*/</span></span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">2</span>;</span><br><span class="line">    <span class="comment">/*模糊效果*/</span></span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">100px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*遮罩*/</span></span><br><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="加载歌曲"><a href="#加载歌曲" class="headerlink" title="加载歌曲"></a>加载歌曲</h1><h2 id="读取JSON文件"><a href="#读取JSON文件" class="headerlink" title="读取JSON文件"></a>读取JSON文件</h2><ul><li>加载歌曲使用了 jQuery 得 <code>Ajax</code> 方法。通过一个<code>json</code> 文件获取歌曲的相关信息</li><li>在<code>source</code>文件夹下存放了歌曲MP3、图片、歌词等信息，并创建了一个<code>musiclist.json</code>文件存放路径和其他信息</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;告白气球&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;singer&quot;</span>: <span class="string">&quot;周杰伦&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;album&quot;</span>: <span class="string">&quot;周杰伦的床边故事&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;03:35&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_url&quot;</span>:<span class="string">&quot;./source/告白气球.mp3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cover&quot;</span>:<span class="string">&quot;./source/告白气球.jpg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_lrc&quot;</span>:<span class="string">&quot;./source/告白气球.txt&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;As long AS Love Me&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;singer&quot;</span>: <span class="string">&quot;Justin Bieber&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;album&quot;</span>: <span class="string">&quot;NOW That&#x27;s What I Call Music! 44&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;03:49&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_url&quot;</span>:<span class="string">&quot;./source/AslongASLoveMe.mp3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cover&quot;</span>: <span class="string">&quot;./source/AslongASLoveMe.jpg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_lrc&quot;</span>: <span class="string">&quot;./source/AslongASLoveMe.txt&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;Something Just Like This&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;singer&quot;</span>: <span class="string">&quot;Chainsmokers&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;album&quot;</span>: <span class="string">&quot;Something Just Like This&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;04:07&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_url&quot;</span>:<span class="string">&quot;./source/SomethingJustLikeThis.mp3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cover&quot;</span>:<span class="string">&quot;./source/SomethingJustLikeThis.jpg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;link_lrc&quot;</span>:<span class="string">&quot;./source/SomethingJustLikeThis.txt&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. 加载歌曲列表</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPlayerList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">&quot;./source/musiclist.json&quot;</span>,</span><br><span class="line">        dataType: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 3.1 遍历获取到的数据创建每一条音乐</span></span><br><span class="line">            <span class="keyword">var</span> $musicList = $(<span class="string">&quot;.content_list ul&quot;</span>);</span><br><span class="line">            $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//定义一个方法</span></span><br><span class="line">                <span class="keyword">var</span> $item = createMusicItem(index, ele);</span><br><span class="line">                <span class="comment">//动态生成的歌曲追加到ul后</span></span><br><span class="line">                $musicList.append($item);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        error: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用函数</span></span><br><span class="line">getPlayerList();</span><br><span class="line"><span class="comment">// 创建一条音乐的方法，可以把前面静态的HTML删掉，通过以下动态生成</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMusicItem</span>(<span class="params">index, music</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $item = $(</span><br><span class="line">        <span class="string">&#x27;&lt;li class=&quot;list_music&quot;&gt;&lt;div class=&quot;list_check &quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;/div&gt;&lt;div class=&quot;list_number&quot;&gt;&#x27;</span> +</span><br><span class="line">        (index + <span class="number">1</span>) +</span><br><span class="line">        <span class="string">&#x27;&lt;/div&gt;&lt;div class=&quot;list_name&quot;&gt;&#x27;</span> +</span><br><span class="line">        music.name +</span><br><span class="line">        <span class="string">&#x27;&lt;div class=&quot;list_menu&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;播放&quot;&gt;&lt;/a&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;添加&quot;&gt;&lt;/a&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;分享&quot;&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;list_singer&quot;&gt;&#x27;</span> +</span><br><span class="line">        music.singer +</span><br><span class="line">        <span class="string">&#x27;&lt;/div&gt;&lt;div class=&quot;list_time&quot;&gt;&lt;span&gt;&#x27;</span> +</span><br><span class="line">        music.time +</span><br><span class="line">        <span class="string">&#x27;&lt;/span&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;删除&quot;&gt;&lt;/a&gt;&lt;/div&gt;&lt;/li&gt;&#x27;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> $item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="完善事件"><a href="#完善事件" class="headerlink" title="完善事件"></a>完善事件</h2><ul><li>由于音乐列表改成了 js 动态创建，那么就会导致曾经绑定的事件失效，因此需要修改为事件委托方式</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 监听歌曲的移入移出事件</span></span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_music&quot;</span>, <span class="string">&quot;mouseenter&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//   显示子菜单</span></span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_menu&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time a&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//   隐藏时长</span></span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time span&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_music&quot;</span>, <span class="string">&quot;mouseleave&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//   隐藏子菜单</span></span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_menu&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time a&quot;</span>).stop().fadeOut(<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//   显示时长</span></span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.list_time span&quot;</span>).stop().fadeIn(<span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 监听复选框的点击事件</span></span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_check&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">this</span>).toggleClass(<span class="string">&quot;list_checked&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="播放图标切换"><a href="#播放图标切换" class="headerlink" title="播放图标切换"></a>播放图标切换</h2><ul><li>当播放一首歌曲时，另一首歌单的播放图标要发生改变</li><li>为此按钮添加事件同样需要以事件委托的方式。当点击后会发生两件事：<ul><li>将其他播放按钮改为暂停状态</li><li>将底部播放按钮修改</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. 添加子菜单播放按钮的监听</span></span><br><span class="line"><span class="keyword">var</span> $musicPlay = $(<span class="string">&quot;.music_play&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_menu_play&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 3.1 切换播放的图标</span></span><br><span class="line">    $(<span class="built_in">this</span>).toggleClass(<span class="string">&quot;list_menu_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.2 复原其他的播放图标</span></span><br><span class="line">    $(<span class="built_in">this</span>)</span><br><span class="line">        .parents(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">        .siblings()</span><br><span class="line">        .find(<span class="string">&quot;.list_menu_play&quot;</span>)</span><br><span class="line">        .removeClass(<span class="string">&quot;list_menu_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.3 同步底部播放按钮</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&quot;class&quot;</span>).indexOf(<span class="string">&quot;list_menu_play2&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 当前是播放状态</span></span><br><span class="line">        $musicPlay.addClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $musicPlay.removeClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="播放状态切换"><a href="#播放状态切换" class="headerlink" title="播放状态切换"></a>播放状态切换</h2><ul><li>要想控制单个，必须设置时对单个设置，而不是全部，因此 css 部分需要微调</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content_list</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_check</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_checked</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list_name</span> <span class="selector-class">.list_menu</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_time</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_time</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>将 css 修改完成后，接下来就是在 JavaScript 绑定的事件中进行修改了</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.3 同步底部播放按钮</span></span><br><span class="line"><span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&quot;class&quot;</span>).indexOf(<span class="string">&quot;list_menu_play2&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 当前是播放状态</span></span><br><span class="line">    $musicPlay.addClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 让文字高亮</span></span><br><span class="line">    $(<span class="built_in">this</span>).parents(<span class="string">&quot;.list_music&quot;</span>).find(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;#fff&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $musicPlay.removeClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 让文字不高亮</span></span><br><span class="line">    $(<span class="built_in">this</span>)</span><br><span class="line">        .parents(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">        .find(<span class="string">&quot;div&quot;</span>)</span><br><span class="line">        .css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.5)&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="序号动画"><a href="#序号动画" class="headerlink" title="序号动画"></a>序号动画</h2><ul><li>当点击播放一首曲目时，会隐藏序号显示播放动态图片。并做一些排他设置</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@4eaf7b04e4e9b6bdd686901d926f43713fe319a6/2021/05/06/006b2550a4baa83c6bb3a941efb36dae.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content_list</span> <span class="selector-class">.list_number2</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">    <span class="comment">/*添加播放动态图*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/wave.gif&quot;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.content_list&quot;</span>).delegate(<span class="string">&quot;.list_menu_play&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $item = $(<span class="built_in">this</span>).parents(<span class="string">&quot;.list_music&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.1 切换播放的图标</span></span><br><span class="line">    $(<span class="built_in">this</span>).toggleClass(<span class="string">&quot;list_menu_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.2 复原其他的播放图标</span></span><br><span class="line">    $(<span class="built_in">this</span>)</span><br><span class="line">        .parents(<span class="string">&quot;.list_music&quot;</span>)</span><br><span class="line">        .siblings()</span><br><span class="line">        .find(<span class="string">&quot;.list_menu_play&quot;</span>)</span><br><span class="line">        .removeClass(<span class="string">&quot;list_menu_play2&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.3 同步底部播放按钮</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&quot;class&quot;</span>).indexOf(<span class="string">&quot;list_menu_play2&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 当前是播放状态</span></span><br><span class="line">        $musicPlay.addClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">        <span class="comment">// 让文字高亮</span></span><br><span class="line">        $item.find(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;#fff&quot;</span>);</span><br><span class="line">        $item.siblings().find(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.5)&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $musicPlay.removeClass(<span class="string">&quot;music_play2&quot;</span>);</span><br><span class="line">        <span class="comment">// 让文字不高亮</span></span><br><span class="line">        $item.find(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.5)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.4 切换序号的状态</span></span><br><span class="line">    $item.find(<span class="string">&quot;.list_number&quot;</span>).toggleClass(<span class="string">&quot;list_number2&quot;</span>);</span><br><span class="line">    $item.siblings().find(<span class="string">&quot;.list_number&quot;</span>).removeClass(<span class="string">&quot;list_number2&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;布局结构&quot;&gt;&lt;a href=&quot;#布局结构&quot; class=&quot;headerlink&quot; title=&quot;布局结构&quot;&gt;&lt;/a&gt;布局结构&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/xiaoliblog/image@b7fb931</summary>
      
    
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
    <category term="前端实例" scheme="http://xiaoliblog.cn/categories/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/%E5%89%8D%E7%AB%AF%E5%AE%9E%E4%BE%8B/"/>
    
    
    <category term="项目案例" scheme="http://xiaoliblog.cn/tags/%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞jQuery动画操作</title>
    <link href="http://xiaoliblog.cn/page/jQuery06.html"/>
    <id>http://xiaoliblog.cn/page/jQuery06.html</id>
    <published>2021-05-05T04:03:48.289Z</published>
    <updated>2021-05-05T07:51:44.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内置动画"><a href="#内置动画" class="headerlink" title="内置动画"></a>内置动画</h1><ul><li>jQuery提供了两种增加动画特效的方法<ul><li>内置的动画方法</li><li>提供<code>animate()</code>方法自定义动画</li></ul></li></ul><h2 id="显示隐藏动画"><a href="#显示隐藏动画" class="headerlink" title="显示隐藏动画"></a>显示隐藏动画</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>show([speed,[easing],[fn]])</code></td><td align="center">显示匹配元素</td></tr><tr><td align="center"><code>hide([speed,[easing],[fn]])</code></td><td align="center">隐藏匹配元素</td></tr><tr><td align="center"><code>toggle([speed],[easing],[ fn])</code></td><td align="center">元素显示与隐藏切换</td></tr></tbody></table><ul><li><p><code>speed</code> ：动画的速度（持续时长），如1000（毫秒），或者预定的3种速度(slow、fast、normal)</p></li><li><p><code>easing</code>：切换效果，默认为swing，另有linear</p></li><li><p><code>fn</code>    ：动画完成时执行的函数</p></li><li><p><code>linear</code>方法提供了一个稳定的动画，以使得动画的每个步骤都是相同的(例如，如果要让一个元素以逐渐变化的方式穿过屏幕，每一步的距离和前一步都是相同的)。</p></li><li><p><code>swing</code>要更加动态一些，随着动画的开始变得更加快一些，然后再慢下来。swing是一个常用设置，因此，如果没有指定任何缓动，jQuery会使用swing方法。 </p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 编写jQuery相关代码</span></span><br><span class="line">   $(<span class="string">&quot;button&quot;</span>).eq(<span class="number">0</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// $(&quot;div&quot;).css(&quot;display&quot;, &quot;block&quot;);</span></span><br><span class="line">      <span class="comment">// 注意: 这里的时间是毫秒</span></span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).show(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="comment">// 作用: 动画执行完毕之后调用</span></span><br><span class="line">         alert(<span class="string">&quot;显示动画执行完毕&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">   $(<span class="string">&quot;button&quot;</span>).eq(<span class="number">1</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// $(&quot;div&quot;).css(&quot;display&quot;, &quot;none&quot;);</span></span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).hide(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         alert(<span class="string">&quot;隐藏动画执行完毕&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">   $(<span class="string">&quot;button&quot;</span>).eq(<span class="number">2</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).toggle(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         alert(<span class="string">&quot;切换动画执行完毕&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@143936297dfca5ae31804e8b5d2830e6f33f8fb6/2021/05/05/1414c64c9424b653999caa343588c0b9.png" width="50%"><h2 id="滑入滑出动画"><a href="#滑入滑出动画" class="headerlink" title="滑入滑出动画"></a>滑入滑出动画</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>slideDown([speed],[easing],[ fn])</code></td><td align="center">使用滑动效果，显示隐藏的被选元素（向下）</td></tr><tr><td align="center"><code>slideUp([speed,[easing],[ fn]])</code></td><td align="center">使用滑动效果，显示隐藏的被选元素（向上）</td></tr><tr><td align="center"><code>slideToggle([speed],[easing],[ fn])</code></td><td align="center">使用滑动效果，显示隐藏的被选元素（向下)</td></tr></tbody></table><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.panel</span>,<span class="selector-tag">p</span><span class="selector-class">.flip</span>&#123;</span><br><span class="line">   <span class="attribute">margin</span>:<span class="number">0px</span>;</span><br><span class="line">   <span class="attribute">padding</span>:<span class="number">5px</span>;</span><br><span class="line">   <span class="attribute">text-align</span>:center;</span><br><span class="line">   <span class="attribute">background</span>:<span class="number">#e5eecc</span>;</span><br><span class="line">   <span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#c3c3c3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.panel</span>&#123;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">120px</span>;</span><br><span class="line">   <span class="attribute">display</span>:none;  <span class="comment">/*如果此元素不隐藏，则不能滑动--视觉效果滑动的是flip，其实滑动的是。panel*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>W3School - 领先的 Web 技术教程站点<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>在 W3School，你可以找到你所需要的所有网站建设教程。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;flip&quot;</span>&gt;</span>请点击这里<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   $(<span class="string">&quot;.flip&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      $(<span class="string">&quot;.panel&quot;</span>).slideDown(<span class="string">&quot;slow&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/30/400422ae2228282d3fd51a3eb6bd290a.png"></p><h2 id="淡入淡出动画"><a href="#淡入淡出动画" class="headerlink" title="淡入淡出动画"></a>淡入淡出动画</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>fadeIn()</code></td><td align="center">淡入显示匹配元素</td></tr><tr><td align="center"><code>fadeOut()</code></td><td align="center">淡出隐藏匹配元素</td></tr><tr><td align="center"><code>fadeToggle()</code></td><td align="center">在fadeIn()和fadeOut()两种效果间的切换</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>演示带有不同参数的 fadeIn() 方法。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击这里，使三个矩形淡入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80px;height:80px;display:none;background-color:red;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80px;height:80px;display:none;background-color:green;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80px;height:80px;display:none;background-color:blue;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&quot;button&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">&quot;#div1&quot;</span>).fadeIn();</span><br><span class="line">    $(<span class="string">&quot;#div2&quot;</span>).fadeIn(<span class="string">&quot;slow&quot;</span>);</span><br><span class="line">    $(<span class="string">&quot;#div3&quot;</span>).fadeIn(<span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/30/609da2f27cd557c4025af99ecc3ac40f.png" width="50%"><h1 id="自定义动画"><a href="#自定义动画" class="headerlink" title="自定义动画"></a>自定义动画</h1><ul><li>除了内置动画，用户还可以根据开发需求自定义动画效果</li></ul><h2 id="animate"><a href="#animate" class="headerlink" title="animate"></a>animate</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).animate(obj,time,style,fn);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收四个参数</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).animate(</span><br><span class="line">   <span class="comment">//1. 接收一个对象, 可以在对象中修改属性</span></span><br><span class="line">   &#123;<span class="attr">width</span>:<span class="string">&#x27;100px&#x27;</span>,<span class="attr">height</span>:<span class="string">&#x27;100px&#x27;</span>&#125;,</span><br><span class="line">   <span class="comment">//2. 指定动画时长</span></span><br><span class="line">   <span class="number">3000</span>,</span><br><span class="line">   <span class="comment">//3. 指定动画节奏, 默认就是swing</span></span><br><span class="line">   <span class="string">&#x27;swing&#x27;</span>,</span><br><span class="line">   <span class="comment">//4. 动画执行完毕之后的回调函数</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;动画执行完毕&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>样式属性名称采用驼峰形式，如<code>maginLeft</code></li><li>无法识别颜色属性，如<code>color</code>、<code>bordercolor</code>、<code>backgroundcolor</code>，可以通过动画序列解决</li><li>鼓励通过<code>$.speed()</code>设置动画效果（时长和缓动）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> params=&#123;<span class="attr">width</span>:<span class="string">&#x27;100px&#x27;</span>,<span class="attr">height</span>:<span class="string">&#x27;100px&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> settings=$.speed(<span class="number">3000</span>,<span class="string">&#x27;swing&#x27;</span>);</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).animate(params,setting);<span class="string">``</span><span class="string">`</span></span><br></pre></td></tr></table></figure><h2 id="动画队列"><a href="#动画队列" class="headerlink" title="动画队列"></a>动画队列</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runQue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   div.show(<span class="string">&#x27;slow&#x27;</span>)</span><br><span class="line">   .animate(&#123;<span class="attr">left</span>: <span class="string">&#x27;+=200&#x27;</span>&#125;, <span class="number">2000</span>)   </span><br><span class="line">   .queue(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//弥补jquery不能识别颜色属性的缺陷</span></span><br><span class="line">      $(<span class="built_in">this</span>).css(<span class="string">&#x27;background&#x27;</span>, <span class="string">&#x27;green&#x27;</span>).dequeue();</span><br><span class="line">   &#125;)</span><br><span class="line">   .animate(&#123;<span class="attr">left</span>: <span class="string">&#x27;-=200&#x27;</span>&#125;, <span class="number">1500</span>)</span><br><span class="line">   <span class="comment">//构成一个永不停止的动画的</span></span><br><span class="line">   .slideUp(<span class="string">&#x27;normal&#x27;</span>, runQue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">方自定义动画相关方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>animate(params[,speed][,easing][,fn])</code></td><td align="center">用于创建自定义动画的函数</td></tr><tr><td align="center"><code>$.speed([speed][,settings])</code></td><td align="center">创建一个包含一组属性的对象用来定义自定义动画</td></tr><tr><td align="center"><code>queue([queueName])</code></td><td align="center">显示被选元素上要执行的函数队列（入队）</td></tr><tr><td align="center"><code>delay(speed[,queueName])</code></td><td align="center">设置一个延时来推迟执行队列中之后的项目</td></tr><tr><td align="center"><code>clearQueue([queueName])</code></td><td align="center">从尚未运行的队列中移除所有项目</td></tr><tr><td align="center"><code>dequeue([queueName])</code></td><td align="center">从队列移除下一个函数，然后执行函数（出队）</td></tr><tr><td align="center"><code>finish([queueName])</code></td><td align="center">停止当前正在运行的动画，删除所有排队的动画，并完成匹配元素所有的动画</td></tr><tr><td align="center"><code>top([clearQueue][,jumpToEnd])</code></td><td align="center">停止所有在指定元素上正在运行的动画</td></tr></tbody></table><ul><li><code>params</code>：表示一组包含动画最终属性值的集合</li><li><code>settings</code>：是easing与fn组成的一个对象集合</li><li><code>queueName</code>：表示队列名称，默认值为fx(标准效果队列)</li><li><code>clearQueue</code>：布尔类型，默认为false，用于规定是否停止被选元素所有加入队列的动画</li><li><code>jumpToEnd</code>：布尔类型，默认为false，用于规定是否立即完成当前的动画</li></ul><h1 id="动画案例"><a href="#动画案例" class="headerlink" title="动画案例"></a>动画案例</h1><h2 id="对联广告"><a href="#对联广告" class="headerlink" title="对联广告"></a>对联广告</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">   <span class="attribute">position</span>: fixed;</span><br><span class="line">   <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">   <span class="attribute">float</span>: right;</span><br><span class="line">   <span class="attribute">position</span>: fixed;</span><br><span class="line">   <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/left_ad.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/right_ad.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 1.监听网页的滚动</span></span><br><span class="line">   $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 1.1获取网页滚动的偏移位</span></span><br><span class="line">      <span class="keyword">var</span> offset = $(<span class="string">&quot;html,body&quot;</span>).scrollTop();</span><br><span class="line">      <span class="comment">// 1.2判断网页是否滚动到了指定的位置</span></span><br><span class="line">      <span class="function"><span class="title">if</span>(<span class="params">offset &gt;= <span class="number">500</span></span>)</span>&#123;</span><br><span class="line">         <span class="comment">// 1.3显示广告</span></span><br><span class="line">          $(<span class="string">&quot;img&quot;</span>).show(<span class="number">1000</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">// 1.4隐藏广告</span></span><br><span class="line">         $(<span class="string">&quot;img&quot;</span>).hide(<span class="number">1000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@25cbfed846d9d0bcf60592ad476741a491e2620d/2021/05/05/5fcaaf00c3578b5ab60dea14e0f314b4.png"></p><h2 id="折叠菜单"><a href="#折叠菜单" class="headerlink" title="折叠菜单"></a>折叠菜单</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">   <span class="comment">/*border: 1px solid #000;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">   <span class="attribute">border-bottom</span>: none;</span><br><span class="line">   <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">   <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">   <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">   <span class="attribute">border-bottom-right-radius</span>: <span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">border-bottom-left-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span>&#123;</span><br><span class="line">   <span class="attribute">border-top-right-radius</span>: <span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">border-top-left-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">span</span>&#123; </span><br><span class="line">   <span class="comment">/*箭头*/</span></span><br><span class="line">   <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;images/arrow_right.png&quot;</span>) no-repeat center center;</span><br><span class="line">   <span class="attribute">display</span>: inline-block;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">32px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">   <span class="attribute">position</span>: absolute;</span><br><span class="line">   <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">background</span>: skyblue;</span><br><span class="line">   <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">   <span class="attribute">background</span>:seagreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-class">.current</span>&gt;<span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 1.监听一级菜单的点击事件</span></span><br><span class="line">   $(<span class="string">&quot;.nav&gt;li&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 1.1拿到二级菜单</span></span><br><span class="line">      <span class="keyword">var</span> $sub = $(<span class="built_in">this</span>).children(<span class="string">&quot;.sub&quot;</span>);</span><br><span class="line">      <span class="comment">// 1.2让二级菜单展开</span></span><br><span class="line">      $sub.slideDown(<span class="number">1000</span>);</span><br><span class="line">      <span class="comment">// 1.3拿到所有非当前的二级菜单</span></span><br><span class="line">      <span class="keyword">var</span> otherSub = $(<span class="built_in">this</span>).siblings().children(<span class="string">&quot;.sub&quot;</span>);</span><br><span class="line">      <span class="comment">// 1.4让所有非当前的二级菜单收起</span></span><br><span class="line">      otherSub.slideUp(<span class="number">1000</span>);</span><br><span class="line">      <span class="comment">// 1.5让被点击的一级菜单箭头旋转</span></span><br><span class="line">      $(<span class="built_in">this</span>).addClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">       <span class="comment">// 1.6让所有非被点击的一级菜单箭头还原</span></span><br><span class="line">       $(<span class="built_in">this</span>).siblings().removeClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0425d7be588460c8963f74437f1942c2ab048b35/2021/05/05/c3f5f000ec97f48202ea9b1f96db8629.png" width="50%"><h2 id="下拉菜单"><a href="#下拉菜单" class="headerlink" title="下拉菜单"></a>下拉菜单</h2><ul><li>在jQuery中如果需要执行动画，建议在执行动画之前先调用<code>stop</code>方法，然后再执行动画</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">background</span>: skyblue;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">text-align</span>: center;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>一级菜单</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>二级菜单<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">   在jQuery中如果需要执行动画, 建议在执行动画之前先调用stop方法,然后再执行动画</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="comment">// 1.监听一级菜单的移入事件</span></span><br><span class="line">   $(<span class="string">&quot;.nav&gt;li&quot;</span>).mouseenter(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 1.1拿到二级菜单</span></span><br><span class="line">      <span class="keyword">var</span> $sub = $(<span class="built_in">this</span>).children(<span class="string">&quot;.sub&quot;</span>);</span><br><span class="line">      <span class="comment">// 停止当前正在运行的动画：</span></span><br><span class="line">      $sub.stop();</span><br><span class="line">      <span class="comment">// 1.2让二级菜单展开</span></span><br><span class="line">      $sub.slideDown(<span class="number">1000</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="comment">// 2.监听一级菜单的移出事件</span></span><br><span class="line">   $(<span class="string">&quot;.nav&gt;li&quot;</span>).mouseleave(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 1.1拿到二级菜单</span></span><br><span class="line">      <span class="keyword">var</span> $sub = $(<span class="built_in">this</span>).children(<span class="string">&quot;.sub&quot;</span>);</span><br><span class="line">      <span class="comment">// 停止当前正在运行的动画：</span></span><br><span class="line">      $sub.stop();</span><br><span class="line">      <span class="comment">// 1.2让二级菜单收起</span></span><br><span class="line">      $sub.slideUp(<span class="number">1000</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1c9d616c4dbffe0e63b2483486fdfd0c1de3be3f/2021/05/05/96774ed36af0e847989dc0cf9ebf17dc.png"></p><h2 id="弹窗广告"><a href="#弹窗广告" class="headerlink" title="弹窗广告"></a>弹窗广告</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ad</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>: fixed;</span><br><span class="line">   <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ad</span>&gt;<span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: inline-block;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">   <span class="attribute">position</span>: absolute;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ad&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/ad-pic.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 1.监听span的点击事件</span></span><br><span class="line">   $(<span class="string">&quot;span&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&quot;.ad&quot;</span>).remove();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 2.执行广告动画</span></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">    $(&quot;.ad&quot;).slideDown(1000, function () &#123;</span></span><br><span class="line"><span class="comment">      $(&quot;.ad&quot;).fadeOut(1000, function () &#123;</span></span><br><span class="line"><span class="comment">         $(&quot;.ad&quot;).fadeIn(1000);</span></span><br><span class="line"><span class="comment">      &#125;);</span></span><br><span class="line"><span class="comment">   &#125;);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   $(<span class="string">&quot;.ad&quot;</span>).stop().slideDown(<span class="number">1000</span>).fadeOut(<span class="number">1000</span>).fadeIn(<span class="number">1000</span>);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@01d9bfdf809b2511817d4b7af3021477ed78d31e/2021/05/05/50a19349b7014f7131f48ab893ae41ca.png"></p><h2 id="无缝轮播"><a href="#无缝轮播" class="headerlink" title="无缝轮播"></a>无缝轮播</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.banner</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:relative;</span><br><span class="line">   <span class="attribute">overflow</span>:hidden;</span><br><span class="line">   <span class="attribute">margin</span>:<span class="number">100px</span> auto;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">958px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">   <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">   <span class="attribute">list-style</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hot</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:absolute;</span><br><span class="line">   <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">   <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hot</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">float</span>:left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dot</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:absolute;</span><br><span class="line">   <span class="attribute">bottom</span>:<span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">text-align</span>:center;</span><br><span class="line">   <span class="attribute">font-size</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dot</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>:inline-block;</span><br><span class="line">   <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">15px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">15px</span>;</span><br><span class="line">   <span class="attribute">border-radius</span>:<span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">145</span>,<span class="number">144</span>,<span class="number">144</span>,.<span class="number">5</span>);</span><br><span class="line">   <span class="attribute">cursor</span>:pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dot</span> <span class="selector-class">.on</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>:<span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左右翻页箭头样式 */</span></span><br><span class="line"><span class="selector-class">.arrow</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>:block;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">6</span>);</span><br><span class="line">   <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">   <span class="attribute">text-align</span>:center;</span><br><span class="line">   <span class="attribute">font-size</span>:<span class="number">40px</span>;</span><br><span class="line">   <span class="attribute">line-height</span>:<span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">cursor</span>:pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span> <span class="selector-class">.prev</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:absolute;</span><br><span class="line">   <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">   <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">   <span class="attribute">margin-top</span>:-<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span> <span class="selector-class">.next</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:absolute;</span><br><span class="line">   <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">   <span class="attribute">right</span>:<span class="number">0</span>;</span><br><span class="line">   <span class="attribute">margin-top</span>:-<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--轮播图片--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;hot&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.jpg&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4.jpg&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/5.jpg&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--小圆点--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;on&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 左右翻页箭头--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;prev&quot;</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;next&quot;</span>&gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.初始工作</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;           <span class="comment">// 当前显示的图片索引</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;    <span class="comment">// 定时器</span></span><br><span class="line"><span class="keyword">var</span> delay = <span class="number">1000</span>;    <span class="comment">// 图片自动切换的间隔时间</span></span><br><span class="line"><span class="keyword">var</span> width = <span class="number">958</span>;     <span class="comment">// 每张图片的宽度</span></span><br><span class="line"><span class="keyword">var</span> speed = <span class="number">400</span>;     <span class="comment">// 动画时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制列表中的第一个图片，追加到列表最后，设置ul的宽度为图片张数 * 图片宽度</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> firstimg = $(<span class="string">&#x27;.hot li&#x27;</span>).first().clone();</span><br><span class="line">$(<span class="string">&#x27;.hot&#x27;</span>).append(firstimg).width($(<span class="string">&#x27;.hot li&#x27;</span>).length * width);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置周期计时器，实现图片自动切换</span></span><br><span class="line">timer = <span class="built_in">setInterval</span>(imgChange, delay);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 自动切换图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">imgChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   ++i;</span><br><span class="line">   isCrack();  <span class="comment">//实现无缝轮播</span></span><br><span class="line">   dotChange();  <span class="comment">//自动切换对应的圆点样式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isCrack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (i == $(<span class="string">&#x27;.hot li&#x27;</span>).length) &#123;</span><br><span class="line">      i = <span class="number">1</span>;</span><br><span class="line">      $(<span class="string">&#x27;.hot&#x27;</span>).css(&#123;<span class="attr">left</span>: <span class="number">0</span>&#125;);</span><br><span class="line">   &#125;</span><br><span class="line">   $(<span class="string">&#x27;.hot&#x27;</span>).stop().animate(&#123;<span class="attr">left</span>: -i * width&#125;, speed);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.自动切换对应的圆点</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dotChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (i == $(<span class="string">&#x27;.hot li&#x27;</span>).length - <span class="number">1</span>) &#123;</span><br><span class="line">      $(<span class="string">&#x27;.dot li&#x27;</span>).eq(<span class="number">0</span>).addClass(<span class="string">&#x27;on&#x27;</span>).</span><br><span class="line">         siblings().removeClass(<span class="string">&#x27;on&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">&#x27;.dot li&#x27;</span>).eq(i).addClass(<span class="string">&#x27;on&#x27;</span>).</span><br><span class="line">         siblings().removeClass(<span class="string">&#x27;on&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 设置左右切换的箭头显示和隐藏</span></span><br><span class="line">$(<span class="string">&#x27;.banner&#x27;</span>).hover(</span><br><span class="line">   <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&#x27;.arrow&#x27;</span>).show();</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&#x27;.arrow&#x27;</span>).hide();</span><br><span class="line">&#125;);</span><br><span class="line">   </span><br><span class="line"><span class="comment">// 鼠标移入，暂停自动播放，移出，开始自动播放</span></span><br><span class="line">$(<span class="string">&#x27;.banner&#x27;</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   timer = <span class="built_in">setInterval</span>(imgChange, delay);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.设置右箭头的事件</span></span><br><span class="line">$(<span class="string">&#x27;.next&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   imgChange()</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.设置左箭头的事件</span></span><br><span class="line">$(<span class="string">&#x27;.prev&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   --i;</span><br><span class="line">   <span class="keyword">if</span> (i == -<span class="number">1</span>) &#123;</span><br><span class="line">      i = $(<span class="string">&#x27;.hot li&#x27;</span>).length - <span class="number">2</span>;</span><br><span class="line">      $(<span class="string">&#x27;.hot&#x27;</span>).css(&#123;<span class="attr">left</span>: -($(<span class="string">&#x27;.hot li&#x27;</span>).length - <span class="number">1</span>) * width&#125;);</span><br><span class="line">   &#125;</span><br><span class="line">   $(<span class="string">&#x27;.hot&#x27;</span>).stop().animate(&#123;<span class="attr">left</span>: -i * width&#125;, speed);</span><br><span class="line">      dotChange();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/30/96517f17aa403959789e9ce6cd54a26c.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;内置动画&quot;&gt;&lt;a href=&quot;#内置动画&quot; class=&quot;headerlink&quot; title=&quot;内置动画&quot;&gt;&lt;/a&gt;内置动画&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;jQuery提供了两种增加动画特效的方法&lt;ul&gt;
&lt;li&gt;内置的动画方法&lt;/li&gt;
&lt;li&gt;提供&lt;code&gt;an</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞jQuery事件操作</title>
    <link href="http://xiaoliblog.cn/page/jQuery05.html"/>
    <id>http://xiaoliblog.cn/page/jQuery05.html</id>
    <published>2021-05-04T14:41:21.095Z</published>
    <updated>2021-05-05T06:46:27.700Z</updated>
    
    <content type="html"><![CDATA[<h1 id="事件操作"><a href="#事件操作" class="headerlink" title="事件操作"></a>事件操作</h1><ul><li>标签中通过属性设置事件，每个属性都由一个<code>on</code>和事件名组成。例如，点击事件对应的属性为<code>onclick</code>。</li><li>在jQuery中则可直接使用其提供的与事件类型同名的方法。例如，点击事件对应的方法为<code>click()</code>。</li><li>这些事件方法允许重复绑定处理程序，按照绑定顺序依次执行。</li></ul><h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><ul><li>jQuery中有两种绑定事件方式<ul><li><code>eventName(fn);</code>：编码效率高，部分事件jQuery没有实现，所以不能添加</li><li><code>on(eventName,fn);</code>：编码效率较低，所以JS事件都可以添加</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//第一种方法，推荐使用</span></span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">//第二种方法</span></span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><div class="note success simple"><p><strong>注册多个相同事件或者不同类型的事件不会覆盖</strong></p></div><h2 id="事件解绑"><a href="#事件解绑" class="headerlink" title="事件解绑"></a>事件解绑</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解绑匹配元素的所有事件</span></span><br><span class="line">$(selector).off();</span><br><span class="line"><span class="comment">// 解绑匹配元素的所有click事件,参数为事件类型</span></span><br><span class="line">$(selector).off(<span class="string">&quot;click&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;click&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;mouseenter&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).click(test1);</span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).mouseenter(test2);</span><br><span class="line">   <span class="comment">// 解绑匹配元素的所有事件</span></span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).off();</span><br><span class="line">   <span class="comment">// 解绑匹配元素的所有click事件</span></span><br><span class="line">   $(<span class="string">&#x27;button&#x27;</span>).off(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h2><ul><li>事件冒泡就是事件<strong>从下级往上级传递</strong>的过程，比如如下HTML结构，给父盒子和子盒子都注册点击事件，单独点击子盒子也会触发父盒子的点击事件</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>阻止事件冒泡有如下两种方法，注意是在下级即子盒子设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;son&quot;</span>);</span><br><span class="line">   <span class="comment">//阻止事件冒泡方式1</span></span><br><span class="line">   <span class="comment">//return false;</span></span><br><span class="line">   <span class="comment">//阻止事件冒泡方式2</span></span><br><span class="line">   event.stopPropagation();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="默认行为"><a href="#默认行为" class="headerlink" title="默认行为"></a>默认行为</h2><ul><li>当你点击一个超链接或者提交按钮时，没有进行任何事件监听其默认会进行跳转，这就是默认行为</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://www.taobao.com&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在有些情况下不使用默认行为，比如对a标签设置不使用默认行为，而是只弹一注册框不进行跳转</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;a&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;弹出注册框&quot;</span>);</span><br><span class="line">   <span class="comment">//第一种方式</span></span><br><span class="line">   <span class="comment">// return false;</span></span><br><span class="line">   <span class="comment">//第二种方式</span></span><br><span class="line">   event.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="自动触发"><a href="#自动触发" class="headerlink" title="自动触发"></a>自动触发</h2><ul><li><code>trigger</code>： 如果利用trigger自动触发事件，会触发事件冒泡，不会阻止事件冒泡</li><li><code>triggerHandler</code>： 如果利用triggerHandler自动触发事件，不会触发事件冒泡，会阻止事件冒泡</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;son&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).trigger(<span class="string">&quot;click&quot;</span>); <span class="comment">//不会阻止事件冒泡</span></span><br><span class="line">$(<span class="string">&quot;.sonr&quot;</span>).triggerHandler(<span class="string">&quot;click&quot;</span>); <span class="comment">//会阻止事件冒泡</span></span><br></pre></td></tr></table></figure><h3 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h3><ul><li>想要自定义事件, 必须满足两个条件<ul><li>事件必须是通过<code>on</code>绑定的</li><li>事件必须通过<code>trigger</code>或者<code>triggerHandler</code>来触发</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).on(<span class="string">&quot;myClick&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;son&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).triggerHandler(<span class="string">&quot;myClick&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="事件命名空间"><a href="#事件命名空间" class="headerlink" title="事件命名空间"></a>事件命名空间</h3><ul><li>项目都是多人协作，当多个人操作同一个DOM元素时，给同一个元素添加同一个事件时，就需要通过命名空间来区分是谁添加的事件</li><li>想要事件的命名空间有效，必须满足两个条件<ul><li>事件必须是通过<code>on</code>绑定的</li><li>事件必须通过<code>trigger</code>或者<code>triggerHandler</code>来触发</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过eventName.命名空间 来标识</span></span><br><span class="line"><span class="comment">//张三绑定的事件</span></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).on(<span class="string">&quot;click.zs&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;click1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//李四绑定的事件</span></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).on(<span class="string">&quot;click.ls&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;click2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// $(&quot;.son&quot;).trigger(&quot;click.zs&quot;);</span></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).trigger(<span class="string">&quot;click.ls&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>事件命名空间面试题<ul><li>利用<code>trigger</code>触发<strong>子元素带命名空间</strong>的事件， 那么父元素带相同命名空间的事件也会被触发， 而父元素没有命名空间的事件不会被触发</li><li>利用<code>trigger</code>触发<strong>子元素不带命名空间</strong>的事件，那么子元素所有相同类型的事件和父元素所有相同类型的事件都会被触发</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   $(<span class="string">&quot;.father&quot;</span>).on(<span class="string">&quot;click.ls&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;father click1&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">   $(<span class="string">&quot;.father&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;father click2&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">   $(<span class="string">&quot;.son&quot;</span>).on(<span class="string">&quot;click.ls&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;son click1&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">           </span><br><span class="line">   <span class="comment">// $(&quot;.son&quot;).trigger(&quot;click.ls&quot;);</span></span><br><span class="line">   $(<span class="string">&quot;.son&quot;</span>).trigger(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><ul><li>事件委托就是请别人帮忙做事情， 然后将做完的结果反馈给我们</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是第1个li<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是第2个li<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是第3个li<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>新增一个li<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   $(<span class="string">&quot;button&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&quot;ul&quot;</span>).append(<span class="string">&quot;&lt;li&gt;我是新增的li&lt;/li&gt;&quot;</span>);</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">   在jQuery中,如果通过核心函数找到的元素不止一个, 那么在添加事件的时候,jQuery会遍历所有找到的元素,给所有找到的元素添加事件</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="comment">//此时会找到三个li</span></span><br><span class="line">   $(<span class="string">&quot;ul&gt;li&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log($(<span class="built_in">this</span>).html());</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>以上代码，当我们点击<code>li</code>标签时，会在控制台打印出内容，但却不能打印出通过jQuery入口函数创建的<code>li</code>标签内容</li><li>这是因为jQuery入口函数是在所以DOM元素加载完毕才执行，加载完毕后只有原生的三个<code>li</code>标签，所以只给三个<code>li</code>标签添加了点击事件，新增的标签并没有添加点击事件。那如何使新添加的也绑定事件呢？这就需要用到事件委托机制</li><li>我们可以让<code>ul</code>帮<code>li</code>监听<code>click</code>事件。之所以能够监听，是因为入口函数执行的时候<code>ul</code>就已经存在了，所以能够添加事件。之所以<code>this</code>是<code>li</code>，是因为我们点击的是<code>li</code>，而<code>li</code>没有<code>click</code>事件，所以事件冒泡传递给了<code>ul</code>，<code>ul</code>响应了事件， 既然事件是从<code>li</code>传递过来的，所以<code>ul</code>必然指定<code>this</code>是谁</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//li的点击事件委托给ul监听</span></span><br><span class="line">$(<span class="string">&quot;ul&quot;</span>).delegate(<span class="string">&quot;li&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log($(<span class="built_in">this</span>).html());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="事件类型"><a href="#事件类型" class="headerlink" title="事件类型"></a>事件类型</h1><h2 id="表单事件"><a href="#表单事件" class="headerlink" title="表单事件"></a>表单事件</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>blur()</code></td><td align="center">当元素失去焦点时触发</td></tr><tr><td align="center"><code>focus()</code></td><td align="center">当元素获得焦点时触发</td></tr><tr><td align="center"><code>change()</code></td><td align="center">当元素的值发生改变时触发</td></tr><tr><td align="center"><code>select()</code></td><td align="center">当文本框（包括&lt;input&gt;和&lt;textarea&gt;）中的文本被选中时触发</td></tr><tr><td align="center"><code>submit()</code></td><td align="center">表单提交时触发</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>用户名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>电子邮箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>手机号码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tel&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;input[type=text]&#x27;</span>).focus(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> tips = $(<span class="string">&#x27;&lt;span&gt;&lt;/span&gt;&#x27;</span>);</span><br><span class="line">   tips.html(<span class="string">&#x27;请按要求输入&#x27;</span>);</span><br><span class="line">   $(<span class="string">&#x27;input:focus&#x27;</span>).after(tips);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&#x27;input[type=text]&#x27;</span>).blur(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   $(<span class="built_in">this</span>).next().remove();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/84ff5255a8425a2dd3860eb8d6f253cf.png"></p><h2 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>keydown()</code></td><td align="center">键盘按键被按下时触发</td></tr><tr><td align="center"><code>keyup()</code></td><td align="center">键盘按键弹起时触发</td></tr><tr><td align="center"><code>keypress()</code></td><td align="center">键盘按键（Shift等非字符键除外）被按下时触发</td></tr></tbody></table><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.boxes</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">background-color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;boxes&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).keydown(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//获取按键码(37、38、39、40)</span></span><br><span class="line">   <span class="keyword">var</span> opt = event.which;</span><br><span class="line">   <span class="keyword">var</span> item = $(<span class="string">&#x27;.boxes&#x27;</span>);</span><br><span class="line">   <span class="comment">//获取元素距离文档的位置</span></span><br><span class="line">   <span class="keyword">var</span> left = item.offset().left;</span><br><span class="line">   <span class="keyword">var</span> top = item.offset().top;;</span><br><span class="line">   <span class="built_in">console</span>.log(opt);</span><br><span class="line">   <span class="function"><span class="title">switch</span>(<span class="params">opt</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">37</span>:item.offset(&#123;<span class="attr">left</span>:left-<span class="number">1</span>,<span class="attr">top</span>:top&#125;);<span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">38</span>:item.offset(&#123;<span class="attr">left</span>:left,<span class="attr">top</span>:top-<span class="number">1</span>&#125;);<span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">39</span>:item.offset(&#123;<span class="attr">left</span>:left+<span class="number">1</span>,<span class="attr">top</span>:top&#125;);<span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">40</span>:item.offset(&#123;<span class="attr">left</span>:left,<span class="attr">top</span>:top+<span class="number">1</span>&#125;);<span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/3355318cfc0459182e0575a1c5acd4c6.png"></p><h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>mouseover()</code></td><td align="center">当鼠标移入对象时触发</td></tr><tr><td align="center"><code>mouseout()</code></td><td align="center">鼠标从元素上离开时触发</td></tr><tr><td align="center"><code> mouseenter()</code></td><td align="center">当鼠标移入对象时触发</td></tr><tr><td align="center"><code>mouseleave()</code></td><td align="center">鼠标从元素上离开时触发</td></tr><tr><td align="center"><code>hover()</code></td><td align="center">监听移入移出</td></tr><tr><td align="center"><code>click()</code></td><td align="center">当单击元素时触发</td></tr><tr><td align="center"><code>dbclick()</code></td><td align="center">当双击元素时触发</td></tr><tr><td align="center"><code>mousedown()</code></td><td align="center">当鼠标指针移动到元素上方，并按下鼠标按键时触发</td></tr><tr><td align="center"><code>mouseup()</code></td><td align="center">当在元素上放松鼠标按钮时，会被触发</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//鼠标移入时，为本文添加背景颜色；</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).mouseover(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   $(<span class="built_in">this</span>).css(<span class="string">&#x27;background-color&#x27;</span>,<span class="string">&#x27;green&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//鼠标移出时，为文本移除背景颜色。</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).mouseout(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   $(<span class="built_in">this</span>).css(<span class="string">&#x27;background-color&#x27;</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//鼠标单击时，打印单击位置。</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(event.pageY);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>mouseover/mouseout</code>事件, 子元素被移入移出也会触发父元素的事件</li><li><code>mouseenter/mouseleave</code>事件, 子元素被移入移出不会触发父元素的事件，推荐使用</li><li><code>hover()</code>可以同时监听移入和移出事件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;div&quot;</span>).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;father被移入了&quot;</span>);</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;father被移出了&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="页面加载事件"><a href="#页面加载事件" class="headerlink" title="页面加载事件"></a>页面加载事件</h2><table><thead><tr><th align="center">类比选项</th><th align="center">window.onload</th><th align="center">$(document).ready()</th></tr></thead><tbody><tr><td align="center">执行时机</td><td align="center">必须等待网页中的所有内容加载完成后(包括外部元素，如图片)才能执行</td><td align="center">网页中的所有DOM结构绘制完成后就执行（可能关联内容并未加载完成）</td></tr><tr><td align="center">编写个数</td><td align="center">不能同时编写多个</td><td align="center">能够同时编写多个</td></tr><tr><td align="center">简化写法</td><td align="center">无</td><td align="center">$()</td></tr></tbody></table><ul><li>jQuery中的页面加载事件方法有3种语法形式，具体如下。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  &#125;);     <span class="comment">// 语法方式1</span></span><br><span class="line">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  &#125;);     <span class="comment">// 语法方式2</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  &#125;);     <span class="comment">// 语法方式3</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;欢迎光临&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/2776a6a8b120b78267a95c9aa433c8f5.png" width="50%"><h2 id="事件绑定与切换"><a href="#事件绑定与切换" class="headerlink" title="事件绑定与切换"></a>事件绑定与切换</h2><table><thead><tr><th align="center">方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>on(events,function)</code></td><td align="center">在匹配元素上绑定一个或多个事件处理函数</td></tr><tr><td align="center"><code>off(events)</code></td><td align="center">在匹配元素上移除一个或多个事件处理函数</td></tr><tr><td align="center"><code>one(events,function)</code></td><td align="center">为每个匹配元素的事件绑定一次性的处理函数</td></tr><tr><td align="center"><code>hover([over,]out)</code></td><td align="center">元素鼠标移入与移出事件切换</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;触发点击事件&#x27;</span>);</span><br><span class="line">   $(<span class="string">&#x27;div&#x27;</span>).off(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).on(&#123;</span><br><span class="line">   mouseover:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;鼠标移入&#x27;</span>);</span><br><span class="line">   &#125;,</span><br><span class="line">   mouseout:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;鼠标移出&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/67f8db8f8d37d276874a7977b13105aa.png"></p><h1 id="事件案例"><a href="#事件案例" class="headerlink" title="事件案例"></a>事件案例</h1><h2 id="事件委托案例"><a href="#事件委托案例" class="headerlink" title="事件委托案例"></a>事件委托案例</h2><ul><li>点击登录链接，动态产生一个登录界面（一张图片），给其添加事件取消登录界面</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*黑色蒙版*/</span></span><br><span class="line"><span class="selector-class">.mask</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100</span>v%;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>);</span><br><span class="line">   <span class="attribute">position</span>: fixed;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*登录盒子*/</span></span><br><span class="line"><span class="selector-class">.login</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">522px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">290px</span>;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">   <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定位到关闭x*/</span></span><br><span class="line"><span class="selector-class">.login</span>&gt;<span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="comment">/*background: red;*/</span></span><br><span class="line">   <span class="attribute">position</span>: absolute;</span><br><span class="line">   <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>点击登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 编写jQuery相关代码</span></span><br><span class="line">   $(<span class="string">&quot;a&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="comment">//登录盒子HTML结构</span></span><br><span class="line">      <span class="keyword">var</span> $mask = $(<span class="string">&quot;&lt;div class=\&quot;mask\&quot;&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;    &lt;div class=\&quot;login\&quot;&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;        &lt;img src=\&quot;login.png\&quot; alt=\&quot;\&quot;&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;        &lt;span&gt;&lt;/span&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;    &lt;/div&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;/div&gt;&quot;</span>);</span><br><span class="line">      <span class="comment">// 添加蒙版</span></span><br><span class="line">      $(<span class="string">&quot;body&quot;</span>).append($mask);</span><br><span class="line">      <span class="comment">// 由于登录界面是动态产生的无法绑定事件，所以需要用事件委托，找一个本来就存在的委托给它</span></span><br><span class="line">      $(<span class="string">&quot;body&quot;</span>).delegate(<span class="string">&quot;.login&gt;span&quot;</span>, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="comment">// 移除蒙版</span></span><br><span class="line">         $mask.remove();</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//取消默认行为</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f81c23d82472a3ff87704630ce67226062ce6118/2021/05/05/75fb054078a2792312dae6af017d8039.png"></p><h2 id="电影排行榜"><a href="#电影排行榜" class="headerlink" title="电影排行榜"></a>电影排行榜</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">450px</span>;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">   <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span>&gt;<span class="selector-tag">h1</span>&#123;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">   <span class="attribute">color</span>: deeppink;</span><br><span class="line">   <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">   <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(-n+3)</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">background</span>: deeppink;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: inline-block;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">   <span class="attribute">text-align</span>: center;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">   <span class="attribute">overflow</span>: hidden;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&gt;<span class="selector-tag">img</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&gt;<span class="selector-tag">p</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">   <span class="attribute">float</span>: right;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.current</span> <span class="selector-class">.content</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">div class=&quot;box&quot;&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>电影排行榜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>6<span class="tag">&lt;/<span class="name">span</span>&gt;</span>电影名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/zl.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>简介：故事发生在非洲附近的大海上，主人公冷锋（吴京 饰）遭遇人生滑铁卢，被“开除军籍”，本想漂泊一生的他，正当他打算这么做的时候，一场突如其来的意外打破了他的计划，突然被卷入了一场<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 编写jQuery相关代码</span></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">   // 1.监听li的移入事件</span></span><br><span class="line"><span class="comment">   $(&quot;li&quot;).mouseenter(function () &#123;</span></span><br><span class="line"><span class="comment">      $(this).addClass(&quot;current&quot;);</span></span><br><span class="line"><span class="comment">   &#125;);</span></span><br><span class="line"><span class="comment">   // 2.监听li的移出事件</span></span><br><span class="line"><span class="comment">   $(&quot;li&quot;).mouseleave(function () &#123;</span></span><br><span class="line"><span class="comment">      $(this).removeClass(&quot;current&quot;);</span></span><br><span class="line"><span class="comment">   &#125;);</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   $(<span class="string">&quot;li&quot;</span>).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="built_in">this</span>).addClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">   &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="built_in">this</span>).removeClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@d0e91cd41ed6cbca4237bea67c88d7bab19d3360/2021/05/05/e0802141e2e9a33295cd5f2406bba051.png" width="50%"><h2 id="Tab选项卡"><a href="#Tab选项卡" class="headerlink" title="Tab选项卡"></a>Tab选项卡</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">440px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">198px</span>;</span><br><span class="line">   <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">background</span>: orange;</span><br><span class="line">   <span class="attribute">text-align</span>: center;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span>&gt;<span class="selector-class">.current</span>&#123;</span><br><span class="line">   <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&gt;<span class="selector-class">.show</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>利用<code>index()</code>索引</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 1.监听选项卡的移入事件</span></span><br><span class="line">   $(<span class="string">&quot;.nav&gt;li&quot;</span>).mouseenter(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 1.1修改被移入选项卡的背景颜色</span></span><br><span class="line">      $(<span class="built_in">this</span>).addClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">      <span class="comment">// 1.2还原其它兄弟选项卡的背景颜色</span></span><br><span class="line">      $(<span class="built_in">this</span>).siblings().removeClass(<span class="string">&quot;current&quot;</span>);</span><br><span class="line">      <span class="comment">// 1.3获取当前移出选项卡的索引</span></span><br><span class="line">      <span class="keyword">var</span> index = $(<span class="built_in">this</span>).index();</span><br><span class="line">      <span class="comment">// 1.4根据索引找到对应的图片</span></span><br><span class="line">      <span class="keyword">var</span> $li = $(<span class="string">&quot;.content&gt;li&quot;</span>).eq(index);</span><br><span class="line">      <span class="comment">// 1.5隐藏非当前的其它图片</span></span><br><span class="line">      $li.siblings().removeClass(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">      <span class="comment">// 1.6显示对应的图片</span></span><br><span class="line">      $li.addClass(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@1bf6d610dcd05c4996b349b9fabafac1a2193f69/2021/05/05/2dd89b2deafcfa515f229acd5796b535.png"></p><h2 id="手风琴效果"><a href="#手风琴效果" class="headerlink" title="手风琴效果"></a>手风琴效果</h2><ul><li><p>页面组成<br>  5张图片<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/b121fdc5918a1143cbcf60403f0c6bed.png"></p></li><li><p>动态效果：<br>  鼠标移入图片时，该图片完整显示；鼠标移出时，该图片回复默认大小。overflow:hidden多余隐藏。<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/1cc77ff4965b51597b5e50718b693c10.png"></p></li><li><p>图片素材</p></li></ul><p>1.jpg<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/92f6b154568bc50a88a2bb755847c57f.png"><br>2.jpg<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/470f55c119b2c75fc21c898ee7fd470f.png"><br>3.jpg<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/744f096e12d235ff3feaaae3758cd653.png"><br>4.jpg<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/5547663bea41be8ae50f6bcd4e152e26.png"><br>5.jpg<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/046dc5f515f8200717a5f6062f617146.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>手风琴效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">ul</span>&#123;<span class="attribute">list-style</span>:none;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span>&#123;<span class="attribute">width</span>:<span class="number">1200px</span>;<span class="attribute">height</span>:<span class="number">400px</span>;<span class="attribute">margin</span>:<span class="number">50px</span> auto;<span class="attribute">overflow</span>:hidden&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span> <span class="selector-tag">li</span>&#123;<span class="attribute">width</span>:<span class="number">240px</span>;<span class="attribute">height</span>:<span class="number">400px</span>;<span class="attribute">float</span>:left&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.4.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/5.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;div&gt;ul&gt;li&#x27;</span>).on(&#123;</span></span><br><span class="line"><span class="javascript">            mouseover:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">              $(<span class="built_in">this</span>).siblings(<span class="string">&#x27;li&#x27;</span>).css(<span class="string">&#x27;width&#x27;</span>,<span class="string">&#x27;60.5px&#x27;</span>);</span></span><br><span class="line"><span class="javascript">              $(<span class="built_in">this</span>).css(<span class="string">&#x27;width&#x27;</span>,<span class="string">&#x27;958px&#x27;</span>);</span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            mouseout:<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              $(<span class="string">&#x27;#box&gt;ul&gt;li&#x27;</span>).css(<span class="string">&#x27;width&#x27;</span>,<span class="string">&#x27;240px&#x27;</span>);</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/cf52d7fed1bb639bfa23b09f5dc42f26.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;事件操作&quot;&gt;&lt;a href=&quot;#事件操作&quot; class=&quot;headerlink&quot; title=&quot;事件操作&quot;&gt;&lt;/a&gt;事件操作&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;标签中通过属性设置事件，每个属性都由一个&lt;code&gt;on&lt;/code&gt;和事件名组成。例如，点击事件对应的属性为&lt;</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞DOM节点操作</title>
    <link href="http://xiaoliblog.cn/page/jQuery04.html"/>
    <id>http://xiaoliblog.cn/page/jQuery04.html</id>
    <published>2021-05-04T10:43:54.279Z</published>
    <updated>2021-05-05T07:58:03.053Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DOM节点操作"><a href="#DOM节点操作" class="headerlink" title="DOM节点操作"></a>DOM节点操作</h1><h2 id="节点追加"><a href="#节点追加" class="headerlink" title="节点追加"></a>节点追加</h2><ul><li><code>content</code>是一段字符串形式的HTML代码</li></ul><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/608d27904a43f74dec06c6a54354296e.png" width="80%"><div class="note success simple"><p>父子节点添加是在匹配到的元素内部进行，兄弟节点是在匹配的元素外部进行。</p></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父子节点</span></span><br><span class="line">&lt;p&gt;hello&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).append(<span class="string">&#x27;&lt;b&gt;append&lt;/b&gt;&#x27;</span>);</span><br><span class="line"><span class="comment">//添加在结束标签之前</span></span><br><span class="line">&lt;p&gt;hello&lt;b&gt;append&lt;<span class="regexp">/b&gt;&lt;/</span>p&gt;</span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).prepend(<span class="string">&#x27;&lt;b&gt;append&lt;/b&gt;&#x27;</span>);</span><br><span class="line"><span class="comment">//添加在开始标签之后</span></span><br><span class="line">&lt;p&gt;<span class="xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">append</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="comment">//弟节点</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).after(<span class="string">&#x27;&lt;b&gt;didi&lt;/b&gt;&#x27;</span>);</span><br><span class="line">&lt;p&gt;hello&lt;<span class="regexp">/p&gt;&lt;b&gt;didi&lt;/</span>p&gt;</span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).before(<span class="string">&#x27;&lt;b&gt;didi&lt;/b&gt;&#x27;</span>);</span><br><span class="line">&lt;b&gt;didi&lt;<span class="regexp">/b&gt;&lt;p&gt;hello&gt;&lt;/</span>p&gt;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/3f67b7eb565d49fc1270c7406fb57cb1.png" width="70%"><h2 id="节点替换"><a href="#节点替换" class="headerlink" title="节点替换"></a>节点替换</h2><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>replaceWith(content)</code></td><td align="center">将所有匹配的元素替换成指定的HTML或DOM元素</td></tr><tr><td align="center"><code>replaceAll(selector)</code></td><td align="center">用匹配的元素替换掉所有selector匹配到的元素</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">   // $(&#x27;p:first&#x27;).replaceWith(&#x27;<span class="tag">&lt;<span class="name">p</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#x27;);</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">   // $(&#x27;p:eq(1)&#x27;).replaceWith(&#x27;<span class="tag">&lt;<span class="name">p</span>&gt;</span>世界<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#x27;);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;&lt;p&gt;你好&lt;/p&gt;&#x27;</span>).replaceAll($(<span class="string">&#x27;p:first&#x27;</span>));</span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;&lt;p&gt;世界&lt;/p&gt;&#x27;</span>).replaceAll($(<span class="string">&#x27;p:eq(1)&#x27;</span>));</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="节点删除"><a href="#节点删除" class="headerlink" title="节点删除"></a>节点删除</h2><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>empty()</code></td><td align="center">清空元素的内容，但不删除元素本身</td></tr><tr><td align="center"><code>remove()</code></td><td align="center">清空元素的内容，并删除元素本身</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>2222<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>3333<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>4444<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="comment">//移除第一个节点的内容</span></span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;li:first&#x27;</span>).empty();</span></span><br><span class="line"><span class="javascript">   <span class="comment">//移除第二个元素的内容及元素本身</span></span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;li:eq(1)&#x27;</span>).remove();</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/be846db6a9a21c2aa000b70fc203b348.png"></p><h2 id="节点复制"><a href="#节点复制" class="headerlink" title="节点复制"></a>节点复制</h2><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>clone([false])</code></td><td align="center">复制匹配的元素，默认参数为false</td></tr><tr><td align="center"><code>clone(true)</code></td><td align="center">参数设置为true时，复制元素的所有事件处理</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>2222<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>3333<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>4444<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;ul&#x27;</span>).clone().appendTo($(<span class="string">&#x27;body&#x27;</span>));</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/089e1fb74bc937a7141481d94270ac65.png" width="20%"><h2 id="左移与右移"><a href="#左移与右移" class="headerlink" title="左移与右移"></a>左移与右移</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>左移与右移<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">select</span>&#123;<span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">150px</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">input</span><span class="selector-attr">[type=button]</span>&#123;<span class="attribute">width</span>:<span class="number">50px</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#opt</span>&#123;<span class="attribute">margin</span>:<span class="number">90px</span> <span class="number">10px</span> <span class="number">0</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.box</span>&#123;<span class="attribute">width</span>:<span class="number">80%</span>;<span class="attribute">margin</span>:<span class="number">0</span> auto;<span class="attribute">background-color</span>:<span class="number">#999999</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.box</span> <span class="selector-tag">div</span>&#123;<span class="attribute">float</span>:left&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>可选项<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>移动<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>打印<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;opt&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;toRight&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;toLeft&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;toAllRight&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&gt;&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;toAllLeft&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;&lt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>已选项<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>=<span class="string">&quot;multiple&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.4.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 获取按钮添加单击事件，获取第一个下拉框中被选中的option添加到第二个下拉框</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">&#x27;#toRight&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;       <span class="comment">// 右移</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#right&gt;select&#x27;</span>).append($(<span class="string">&#x27;#left&gt;select&gt;option:selected&#x27;</span>));</span></span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      $(<span class="string">&#x27;#toLeft&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;        <span class="comment">// 左移</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#left&gt;select&#x27;</span>).append($(<span class="string">&#x27;#right&gt;select&gt;option:selected&#x27;</span>));</span></span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      $(<span class="string">&#x27;#toAllRight&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;    <span class="comment">// 全部右移</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#right&gt;select&#x27;</span>).append($(<span class="string">&#x27;#left&gt;select&gt;option&#x27;</span>));</span></span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      $(<span class="string">&#x27;#toAllLeft&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;     <span class="comment">// 全部左移</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#left&gt;select&#x27;</span>).append($(<span class="string">&#x27;#right&gt;select&gt;option&#x27;</span>));</span></span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/c8e2b69a10be668bdb5a127790ea6062.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;DOM节点操作&quot;&gt;&lt;a href=&quot;#DOM节点操作&quot; class=&quot;headerlink&quot; title=&quot;DOM节点操作&quot;&gt;&lt;/a&gt;DOM节点操作&lt;/h1&gt;&lt;h2 id=&quot;节点追加&quot;&gt;&lt;a href=&quot;#节点追加&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞jQuery元素操作</title>
    <link href="http://xiaoliblog.cn/page/jQuery03.html"/>
    <id>http://xiaoliblog.cn/page/jQuery03.html</id>
    <published>2021-05-04T10:41:36.709Z</published>
    <updated>2021-05-05T04:36:45.637Z</updated>
    
    <content type="html"><![CDATA[<h1 id="元素操作"><a href="#元素操作" class="headerlink" title="元素操作"></a>元素操作</h1><h2 id="元素遍历"><a href="#元素遍历" class="headerlink" title="元素遍历"></a>元素遍历</h2><ul><li><code>each()</code>方法可以对元素进行遍历</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>PHP<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>IOS<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>JAVA<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>JS<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="comment">//each参数：回调函数</span></span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;li&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,element</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.og(<span class="string">&quot;第&quot;</span>+(index+<span class="number">1</span>)+<span class="string">&#x27;个:&#x27;</span>+$(element).text());</span></span><br><span class="line">   &#125;);</span><br><span class="line"><span class="javascript"><span class="comment">//each：遍历选择器匹配到的所有&lt;li&gt;元素</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//index：当前元素的索引位置</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//element：当前元素</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//text():函数，元素的文本</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">/*</span><br><span class="line">第1个:PHP</span><br><span class="line">第2个:IOS</span><br><span class="line">第3个:JAVA</span><br><span class="line">第4个:JS</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="元素内容"><a href="#元素内容" class="headerlink" title="元素内容"></a>元素内容</h2><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>html()</code></td><td align="center">获取第一个匹配元素的HTML内容</td></tr><tr><td align="center"><code>html(content)</code></td><td align="center">设置第一个匹配元素的HTML内容</td></tr><tr><td align="center"><code>text()</code></td><td align="center">获取所有匹配元素包含的文本内容组合起来的文本</td></tr><tr><td align="center"><code>text(content)</code></td><td align="center">设置所有匹配元素的文本内容</td></tr><tr><td align="center"><code>val()</code></td><td align="center">获取表单元素的value值</td></tr><tr><td align="center"><code>val(value)</code></td><td align="center">设置表单元素的value值</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置div的HTML内容</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).html(<span class="string">&quot;&lt;p&gt;我是段落&lt;span&gt;我是span&lt;/span&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line"><span class="comment">//获取div的HTML内容</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&quot;div&quot;</span>).html());</span><br><span class="line"><span class="comment">//设置div的文本内容</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).text(<span class="string">&quot;&lt;p&gt;我是段落&lt;span&gt;我是span&lt;/span&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line"><span class="comment">//获取div的文本内容</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&quot;div&quot;</span>).text());</span><br><span class="line"><span class="comment">//设置表单的value值</span></span><br><span class="line">$(<span class="string">&quot;input&quot;</span>).val(<span class="string">&quot;请输入内容&quot;</span>);</span><br><span class="line"><span class="comment">//获取表单的value值</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&quot;input&quot;</span>).val());;</span><br></pre></td></tr></table></figure><h2 id="元素样式"><a href="#元素样式" class="headerlink" title="元素样式"></a>元素样式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ele=$(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="comment">//设置元素多个样式</span></span><br><span class="line">ele.css(&#123;</span><br><span class="line">   border:<span class="string">&#x27;2px solid black&#x27;</span>,</span><br><span class="line">   backgroundColor:<span class="string">&#x27;#ccc&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//获得元素样式</span></span><br><span class="line"><span class="keyword">var</span> w=ele.css(<span class="string">&#x27;width&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> h=ele.css(<span class="string">&#x27;height&#x27;</span>);</span><br><span class="line"><span class="comment">//设置元素样式</span></span><br><span class="line">ele.css(<span class="string">&#x27;width&#x27;</span>,<span class="string">&#x27;200px&#x27;</span>);</span><br><span class="line">ele.css(<span class="string">&#x27;height&#x27;</span>,<span class="string">&#x27;200px&#x27;</span>);</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>css(name)</code></td><td align="center">name:样式名称，获得样式的值</td></tr><tr><td align="center"><code>css(properties)</code></td><td align="center">properties：键值对形式的对象，设置样式值</td></tr><tr><td align="center"><code>css(name,value)</code></td><td align="center">设置样式的值</td></tr><tr><td align="center"><code>width()/width(value)</code></td><td align="center">获取/设置第一个匹配元素的当前宽度值</td></tr><tr><td align="center"><code>height()/height(value)</code></td><td align="center">获取/设置第一个匹配元素的当前高度值</td></tr><tr><td align="center"><code>offset()</code></td><td align="center">获取元素的位置，返回的是一个对象，包含left和top属性</td></tr><tr><td align="center"><code>offset(properties)</code></td><td align="center">利用对象设置元素的位置，必须包含left和top属性</td></tr></tbody></table><h2 id="元素类操作"><a href="#元素类操作" class="headerlink" title="元素类操作"></a>元素类操作</h2><table><thead><tr><th align="center">语法</th><th align="center">作用</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>addClass(class)</code></td><td align="center">添加一个类</td><td align="center">如果要添加多个, 多个类名之间用空格隔开即可</td></tr><tr><td align="center"><code>removeClass(class)</code></td><td align="center">删除一个类</td><td align="center">如果想删除多个, 多个类名之间用空格隔开即可</td></tr><tr><td align="center"><code>toggleClass(class)</code></td><td align="center">切换类</td><td align="center">判断指定类是否存在，存在则删除，不存在则添加</td></tr><tr><td align="center"><code>hasClass(class)</code></td><td align="center">判断类</td><td align="center">判断元素是否具有class样式</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>添加类<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>删除类<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>切换类<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">background</span>: skyblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">   <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">   btns[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// $(&quot;div&quot;).addClass(&quot;class1&quot;);</span></span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).addClass(<span class="string">&quot;class1 class2&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   btns[<span class="number">1</span>].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// $(&quot;div&quot;).removeClass(&quot;class2&quot;);</span></span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).removeClass(<span class="string">&quot;class2 class1&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   btns[<span class="number">2</span>].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&quot;div&quot;</span>).toggleClass(<span class="string">&quot;class2 class1&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="元素属性"><a href="#元素属性" class="headerlink" title="元素属性"></a>元素属性</h1><h2 id="属性和属性结点"><a href="#属性和属性结点" class="headerlink" title="属性和属性结点"></a>属性和属性结点</h2><ul><li>对象身上保存的变量就是属性</li><li>操作属性的方法<ul><li><code>对象.属性名称 = 值</code></li><li><code>对象[&quot;属性名称&quot;] = 值 </code></li></ul></li><li>属性节点<ul><li>在编写的HTML代码时，在HTML标签中添加的属性就是属性节点</li><li>在<code>attributes</code>属性中保存的所有内容都是属性节点 </li></ul></li><li>操作属性节点的方法<ul><li><code>DOM元素.setAttribute(&quot;属性名称&quot;,&quot;值&quot;);</code></li><li><code>DOM元素.getAttribute(&quot;属性名称&quot;) ;</code></li></ul></li><li>任何对象都有属性，但是只有DOM对象才有属性节点</li></ul><h2 id="attr-方法"><a href="#attr-方法" class="headerlink" title="attr()方法"></a>attr()方法</h2><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>attr(name)</code></td><td align="center">取得<strong>第一个</strong>匹配元素的属性值，否则返回undefined</td></tr><tr><td align="center"><code>attr(name,value)</code></td><td align="center">为所有匹配的元素设置一个属性值</td></tr><tr><td align="center"><code>removeAtrr(name)</code></td><td align="center">从每一个匹配的元素中删除一个属性</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得属性节点的值,无论找到多少元素都只会返回第一个元素指定的属性节点</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).attr(<span class="string">&#x27;class&#x27;</span>);</span><br><span class="line"><span class="comment">//设置元素的class属性值为false,如果设置的属性节点不存在，系统会自动生成</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).attr(<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;box1&#x27;</span>);</span><br><span class="line"><span class="comment">//删除class属性</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).removeAttr(<span class="string">&#x27;class&#x27;</span>);</span><br><span class="line"><span class="comment">//删除多个用空格隔开</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).removeAttr(<span class="string">&#x27;class name id&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="prop-方法"><a href="#prop-方法" class="headerlink" title="prop()方法"></a>prop()方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得属性节点的值</span></span><br><span class="line">$(<span class="string">&#x27;input&#x27;</span>).prop(<span class="string">&#x27;checked&#x27;</span>);</span><br><span class="line"><span class="comment">//设置元素的checked属性值为false</span></span><br><span class="line">$(<span class="string">&#x27;input&#x27;</span>).prop(<span class="string">&#x27;checked&#x27;</span>,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//删除checked属性节点</span></span><br><span class="line">$(<span class="string">&#x27;input&#x27;</span>).removeProp(<span class="string">&#x27;checked&#x27;</span>);</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>prop(name)</code></td><td align="center">取得第一个匹配元素的属性值，否则返回undefined</td></tr><tr><td align="center"><code>prop(name,value)</code></td><td align="center">为所有匹配的元素设置一个属性值</td></tr><tr><td align="center"><code>removeProp(name)</code></td><td align="center">从每一个匹配的元素中删除一个属性</td></tr></tbody></table><div class="note success simple"><p>具有<code>true/false</code>操作状态时使用<code>prop</code>，如<code>checked</code>、<code>selected</code>、<code>disabled</code>；其它用<code>attr</code></p></div><h1 id="元素特殊属性"><a href="#元素特殊属性" class="headerlink" title="元素特殊属性"></a>元素特殊属性</h1><h2 id="宽高属性"><a href="#宽高属性" class="headerlink" title="宽高属性"></a>宽高属性</h2><ul><li>设置或者获取高度</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//带参数表示设置高度</span></span><br><span class="line">$(<span class="string">&#x27;img&#x27;</span>).height(<span class="number">200</span>);</span><br><span class="line"><span class="comment">//不带参数获取高度</span></span><br><span class="line">$(<span class="string">&#x27;img&#x27;</span>).height();</span><br></pre></td></tr></table></figure><ul><li>获取网页的可视区宽高</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取可视区宽度</span></span><br><span class="line">$(<span class="built_in">window</span>).width();</span><br><span class="line"><span class="comment">//获取可视区高度</span></span><br><span class="line">$(<span class="built_in">window</span>).height();</span><br></pre></td></tr></table></figure><h2 id="位置属性"><a href="#位置属性" class="headerlink" title="位置属性"></a>位置属性</h2><ul><li><code>offset</code>方法获取元素距离document的位置，<code>position</code>方法获取的是元素距离有定位的父元素的位置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取元素距离document的位置,返回值为对象：&#123;left:100, top:100&#125;</span></span><br><span class="line">$(selector).offset();</span><br><span class="line"><span class="comment">//获取相对于其最近的有定位的父元素的位置。</span></span><br><span class="line">$(selector).position();</span><br></pre></td></tr></table></figure><h2 id="垂直滚动条位置"><a href="#垂直滚动条位置" class="headerlink" title="垂直滚动条位置"></a>垂直滚动条位置</h2><ul><li>设置或者获取垂直滚动条的位置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取页面被卷曲的高度</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollTop();</span><br><span class="line"><span class="comment">//获取页面被卷曲的宽度</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollLeft();</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@0853cc081363779dcd81ace9b2c020b96f1c89e7/2021/05/05/0c0ef9cf8c9909ee60250822d4d1821e.png"></p><ul><li>获取和设置元素的滚动偏移量</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;scroll&quot;</span>&gt;</span>我是div......<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取滚动的偏移位</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&quot;.scroll&quot;</span>).scrollTop());</span><br><span class="line"><span class="comment">// 设置滚动的偏移位</span></span><br><span class="line">$(<span class="string">&quot;.scroll&quot;</span>).scrollTop(<span class="number">300</span>);</span><br></pre></td></tr></table></figure><ul><li>设置网页的滚动偏移量</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取网页滚动的偏移位</span></span><br><span class="line"><span class="comment">// 注意点: 为了保证浏览器的兼容, 获取网页滚动的偏移位需要按照如下写法</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&quot;body&quot;</span>).scrollTop()+$(<span class="string">&quot;html&quot;</span>).scrollTop());</span><br><span class="line"><span class="comment">// 设置网页滚动偏移位</span></span><br><span class="line"><span class="comment">// 注意点: 为了保证浏览器的兼容, 设置网页滚动偏移位的时候必须按照如下写法</span></span><br><span class="line">$(<span class="string">&quot;html,body&quot;</span>).scrollTop(<span class="number">300</span>);</span><br></pre></td></tr></table></figure><h1 id="折叠菜单"><a href="#折叠菜单" class="headerlink" title="折叠菜单"></a>折叠菜单</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.4.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">ul</span>&#123;<span class="attribute">list-style</span>:none;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">margin</span>:<span class="number">0</span>&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span>&#123;<span class="attribute">width</span>:<span class="number">150px</span>;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#515E7B</span>;<span class="attribute">margin</span>:<span class="number">10px</span>;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span> <span class="selector-tag">li</span>&#123;<span class="attribute">background</span>:<span class="number">#515E7B</span>;<span class="attribute">border-bottom</span>:<span class="number">1px</span> solid <span class="number">#fff</span>;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span>&#123;<span class="attribute">text-decoration</span>:none;<span class="attribute">color</span>:<span class="number">#fff</span>;<span class="attribute">font-size</span>:<span class="number">16px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">line-height</span>:<span class="number">40px</span>;<span class="attribute">padding-left</span>:<span class="number">10px</span>;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:underline;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.wrap</span> &#123;<span class="attribute">width</span>:<span class="number">150px</span>;<span class="attribute">display</span>:none;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.wrap</span> <span class="selector-tag">li</span>&#123;<span class="attribute">background</span>: <span class="number">#fff</span>;<span class="attribute">margin</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.wrap</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span>&#123;<span class="attribute">color</span>:<span class="number">#3B475F</span>;<span class="attribute">font-size</span>:<span class="number">12px</span>;&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;fold&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>未读信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>已读信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>商品管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>商品添加<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>商品列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>商品分类<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>权限设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>重置密码<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 默认第一个显示：css--display:block</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;.wrap:first&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>,<span class="string">&#x27;block&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">//添加点击事件，当前显示,其它隐藏</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#fold&gt;ul&gt;li&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   <span class="comment">//无需遍历，直接添加事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="built_in">this</span>).siblings(<span class="string">&#x27;li&#x27;</span>).find(<span class="string">&#x27;.wrap&#x27;</span>).css(&#123;<span class="attr">display</span>:<span class="string">&#x27;none&#x27;</span>&#125;);</span></span><br><span class="line"><span class="javascript">            $(<span class="built_in">this</span>).find(<span class="string">&#x27;.wrap&#x27;</span>).css(&#123;<span class="attr">display</span>:<span class="string">&#x27;block&#x27;</span>&#125;);</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/91b2836348482ddd0439b8c1de7080b9.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;元素操作&quot;&gt;&lt;a href=&quot;#元素操作&quot; class=&quot;headerlink&quot; title=&quot;元素操作&quot;&gt;&lt;/a&gt;元素操作&lt;/h1&gt;&lt;h2 id=&quot;元素遍历&quot;&gt;&lt;a href=&quot;#元素遍历&quot; class=&quot;headerlink&quot; title=&quot;元素遍历&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞jQuery选择器</title>
    <link href="http://xiaoliblog.cn/page/jQuery02.html"/>
    <id>http://xiaoliblog.cn/page/jQuery02.html</id>
    <published>2021-05-04T10:38:50.658Z</published>
    <updated>2021-05-04T14:50:37.683Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h1><ul><li>基本选择器常用的有标签选择器、类选择器和ID选择器</li></ul><table><thead><tr><th align="center">CSS选择器</th><th align="center">功能描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>li&#123;color:red&#125;</code></td><td align="center">根据指定元素名匹配所有元素</td><td align="center">${“li”}</td></tr><tr><td align="center"><code>.bar&#123;color:red&#125;</code></td><td align="center">根据指定类名匹配所有元素</td><td align="center">${“.bar”}</td></tr><tr><td align="center"><code>#btn&#123;color:red&#125;</code></td><td align="center">根据指定id匹配一个元素</td><td align="center">${“#bar}”</td></tr><tr><td align="center"><code>li,.bar,#btn&#123;color:red&#125;</code></td><td align="center">同时获取多个元素</td><td align="center">${“li,p,div”}</td></tr></tbody></table><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/b0ece8129f371bfe621892437397d7a0.png" width="70%"><h1 id="层级选择器"><a href="#层级选择器" class="headerlink" title="层级选择器"></a>层级选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">示例</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center"><code>selector selector1</code></td><td align="center"><code>$(&quot;div .test&quot;)</code></td><td align="center">选取&lt;div&gt;下所有class名为test的元素（多级）</td></tr><tr><td align="center"><code>parent &gt; child</code></td><td align="center"><code>$(&quot;.box &gt; .con&quot;)</code></td><td align="center">选取class名为box下的所有class名为con的子元素（一级）</td></tr><tr><td align="center"><code>prev + next</code></td><td align="center"><code>$(&quot;div + .title&quot;)</code></td><td align="center">获取紧邻&lt;div&gt;的下一个class名为title的兄弟节点</td></tr><tr><td align="center"><code>prev ~ siblings</code></td><td align="center"><code>$(&quot;.bar ~ li&quot;)</code></td><td align="center">获取class名为bar的元素后的所有同级元素节点&lt;li&gt;</td></tr></tbody></table><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/991e6bf8bb02ade1e9fb757b2dabbcc3.png" widht="60%"><h1 id="基本过滤选择器"><a href="#基本过滤选择器" class="headerlink" title="基本过滤选择器"></a>基本过滤选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">示例</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center"><code>:first</code></td><td align="center"><code>$(&quot;li : first&quot;)</code></td><td align="center">获取第1个&lt;li&gt;元素</td></tr><tr><td align="center"><code>:last</code></td><td align="center"><code>$(&quot;li : last&quot;)</code></td><td align="center">获取最后1个&lt;li&gt;元素</td></tr><tr><td align="center"><code>:even</code></td><td align="center"><code>$(&quot;li :even&quot;)</code></td><td align="center">获取所有li元素中，索引为偶数的奇数行数据,从0开始</td></tr><tr><td align="center"><code>:odd</code></td><td align="center"><code>$(&quot;li :odd&quot;)</code></td><td align="center">获取所有li元素中，索引为奇数数的偶数行数据，从0开始</td></tr><tr><td align="center"><code>:eq(index)</code></td><td align="center"><code>$(&quot;li:eq(3)&quot;)</code></td><td align="center">获取索引为3的li元素</td></tr><tr><td align="center"><code>:gt(index)</code></td><td align="center"><code>$(&quot;li :eq(3)&quot;)</code></td><td align="center">获取索引大于3的li元素</td></tr><tr><td align="center"><code>:It(index)</code></td><td align="center"><code>$(&quot;li :It(3)&quot;)</code></td><td align="center">获取索引小于3的li元素</td></tr><tr><td align="center"><code>:not(seletor)</code></td><td align="center"><code>$(&quot;li :not(li:qe(3))&quot;)</code></td><td align="center">获取除指定选择器外的其他元素，获取除索引为3的li元素</td></tr><tr><td align="center"><code>:focus</code></td><td align="center"><code>$(&quot;inputs:focus&quot;)</code></td><td align="center">匹配当前获取焦点的input元素</td></tr><tr><td align="center"><code>:animated</code></td><td align="center"><code>$(&quot;div:not(:animated)&quot;)</code></td><td align="center">匹配当前没有执行动画的div元素</td></tr></tbody></table><h1 id="内容选择器"><a href="#内容选择器" class="headerlink" title="内容选择器"></a>内容选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">功能描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>:contains(text)</code></td><td align="center">获取内容包含1text文本的元素</td><td align="center"><code>&amp;(&quot;li:contains(&#39;js&#39;)&quot;)</code>获取内容中含’js’的li元素</td></tr><tr><td align="center"><code>:empty</code></td><td align="center">获取内容为空的元素</td><td align="center"><code>$(&quot;li:empty&quot;)</code>获取内容为空的li元素</td></tr><tr><td align="center"><code>:has(selector)</code></td><td align="center">获取内容包含指定选择器元素</td><td align="center"><code>$(&quot;li:has(&#39;a&#39;)&quot;)</code>获取内容中含a元素的所有li元素</td></tr><tr><td align="center"><code>:parent</code></td><td align="center">获取内容不为空的元素(特殊)</td><td align="center"><code>$(&quot;li:parent&quot;)</code>获取内容不为空的li元素</td></tr></tbody></table><h1 id="可见性选择器"><a href="#可见性选择器" class="headerlink" title="可见性选择器"></a>可见性选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">功能描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>:hidden</code></td><td align="center">获取所有隐藏元素</td><td align="center"><code>$(&quot;li:hidden&quot;)</code>获取所有隐藏的li元素</td></tr><tr><td align="center"><code>:visible</code></td><td align="center">获取所有可见元素</td><td align="center"><code>$(&quot;li:visible&quot;)</code>获取所有可见的li元素</td></tr></tbody></table><h1 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">功能描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center"><code>[attr]</code></td><td align="center">获取具体指定属性的元素</td><td align="center"><code>$(&quot;div[class]&quot;)</code>获取含有class属性的所有div元素</td></tr><tr><td align="center"><code>[attr=value]</code></td><td align="center">获取属性值等于value的元素</td><td align="center"><code>$(&quot;div[class=current]&quot;)</code>获取class等于current的所有div元素</td></tr><tr><td align="center"><code>[attr！=value]</code></td><td align="center">获取属性值不等于value的元素</td><td align="center"><code>$(&quot;div[class！=current]&quot;)</code>获取class不等于current的所有div元素</td></tr><tr><td align="center"><code>[attr^=value]</code></td><td align="center">获取属性值以value开始的元素</td><td align="center"><code>$(&quot;div[class^box]&quot;)</code>获取class以box开始的所有div元素</td></tr><tr><td align="center"><code>[attr$=value]</code></td><td align="center">获取属性值以value结尾的元素</td><td align="center"><code>$(&quot;div[class$box]&quot;)</code>获取class以box结尾的所有div元素</td></tr><tr><td align="center"><code>[attr*=value]</code></td><td align="center">获取属性值包含value的元素</td><td align="center"><code>$(&quot;div[class\*=&#39;-&#39;]&quot;)</code>获取class含有’-‘的所有div元素</td></tr><tr><td align="center"><code>[attr~=value]</code></td><td align="center">获取元素的属性值包含一个value，以空格隔开</td><td align="center"><code>$(&quot;div[class~=&#39;box&#39;]&quot;)</code>获取class属性值等于’box’或通过空格分隔并含有box的div元素，如”t box”</td></tr><tr><td align="center"><code>[attr1][attr2]...[attrN]</code></td><td align="center">获取同时拥有多个属性的元素</td><td align="center"><code>$(&quot;input[id][name$=&#39;usr&#39;]&quot;)</code>获取同时含有id属性和属性值以usr结尾的name属性的input元素</td></tr></tbody></table><h1 id="子元素选择器"><a href="#子元素选择器" class="headerlink" title="子元素选择器"></a>子元素选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center"><code>:nth-child(index/even/odd/公式)</code></td><td align="center">索引index默认从1开始，匹配指定index索引、偶数、奇书、或符合指定公式(如2n,n默认从0开始)的子元素</td></tr><tr><td align="center"><code>:first-child</code></td><td align="center">获取第一个子元素</td></tr><tr><td align="center"><code>:last-child</code></td><td align="center">获取最后一个子元素</td></tr><tr><td align="center"><code>:only-child</code></td><td align="center">如果当前元素时唯一的子元素，则匹配</td></tr><tr><td align="center"><code>:nth-last-child(index/even/odd/公式)</code></td><td align="center">选择所有它们父元素的第n个子元素，计数从最后一个元素开始到第一个</td></tr><tr><td align="center"><code>:nth-of-type(index/even/odd/公式)</code></td><td align="center">选择同一个父元素之下，并且标签名相同的子元素中的第n个子元素</td></tr><tr><td align="center"><code>:first-of-type</code></td><td align="center">选择所有相同的元素名称的第一个子元素</td></tr><tr><td align="center"><code>:last-of-type</code></td><td align="center">选择所有相同的元素名称的最后一个子元素</td></tr><tr><td align="center"><code>:only-of-type</code></td><td align="center">选择所有没有兄弟元素，且具有相同的元素名称的元素</td></tr><tr><td align="center"><code>:nth-last-of-type(index/even/odd/公式)</code></td><td align="center">选择所有它们的父级元素的第n个子元素，计数从最后一个元素开始到第一个</td></tr></tbody></table><h1 id="表单选择器"><a href="#表单选择器" class="headerlink" title="表单选择器"></a>表单选择器</h1><table><thead><tr><th align="center">选择器</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center"><code>:input</code></td><td align="center">获取页面中的所有表单元素，包含select元素和textarea元素</td></tr><tr><td align="center"><code>:text</code></td><td align="center">选取页面中的所有文本框</td></tr><tr><td align="center"><code>:password</code></td><td align="center">选取所有的密码框</td></tr><tr><td align="center"><code>:radio</code></td><td align="center">选取所有的单选按钮</td></tr><tr><td align="center"><code>:checkbox</code></td><td align="center">选取所有的复选框</td></tr><tr><td align="center"><code>:submit</code></td><td align="center">获取submit提交按钮</td></tr><tr><td align="center"><code>:reset</code></td><td align="center">获取reset重置按钮</td></tr><tr><td align="center"><code>:image</code></td><td align="center">获取type=”image”的图像域</td></tr><tr><td align="center"><code>:button</code></td><td align="center">获取button按钮，包括button标签和type=”button”</td></tr><tr><td align="center"><code>:file</code></td><td align="center">获取type=”file”的文件域</td></tr><tr><td align="center"><code>:hidden</code></td><td align="center">获取隐藏表单项</td></tr><tr><td align="center"><code>:enabled</code></td><td align="center">获取所有可用表单元素</td></tr><tr><td align="center"><code>:disabled</code></td><td align="center">获取所有不可用表单元素</td></tr><tr><td align="center"><code>:checked</code></td><td align="center">获取所有选中的表单元素，主要针对radio和checkbox</td></tr><tr><td align="center"><code>:selected</code></td><td align="center">获取所有可用表单元素，主要针对select</td></tr></tbody></table><h1 id="元素筛选函数"><a href="#元素筛选函数" class="headerlink" title="元素筛选函数"></a>元素筛选函数</h1><table><thead><tr><th align="center">语法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>$(&quot;ul&quot;).find(&quot;span&quot;)</code></td><td align="center">返回&lt;ul&gt; 后代中所有的&lt;span&gt; 元素</td></tr><tr><td align="center"><code>$(&quot;ul&quot;).siblings(&quot;span&quot;))</code></td><td align="center">返回与&lt;ul&gt; 同级的所有的 &lt;span&gt; 元素</td></tr><tr><td align="center"><code>$(&quot;ul&quot;).next(&quot;span&quot;))</code></td><td align="center">匹配&lt;ul&gt;紧邻的同级的下一个&lt;span&gt;元素</td></tr><tr><td align="center"><code>$(&quot;ul&quot;). prev(&quot;span&quot;))</code></td><td align="center">匹配&lt;ul&gt;紧邻的同级的上一个&lt;span&gt;元素</td></tr></tbody></table><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/25/ce1673e1b45dc9421d7a6c4652b96f37.png" width="60%"><ul><li>获取第三层的第一个li</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#fold&gt;ul&gt;li:first&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>通过上面的li，获得其下class为wrap的元素</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#fold&gt;ul&gt;li:first&#x27;</span>).find(<span class="string">&#x27;.wrap&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;基本选择器&quot;&gt;&lt;a href=&quot;#基本选择器&quot; class=&quot;headerlink&quot; title=&quot;基本选择器&quot;&gt;&lt;/a&gt;基本选择器&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;基本选择器常用的有标签选择器、类选择器和ID选择器&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery🌞jQuery基础及静态方法</title>
    <link href="http://xiaoliblog.cn/page/jQuery01.html"/>
    <id>http://xiaoliblog.cn/page/jQuery01.html</id>
    <published>2021-05-04T10:30:02.362Z</published>
    <updated>2021-05-04T14:47:13.731Z</updated>
    
    <content type="html"><![CDATA[<h1 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h1><ul><li>基本概念<ul><li>jQuery：一款优秀的JavaScript框架库，封装了很多的JavaScript函数</li><li>作用：简化了HTML与JavaScript之间的操作，使得DOM对象、事件处理、动画效果、Ajax等操作的实现语法更加简洁，提高了程序的开发效率，<strong>消除很多跨浏览器的兼容问题</strong></li></ul></li><li>下载jQuery<ul><li>官方网址：<a href="http://jquery.com/">http://jquery.com</a></li><li>jQuery下载加速地址：<a href="https://www.jq22.com/jquery-info122">https://www.jq22.com/jquery-info122</a></li><li>学习源码：<a href="https://gitee.com/ruokeqx/weblearn">https://gitee.com/ruokeqx/weblearn</a></li></ul></li></ul><h2 id="引入jQuery"><a href="#引入jQuery" class="headerlink" title="引入jQuery"></a>引入jQuery</h2><ul><li>下载：minified（压缩版：去掉注释和空白行，体积较小），引入本地下载的jQuery</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="handlebars"><span class="xml"><span class="tag">&lt;/<span class="name">scirpt</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><ul><li>或者使用CDN：内容分发网络，通过CDN的优势可以加快jQuery文件的访问速度</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.4.1.min.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用jQuery"><a href="#使用jQuery" class="headerlink" title="使用jQuery"></a>使用jQuery</h2><ul><li>在HTML页面中给三个div设置背景颜色</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生JS</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="keyword">var</span> div2 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;box1&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="keyword">var</span> div3 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box2&#x27;</span>);</span><br><span class="line">   div1.style.backgroundColor = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">   div2.style.backgroundColor = <span class="string">&quot;green&quot;</span>;</span><br><span class="line">   div3.style.backgroundColor = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> $div1 = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">   <span class="keyword">var</span> $div2 = $(<span class="string">&#x27;.box1&#x27;</span>);</span><br><span class="line">   <span class="keyword">var</span> $div3 = $(<span class="string">&#x27;#box2&#x27;</span>);</span><br><span class="line">   $div1.css(&#123;</span><br><span class="line">      background: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">      width: <span class="string">&quot;200px&quot;</span>,</span><br><span class="line">      height: <span class="string">&quot;200px&quot;</span></span><br><span class="line">   &#125;),</span><br><span class="line">   $div2.css(&#123;</span><br><span class="line">      background: <span class="string">&quot;blue&quot;</span>,</span><br><span class="line">   &#125;),</span><br><span class="line">   $div3.css(&#123;</span><br><span class="line">      background: <span class="string">&quot;green&quot;</span>,</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="入口函数"><a href="#入口函数" class="headerlink" title="入口函数"></a>入口函数</h2><ul><li>jQuery和原生JS的入口函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生JS的固定写法</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//jQuery固定写法</span></span><br><span class="line"><span class="comment">//第一种写法</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//第二种写法</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>jQuery和原生JS的入口函数加载模式不同<ul><li><code>JavaScript</code>的入口函数要等到页面中所有资源（包括图片、文件）加载完成才开始执行</li><li><code>jQuery</code>的入口函数只会等待文档树加载完成就开始执行，并不会等待图片、文件的加载</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/xiaoliblog/MyCDNRepo/img/headerimg.png&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="comment">//原生JS</span></span></span><br><span class="line"><span class="javascript">   <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//1.通过原生JS入口函数可以拿到DOM元素</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> img = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;img&#x27;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(img);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 2.通过原生的JS入口函数可以拿到DOM元素的宽高</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> width = <span class="built_in">window</span>.getComputedStyle(img).width;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;onload:&quot;</span>,width);</span></span><br><span class="line">   &#125;</span><br><span class="line">   /*</span><br><span class="line">   * 1.原生JS和jQuery入口函数的加载模式不同</span><br><span class="line">   * 原生JS会等到DOM元素加载完毕,并且图片也加载完毕才会执行</span><br><span class="line">   * jQuery会等到DOM元素加载完毕,但不会等到图片也加载完毕就会执行</span><br><span class="line">    * */</span><br><span class="line"><span class="javascript"><span class="comment">//jQuery</span></span></span><br><span class="line"><span class="javascript">   $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1.通过jQuery入口函数可以拿到DOM元素</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $img = $(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log($img);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 2.通过jQuery入口函数不可以拿到DOM元素的宽高</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $width = $img.width();</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;ready:&quot;</span>,$width);</span></span><br><span class="line">   &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>当出现多个入口函数时有所不同<ul><li>原生的<code>JavaScript</code>如果编写了多个入口函数，后面编写的会覆盖前面编写的</li><li><code>jQuery</code>中编写多个入口函数，后面的不会覆盖前面的</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;hello lnj1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;hello lnj2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// window.onload = function (ev) &#123;</span></span><br><span class="line"><span class="comment">//     alert(&quot;hello lnj1&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// window.onload = function (ev) &#123;</span></span><br><span class="line"><span class="comment">//     alert(&quot;hello lnj2&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h2 id="冲突问题"><a href="#冲突问题" class="headerlink" title="冲突问题"></a>冲突问题</h2><ul><li>当你使用的其他框架也含有<code>$</code>符号时，会根据引入顺序进行覆盖，后引入的覆盖先前引入的。这就使得程序员只能丢弃其中一种框架，从而解决冲突。但是我们可以通过释放jQuery中<code>$</code>的使用权来进行冲突解决</li><li>注意点<ul><li>释放操作必须在编写其它jQuery代码之前编写</li><li>释放之后就不能再使用<code>$</code>，改为使用自定义的符号（默认为jQuery）</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 释放$的使用权</span></span><br><span class="line"><span class="comment">//jQuery.noConflict();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.自定义一个访问符号</span></span><br><span class="line"><span class="keyword">var</span> nj = jQuery.noConflict();</span><br><span class="line">nj(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="核心函数"><a href="#核心函数" class="headerlink" title="核心函数"></a>核心函数</h2><ul><li><code>$()</code>就代表调用jQuery的核心参数，它可以接收函数、字符串、字符串选择器、代码片段、DOM元素</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>我是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.接收一个函数</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;hello lnj&quot;</span>);</span><br><span class="line">   <span class="comment">// 2.接收一个字符串</span></span><br><span class="line">   <span class="comment">// 2.1接收一个字符串选择器</span></span><br><span class="line">   <span class="comment">// 返回一个jQuery对象, 对象中保存了找到的DOM元素</span></span><br><span class="line">   <span class="keyword">var</span> $box1 = $(<span class="string">&quot;.box1&quot;</span>);</span><br><span class="line">   <span class="keyword">var</span> $box2 = $(<span class="string">&quot;#box2&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log($box1);</span><br><span class="line">   <span class="built_in">console</span>.log($box2);</span><br><span class="line">   <span class="comment">// 2.2接收一个字符串代码片段</span></span><br><span class="line">    <span class="comment">// 返回一个jQuery对象, 对象中保存了创建的DOM元素</span></span><br><span class="line">   <span class="keyword">var</span> $p = $(<span class="string">&quot;&lt;p&gt;我是段落&lt;/p&gt;&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log($p);</span><br><span class="line">   $box1.append($p);</span><br><span class="line">   <span class="comment">// 3.接收一个DOM元素</span></span><br><span class="line">   <span class="comment">// 会被包装成一个jQuery对象返回给我们</span></span><br><span class="line">   <span class="keyword">var</span> span = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;span&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="built_in">console</span>.log(span);</span><br><span class="line">   <span class="keyword">var</span> $span = $(span);</span><br><span class="line">   <span class="built_in">console</span>.log($span);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="jQuery对象"><a href="#jQuery对象" class="headerlink" title="jQuery对象"></a>jQuery对象</h2><ul><li><code>DOM</code>对象：使用JavaScript中的方法获取页面中的元素返回的对象就是dom对象。</li><li><code>jQuery</code>对象：jquery对象就是使用jquery的方法获取页面中的元素返回的对象就是jQuery对象。</li><li><code>jQuery</code>对象其实就是DOM对象的包装集包装了DOM对象的集合（伪数组）</li><li><code>DOM</code>对象与<code>jQuery</code>对象的方法不能混用</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//jQuery对象是一个伪数组</span></span><br><span class="line"><span class="comment">//伪数组:有0到length-1的属性, 并且有length属性</span></span><br><span class="line">   <span class="keyword">var</span> $div = $(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log($div);</span><br><span class="line"></span><br><span class="line"><span class="comment">//与数组对比一下</span></span><br><span class="line">   <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line">   <span class="built_in">console</span>.log(arr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@db6780879012d72a48075071128dde974e26c52a/2021/05/04/ae1264fc499088515a3ac11e19b9872f.png"></p><h1 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h1><ul><li>静态方法通过类名调用</li><li>实例方法通过实例调用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.定义一个类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.给这个类添加一个静态方法</span></span><br><span class="line"><span class="comment">// 直接添加给类的就是静态方法</span></span><br><span class="line">AClass.staticMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;staticMethod&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 静态方法通过类名调用</span></span><br><span class="line">AClass.staticMethod();s</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.给这个类添加一个实例方法</span></span><br><span class="line">AClass.prototype.instanceMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;instanceMethod&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实例方法通过类的实例调用</span></span><br><span class="line"><span class="comment">// 创建一个实例(创建一个对象)</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> AClass();</span><br><span class="line"><span class="comment">// 通过实例调用实例方法</span></span><br><span class="line">a.instanceMethod();</span><br></pre></td></tr></table></figure><h2 id="each-方法"><a href="#each-方法" class="headerlink" title="each()方法"></a>each()方法</h2><ul><li>原生的<code>forEach</code>方法只能遍历数组, 不能遍历伪数组</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="number">0</span>:<span class="number">1</span>, <span class="number">1</span>:<span class="number">3</span>, <span class="number">2</span>:<span class="number">5</span>, <span class="number">3</span>:<span class="number">7</span>, <span class="number">4</span>:<span class="number">9</span>, <span class="attr">length</span>:<span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数: 遍历到的元素</span></span><br><span class="line"><span class="comment">第二个参数: 当前遍历到的索引</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value,index</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index,value);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//以下会报错</span></span><br><span class="line">obj.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value,index</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index,value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@712c3542eebda7b101a6a7c1ddef355baafed848/2021/05/04/0785d1156220d0d1b530ffe69658a902.png" width="50%"><ul><li>利用jQuery的<code>each</code>静态方法遍历数组，可以遍历伪数组</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.each(obj, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index, value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@51a0ddb204b4005321777f7188f80c3858d0e8e4/2021/05/04/5d9fa70caf0b4749f023bd90aaaa0351.png"></p><h2 id="map-方法"><a href="#map-方法" class="headerlink" title="map()方法"></a>map()方法</h2><ul><li>.利用原生JS的<code>map</code>方法遍历，和原生的forEach一样,不能遍历的伪数组</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="number">0</span>: <span class="number">1</span>, <span class="number">1</span>: <span class="number">3</span>, <span class="number">2</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="number">7</span>, <span class="number">4</span>: <span class="number">9</span>, <span class="attr">length</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数: 当前遍历到的元素</span></span><br><span class="line"><span class="comment">第二个参数: 当前遍历到的索引</span></span><br><span class="line"><span class="comment">第三个参数: 当前被遍历的数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">value, index, array</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index, value, array);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//同样会报错</span></span><br><span class="line">obj.map(<span class="function"><span class="keyword">function</span> (<span class="params">value, index, array</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index, value, array);</span><br><span class="line">\&#125;);</span><br></pre></td></tr></table></figure><ul><li>jQuery的<code>map()</code>方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数: 要遍历的数组</span></span><br><span class="line"><span class="comment">第二个参数: 每遍历一个元素之后执行的回调函数</span></span><br><span class="line"><span class="comment">回调函数的参数:</span></span><br><span class="line"><span class="comment">   第一个参数: 遍历到的元素</span></span><br><span class="line"><span class="comment">   第二个参数: 遍历到的索引</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> res = $.map(obj, <span class="function"><span class="keyword">function</span> (<span class="params">value, index</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index, value);</span><br><span class="line">   <span class="keyword">return</span> value + index;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> res2 = $.each(obj, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index, value);</span><br><span class="line">   <span class="keyword">return</span> value + index;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br><span class="line"><span class="built_in">console</span>.log(res2);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@d2f172e3f9d3a46ab55601eec031fc8d5476e797/2021/05/04/6101369030d62ef74b0570d10ac0d52d.png" width="50%"><ul><li>jQuery中的each静态方法和map静态方法的区别:<ul><li><code>each</code>静态方法默认的返回值就是, 遍历谁就返回谁</li><li><code>map</code>静态方法默认的返回值是一个空数组</li><li><code>each</code>静态方法不支持在回调函数中对遍历的数组进行处理</li><li><code>map</code>静态方法可以在回调函数中通过return对遍历的数组进行处理, 然后生成一个新的数组返回</li></ul></li></ul><h2 id="holdReady-方法"><a href="#holdReady-方法" class="headerlink" title="holdReady()方法"></a>holdReady()方法</h2><ul><li>由于jQuery是在DOM加载完后入口函数调用，但有时候想要其他资源中jQuery调用之前就执行</li><li>所以<code>$.holdReady(true)</code>作用就是暂停<code>ready</code>入口函数执行</li><li>恢复改为<code>$.holdReady(false)</code>即可</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>恢复ready事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $.holdReady(true); 作用: 暂停ready执行</span></span><br><span class="line">$.holdReady(<span class="literal">true</span>);</span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;ready&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   $.holdReady(<span class="literal">false</span>); <span class="comment">//恢复ready事件，弹窗</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="其他静态方法"><a href="#其他静态方法" class="headerlink" title="其他静态方法"></a>其他静态方法</h2><ul><li><code>trim()</code><ul><li>作用：去除字符串空格</li><li>参数：参数伪去除空格的字符串</li><li>返回值：去除空格之后的字符串</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;   China   &quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = $.trim(str);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;---&quot;</span>+newStr+<span class="string">&quot;---&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>判断方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">isArray(obj)</span><br><span class="line">isFunction(obj)</span><br><span class="line">isWindow(obj)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;jQuery&quot;&gt;&lt;a href=&quot;#jQuery&quot; class=&quot;headerlink&quot; title=&quot;jQuery&quot;&gt;&lt;/a&gt;jQuery&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;基本概念&lt;ul&gt;
&lt;li&gt;jQuery：一款优秀的JavaScript框架库，封装了很多的Jav</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/jQuery/"/>
    
    
    <category term="jQuery" scheme="http://xiaoliblog.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>Ajax🌞Ajax进阶操作</title>
    <link href="http://xiaoliblog.cn/page/Ajax02.html"/>
    <id>http://xiaoliblog.cn/page/Ajax02.html</id>
    <published>2021-05-04T06:44:58.026Z</published>
    <updated>2021-05-04T09:26:46.969Z</updated>
    
    <content type="html"><![CDATA[<h1 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h1><ul><li><code>nodemon</code>是一种工具，可以自动检测到目录中的文件更改时通过重新启动应用程序来调试基于node.js的应用程序</li><li><code>nodemon</code>官方地址：<a href="https://www.npmjs.com/package/nodemon">https://www.npmjs.com/package/nodemon</a></li></ul><div class="note success simple"><p>使用<code>nodemon</code>工具后当修改了服务器代码就不需要手动重启服务器了</p></div><h2 id="安装nodemon"><a href="#安装nodemon" class="headerlink" title="安装nodemon"></a>安装nodemon</h2><ul><li>输入一下命令安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon</span><br></pre></td></tr></table></figure><h2 id="使用nodemon"><a href="#使用nodemon" class="headerlink" title="使用nodemon"></a>使用nodemon</h2><ul><li>不再使用node运行服务器脚本，而是使用如下命令</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodemon xxx.js</span><br></pre></td></tr></table></figure><h1 id="Ajax进阶"><a href="#Ajax进阶" class="headerlink" title="Ajax进阶"></a>Ajax进阶</h1><h2 id="IE缓存问题"><a href="#IE缓存问题" class="headerlink" title="IE缓存问题"></a>IE缓存问题</h2><ul><li>IE浏览器会对Ajax请求的结果进行缓存，因此下一次访问时访问到的是本地缓存的数据，而不是页面更新的数据</li><li>修改服务器端</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//针对IE缓存</span></span><br><span class="line">app.get(<span class="string">&#x27;/server-ie&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.send(<span class="string">&#x27;Hello IE - 1&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>前端方式Ajax请求</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 初始化，设置请求方法和URL</span></span><br><span class="line">xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server-ie&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>此时IE浏览器结果为第一次Ajax的结果</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@b1e8346d70fd100cedb221834d9964012fab0ce2/2021/05/04/56c7b022049dc784a16091e0c920d467.png"></p><ul><li>修改服务器端响应体，再访问IE发现结果还是第一次Ajax的结果，这就是IE缓存问题</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.send(<span class="string">&#x27;Hello IE - 1&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>那如何解决呢？只需要在前端Ajax请求URL加一个时间戳参数，让浏览器认为是两次不同的请求</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取当前时间戳，时间戳不一样浏览器就会认为是两次不不同的请求</span></span><br><span class="line">xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server-ie?t=&quot;</span>+<span class="built_in">Date</span>.now());</span><br></pre></td></tr></table></figure><ul><li>此时刷新IE浏览器</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@dea735765a53a3bae5a444e055322b8a2279267c/2021/05/04/737e2e53f23e19def791ec4742948649.png"></p><h2 id="请求超时处理"><a href="#请求超时处理" class="headerlink" title="请求超时处理"></a>请求超时处理</h2><ul><li>当出现由于网络等其他问题出现请求超时时，Ajax需要对这种请求进行处理</li><li>服务器延迟设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//延时响应</span></span><br><span class="line">app.get(<span class="string">&#x27;/server-delay&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">         response.send(<span class="string">&#x27;延时响应&#x27;</span>)</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>前端发送Ajax时，对请求超时和网络异常的处理</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建对象</span></span><br><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//超时设置</span></span><br><span class="line">xhr.timeout = <span class="number">2000</span>; <span class="comment">//2s之内没有收到结果就把请求取消，认为超时</span></span><br><span class="line"><span class="comment">//超时回调</span></span><br><span class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;网络异常，请稍后重新！&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//网络异常回调</span></span><br><span class="line">xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">&quot;你的网络出现了问题！&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server-delay&quot;</span>);</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><h2 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h2><ul><li>调用<code>abort()</code>方法即可</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax 取消请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>点击发送<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>点击取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//获取button元素</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> xhr =<span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">      btns[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server-delay&quot;</span>);</span></span><br><span class="line">        xhr.send();</span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      btns[<span class="number">1</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//取消请求</span></span></span><br><span class="line">          xhr.abort();</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="请求重复发送"><a href="#请求重复发送" class="headerlink" title="请求重复发送"></a>请求重复发送</h2><ul><li>每点击一次发送按钮就发送一次Ajax请求，如果服务器响应慢，用户频繁发同一个请求就会加大服务器的压力</li><li>可以判断是否为同一次请求，如果是就取消掉</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax 取消请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>点击发送<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//获取button元素</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> xhr =<span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//标识变量</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> isSending = <span class="literal">false</span>; <span class="comment">//是否正在发送Ajax请求</span></span></span><br><span class="line"><span class="javascript">      btns[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//判断标识变量</span></span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">if</span>(<span class="params">isSending</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">//如果正在发送，则取消该请求，创建一个新的请求</span></span></span><br><span class="line">              xhr.abort();</span><br><span class="line">          &#125;</span><br><span class="line"><span class="javascript">        xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        <span class="comment">//修改标识变量的值</span></span></span><br><span class="line"><span class="javascript">        isSending = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server-delay&quot;</span>);</span></span><br><span class="line">        xhr.send();</span><br><span class="line"><span class="javascript">        <span class="comment">//请求完成后</span></span></span><br><span class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//4表示请求完成，不论成功还是失败</span></span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">if</span>(<span class="params">xhr.readyState === <span class="number">4</span></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//修改标识变量</span></span></span><br><span class="line"><span class="javascript">                isSending = <span class="literal">false</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@96cf2ad66fd930c3f6fae6cd40c2b28e7bf815af/2021/05/04/a2c95a1e7a418b4db6ef719b0647e973.png"></p><h1 id="jQuery发送Ajax"><a href="#jQuery发送Ajax" class="headerlink" title="jQuery发送Ajax"></a>jQuery发送Ajax</h1><h2 id="发送单个请求"><a href="#发送单个请求" class="headerlink" title="发送单个请求"></a>发送单个请求</h2><ul><li>服务器端设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">&#x27;/server-jQuery&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> data = &#123;</span><br><span class="line">        name:<span class="string">&quot;李白&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    response.send(<span class="built_in">JSON</span>.stringify(data)) </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>通过jQuery发送Ajax请求，注意它的四个参数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取第一个按钮绑定点击事件</span></span><br><span class="line"> $(<span class="string">&#x27;button&#x27;</span>).eq(<span class="number">0</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//(URL,参数,回调函数，响应的类型)</span></span><br><span class="line">   $.get(<span class="string">&#x27;http://localhost:8000/server-jQuery&#x27;</span>,</span><br><span class="line">      &#123; <span class="attr">a</span>: <span class="number">100</span>, <span class="attr">b</span>: <span class="number">200</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(data) <span class="comment">//打印服务器返回的结果</span></span><br><span class="line">      &#125;,<span class="string">&#x27;json&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//获取第二个按钮绑定点击事件</span></span><br><span class="line"> $(<span class="string">&#x27;button&#x27;</span>).eq(<span class="number">1</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//(URL,参数,回调函数，响应的类型)</span></span><br><span class="line">   $.post(<span class="string">&#x27;http://localhost:8000/server-jQuery&#x27;</span>,</span><br><span class="line">      &#123; <span class="attr">a</span>: <span class="number">100</span>, <span class="attr">b</span>: <span class="number">200</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(data)</span><br><span class="line">      &#125;,<span class="string">&#x27;json&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@5b53ea166fdb8266eb22ff648a8df8f7d1cd0e5b/2021/05/04/417d3a4c67b2b6012bf3c770d79181f8.png"></p><h2 id="发送通用型请求"><a href="#发送通用型请求" class="headerlink" title="发送通用型请求"></a>发送通用型请求</h2><ul><li>推荐使用通用型，参数为一个对象，由属性来控制</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取第三个按钮绑定点击事件</span></span><br><span class="line">$(<span class="string">&#x27;button&#x27;</span>).eq(<span class="number">2</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//参数为一个对象，由属性来设置</span></span><br><span class="line">   $.ajax(&#123;</span><br><span class="line">       <span class="comment">//请求类型</span></span><br><span class="line">      type:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="comment">//url请求地址</span></span><br><span class="line">      url:<span class="string">&#x27;http://localhost:8000/server-jQuery&#x27;</span>,</span><br><span class="line">      <span class="comment">//参数</span></span><br><span class="line">      data:&#123;<span class="attr">a</span>:<span class="number">100</span>,<span class="attr">b</span>:<span class="number">200</span>&#125;,</span><br><span class="line">      <span class="comment">//响应体结果</span></span><br><span class="line">      dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">      <span class="comment">//成功的回调函数</span></span><br><span class="line">      success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(data)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//超时时间，超过2s就调用error失败回调函数</span></span><br><span class="line">      timeout: <span class="number">2000</span>,</span><br><span class="line">      <span class="comment">//失败的回调</span></span><br><span class="line">      error:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         consloe.log(<span class="string">&#x27;出错啦!&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//头信息</span></span><br><span class="line">     header:&#123;</span><br><span class="line">         name:<span class="string">&#x27;李白&#x27;</span>,</span><br><span class="line">         age: <span class="number">21</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">//自定义的头信息，服务器端需要添加以下头</span></span><br><span class="line">     <span class="comment">// response.setHeader(&#x27;Access-Control-Allow-Headers&#x27;,&#x27;*&#x27;);</span></span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Axios发送Ajax"><a href="#Axios发送Ajax" class="headerlink" title="Axios发送Ajax"></a>Axios发送Ajax</h1><ul><li>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中</li><li>Axios中文文档：<a href="http://www.axios-js.com/zh-cn/docs/">http://www.axios-js.com/zh-cn/docs/</a></li><li>引入在线CDN</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="发送单个请求-1"><a href="#发送单个请求-1" class="headerlink" title="发送单个请求"></a>发送单个请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//配置baseURL</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">&#x27;http://localhost:8000&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//GET请求</span></span><br><span class="line">btns[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//GET请求 配置了baseURL，就不需要写IP:端口，以下等价于http://localhost:8000/server-axios</span></span><br><span class="line">   axios.get(<span class="string">&#x27;/server-axios&#x27;</span>,&#123;</span><br><span class="line">      <span class="comment">//url参数</span></span><br><span class="line">      params:&#123;</span><br><span class="line">         id:<span class="number">1</span>,</span><br><span class="line">         age:<span class="number">21</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//请求头信息</span></span><br><span class="line">      headers:&#123;</span><br><span class="line">         name:<span class="number">123</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;).then(<span class="function"><span class="params">value</span> =&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(value);</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//POST请求</span></span><br><span class="line">btns[<span class="number">1</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//(url,请求体,其他配置)</span></span><br><span class="line">   axios.post(<span class="string">&#x27;/server-axios&#x27;</span>,&#123;</span><br><span class="line">      username:<span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">      password:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">   &#125;,&#123;</span><br><span class="line">   <span class="comment">//url参数</span></span><br><span class="line">   params:&#123;</span><br><span class="line">      id:<span class="number">2</span>,</span><br><span class="line">      age:<span class="number">22</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">//请求头信息</span></span><br><span class="line">   headers:&#123;</span><br><span class="line">      height:<span class="number">100</span>,</span><br><span class="line">      wight:<span class="number">200</span></span><br><span class="line">   &#125;</span><br><span class="line">   &#125;).then(<span class="function"><span class="params">value</span> =&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(value);</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="发送通用型请求-1"><a href="#发送通用型请求-1" class="headerlink" title="发送通用型请求"></a>发送通用型请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">btns[<span class="number">2</span>].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   axios(&#123;</span><br><span class="line">      <span class="comment">//请求方法</span></span><br><span class="line">      method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="comment">//url</span></span><br><span class="line">      url: <span class="string">&#x27;server-axios&#x27;</span>,</span><br><span class="line">      <span class="comment">//url参数</span></span><br><span class="line">      params: &#123;</span><br><span class="line">         id: <span class="number">3</span>,</span><br><span class="line">         age: <span class="number">23</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//头信息</span></span><br><span class="line">      headers: &#123;</span><br><span class="line">         a: <span class="number">100</span>,</span><br><span class="line">         b: <span class="number">100</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//请求体参数</span></span><br><span class="line">      data: &#123;</span><br><span class="line">         username: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">         password: <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response);</span><br><span class="line">      <span class="comment">//响应状态码</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.status);</span><br><span class="line">      <span class="comment">//响应状态字符串</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.statusText);</span><br><span class="line">      <span class="comment">//响应头信息</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.headers);</span><br><span class="line">      <span class="comment">//响应体</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="fetch函数发送Ajax"><a href="#fetch函数发送Ajax" class="headerlink" title="fetch函数发送Ajax"></a>fetch函数发送Ajax</h1><ul><li><code>fetch()</code>具体查看<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch">MDN Web Docs文档</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>Ajax请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            fetch(<span class="string">&#x27;http:localhost:8000/server-fetch&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//请求方法</span></span></span><br><span class="line"><span class="javascript">                method: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="comment">//请求头</span></span></span><br><span class="line">                headers: &#123;</span><br><span class="line"><span class="javascript">                    name: <span class="string">&#x27;xiaoliblog&#x27;</span></span></span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//请求体</span></span></span><br><span class="line"><span class="javascript">                body: <span class="string">&#x27;username=admin&amp;password=admin&#x27;</span></span></span><br><span class="line"><span class="javascript">            &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> response.text();</span></span><br><span class="line"><span class="javascript">                <span class="comment">//return response.json;</span></span></span><br><span class="line"><span class="javascript">            &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(response)</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;nodemon&quot;&gt;&lt;a href=&quot;#nodemon&quot; class=&quot;headerlink&quot; title=&quot;nodemon&quot;&gt;&lt;/a&gt;nodemon&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nodemon&lt;/code&gt;是一种工具，可以自动检测到目录中的文件更改时通过</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Ajax" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/Ajax/"/>
    
    
    <category term="Ajax" scheme="http://xiaoliblog.cn/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>Ajax🌞Ajax基本操作</title>
    <link href="http://xiaoliblog.cn/page/Ajax01.html"/>
    <id>http://xiaoliblog.cn/page/Ajax01.html</id>
    <published>2021-05-04T04:54:48.673Z</published>
    <updated>2021-05-04T10:14:15.675Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><ul><li>Ajax：Asynchronous JavaScript And XML，即<strong>异步JavaScript和XML技术</strong>。</li><li>描述：不是一门新的语言或技术，是由JavaScript、XML、DOM、CSS等多种已有技术组合而成的一种浏览器端技术。</li><li>功能：<strong>用于实现与服务器进行异步交互的功能</strong>。</li><li>传统Web工作流程<br>每当用户触发一个页面HTTP请求，就需要服务器返回一个新的页面<br><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/24/594e68fd5921f40c42a89634c094311c.png"></li><li>Ajax工作流程<br>页面通过Ajax对象与服务器进行通信，然后通过DOM操作将返回的结果更新到页面中，整个过程都是在同一个页面中进行的<br>Ajax技术的创新之处在于，改善了传统的“请求-等待-响应-刷新-返回数据”模式，在信息返回之前，用户可以继续自己的操作，当前页面不会因为请求而刷新。这样大大的提高了交互性。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/lzyblog/image@main/2020/12/24/13af6098b6a7580165ed0f207fc830be.png"></p><ul><li>相较于传统页面，Ajax技术的优势具体有以下几个方面：<ul><li>无需刷新页面与服务器端进行交互</li><li>允许根据用户事件来更新部分页面的内容</li></ul></li><li>Ajax缺点<ul><li>没有浏览历史，不能回退</li><li>存在跨域问题（同源）</li><li>SEO（Search Engine Optimization搜索引擎优化）不友好，网页爬虫爬不到数据</li></ul></li></ul><h1 id="服务端搭建"><a href="#服务端搭建" class="headerlink" title="服务端搭建"></a>服务端搭建</h1><h2 id="安装Express"><a href="#安装Express" class="headerlink" title="安装Express"></a>安装Express</h2><ul><li>安装好<code>Node.js</code>后，使用<code>Express</code>服务器框架进行搭建</li><li>Express官网地址：<a href="https://www.expressjs.com.cn/">https://www.expressjs.com.cn/</a></li><li>首先创建一个文件夹，然后输入以下命令进行初始化，会生成<code>package.json</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init --yes</span><br></pre></td></tr></table></figure><ul><li>然后安装Express</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express</span><br></pre></td></tr></table></figure><h2 id="服务器搭建"><a href="#服务器搭建" class="headerlink" title="服务器搭建"></a>服务器搭建</h2><ul><li>创建一个JS文件，比如<code>express_demo.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入Express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则</span></span><br><span class="line"><span class="comment">//request是对请求报文的封装</span></span><br><span class="line"><span class="comment">//response是对响应报文的封装</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.send(<span class="string">&quot;Hello Express&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line">app.listen(<span class="number">8000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务已经启动,8000 端口监听中...&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>在终端中打开，使用node运行脚本</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node express_demo.js</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@e873e699890ca4aff77e5a8dd5dd86cd6589f50e/2021/05/04/793cdab20b881903b0ab8a9fa8829294.png"></p><h1 id="Ajax发送GET请求"><a href="#Ajax发送GET请求" class="headerlink" title="Ajax发送GET请求"></a>Ajax发送GET请求</h1><h2 id="服务端设置"><a href="#服务端设置" class="headerlink" title="服务端设置"></a>服务端设置</h2><ul><li>修改URL为<code>http://localhost:8000/server</code>即可·</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入Express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则</span></span><br><span class="line"><span class="comment">//request是对请求报文的封装</span></span><br><span class="line"><span class="comment">//response是对响应报文的封装</span></span><br><span class="line">app.get(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.send(<span class="string">&#x27;Hello Ajax&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line">app.listen(<span class="number">8000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务已经启动,8000 端口监听中...&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Ajax基本操作"><a href="#Ajax基本操作" class="headerlink" title="Ajax基本操作"></a>Ajax基本操作</h2><ul><li>页面无刷新获取服务器返回结果</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax GET请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#result</span> &#123;</span></span><br><span class="line">        width: 200px;</span><br><span class="line">        height: 100px;</span><br><span class="line">        border: solid 1px skyblue;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>点击发送请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//获取button元素</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> btn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> result = <span class="built_in">document</span>.getElementById(<span class="string">&quot;result&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//绑定事件,发送Ajax</span></span></span><br><span class="line"><span class="javascript">      btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//1. 创建对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        <span class="comment">//2. 初始化，设置请求方法和URL</span></span></span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">//3. 发送</span></span></span><br><span class="line">        xhr.send();</span><br><span class="line"><span class="javascript">        <span class="comment">//4. 事件绑定，处理服务端返回的结果</span></span></span><br><span class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//readyState是对象的属性，表示状态 0 1 2 3 4</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">//判断(4表示服务端返回了所有的结果)</span></span></span><br><span class="line">          if (xhr.readyState === 4) &#123;</span><br><span class="line"><span class="javascript">            <span class="comment">//判断响应状态码 200 404 500</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 2xx 都表示成功</span></span></span><br><span class="line">            if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line"><span class="javascript">              <span class="comment">//处理结果</span></span></span><br><span class="line"><span class="javascript">              <span class="comment">//1. 响应行</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(xhr.status); <span class="comment">//响应状态码</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(xhr.statusText); <span class="comment">//状态字符串</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(xhr.getAllResponseHeaders()); <span class="comment">//所以响应头</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(xhr.response); <span class="comment">//响应体</span></span></span><br><span class="line"><span class="javascript">              <span class="comment">//设置result的文本</span></span></span><br><span class="line">              result.innerHTML = xhr.response;</span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@4968b1851142db47223a66b5b1bf938a05d83045/2021/05/04/95dfc00d87995c2255bc64c102f32cc6.png"></p><h2 id="设置请求参数"><a href="#设置请求参数" class="headerlink" title="设置请求参数"></a>设置请求参数</h2><ul><li>在请求URL中添加即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://localhost:8000/server?a=100&amp;b=100&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="Ajax发送POST请求"><a href="#Ajax发送POST请求" class="headerlink" title="Ajax发送POST请求"></a>Ajax发送POST请求</h1><h2 id="服务器设置"><a href="#服务器设置" class="headerlink" title="服务器设置"></a>服务器设置</h2><ul><li>增加<code>post</code>路由规则</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.send(<span class="string">&#x27;Hello Ajax POST&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><div class="note success simple"><p>每次修改JS都需要重新启动一下服务器</p></div><h2 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax Post请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#result</span> &#123;</span></span><br><span class="line">        width: 200px;</span><br><span class="line">        height: 100px;</span><br><span class="line">        border: solid 1px skyblue;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//获取元素对象</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> result = <span class="built_in">document</span>.getElementById(<span class="string">&quot;result&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//绑定事件,发送Ajax  鼠标移入div就发送Ajax</span></span></span><br><span class="line"><span class="javascript">      result.addEventListener(<span class="string">&quot;mouseover&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//1. 创建对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        <span class="comment">//2. 设置请求类型和URL</span></span></span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;http://localhost:8000/server&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">//3. 发送</span></span></span><br><span class="line">        xhr.send();</span><br><span class="line"><span class="javascript">        <span class="comment">//4. 事件绑定</span></span></span><br><span class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//判断</span></span></span><br><span class="line">          if (xhr.readyState === 4) &#123;</span><br><span class="line">            if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line"><span class="javascript">              <span class="comment">//处理服务器端返回的结果</span></span></span><br><span class="line">              result.innerHTML = xhr.response;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@ba2804acd6227a789b69638b8d1afed39964ea28/2021/05/04/409ba1e29664685117ea0f6f3e93cebf.png" width="50%"><h2 id="设置请求参数-1"><a href="#设置请求参数-1" class="headerlink" title="设置请求参数"></a>设置请求参数</h2><ul><li>POST设置请求参数如下</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.send(<span class="string">&#x27;a=100&amp;b=100&#x27;</span>);</span><br><span class="line"><span class="comment">//也可以用以下方法书写</span></span><br><span class="line">xhr.send(<span class="string">&#x27;a:100&amp;b:100&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>POST请求参数在地址栏是看不到，需要到响应体中查看</li></ul><p><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@f17d318a4c0918e9bbabcd5ee373e2f0d76abebb/2021/05/04/2129f2af4fa585256a4974174bc4ef48.png"></p><h2 id="设置请求头"><a href="#设置请求头" class="headerlink" title="设置请求头"></a>设置请求头</h2><ul><li>在第二和第三步之间设置请求头</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 设置请求类型和URL</span></span><br><span class="line">xhr.open(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;http://localhost:8000/server&quot;</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;Content-type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line"><span class="comment">//3. 发送</span></span><br><span class="line">xhr.send(<span class="string">&#x27;a=100&amp;b=100&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>可以自定义请求头，但需要服务器进行设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在服务器设置如下</span></span><br><span class="line">app.all(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.send(<span class="string">&#x27;Hello Ajax POST&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;lzy&#x27;</span>)</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@9ddd949435330dad9da8b986e24fa816b6c26408/2021/05/04/7b430f927efbf17b109de22597771043.png" width="50%"><h1 id="JSON数据"><a href="#JSON数据" class="headerlink" title="JSON数据"></a>JSON数据</h1><ul><li>JSON是一种轻量级的数据交换格式，它采用完全独立于语言的文本格式</li></ul><img src="https://cdn.jsdelivr.net/gh/xiaoliblog/image@988b6b12b0273ced782fc802facdca8fa402e24f/2021/05/04/85e4ff47cfcd413d1439614a53a20935.png" width="50%"><h2 id="服务端设置-1"><a href="#服务端设置-1" class="headerlink" title="服务端设置"></a>服务端设置</h2><ul><li>服务端设置返回一个对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应头,设置允许跨域，解决跨域问题</span></span><br><span class="line">    response.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//响应一个对象</span></span><br><span class="line">    <span class="keyword">const</span> data = &#123;</span><br><span class="line">        name: <span class="string">&#x27;李白&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//对对象进行字符串转换</span></span><br><span class="line">    <span class="keyword">let</span> str = <span class="built_in">JSON</span>.stringify(data);</span><br><span class="line">    <span class="comment">//设置响应体，响应体内只能村妇字符串和buffer</span></span><br><span class="line">    response.send(str)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="手动转换"><a href="#手动转换" class="headerlink" title="手动转换"></a>手动转换</h2><ul><li>前端接收的是JSON对象，可以通过手动转换的方式</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="function"><span class="title">if</span>(<span class="params">xhr.readyState === <span class="number">4</span></span>)</span>&#123;</span><br><span class="line">      <span class="function"><span class="title">if</span>(<span class="params">xhr.status &gt;=<span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span></span>)</span>&#123;</span><br><span class="line">         <span class="comment">//手动对数据进行转换</span></span><br><span class="line">         <span class="keyword">let</span> data = <span class="built_in">JSON</span>.parse(xhr.response);</span><br><span class="line">         result.innerHTML = data.name;  <span class="comment">//结果为：李白</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自动转换"><a href="#自动转换" class="headerlink" title="自动转换"></a>自动转换</h2><ul><li>自动转换需要设置响应体类型为JSON格式，其会自动转化为JSON格式</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置响应体数据类型</span></span><br><span class="line">xhr.responseType = <span class="string">&#x27;json&#x27;</span>;</span><br><span class="line"></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="function"><span class="title">if</span>(<span class="params">xhr.readyState === <span class="number">4</span></span>)</span>&#123;</span><br><span class="line">      <span class="function"><span class="title">if</span>(<span class="params">xhr.status &gt;=<span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span></span>)</span>&#123;</span><br><span class="line">         <span class="comment">//2. 自动转换</span></span><br><span class="line">         <span class="built_in">console</span>.log(xhr.response)</span><br><span class="line">         result.innerHTML = xhr.response.name; <span class="comment">//结果为李白</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Ajax&quot;&gt;&lt;a href=&quot;#Ajax&quot; class=&quot;headerlink&quot; title=&quot;Ajax&quot;&gt;&lt;/a&gt;Ajax&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Ajax：Asynchronous JavaScript And XML，即&lt;strong&gt;异步JavaScri</summary>
      
    
    
    
    <category term="Web前端" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Ajax" scheme="http://xiaoliblog.cn/categories/Web%E5%89%8D%E7%AB%AF/Ajax/"/>
    
    
    <category term="Ajax" scheme="http://xiaoliblog.cn/tags/Ajax/"/>
    
  </entry>
  
</feed>
